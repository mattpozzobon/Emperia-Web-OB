var dp=Object.defineProperty;var td=l=>{throw TypeError(l)};var fp=(l,r,i)=>r in l?dp(l,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[r]=i;var L=(l,r,i)=>fp(l,typeof r!="symbol"?r+"":r,i),na=(l,r,i)=>r.has(l)||td("Cannot "+i);var x=(l,r,i)=>(na(l,r,"read from private field"),i?i.call(l):r.get(l)),kr=(l,r,i)=>r.has(l)?td("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(l):r.set(l,i),Xr=(l,r,i,a)=>(na(l,r,"write to private field"),a?a.call(l,i):r.set(l,i),i),ne=(l,r,i)=>(na(l,r,"access private method"),i);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function i(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(c){if(c.ep)return;c.ep=!0;const d=i(c);fetch(c.href,d)}})();function Dd(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var ra={exports:{}},zi={},ia={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nd;function hp(){if(nd)return Le;nd=1;var l=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),p=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),k=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),y=Symbol.iterator;function B(E){return E===null||typeof E!="object"?null:(E=y&&E[y]||E["@@iterator"],typeof E=="function"?E:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,O={};function V(E,M,pe){this.props=E,this.context=M,this.refs=O,this.updater=pe||T}V.prototype.isReactComponent={},V.prototype.setState=function(E,M){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,M,"setState")},V.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function Z(){}Z.prototype=V.prototype;function K(E,M,pe){this.props=E,this.context=M,this.refs=O,this.updater=pe||T}var ue=K.prototype=new Z;ue.constructor=K,G(ue,V.prototype),ue.isPureReactComponent=!0;var q=Array.isArray,$=Object.prototype.hasOwnProperty,P={current:null},ae={key:!0,ref:!0,__self:!0,__source:!0};function Y(E,M,pe){var Se,Ae={},re=null,ve=null;if(M!=null)for(Se in M.ref!==void 0&&(ve=M.ref),M.key!==void 0&&(re=""+M.key),M)$.call(M,Se)&&!ae.hasOwnProperty(Se)&&(Ae[Se]=M[Se]);var Be=arguments.length-2;if(Be===1)Ae.children=pe;else if(1<Be){for(var Oe=Array(Be),b=0;b<Be;b++)Oe[b]=arguments[b+2];Ae.children=Oe}if(E&&E.defaultProps)for(Se in Be=E.defaultProps,Be)Ae[Se]===void 0&&(Ae[Se]=Be[Se]);return{$$typeof:l,type:E,key:re,ref:ve,props:Ae,_owner:P.current}}function ke(E,M){return{$$typeof:l,type:E.type,key:M,ref:E.ref,props:E.props,_owner:E._owner}}function we(E){return typeof E=="object"&&E!==null&&E.$$typeof===l}function ie(E){var M={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(pe){return M[pe]})}var Ne=/\/+/g;function ye(E,M){return typeof E=="object"&&E!==null&&E.key!=null?ie(""+E.key):M.toString(36)}function I(E,M,pe,Se,Ae){var re=typeof E;(re==="undefined"||re==="boolean")&&(E=null);var ve=!1;if(E===null)ve=!0;else switch(re){case"string":case"number":ve=!0;break;case"object":switch(E.$$typeof){case l:case r:ve=!0}}if(ve)return ve=E,Ae=Ae(ve),E=Se===""?"."+ye(ve,0):Se,q(Ae)?(pe="",E!=null&&(pe=E.replace(Ne,"$&/")+"/"),I(Ae,M,pe,"",function(b){return b})):Ae!=null&&(we(Ae)&&(Ae=ke(Ae,pe+(!Ae.key||ve&&ve.key===Ae.key?"":(""+Ae.key).replace(Ne,"$&/")+"/")+E)),M.push(Ae)),1;if(ve=0,Se=Se===""?".":Se+":",q(E))for(var Be=0;Be<E.length;Be++){re=E[Be];var Oe=Se+ye(re,Be);ve+=I(re,M,pe,Oe,Ae)}else if(Oe=B(E),typeof Oe=="function")for(E=Oe.call(E),Be=0;!(re=E.next()).done;)re=re.value,Oe=Se+ye(re,Be++),ve+=I(re,M,pe,Oe,Ae);else if(re==="object")throw M=String(E),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return ve}function fe(E,M,pe){if(E==null)return E;var Se=[],Ae=0;return I(E,Se,"","",function(re){return M.call(pe,re,Ae++)}),Se}function Te(E){if(E._status===-1){var M=E._result;M=M(),M.then(function(pe){(E._status===0||E._status===-1)&&(E._status=1,E._result=pe)},function(pe){(E._status===0||E._status===-1)&&(E._status=2,E._result=pe)}),E._status===-1&&(E._status=0,E._result=M)}if(E._status===1)return E._result.default;throw E._result}var oe={current:null},U={transition:null},se={ReactCurrentDispatcher:oe,ReactCurrentBatchConfig:U,ReactCurrentOwner:P};function X(){throw Error("act(...) is not supported in production builds of React.")}return Le.Children={map:fe,forEach:function(E,M,pe){fe(E,function(){M.apply(this,arguments)},pe)},count:function(E){var M=0;return fe(E,function(){M++}),M},toArray:function(E){return fe(E,function(M){return M})||[]},only:function(E){if(!we(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},Le.Component=V,Le.Fragment=i,Le.Profiler=c,Le.PureComponent=K,Le.StrictMode=a,Le.Suspense=m,Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,Le.act=X,Le.cloneElement=function(E,M,pe){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var Se=G({},E.props),Ae=E.key,re=E.ref,ve=E._owner;if(M!=null){if(M.ref!==void 0&&(re=M.ref,ve=P.current),M.key!==void 0&&(Ae=""+M.key),E.type&&E.type.defaultProps)var Be=E.type.defaultProps;for(Oe in M)$.call(M,Oe)&&!ae.hasOwnProperty(Oe)&&(Se[Oe]=M[Oe]===void 0&&Be!==void 0?Be[Oe]:M[Oe])}var Oe=arguments.length-2;if(Oe===1)Se.children=pe;else if(1<Oe){Be=Array(Oe);for(var b=0;b<Oe;b++)Be[b]=arguments[b+2];Se.children=Be}return{$$typeof:l,type:E.type,key:Ae,ref:re,props:Se,_owner:ve}},Le.createContext=function(E){return E={$$typeof:p,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:d,_context:E},E.Consumer=E},Le.createElement=Y,Le.createFactory=function(E){var M=Y.bind(null,E);return M.type=E,M},Le.createRef=function(){return{current:null}},Le.forwardRef=function(E){return{$$typeof:g,render:E}},Le.isValidElement=we,Le.lazy=function(E){return{$$typeof:w,_payload:{_status:-1,_result:E},_init:Te}},Le.memo=function(E,M){return{$$typeof:k,type:E,compare:M===void 0?null:M}},Le.startTransition=function(E){var M=U.transition;U.transition={};try{E()}finally{U.transition=M}},Le.unstable_act=X,Le.useCallback=function(E,M){return oe.current.useCallback(E,M)},Le.useContext=function(E){return oe.current.useContext(E)},Le.useDebugValue=function(){},Le.useDeferredValue=function(E){return oe.current.useDeferredValue(E)},Le.useEffect=function(E,M){return oe.current.useEffect(E,M)},Le.useId=function(){return oe.current.useId()},Le.useImperativeHandle=function(E,M,pe){return oe.current.useImperativeHandle(E,M,pe)},Le.useInsertionEffect=function(E,M){return oe.current.useInsertionEffect(E,M)},Le.useLayoutEffect=function(E,M){return oe.current.useLayoutEffect(E,M)},Le.useMemo=function(E,M){return oe.current.useMemo(E,M)},Le.useReducer=function(E,M,pe){return oe.current.useReducer(E,M,pe)},Le.useRef=function(E){return oe.current.useRef(E)},Le.useState=function(E){return oe.current.useState(E)},Le.useSyncExternalStore=function(E,M,pe){return oe.current.useSyncExternalStore(E,M,pe)},Le.useTransition=function(){return oe.current.useTransition()},Le.version="18.3.1",Le}var rd;function Sa(){return rd||(rd=1,ia.exports=hp()),ia.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var id;function pp(){if(id)return zi;id=1;var l=Sa(),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,c=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function p(g,m,k){var w,y={},B=null,T=null;k!==void 0&&(B=""+k),m.key!==void 0&&(B=""+m.key),m.ref!==void 0&&(T=m.ref);for(w in m)a.call(m,w)&&!d.hasOwnProperty(w)&&(y[w]=m[w]);if(g&&g.defaultProps)for(w in m=g.defaultProps,m)y[w]===void 0&&(y[w]=m[w]);return{$$typeof:r,type:g,key:B,ref:T,props:y,_owner:c.current}}return zi.Fragment=i,zi.jsx=p,zi.jsxs=p,zi}var sd;function mp(){return sd||(sd=1,ra.exports=pp()),ra.exports}var f=mp(),ee=Sa();const Gi=Dd(ee);var io={},sa={exports:{}},Pt={},oa={exports:{}},la={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var od;function gp(){return od||(od=1,(function(l){function r(U,se){var X=U.length;U.push(se);e:for(;0<X;){var E=X-1>>>1,M=U[E];if(0<c(M,se))U[E]=se,U[X]=M,X=E;else break e}}function i(U){return U.length===0?null:U[0]}function a(U){if(U.length===0)return null;var se=U[0],X=U.pop();if(X!==se){U[0]=X;e:for(var E=0,M=U.length,pe=M>>>1;E<pe;){var Se=2*(E+1)-1,Ae=U[Se],re=Se+1,ve=U[re];if(0>c(Ae,X))re<M&&0>c(ve,Ae)?(U[E]=ve,U[re]=X,E=re):(U[E]=Ae,U[Se]=X,E=Se);else if(re<M&&0>c(ve,X))U[E]=ve,U[re]=X,E=re;else break e}}return se}function c(U,se){var X=U.sortIndex-se.sortIndex;return X!==0?X:U.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;l.unstable_now=function(){return d.now()}}else{var p=Date,g=p.now();l.unstable_now=function(){return p.now()-g}}var m=[],k=[],w=1,y=null,B=3,T=!1,G=!1,O=!1,V=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ue(U){for(var se=i(k);se!==null;){if(se.callback===null)a(k);else if(se.startTime<=U)a(k),se.sortIndex=se.expirationTime,r(m,se);else break;se=i(k)}}function q(U){if(O=!1,ue(U),!G)if(i(m)!==null)G=!0,Te($);else{var se=i(k);se!==null&&oe(q,se.startTime-U)}}function $(U,se){G=!1,O&&(O=!1,Z(Y),Y=-1),T=!0;var X=B;try{for(ue(se),y=i(m);y!==null&&(!(y.expirationTime>se)||U&&!ie());){var E=y.callback;if(typeof E=="function"){y.callback=null,B=y.priorityLevel;var M=E(y.expirationTime<=se);se=l.unstable_now(),typeof M=="function"?y.callback=M:y===i(m)&&a(m),ue(se)}else a(m);y=i(m)}if(y!==null)var pe=!0;else{var Se=i(k);Se!==null&&oe(q,Se.startTime-se),pe=!1}return pe}finally{y=null,B=X,T=!1}}var P=!1,ae=null,Y=-1,ke=5,we=-1;function ie(){return!(l.unstable_now()-we<ke)}function Ne(){if(ae!==null){var U=l.unstable_now();we=U;var se=!0;try{se=ae(!0,U)}finally{se?ye():(P=!1,ae=null)}}else P=!1}var ye;if(typeof K=="function")ye=function(){K(Ne)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,fe=I.port2;I.port1.onmessage=Ne,ye=function(){fe.postMessage(null)}}else ye=function(){V(Ne,0)};function Te(U){ae=U,P||(P=!0,ye())}function oe(U,se){Y=V(function(){U(l.unstable_now())},se)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(U){U.callback=null},l.unstable_continueExecution=function(){G||T||(G=!0,Te($))},l.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ke=0<U?Math.floor(1e3/U):5},l.unstable_getCurrentPriorityLevel=function(){return B},l.unstable_getFirstCallbackNode=function(){return i(m)},l.unstable_next=function(U){switch(B){case 1:case 2:case 3:var se=3;break;default:se=B}var X=B;B=se;try{return U()}finally{B=X}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(U,se){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var X=B;B=U;try{return se()}finally{B=X}},l.unstable_scheduleCallback=function(U,se,X){var E=l.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?E+X:E):X=E,U){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=X+M,U={id:w++,callback:se,priorityLevel:U,startTime:X,expirationTime:M,sortIndex:-1},X>E?(U.sortIndex=X,r(k,U),i(m)===null&&U===i(k)&&(O?(Z(Y),Y=-1):O=!0,oe(q,X-E))):(U.sortIndex=M,r(m,U),G||T||(G=!0,Te($))),U},l.unstable_shouldYield=ie,l.unstable_wrapCallback=function(U){var se=B;return function(){var X=B;B=se;try{return U.apply(this,arguments)}finally{B=X}}}})(la)),la}var ld;function xp(){return ld||(ld=1,oa.exports=gp()),oa.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ad;function yp(){if(ad)return Pt;ad=1;var l=Sa(),r=xp();function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,c={};function d(e,t){p(e,t),p(e+"Capture",t)}function p(e,t){for(c[e]=t,e=0;e<t.length;e++)a.add(t[e])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,k=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},y={};function B(e){return m.call(y,e)?!0:m.call(w,e)?!1:k.test(e)?y[e]=!0:(w[e]=!0,!1)}function T(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function G(e,t,n,s){if(t===null||typeof t>"u"||T(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function O(e,t,n,s,o,u,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=h}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){V[e]=new O(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];V[t]=new O(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){V[e]=new O(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){V[e]=new O(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){V[e]=new O(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){V[e]=new O(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){V[e]=new O(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){V[e]=new O(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){V[e]=new O(e,5,!1,e.toLowerCase(),null,!1,!1)});var Z=/[\-:]([a-z])/g;function K(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Z,K);V[t]=new O(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Z,K);V[t]=new O(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Z,K);V[t]=new O(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){V[e]=new O(e,1,!1,e.toLowerCase(),null,!1,!1)}),V.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){V[e]=new O(e,1,!1,e.toLowerCase(),null,!0,!0)});function ue(e,t,n,s){var o=V.hasOwnProperty(t)?V[t]:null;(o!==null?o.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(G(t,n,o,s)&&(n=null),s||o===null?B(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,s=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var q=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$=Symbol.for("react.element"),P=Symbol.for("react.portal"),ae=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),ke=Symbol.for("react.profiler"),we=Symbol.for("react.provider"),ie=Symbol.for("react.context"),Ne=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),U=Symbol.iterator;function se(e){return e===null||typeof e!="object"?null:(e=U&&e[U]||e["@@iterator"],typeof e=="function"?e:null)}var X=Object.assign,E;function M(e){if(E===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);E=t&&t[1]||""}return`
`+E+e}var pe=!1;function Se(e,t){if(!e||pe)return"";pe=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(N){var s=N}Reflect.construct(e,[],t)}else{try{t.call()}catch(N){s=N}e.call(t.prototype)}else{try{throw Error()}catch(N){s=N}e()}}catch(N){if(N&&s&&typeof N.stack=="string"){for(var o=N.stack.split(`
`),u=s.stack.split(`
`),h=o.length-1,v=u.length-1;1<=h&&0<=v&&o[h]!==u[v];)v--;for(;1<=h&&0<=v;h--,v--)if(o[h]!==u[v]){if(h!==1||v!==1)do if(h--,v--,0>v||o[h]!==u[v]){var S=`
`+o[h].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=h&&0<=v);break}}}finally{pe=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?M(e):""}function Ae(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=Se(e.type,!1),e;case 11:return e=Se(e.type.render,!1),e;case 1:return e=Se(e.type,!0),e;default:return""}}function re(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ae:return"Fragment";case P:return"Portal";case ke:return"Profiler";case Y:return"StrictMode";case ye:return"Suspense";case I:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ie:return(e.displayName||"Context")+".Consumer";case we:return(e._context.displayName||"Context")+".Provider";case Ne:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fe:return t=e.displayName||null,t!==null?t:re(e.type)||"Memo";case Te:t=e._payload,e=e._init;try{return re(e(t))}catch{}}return null}function ve(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(t);case 8:return t===Y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Be(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Oe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function b(e){var t=Oe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,u=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(h){s=""+h,u.call(this,h)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(h){s=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ht(e){e._valueTracker||(e._valueTracker=b(e))}function dn(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=Oe(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Gt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function It(e,t){var n=t.checked;return X({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function C(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=Be(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function at(e,t){t=t.checked,t!=null&&ue(e,"checked",t,!1)}function ni(e,t){at(e,t);var n=Be(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?br(e,t.type,n):t.hasOwnProperty("defaultValue")&&br(e,t.type,Be(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ki(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function br(e,t,n){(t!=="number"||Gt(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var sr=Array.isArray;function mt(e,t,n,s){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&s&&(e[n].defaultSelected=!0)}else{for(n=""+Be(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,s&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function ri(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(i(91));return X({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function R(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(i(92));if(sr(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Be(n)}}function _e(e,t){var n=Be(t.value),s=Be(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function De(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ge(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ue(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ge(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var We,ze=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,o)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(We=We||document.createElement("div"),We.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=We.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function gt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ze={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rt=["Webkit","ms","Moz","O"];Object.keys(Ze).forEach(function(e){rt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ze[t]=Ze[e]})});function $e(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ze.hasOwnProperty(e)&&Ze[e]?(""+t).trim():t+"px"}function Je(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,o=$e(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,o):e[n]=o}}var At=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jt(e,t){if(t){if(At[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(i(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(i(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(t.style!=null&&typeof t.style!="object")throw Error(i(62))}}function dt(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zt=null;function Jt(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Tn=null,Nn=null,Pn=null;function Ln(e){if(e=bi(e)){if(typeof Tn!="function")throw Error(i(280));var t=e.stateNode;t&&(t=vs(t),Tn(e.stateNode,e.type,t))}}function In(e){Nn?Pn?Pn.push(e):Pn=[e]:Nn=e}function ii(){if(Nn){var e=Nn,t=Pn;if(Pn=Nn=null,Ln(e),t)for(e=0;e<t.length;e++)Ln(t[e])}}function Ar(e,t){return e(t)}function si(){}var or=!1;function oi(e,t,n){if(or)return e(t,n);or=!0;try{return Ar(e,t,n)}finally{or=!1,(Nn!==null||Pn!==null)&&(si(),ii())}}function jn(e,t){var n=e.stateNode;if(n===null)return null;var s=vs(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(i(231,t,typeof n));return n}var qt=!1;if(g)try{var kn={};Object.defineProperty(kn,"passive",{get:function(){qt=!0}}),window.addEventListener("test",kn,kn),window.removeEventListener("test",kn,kn)}catch{qt=!1}function Xi(e,t,n,s,o,u,h,v,S){var N=Array.prototype.slice.call(arguments,3);try{t.apply(n,N)}catch(H){this.onError(H)}}var li=!1,Zi=null,Ji=!1,wo=null,yf={onError:function(e){li=!0,Zi=e}};function vf(e,t,n,s,o,u,h,v,S){li=!1,Zi=null,Xi.apply(yf,arguments)}function kf(e,t,n,s,o,u,h,v,S){if(vf.apply(this,arguments),li){if(li){var N=Zi;li=!1,Zi=null}else throw Error(i(198));Ji||(Ji=!0,wo=N)}}function lr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ca(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ea(e){if(lr(e)!==e)throw Error(i(188))}function wf(e){var t=e.alternate;if(!t){if(t=lr(e),t===null)throw Error(i(188));return t!==e?null:e}for(var n=e,s=t;;){var o=n.return;if(o===null)break;var u=o.alternate;if(u===null){if(s=o.return,s!==null){n=s;continue}break}if(o.child===u.child){for(u=o.child;u;){if(u===n)return Ea(o),e;if(u===s)return Ea(o),t;u=u.sibling}throw Error(i(188))}if(n.return!==s.return)n=o,s=u;else{for(var h=!1,v=o.child;v;){if(v===n){h=!0,n=o,s=u;break}if(v===s){h=!0,s=o,n=u;break}v=v.sibling}if(!h){for(v=u.child;v;){if(v===n){h=!0,n=u,s=o;break}if(v===s){h=!0,s=u,n=o;break}v=v.sibling}if(!h)throw Error(i(189))}}if(n.alternate!==s)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?e:t}function ba(e){return e=wf(e),e!==null?Aa(e):null}function Aa(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Aa(e);if(t!==null)return t;e=e.sibling}return null}var Da=r.unstable_scheduleCallback,Fa=r.unstable_cancelCallback,Sf=r.unstable_shouldYield,_f=r.unstable_requestPaint,it=r.unstable_now,Cf=r.unstable_getCurrentPriorityLevel,So=r.unstable_ImmediatePriority,Ba=r.unstable_UserBlockingPriority,qi=r.unstable_NormalPriority,Ef=r.unstable_LowPriority,Ta=r.unstable_IdlePriority,es=null,fn=null;function bf(e){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(es,e,void 0,(e.current.flags&128)===128)}catch{}}var en=Math.clz32?Math.clz32:Ff,Af=Math.log,Df=Math.LN2;function Ff(e){return e>>>=0,e===0?32:31-(Af(e)/Df|0)|0}var ts=64,ns=4194304;function ai(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function rs(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,o=e.suspendedLanes,u=e.pingedLanes,h=n&268435455;if(h!==0){var v=h&~o;v!==0?s=ai(v):(u&=h,u!==0&&(s=ai(u)))}else h=n&~o,h!==0?s=ai(h):u!==0&&(s=ai(u));if(s===0)return 0;if(t!==0&&t!==s&&(t&o)===0&&(o=s&-s,u=t&-t,o>=u||o===16&&(u&4194240)!==0))return t;if((s&4)!==0&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-en(t),o=1<<n,s|=e[n],t&=~o;return s}function Bf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tf(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,o=e.expirationTimes,u=e.pendingLanes;0<u;){var h=31-en(u),v=1<<h,S=o[h];S===-1?((v&n)===0||(v&s)!==0)&&(o[h]=Bf(v,t)):S<=t&&(e.expiredLanes|=v),u&=~v}}function _o(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Na(){var e=ts;return ts<<=1,(ts&4194240)===0&&(ts=64),e}function Co(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ui(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-en(t),e[t]=n}function Nf(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-en(n),u=1<<o;t[o]=0,s[o]=-1,e[o]=-1,n&=~u}}function Eo(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-en(n),o=1<<s;o&t|e[s]&t&&(e[s]|=t),n&=~o}}var He=0;function Pa(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var La,bo,Ia,ja,Ma,Ao=!1,is=[],Mn=null,Rn=null,On=null,ci=new Map,di=new Map,Un=[],Pf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ra(e,t){switch(e){case"focusin":case"focusout":Mn=null;break;case"dragenter":case"dragleave":Rn=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":ci.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":di.delete(t.pointerId)}}function fi(e,t,n,s,o,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:u,targetContainers:[o]},t!==null&&(t=bi(t),t!==null&&bo(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Lf(e,t,n,s,o){switch(t){case"focusin":return Mn=fi(Mn,e,t,n,s,o),!0;case"dragenter":return Rn=fi(Rn,e,t,n,s,o),!0;case"mouseover":return On=fi(On,e,t,n,s,o),!0;case"pointerover":var u=o.pointerId;return ci.set(u,fi(ci.get(u)||null,e,t,n,s,o)),!0;case"gotpointercapture":return u=o.pointerId,di.set(u,fi(di.get(u)||null,e,t,n,s,o)),!0}return!1}function Oa(e){var t=ar(e.target);if(t!==null){var n=lr(t);if(n!==null){if(t=n.tag,t===13){if(t=Ca(n),t!==null){e.blockedOn=t,Ma(e.priority,function(){Ia(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ss(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Fo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);Zt=s,n.target.dispatchEvent(s),Zt=null}else return t=bi(n),t!==null&&bo(t),e.blockedOn=n,!1;t.shift()}return!0}function Ua(e,t,n){ss(e)&&n.delete(t)}function If(){Ao=!1,Mn!==null&&ss(Mn)&&(Mn=null),Rn!==null&&ss(Rn)&&(Rn=null),On!==null&&ss(On)&&(On=null),ci.forEach(Ua),di.forEach(Ua)}function hi(e,t){e.blockedOn===t&&(e.blockedOn=null,Ao||(Ao=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,If)))}function pi(e){function t(o){return hi(o,e)}if(0<is.length){hi(is[0],e);for(var n=1;n<is.length;n++){var s=is[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Mn!==null&&hi(Mn,e),Rn!==null&&hi(Rn,e),On!==null&&hi(On,e),ci.forEach(t),di.forEach(t),n=0;n<Un.length;n++)s=Un[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)Oa(n),n.blockedOn===null&&Un.shift()}var Dr=q.ReactCurrentBatchConfig,os=!0;function jf(e,t,n,s){var o=He,u=Dr.transition;Dr.transition=null;try{He=1,Do(e,t,n,s)}finally{He=o,Dr.transition=u}}function Mf(e,t,n,s){var o=He,u=Dr.transition;Dr.transition=null;try{He=4,Do(e,t,n,s)}finally{He=o,Dr.transition=u}}function Do(e,t,n,s){if(os){var o=Fo(e,t,n,s);if(o===null)$o(e,t,s,ls,n),Ra(e,s);else if(Lf(o,e,t,n,s))s.stopPropagation();else if(Ra(e,s),t&4&&-1<Pf.indexOf(e)){for(;o!==null;){var u=bi(o);if(u!==null&&La(u),u=Fo(e,t,n,s),u===null&&$o(e,t,s,ls,n),u===o)break;o=u}o!==null&&s.stopPropagation()}else $o(e,t,s,null,n)}}var ls=null;function Fo(e,t,n,s){if(ls=null,e=Jt(s),e=ar(e),e!==null)if(t=lr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ca(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ls=e,null}function za(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Cf()){case So:return 1;case Ba:return 4;case qi:case Ef:return 16;case Ta:return 536870912;default:return 16}default:return 16}}var zn=null,Bo=null,as=null;function Ha(){if(as)return as;var e,t=Bo,n=t.length,s,o="value"in zn?zn.value:zn.textContent,u=o.length;for(e=0;e<n&&t[e]===o[e];e++);var h=n-e;for(s=1;s<=h&&t[n-s]===o[u-s];s++);return as=o.slice(e,1<s?1-s:void 0)}function us(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function cs(){return!0}function Ga(){return!1}function Mt(e){function t(n,s,o,u,h){this._reactName=n,this._targetInst=o,this.type=s,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(n=e[v],this[v]=n?n(u):u[v]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?cs:Ga,this.isPropagationStopped=Ga,this}return X(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cs)},persist:function(){},isPersistent:cs}),t}var Fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},To=Mt(Fr),mi=X({},Fr,{view:0,detail:0}),Rf=Mt(mi),No,Po,gi,ds=X({},mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Io,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gi&&(gi&&e.type==="mousemove"?(No=e.screenX-gi.screenX,Po=e.screenY-gi.screenY):Po=No=0,gi=e),No)},movementY:function(e){return"movementY"in e?e.movementY:Po}}),Wa=Mt(ds),Of=X({},ds,{dataTransfer:0}),Uf=Mt(Of),zf=X({},mi,{relatedTarget:0}),Lo=Mt(zf),Hf=X({},Fr,{animationName:0,elapsedTime:0,pseudoElement:0}),Gf=Mt(Hf),Wf=X({},Fr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vf=Mt(Wf),$f=X({},Fr,{data:0}),Va=Mt($f),Yf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Kf[e])?!!t[e]:!1}function Io(){return Xf}var Zf=X({},mi,{key:function(e){if(e.key){var t=Yf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=us(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Qf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Io,charCode:function(e){return e.type==="keypress"?us(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?us(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Jf=Mt(Zf),qf=X({},ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$a=Mt(qf),eh=X({},mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Io}),th=Mt(eh),nh=X({},Fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),rh=Mt(nh),ih=X({},ds,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sh=Mt(ih),oh=[9,13,27,32],jo=g&&"CompositionEvent"in window,xi=null;g&&"documentMode"in document&&(xi=document.documentMode);var lh=g&&"TextEvent"in window&&!xi,Ya=g&&(!jo||xi&&8<xi&&11>=xi),Qa=" ",Ka=!1;function Xa(e,t){switch(e){case"keyup":return oh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Za(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Br=!1;function ah(e,t){switch(e){case"compositionend":return Za(t);case"keypress":return t.which!==32?null:(Ka=!0,Qa);case"textInput":return e=t.data,e===Qa&&Ka?null:e;default:return null}}function uh(e,t){if(Br)return e==="compositionend"||!jo&&Xa(e,t)?(e=Ha(),as=Bo=zn=null,Br=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ya&&t.locale!=="ko"?null:t.data;default:return null}}var ch={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ja(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ch[e.type]:t==="textarea"}function qa(e,t,n,s){In(s),t=gs(t,"onChange"),0<t.length&&(n=new To("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var yi=null,vi=null;function dh(e){xu(e,0)}function fs(e){var t=Ir(e);if(dn(t))return e}function fh(e,t){if(e==="change")return t}var eu=!1;if(g){var Mo;if(g){var Ro="oninput"in document;if(!Ro){var tu=document.createElement("div");tu.setAttribute("oninput","return;"),Ro=typeof tu.oninput=="function"}Mo=Ro}else Mo=!1;eu=Mo&&(!document.documentMode||9<document.documentMode)}function nu(){yi&&(yi.detachEvent("onpropertychange",ru),vi=yi=null)}function ru(e){if(e.propertyName==="value"&&fs(vi)){var t=[];qa(t,vi,e,Jt(e)),oi(dh,t)}}function hh(e,t,n){e==="focusin"?(nu(),yi=t,vi=n,yi.attachEvent("onpropertychange",ru)):e==="focusout"&&nu()}function ph(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fs(vi)}function mh(e,t){if(e==="click")return fs(t)}function gh(e,t){if(e==="input"||e==="change")return fs(t)}function xh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tn=typeof Object.is=="function"?Object.is:xh;function ki(e,t){if(tn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var o=n[s];if(!m.call(t,o)||!tn(e[o],t[o]))return!1}return!0}function iu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function su(e,t){var n=iu(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=iu(n)}}function ou(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ou(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lu(){for(var e=window,t=Gt();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Gt(e.document)}return t}function Oo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function yh(e){var t=lu(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ou(n.ownerDocument.documentElement,n)){if(s!==null&&Oo(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,u=Math.min(s.start,o);s=s.end===void 0?u:Math.min(s.end,o),!e.extend&&u>s&&(o=s,s=u,u=o),o=su(n,u);var h=su(n,s);o&&h&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),u>s?(e.addRange(t),e.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vh=g&&"documentMode"in document&&11>=document.documentMode,Tr=null,Uo=null,wi=null,zo=!1;function au(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zo||Tr==null||Tr!==Gt(s)||(s=Tr,"selectionStart"in s&&Oo(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),wi&&ki(wi,s)||(wi=s,s=gs(Uo,"onSelect"),0<s.length&&(t=new To("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Tr)))}function hs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Nr={animationend:hs("Animation","AnimationEnd"),animationiteration:hs("Animation","AnimationIteration"),animationstart:hs("Animation","AnimationStart"),transitionend:hs("Transition","TransitionEnd")},Ho={},uu={};g&&(uu=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);function ps(e){if(Ho[e])return Ho[e];if(!Nr[e])return e;var t=Nr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in uu)return Ho[e]=t[n];return e}var cu=ps("animationend"),du=ps("animationiteration"),fu=ps("animationstart"),hu=ps("transitionend"),pu=new Map,mu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hn(e,t){pu.set(e,t),d(t,[e])}for(var Go=0;Go<mu.length;Go++){var Wo=mu[Go],kh=Wo.toLowerCase(),wh=Wo[0].toUpperCase()+Wo.slice(1);Hn(kh,"on"+wh)}Hn(cu,"onAnimationEnd"),Hn(du,"onAnimationIteration"),Hn(fu,"onAnimationStart"),Hn("dblclick","onDoubleClick"),Hn("focusin","onFocus"),Hn("focusout","onBlur"),Hn(hu,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Si="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Si));function gu(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,kf(s,t,void 0,e),e.currentTarget=null}function xu(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],o=s.event;s=s.listeners;e:{var u=void 0;if(t)for(var h=s.length-1;0<=h;h--){var v=s[h],S=v.instance,N=v.currentTarget;if(v=v.listener,S!==u&&o.isPropagationStopped())break e;gu(o,v,N),u=S}else for(h=0;h<s.length;h++){if(v=s[h],S=v.instance,N=v.currentTarget,v=v.listener,S!==u&&o.isPropagationStopped())break e;gu(o,v,N),u=S}}}if(Ji)throw e=wo,Ji=!1,wo=null,e}function Qe(e,t){var n=t[Jo];n===void 0&&(n=t[Jo]=new Set);var s=e+"__bubble";n.has(s)||(yu(t,e,2,!1),n.add(s))}function Vo(e,t,n){var s=0;t&&(s|=4),yu(n,e,s,t)}var ms="_reactListening"+Math.random().toString(36).slice(2);function _i(e){if(!e[ms]){e[ms]=!0,a.forEach(function(n){n!=="selectionchange"&&(Sh.has(n)||Vo(n,!1,e),Vo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ms]||(t[ms]=!0,Vo("selectionchange",!1,t))}}function yu(e,t,n,s){switch(za(t)){case 1:var o=jf;break;case 4:o=Mf;break;default:o=Do}n=o.bind(null,t,n,e),o=void 0,!qt||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),s?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function $o(e,t,n,s,o){var u=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var h=s.tag;if(h===3||h===4){var v=s.stateNode.containerInfo;if(v===o||v.nodeType===8&&v.parentNode===o)break;if(h===4)for(h=s.return;h!==null;){var S=h.tag;if((S===3||S===4)&&(S=h.stateNode.containerInfo,S===o||S.nodeType===8&&S.parentNode===o))return;h=h.return}for(;v!==null;){if(h=ar(v),h===null)return;if(S=h.tag,S===5||S===6){s=u=h;continue e}v=v.parentNode}}s=s.return}oi(function(){var N=u,H=Jt(n),W=[];e:{var z=pu.get(e);if(z!==void 0){var le=To,he=e;switch(e){case"keypress":if(us(n)===0)break e;case"keydown":case"keyup":le=Jf;break;case"focusin":he="focus",le=Lo;break;case"focusout":he="blur",le=Lo;break;case"beforeblur":case"afterblur":le=Lo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=Wa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=Uf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=th;break;case cu:case du:case fu:le=Gf;break;case hu:le=rh;break;case"scroll":le=Rf;break;case"wheel":le=sh;break;case"copy":case"cut":case"paste":le=Vf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=$a}var me=(t&4)!==0,st=!me&&e==="scroll",A=me?z!==null?z+"Capture":null:z;me=[];for(var _=N,F;_!==null;){F=_;var Q=F.stateNode;if(F.tag===5&&Q!==null&&(F=Q,A!==null&&(Q=jn(_,A),Q!=null&&me.push(Ci(_,Q,F)))),st)break;_=_.return}0<me.length&&(z=new le(z,he,null,n,H),W.push({event:z,listeners:me}))}}if((t&7)===0){e:{if(z=e==="mouseover"||e==="pointerover",le=e==="mouseout"||e==="pointerout",z&&n!==Zt&&(he=n.relatedTarget||n.fromElement)&&(ar(he)||he[wn]))break e;if((le||z)&&(z=H.window===H?H:(z=H.ownerDocument)?z.defaultView||z.parentWindow:window,le?(he=n.relatedTarget||n.toElement,le=N,he=he?ar(he):null,he!==null&&(st=lr(he),he!==st||he.tag!==5&&he.tag!==6)&&(he=null)):(le=null,he=N),le!==he)){if(me=Wa,Q="onMouseLeave",A="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(me=$a,Q="onPointerLeave",A="onPointerEnter",_="pointer"),st=le==null?z:Ir(le),F=he==null?z:Ir(he),z=new me(Q,_+"leave",le,n,H),z.target=st,z.relatedTarget=F,Q=null,ar(H)===N&&(me=new me(A,_+"enter",he,n,H),me.target=F,me.relatedTarget=st,Q=me),st=Q,le&&he)t:{for(me=le,A=he,_=0,F=me;F;F=Pr(F))_++;for(F=0,Q=A;Q;Q=Pr(Q))F++;for(;0<_-F;)me=Pr(me),_--;for(;0<F-_;)A=Pr(A),F--;for(;_--;){if(me===A||A!==null&&me===A.alternate)break t;me=Pr(me),A=Pr(A)}me=null}else me=null;le!==null&&vu(W,z,le,me,!1),he!==null&&st!==null&&vu(W,st,he,me,!0)}}e:{if(z=N?Ir(N):window,le=z.nodeName&&z.nodeName.toLowerCase(),le==="select"||le==="input"&&z.type==="file")var xe=fh;else if(Ja(z))if(eu)xe=gh;else{xe=ph;var Ce=hh}else(le=z.nodeName)&&le.toLowerCase()==="input"&&(z.type==="checkbox"||z.type==="radio")&&(xe=mh);if(xe&&(xe=xe(e,N))){qa(W,xe,n,H);break e}Ce&&Ce(e,z,N),e==="focusout"&&(Ce=z._wrapperState)&&Ce.controlled&&z.type==="number"&&br(z,"number",z.value)}switch(Ce=N?Ir(N):window,e){case"focusin":(Ja(Ce)||Ce.contentEditable==="true")&&(Tr=Ce,Uo=N,wi=null);break;case"focusout":wi=Uo=Tr=null;break;case"mousedown":zo=!0;break;case"contextmenu":case"mouseup":case"dragend":zo=!1,au(W,n,H);break;case"selectionchange":if(vh)break;case"keydown":case"keyup":au(W,n,H)}var Ee;if(jo)e:{switch(e){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Br?Xa(e,n)&&(be="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(be="onCompositionStart");be&&(Ya&&n.locale!=="ko"&&(Br||be!=="onCompositionStart"?be==="onCompositionEnd"&&Br&&(Ee=Ha()):(zn=H,Bo="value"in zn?zn.value:zn.textContent,Br=!0)),Ce=gs(N,be),0<Ce.length&&(be=new Va(be,e,null,n,H),W.push({event:be,listeners:Ce}),Ee?be.data=Ee:(Ee=Za(n),Ee!==null&&(be.data=Ee)))),(Ee=lh?ah(e,n):uh(e,n))&&(N=gs(N,"onBeforeInput"),0<N.length&&(H=new Va("onBeforeInput","beforeinput",null,n,H),W.push({event:H,listeners:N}),H.data=Ee))}xu(W,t)})}function Ci(e,t,n){return{instance:e,listener:t,currentTarget:n}}function gs(e,t){for(var n=t+"Capture",s=[];e!==null;){var o=e,u=o.stateNode;o.tag===5&&u!==null&&(o=u,u=jn(e,n),u!=null&&s.unshift(Ci(e,u,o)),u=jn(e,t),u!=null&&s.push(Ci(e,u,o))),e=e.return}return s}function Pr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function vu(e,t,n,s,o){for(var u=t._reactName,h=[];n!==null&&n!==s;){var v=n,S=v.alternate,N=v.stateNode;if(S!==null&&S===s)break;v.tag===5&&N!==null&&(v=N,o?(S=jn(n,u),S!=null&&h.unshift(Ci(n,S,v))):o||(S=jn(n,u),S!=null&&h.push(Ci(n,S,v)))),n=n.return}h.length!==0&&e.push({event:t,listeners:h})}var _h=/\r\n?/g,Ch=/\u0000|\uFFFD/g;function ku(e){return(typeof e=="string"?e:""+e).replace(_h,`
`).replace(Ch,"")}function xs(e,t,n){if(t=ku(t),ku(e)!==t&&n)throw Error(i(425))}function ys(){}var Yo=null,Qo=null;function Ko(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xo=typeof setTimeout=="function"?setTimeout:void 0,Eh=typeof clearTimeout=="function"?clearTimeout:void 0,wu=typeof Promise=="function"?Promise:void 0,bh=typeof queueMicrotask=="function"?queueMicrotask:typeof wu<"u"?function(e){return wu.resolve(null).then(e).catch(Ah)}:Xo;function Ah(e){setTimeout(function(){throw e})}function Zo(e,t){var n=t,s=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(s===0){e.removeChild(o),pi(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=o}while(n);pi(t)}function Gn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Su(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Lr=Math.random().toString(36).slice(2),hn="__reactFiber$"+Lr,Ei="__reactProps$"+Lr,wn="__reactContainer$"+Lr,Jo="__reactEvents$"+Lr,Dh="__reactListeners$"+Lr,Fh="__reactHandles$"+Lr;function ar(e){var t=e[hn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[wn]||n[hn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Su(e);e!==null;){if(n=e[hn])return n;e=Su(e)}return t}e=n,n=e.parentNode}return null}function bi(e){return e=e[hn]||e[wn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ir(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(i(33))}function vs(e){return e[Ei]||null}var qo=[],jr=-1;function Wn(e){return{current:e}}function Ke(e){0>jr||(e.current=qo[jr],qo[jr]=null,jr--)}function Ye(e,t){jr++,qo[jr]=e.current,e.current=t}var Vn={},vt=Wn(Vn),Dt=Wn(!1),ur=Vn;function Mr(e,t){var n=e.type.contextTypes;if(!n)return Vn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var o={},u;for(u in n)o[u]=t[u];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ft(e){return e=e.childContextTypes,e!=null}function ks(){Ke(Dt),Ke(vt)}function _u(e,t,n){if(vt.current!==Vn)throw Error(i(168));Ye(vt,t),Ye(Dt,n)}function Cu(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var o in s)if(!(o in t))throw Error(i(108,ve(e)||"Unknown",o));return X({},n,s)}function ws(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vn,ur=vt.current,Ye(vt,e),Ye(Dt,Dt.current),!0}function Eu(e,t,n){var s=e.stateNode;if(!s)throw Error(i(169));n?(e=Cu(e,t,ur),s.__reactInternalMemoizedMergedChildContext=e,Ke(Dt),Ke(vt),Ye(vt,e)):Ke(Dt),Ye(Dt,n)}var Sn=null,Ss=!1,el=!1;function bu(e){Sn===null?Sn=[e]:Sn.push(e)}function Bh(e){Ss=!0,bu(e)}function $n(){if(!el&&Sn!==null){el=!0;var e=0,t=He;try{var n=Sn;for(He=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Sn=null,Ss=!1}catch(o){throw Sn!==null&&(Sn=Sn.slice(e+1)),Da(So,$n),o}finally{He=t,el=!1}}return null}var Rr=[],Or=0,_s=null,Cs=0,Wt=[],Vt=0,cr=null,_n=1,Cn="";function dr(e,t){Rr[Or++]=Cs,Rr[Or++]=_s,_s=e,Cs=t}function Au(e,t,n){Wt[Vt++]=_n,Wt[Vt++]=Cn,Wt[Vt++]=cr,cr=e;var s=_n;e=Cn;var o=32-en(s)-1;s&=~(1<<o),n+=1;var u=32-en(t)+o;if(30<u){var h=o-o%5;u=(s&(1<<h)-1).toString(32),s>>=h,o-=h,_n=1<<32-en(t)+o|n<<o|s,Cn=u+e}else _n=1<<u|n<<o|s,Cn=e}function tl(e){e.return!==null&&(dr(e,1),Au(e,1,0))}function nl(e){for(;e===_s;)_s=Rr[--Or],Rr[Or]=null,Cs=Rr[--Or],Rr[Or]=null;for(;e===cr;)cr=Wt[--Vt],Wt[Vt]=null,Cn=Wt[--Vt],Wt[Vt]=null,_n=Wt[--Vt],Wt[Vt]=null}var Rt=null,Ot=null,qe=!1,nn=null;function Du(e,t){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Fu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Rt=e,Ot=Gn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Rt=e,Ot=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=cr!==null?{id:_n,overflow:Cn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Rt=e,Ot=null,!0):!1;default:return!1}}function rl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function il(e){if(qe){var t=Ot;if(t){var n=t;if(!Fu(e,t)){if(rl(e))throw Error(i(418));t=Gn(n.nextSibling);var s=Rt;t&&Fu(e,t)?Du(s,n):(e.flags=e.flags&-4097|2,qe=!1,Rt=e)}}else{if(rl(e))throw Error(i(418));e.flags=e.flags&-4097|2,qe=!1,Rt=e}}}function Bu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Rt=e}function Es(e){if(e!==Rt)return!1;if(!qe)return Bu(e),qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ko(e.type,e.memoizedProps)),t&&(t=Ot)){if(rl(e))throw Tu(),Error(i(418));for(;t;)Du(e,t),t=Gn(t.nextSibling)}if(Bu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ot=Gn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ot=null}}else Ot=Rt?Gn(e.stateNode.nextSibling):null;return!0}function Tu(){for(var e=Ot;e;)e=Gn(e.nextSibling)}function Ur(){Ot=Rt=null,qe=!1}function sl(e){nn===null?nn=[e]:nn.push(e)}var Th=q.ReactCurrentBatchConfig;function Ai(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(i(309));var s=n.stateNode}if(!s)throw Error(i(147,e));var o=s,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(h){var v=o.refs;h===null?delete v[u]:v[u]=h},t._stringRef=u,t)}if(typeof e!="string")throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function bs(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Nu(e){var t=e._init;return t(e._payload)}function Pu(e){function t(A,_){if(e){var F=A.deletions;F===null?(A.deletions=[_],A.flags|=16):F.push(_)}}function n(A,_){if(!e)return null;for(;_!==null;)t(A,_),_=_.sibling;return null}function s(A,_){for(A=new Map;_!==null;)_.key!==null?A.set(_.key,_):A.set(_.index,_),_=_.sibling;return A}function o(A,_){return A=er(A,_),A.index=0,A.sibling=null,A}function u(A,_,F){return A.index=F,e?(F=A.alternate,F!==null?(F=F.index,F<_?(A.flags|=2,_):F):(A.flags|=2,_)):(A.flags|=1048576,_)}function h(A){return e&&A.alternate===null&&(A.flags|=2),A}function v(A,_,F,Q){return _===null||_.tag!==6?(_=Xl(F,A.mode,Q),_.return=A,_):(_=o(_,F),_.return=A,_)}function S(A,_,F,Q){var xe=F.type;return xe===ae?H(A,_,F.props.children,Q,F.key):_!==null&&(_.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===Te&&Nu(xe)===_.type)?(Q=o(_,F.props),Q.ref=Ai(A,_,F),Q.return=A,Q):(Q=Xs(F.type,F.key,F.props,null,A.mode,Q),Q.ref=Ai(A,_,F),Q.return=A,Q)}function N(A,_,F,Q){return _===null||_.tag!==4||_.stateNode.containerInfo!==F.containerInfo||_.stateNode.implementation!==F.implementation?(_=Zl(F,A.mode,Q),_.return=A,_):(_=o(_,F.children||[]),_.return=A,_)}function H(A,_,F,Q,xe){return _===null||_.tag!==7?(_=vr(F,A.mode,Q,xe),_.return=A,_):(_=o(_,F),_.return=A,_)}function W(A,_,F){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Xl(""+_,A.mode,F),_.return=A,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case $:return F=Xs(_.type,_.key,_.props,null,A.mode,F),F.ref=Ai(A,null,_),F.return=A,F;case P:return _=Zl(_,A.mode,F),_.return=A,_;case Te:var Q=_._init;return W(A,Q(_._payload),F)}if(sr(_)||se(_))return _=vr(_,A.mode,F,null),_.return=A,_;bs(A,_)}return null}function z(A,_,F,Q){var xe=_!==null?_.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return xe!==null?null:v(A,_,""+F,Q);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case $:return F.key===xe?S(A,_,F,Q):null;case P:return F.key===xe?N(A,_,F,Q):null;case Te:return xe=F._init,z(A,_,xe(F._payload),Q)}if(sr(F)||se(F))return xe!==null?null:H(A,_,F,Q,null);bs(A,F)}return null}function le(A,_,F,Q,xe){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return A=A.get(F)||null,v(_,A,""+Q,xe);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case $:return A=A.get(Q.key===null?F:Q.key)||null,S(_,A,Q,xe);case P:return A=A.get(Q.key===null?F:Q.key)||null,N(_,A,Q,xe);case Te:var Ce=Q._init;return le(A,_,F,Ce(Q._payload),xe)}if(sr(Q)||se(Q))return A=A.get(F)||null,H(_,A,Q,xe,null);bs(_,Q)}return null}function he(A,_,F,Q){for(var xe=null,Ce=null,Ee=_,be=_=0,pt=null;Ee!==null&&be<F.length;be++){Ee.index>be?(pt=Ee,Ee=null):pt=Ee.sibling;var Re=z(A,Ee,F[be],Q);if(Re===null){Ee===null&&(Ee=pt);break}e&&Ee&&Re.alternate===null&&t(A,Ee),_=u(Re,_,be),Ce===null?xe=Re:Ce.sibling=Re,Ce=Re,Ee=pt}if(be===F.length)return n(A,Ee),qe&&dr(A,be),xe;if(Ee===null){for(;be<F.length;be++)Ee=W(A,F[be],Q),Ee!==null&&(_=u(Ee,_,be),Ce===null?xe=Ee:Ce.sibling=Ee,Ce=Ee);return qe&&dr(A,be),xe}for(Ee=s(A,Ee);be<F.length;be++)pt=le(Ee,A,be,F[be],Q),pt!==null&&(e&&pt.alternate!==null&&Ee.delete(pt.key===null?be:pt.key),_=u(pt,_,be),Ce===null?xe=pt:Ce.sibling=pt,Ce=pt);return e&&Ee.forEach(function(tr){return t(A,tr)}),qe&&dr(A,be),xe}function me(A,_,F,Q){var xe=se(F);if(typeof xe!="function")throw Error(i(150));if(F=xe.call(F),F==null)throw Error(i(151));for(var Ce=xe=null,Ee=_,be=_=0,pt=null,Re=F.next();Ee!==null&&!Re.done;be++,Re=F.next()){Ee.index>be?(pt=Ee,Ee=null):pt=Ee.sibling;var tr=z(A,Ee,Re.value,Q);if(tr===null){Ee===null&&(Ee=pt);break}e&&Ee&&tr.alternate===null&&t(A,Ee),_=u(tr,_,be),Ce===null?xe=tr:Ce.sibling=tr,Ce=tr,Ee=pt}if(Re.done)return n(A,Ee),qe&&dr(A,be),xe;if(Ee===null){for(;!Re.done;be++,Re=F.next())Re=W(A,Re.value,Q),Re!==null&&(_=u(Re,_,be),Ce===null?xe=Re:Ce.sibling=Re,Ce=Re);return qe&&dr(A,be),xe}for(Ee=s(A,Ee);!Re.done;be++,Re=F.next())Re=le(Ee,A,be,Re.value,Q),Re!==null&&(e&&Re.alternate!==null&&Ee.delete(Re.key===null?be:Re.key),_=u(Re,_,be),Ce===null?xe=Re:Ce.sibling=Re,Ce=Re);return e&&Ee.forEach(function(cp){return t(A,cp)}),qe&&dr(A,be),xe}function st(A,_,F,Q){if(typeof F=="object"&&F!==null&&F.type===ae&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case $:e:{for(var xe=F.key,Ce=_;Ce!==null;){if(Ce.key===xe){if(xe=F.type,xe===ae){if(Ce.tag===7){n(A,Ce.sibling),_=o(Ce,F.props.children),_.return=A,A=_;break e}}else if(Ce.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===Te&&Nu(xe)===Ce.type){n(A,Ce.sibling),_=o(Ce,F.props),_.ref=Ai(A,Ce,F),_.return=A,A=_;break e}n(A,Ce);break}else t(A,Ce);Ce=Ce.sibling}F.type===ae?(_=vr(F.props.children,A.mode,Q,F.key),_.return=A,A=_):(Q=Xs(F.type,F.key,F.props,null,A.mode,Q),Q.ref=Ai(A,_,F),Q.return=A,A=Q)}return h(A);case P:e:{for(Ce=F.key;_!==null;){if(_.key===Ce)if(_.tag===4&&_.stateNode.containerInfo===F.containerInfo&&_.stateNode.implementation===F.implementation){n(A,_.sibling),_=o(_,F.children||[]),_.return=A,A=_;break e}else{n(A,_);break}else t(A,_);_=_.sibling}_=Zl(F,A.mode,Q),_.return=A,A=_}return h(A);case Te:return Ce=F._init,st(A,_,Ce(F._payload),Q)}if(sr(F))return he(A,_,F,Q);if(se(F))return me(A,_,F,Q);bs(A,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,_!==null&&_.tag===6?(n(A,_.sibling),_=o(_,F),_.return=A,A=_):(n(A,_),_=Xl(F,A.mode,Q),_.return=A,A=_),h(A)):n(A,_)}return st}var zr=Pu(!0),Lu=Pu(!1),As=Wn(null),Ds=null,Hr=null,ol=null;function ll(){ol=Hr=Ds=null}function al(e){var t=As.current;Ke(As),e._currentValue=t}function ul(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Gr(e,t){Ds=e,ol=Hr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Bt=!0),e.firstContext=null)}function $t(e){var t=e._currentValue;if(ol!==e)if(e={context:e,memoizedValue:t,next:null},Hr===null){if(Ds===null)throw Error(i(308));Hr=e,Ds.dependencies={lanes:0,firstContext:e}}else Hr=Hr.next=e;return t}var fr=null;function cl(e){fr===null?fr=[e]:fr.push(e)}function Iu(e,t,n,s){var o=t.interleaved;return o===null?(n.next=n,cl(t)):(n.next=o.next,o.next=n),t.interleaved=n,En(e,s)}function En(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Yn=!1;function dl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ju(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qn(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Me&2)!==0){var o=s.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),s.pending=t,En(e,n)}return o=s.interleaved,o===null?(t.next=t,cl(s)):(t.next=o.next,o.next=t),s.interleaved=t,En(e,n)}function Fs(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Eo(e,n)}}function Mu(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var o=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var h={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};u===null?o=u=h:u=u.next=h,n=n.next}while(n!==null);u===null?o=u=t:u=u.next=t}else o=u=t;n={baseState:s.baseState,firstBaseUpdate:o,lastBaseUpdate:u,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,s){var o=e.updateQueue;Yn=!1;var u=o.firstBaseUpdate,h=o.lastBaseUpdate,v=o.shared.pending;if(v!==null){o.shared.pending=null;var S=v,N=S.next;S.next=null,h===null?u=N:h.next=N,h=S;var H=e.alternate;H!==null&&(H=H.updateQueue,v=H.lastBaseUpdate,v!==h&&(v===null?H.firstBaseUpdate=N:v.next=N,H.lastBaseUpdate=S))}if(u!==null){var W=o.baseState;h=0,H=N=S=null,v=u;do{var z=v.lane,le=v.eventTime;if((s&z)===z){H!==null&&(H=H.next={eventTime:le,lane:0,tag:v.tag,payload:v.payload,callback:v.callback,next:null});e:{var he=e,me=v;switch(z=t,le=n,me.tag){case 1:if(he=me.payload,typeof he=="function"){W=he.call(le,W,z);break e}W=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=me.payload,z=typeof he=="function"?he.call(le,W,z):he,z==null)break e;W=X({},W,z);break e;case 2:Yn=!0}}v.callback!==null&&v.lane!==0&&(e.flags|=64,z=o.effects,z===null?o.effects=[v]:z.push(v))}else le={eventTime:le,lane:z,tag:v.tag,payload:v.payload,callback:v.callback,next:null},H===null?(N=H=le,S=W):H=H.next=le,h|=z;if(v=v.next,v===null){if(v=o.shared.pending,v===null)break;z=v,v=z.next,z.next=null,o.lastBaseUpdate=z,o.shared.pending=null}}while(!0);if(H===null&&(S=W),o.baseState=S,o.firstBaseUpdate=N,o.lastBaseUpdate=H,t=o.shared.interleaved,t!==null){o=t;do h|=o.lane,o=o.next;while(o!==t)}else u===null&&(o.shared.lanes=0);mr|=h,e.lanes=h,e.memoizedState=W}}function Ru(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],o=s.callback;if(o!==null){if(s.callback=null,s=n,typeof o!="function")throw Error(i(191,o));o.call(s)}}}var Di={},pn=Wn(Di),Fi=Wn(Di),Bi=Wn(Di);function hr(e){if(e===Di)throw Error(i(174));return e}function fl(e,t){switch(Ye(Bi,t),Ye(Fi,e),Ye(pn,Di),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ue(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ue(t,e)}Ke(pn),Ye(pn,t)}function Wr(){Ke(pn),Ke(Fi),Ke(Bi)}function Ou(e){hr(Bi.current);var t=hr(pn.current),n=Ue(t,e.type);t!==n&&(Ye(Fi,e),Ye(pn,n))}function hl(e){Fi.current===e&&(Ke(pn),Ke(Fi))}var et=Wn(0);function Ts(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pl=[];function ml(){for(var e=0;e<pl.length;e++)pl[e]._workInProgressVersionPrimary=null;pl.length=0}var Ns=q.ReactCurrentDispatcher,gl=q.ReactCurrentBatchConfig,pr=0,tt=null,ut=null,ft=null,Ps=!1,Ti=!1,Ni=0,Nh=0;function kt(){throw Error(i(321))}function xl(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!tn(e[n],t[n]))return!1;return!0}function yl(e,t,n,s,o,u){if(pr=u,tt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ns.current=e===null||e.memoizedState===null?jh:Mh,e=n(s,o),Ti){u=0;do{if(Ti=!1,Ni=0,25<=u)throw Error(i(301));u+=1,ft=ut=null,t.updateQueue=null,Ns.current=Rh,e=n(s,o)}while(Ti)}if(Ns.current=js,t=ut!==null&&ut.next!==null,pr=0,ft=ut=tt=null,Ps=!1,t)throw Error(i(300));return e}function vl(){var e=Ni!==0;return Ni=0,e}function mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?tt.memoizedState=ft=e:ft=ft.next=e,ft}function Yt(){if(ut===null){var e=tt.alternate;e=e!==null?e.memoizedState:null}else e=ut.next;var t=ft===null?tt.memoizedState:ft.next;if(t!==null)ft=t,ut=e;else{if(e===null)throw Error(i(310));ut=e,e={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},ft===null?tt.memoizedState=ft=e:ft=ft.next=e}return ft}function Pi(e,t){return typeof t=="function"?t(e):t}function kl(e){var t=Yt(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var s=ut,o=s.baseQueue,u=n.pending;if(u!==null){if(o!==null){var h=o.next;o.next=u.next,u.next=h}s.baseQueue=o=u,n.pending=null}if(o!==null){u=o.next,s=s.baseState;var v=h=null,S=null,N=u;do{var H=N.lane;if((pr&H)===H)S!==null&&(S=S.next={lane:0,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null}),s=N.hasEagerState?N.eagerState:e(s,N.action);else{var W={lane:H,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null};S===null?(v=S=W,h=s):S=S.next=W,tt.lanes|=H,mr|=H}N=N.next}while(N!==null&&N!==u);S===null?h=s:S.next=v,tn(s,t.memoizedState)||(Bt=!0),t.memoizedState=s,t.baseState=h,t.baseQueue=S,n.lastRenderedState=s}if(e=n.interleaved,e!==null){o=e;do u=o.lane,tt.lanes|=u,mr|=u,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wl(e){var t=Yt(),n=t.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=e;var s=n.dispatch,o=n.pending,u=t.memoizedState;if(o!==null){n.pending=null;var h=o=o.next;do u=e(u,h.action),h=h.next;while(h!==o);tn(u,t.memoizedState)||(Bt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),n.lastRenderedState=u}return[u,s]}function Uu(){}function zu(e,t){var n=tt,s=Yt(),o=t(),u=!tn(s.memoizedState,o);if(u&&(s.memoizedState=o,Bt=!0),s=s.queue,Sl(Wu.bind(null,n,s,e),[e]),s.getSnapshot!==t||u||ft!==null&&ft.memoizedState.tag&1){if(n.flags|=2048,Li(9,Gu.bind(null,n,s,o,t),void 0,null),ht===null)throw Error(i(349));(pr&30)!==0||Hu(n,t,o)}return o}function Hu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=tt.updateQueue,t===null?(t={lastEffect:null,stores:null},tt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Gu(e,t,n,s){t.value=n,t.getSnapshot=s,Vu(t)&&$u(e)}function Wu(e,t,n){return n(function(){Vu(t)&&$u(e)})}function Vu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!tn(e,n)}catch{return!0}}function $u(e){var t=En(e,1);t!==null&&ln(t,e,1,-1)}function Yu(e){var t=mn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ih.bind(null,tt,e),[t.memoizedState,e]}function Li(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=tt.updateQueue,t===null?(t={lastEffect:null,stores:null},tt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function Qu(){return Yt().memoizedState}function Ls(e,t,n,s){var o=mn();tt.flags|=e,o.memoizedState=Li(1|t,n,void 0,s===void 0?null:s)}function Is(e,t,n,s){var o=Yt();s=s===void 0?null:s;var u=void 0;if(ut!==null){var h=ut.memoizedState;if(u=h.destroy,s!==null&&xl(s,h.deps)){o.memoizedState=Li(t,n,u,s);return}}tt.flags|=e,o.memoizedState=Li(1|t,n,u,s)}function Ku(e,t){return Ls(8390656,8,e,t)}function Sl(e,t){return Is(2048,8,e,t)}function Xu(e,t){return Is(4,2,e,t)}function Zu(e,t){return Is(4,4,e,t)}function Ju(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qu(e,t,n){return n=n!=null?n.concat([e]):null,Is(4,4,Ju.bind(null,t,e),n)}function _l(){}function ec(e,t){var n=Yt();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&xl(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function tc(e,t){var n=Yt();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&xl(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function nc(e,t,n){return(pr&21)===0?(e.baseState&&(e.baseState=!1,Bt=!0),e.memoizedState=n):(tn(n,t)||(n=Na(),tt.lanes|=n,mr|=n,e.baseState=!0),t)}function Ph(e,t){var n=He;He=n!==0&&4>n?n:4,e(!0);var s=gl.transition;gl.transition={};try{e(!1),t()}finally{He=n,gl.transition=s}}function rc(){return Yt().memoizedState}function Lh(e,t,n){var s=Jn(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},ic(e))sc(t,n);else if(n=Iu(e,t,n,s),n!==null){var o=Et();ln(n,e,s,o),oc(n,t,s)}}function Ih(e,t,n){var s=Jn(e),o={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(ic(e))sc(t,o);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var h=t.lastRenderedState,v=u(h,n);if(o.hasEagerState=!0,o.eagerState=v,tn(v,h)){var S=t.interleaved;S===null?(o.next=o,cl(t)):(o.next=S.next,S.next=o),t.interleaved=o;return}}catch{}finally{}n=Iu(e,t,o,s),n!==null&&(o=Et(),ln(n,e,s,o),oc(n,t,s))}}function ic(e){var t=e.alternate;return e===tt||t!==null&&t===tt}function sc(e,t){Ti=Ps=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oc(e,t,n){if((n&4194240)!==0){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,Eo(e,n)}}var js={readContext:$t,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},jh={readContext:$t,useCallback:function(e,t){return mn().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:Ku,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ls(4194308,4,Ju.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ls(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ls(4,2,e,t)},useMemo:function(e,t){var n=mn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=mn();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Lh.bind(null,tt,e),[s.memoizedState,e]},useRef:function(e){var t=mn();return e={current:e},t.memoizedState=e},useState:Yu,useDebugValue:_l,useDeferredValue:function(e){return mn().memoizedState=e},useTransition:function(){var e=Yu(!1),t=e[0];return e=Ph.bind(null,e[1]),mn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=tt,o=mn();if(qe){if(n===void 0)throw Error(i(407));n=n()}else{if(n=t(),ht===null)throw Error(i(349));(pr&30)!==0||Hu(s,t,n)}o.memoizedState=n;var u={value:n,getSnapshot:t};return o.queue=u,Ku(Wu.bind(null,s,u,e),[e]),s.flags|=2048,Li(9,Gu.bind(null,s,u,n,t),void 0,null),n},useId:function(){var e=mn(),t=ht.identifierPrefix;if(qe){var n=Cn,s=_n;n=(s&~(1<<32-en(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ni++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Nh++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Mh={readContext:$t,useCallback:ec,useContext:$t,useEffect:Sl,useImperativeHandle:qu,useInsertionEffect:Xu,useLayoutEffect:Zu,useMemo:tc,useReducer:kl,useRef:Qu,useState:function(){return kl(Pi)},useDebugValue:_l,useDeferredValue:function(e){var t=Yt();return nc(t,ut.memoizedState,e)},useTransition:function(){var e=kl(Pi)[0],t=Yt().memoizedState;return[e,t]},useMutableSource:Uu,useSyncExternalStore:zu,useId:rc,unstable_isNewReconciler:!1},Rh={readContext:$t,useCallback:ec,useContext:$t,useEffect:Sl,useImperativeHandle:qu,useInsertionEffect:Xu,useLayoutEffect:Zu,useMemo:tc,useReducer:wl,useRef:Qu,useState:function(){return wl(Pi)},useDebugValue:_l,useDeferredValue:function(e){var t=Yt();return ut===null?t.memoizedState=e:nc(t,ut.memoizedState,e)},useTransition:function(){var e=wl(Pi)[0],t=Yt().memoizedState;return[e,t]},useMutableSource:Uu,useSyncExternalStore:zu,useId:rc,unstable_isNewReconciler:!1};function rn(e,t){if(e&&e.defaultProps){t=X({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Cl(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:X({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ms={isMounted:function(e){return(e=e._reactInternals)?lr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=Et(),o=Jn(e),u=bn(s,o);u.payload=t,n!=null&&(u.callback=n),t=Qn(e,u,o),t!==null&&(ln(t,e,o,s),Fs(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=Et(),o=Jn(e),u=bn(s,o);u.tag=1,u.payload=t,n!=null&&(u.callback=n),t=Qn(e,u,o),t!==null&&(ln(t,e,o,s),Fs(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Et(),s=Jn(e),o=bn(n,s);o.tag=2,t!=null&&(o.callback=t),t=Qn(e,o,s),t!==null&&(ln(t,e,s,n),Fs(t,e,s))}};function lc(e,t,n,s,o,u,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,u,h):t.prototype&&t.prototype.isPureReactComponent?!ki(n,s)||!ki(o,u):!0}function ac(e,t,n){var s=!1,o=Vn,u=t.contextType;return typeof u=="object"&&u!==null?u=$t(u):(o=Ft(t)?ur:vt.current,s=t.contextTypes,u=(s=s!=null)?Mr(e,o):Vn),t=new t(n,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ms,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=u),t}function uc(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&Ms.enqueueReplaceState(t,t.state,null)}function El(e,t,n,s){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},dl(e);var u=t.contextType;typeof u=="object"&&u!==null?o.context=$t(u):(u=Ft(t)?ur:vt.current,o.context=Mr(e,u)),o.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(Cl(e,t,u,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Ms.enqueueReplaceState(o,o.state,null),Bs(e,n,o,s),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Vr(e,t){try{var n="",s=t;do n+=Ae(s),s=s.return;while(s);var o=n}catch(u){o=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:o,digest:null}}function bl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Al(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Oh=typeof WeakMap=="function"?WeakMap:Map;function cc(e,t,n){n=bn(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Ws||(Ws=!0,Hl=s),Al(e,t)},n}function dc(e,t,n){n=bn(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var o=t.value;n.payload=function(){return s(o)},n.callback=function(){Al(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(n.callback=function(){Al(e,t),typeof s!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),n}function fc(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new Oh;var o=new Set;s.set(t,o)}else o=s.get(t),o===void 0&&(o=new Set,s.set(t,o));o.has(n)||(o.add(n),e=qh.bind(null,e,t,n),t.then(e,e))}function hc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function pc(e,t,n,s,o){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=bn(-1,1),t.tag=2,Qn(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var Uh=q.ReactCurrentOwner,Bt=!1;function Ct(e,t,n,s){t.child=e===null?Lu(t,null,n,s):zr(t,e.child,n,s)}function mc(e,t,n,s,o){n=n.render;var u=t.ref;return Gr(t,o),s=yl(e,t,n,s,u,o),n=vl(),e!==null&&!Bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,An(e,t,o)):(qe&&n&&tl(t),t.flags|=1,Ct(e,t,s,o),t.child)}function gc(e,t,n,s,o){if(e===null){var u=n.type;return typeof u=="function"&&!Kl(u)&&u.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=u,xc(e,t,u,s,o)):(e=Xs(n.type,null,s,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,(e.lanes&o)===0){var h=u.memoizedProps;if(n=n.compare,n=n!==null?n:ki,n(h,s)&&e.ref===t.ref)return An(e,t,o)}return t.flags|=1,e=er(u,s),e.ref=t.ref,e.return=t,t.child=e}function xc(e,t,n,s,o){if(e!==null){var u=e.memoizedProps;if(ki(u,s)&&e.ref===t.ref)if(Bt=!1,t.pendingProps=s=u,(e.lanes&o)!==0)(e.flags&131072)!==0&&(Bt=!0);else return t.lanes=e.lanes,An(e,t,o)}return Dl(e,t,n,s,o)}function yc(e,t,n){var s=t.pendingProps,o=s.children,u=e!==null?e.memoizedState:null;if(s.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Yr,Ut),Ut|=n;else{if((n&1073741824)===0)return e=u!==null?u.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ye(Yr,Ut),Ut|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=u!==null?u.baseLanes:n,Ye(Yr,Ut),Ut|=s}else u!==null?(s=u.baseLanes|n,t.memoizedState=null):s=n,Ye(Yr,Ut),Ut|=s;return Ct(e,t,o,n),t.child}function vc(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Dl(e,t,n,s,o){var u=Ft(n)?ur:vt.current;return u=Mr(t,u),Gr(t,o),n=yl(e,t,n,s,u,o),s=vl(),e!==null&&!Bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,An(e,t,o)):(qe&&s&&tl(t),t.flags|=1,Ct(e,t,n,o),t.child)}function kc(e,t,n,s,o){if(Ft(n)){var u=!0;ws(t)}else u=!1;if(Gr(t,o),t.stateNode===null)Os(e,t),ac(t,n,s),El(t,n,s,o),s=!0;else if(e===null){var h=t.stateNode,v=t.memoizedProps;h.props=v;var S=h.context,N=n.contextType;typeof N=="object"&&N!==null?N=$t(N):(N=Ft(n)?ur:vt.current,N=Mr(t,N));var H=n.getDerivedStateFromProps,W=typeof H=="function"||typeof h.getSnapshotBeforeUpdate=="function";W||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(v!==s||S!==N)&&uc(t,h,s,N),Yn=!1;var z=t.memoizedState;h.state=z,Bs(t,s,h,o),S=t.memoizedState,v!==s||z!==S||Dt.current||Yn?(typeof H=="function"&&(Cl(t,n,H,s),S=t.memoizedState),(v=Yn||lc(t,n,v,s,z,S,N))?(W||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=S),h.props=s,h.state=S,h.context=N,s=v):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{h=t.stateNode,ju(e,t),v=t.memoizedProps,N=t.type===t.elementType?v:rn(t.type,v),h.props=N,W=t.pendingProps,z=h.context,S=n.contextType,typeof S=="object"&&S!==null?S=$t(S):(S=Ft(n)?ur:vt.current,S=Mr(t,S));var le=n.getDerivedStateFromProps;(H=typeof le=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(v!==W||z!==S)&&uc(t,h,s,S),Yn=!1,z=t.memoizedState,h.state=z,Bs(t,s,h,o);var he=t.memoizedState;v!==W||z!==he||Dt.current||Yn?(typeof le=="function"&&(Cl(t,n,le,s),he=t.memoizedState),(N=Yn||lc(t,n,N,s,z,he,S)||!1)?(H||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(s,he,S),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(s,he,S)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=he),h.props=s,h.state=he,h.context=S,s=N):(typeof h.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(t.flags|=1024),s=!1)}return Fl(e,t,n,s,u,o)}function Fl(e,t,n,s,o,u){vc(e,t);var h=(t.flags&128)!==0;if(!s&&!h)return o&&Eu(t,n,!1),An(e,t,u);s=t.stateNode,Uh.current=t;var v=h&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&h?(t.child=zr(t,e.child,null,u),t.child=zr(t,null,v,u)):Ct(e,t,v,u),t.memoizedState=s.state,o&&Eu(t,n,!0),t.child}function wc(e){var t=e.stateNode;t.pendingContext?_u(e,t.pendingContext,t.pendingContext!==t.context):t.context&&_u(e,t.context,!1),fl(e,t.containerInfo)}function Sc(e,t,n,s,o){return Ur(),sl(o),t.flags|=256,Ct(e,t,n,s),t.child}var Bl={dehydrated:null,treeContext:null,retryLane:0};function Tl(e){return{baseLanes:e,cachePool:null,transitions:null}}function _c(e,t,n){var s=t.pendingProps,o=et.current,u=!1,h=(t.flags&128)!==0,v;if((v=h)||(v=e!==null&&e.memoizedState===null?!1:(o&2)!==0),v?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Ye(et,o&1),e===null)return il(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(h=s.children,e=s.fallback,u?(s=t.mode,u=t.child,h={mode:"hidden",children:h},(s&1)===0&&u!==null?(u.childLanes=0,u.pendingProps=h):u=Zs(h,s,0,null),e=vr(e,s,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Tl(n),t.memoizedState=Bl,e):Nl(t,h));if(o=e.memoizedState,o!==null&&(v=o.dehydrated,v!==null))return zh(e,t,h,s,v,o,n);if(u){u=s.fallback,h=t.mode,o=e.child,v=o.sibling;var S={mode:"hidden",children:s.children};return(h&1)===0&&t.child!==o?(s=t.child,s.childLanes=0,s.pendingProps=S,t.deletions=null):(s=er(o,S),s.subtreeFlags=o.subtreeFlags&14680064),v!==null?u=er(v,u):(u=vr(u,h,n,null),u.flags|=2),u.return=t,s.return=t,s.sibling=u,t.child=s,s=u,u=t.child,h=e.child.memoizedState,h=h===null?Tl(n):{baseLanes:h.baseLanes|n,cachePool:null,transitions:h.transitions},u.memoizedState=h,u.childLanes=e.childLanes&~n,t.memoizedState=Bl,s}return u=e.child,e=u.sibling,s=er(u,{mode:"visible",children:s.children}),(t.mode&1)===0&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Nl(e,t){return t=Zs({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Rs(e,t,n,s){return s!==null&&sl(s),zr(t,e.child,null,n),e=Nl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function zh(e,t,n,s,o,u,h){if(n)return t.flags&256?(t.flags&=-257,s=bl(Error(i(422))),Rs(e,t,h,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=s.fallback,o=t.mode,s=Zs({mode:"visible",children:s.children},o,0,null),u=vr(u,o,h,null),u.flags|=2,s.return=t,u.return=t,s.sibling=u,t.child=s,(t.mode&1)!==0&&zr(t,e.child,null,h),t.child.memoizedState=Tl(h),t.memoizedState=Bl,u);if((t.mode&1)===0)return Rs(e,t,h,null);if(o.data==="$!"){if(s=o.nextSibling&&o.nextSibling.dataset,s)var v=s.dgst;return s=v,u=Error(i(419)),s=bl(u,s,void 0),Rs(e,t,h,s)}if(v=(h&e.childLanes)!==0,Bt||v){if(s=ht,s!==null){switch(h&-h){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=(o&(s.suspendedLanes|h))!==0?0:o,o!==0&&o!==u.retryLane&&(u.retryLane=o,En(e,o),ln(s,e,o,-1))}return Ql(),s=bl(Error(i(421))),Rs(e,t,h,s)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=ep.bind(null,e),o._reactRetry=t,null):(e=u.treeContext,Ot=Gn(o.nextSibling),Rt=t,qe=!0,nn=null,e!==null&&(Wt[Vt++]=_n,Wt[Vt++]=Cn,Wt[Vt++]=cr,_n=e.id,Cn=e.overflow,cr=t),t=Nl(t,s.children),t.flags|=4096,t)}function Cc(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),ul(e.return,t,n)}function Pl(e,t,n,s,o){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:o}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=s,u.tail=n,u.tailMode=o)}function Ec(e,t,n){var s=t.pendingProps,o=s.revealOrder,u=s.tail;if(Ct(e,t,s.children,n),s=et.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cc(e,n,t);else if(e.tag===19)Cc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Ye(et,s),(t.mode&1)===0)t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Ts(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Pl(t,!1,o,n,u);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Ts(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Pl(t,!0,n,null,u);break;case"together":Pl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Os(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function An(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),mr|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,n=er(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=er(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Hh(e,t,n){switch(t.tag){case 3:wc(t),Ur();break;case 5:Ou(t);break;case 1:Ft(t.type)&&ws(t);break;case 4:fl(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,o=t.memoizedProps.value;Ye(As,s._currentValue),s._currentValue=o;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Ye(et,et.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?_c(e,t,n):(Ye(et,et.current&1),e=An(e,t,n),e!==null?e.sibling:null);Ye(et,et.current&1);break;case 19:if(s=(n&t.childLanes)!==0,(e.flags&128)!==0){if(s)return Ec(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ye(et,et.current),s)break;return null;case 22:case 23:return t.lanes=0,yc(e,t,n)}return An(e,t,n)}var bc,Ll,Ac,Dc;bc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ll=function(){},Ac=function(e,t,n,s){var o=e.memoizedProps;if(o!==s){e=t.stateNode,hr(pn.current);var u=null;switch(n){case"input":o=It(e,o),s=It(e,s),u=[];break;case"select":o=X({},o,{value:void 0}),s=X({},s,{value:void 0}),u=[];break;case"textarea":o=ri(e,o),s=ri(e,s),u=[];break;default:typeof o.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=ys)}jt(n,s);var h;n=null;for(N in o)if(!s.hasOwnProperty(N)&&o.hasOwnProperty(N)&&o[N]!=null)if(N==="style"){var v=o[N];for(h in v)v.hasOwnProperty(h)&&(n||(n={}),n[h]="")}else N!=="dangerouslySetInnerHTML"&&N!=="children"&&N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(c.hasOwnProperty(N)?u||(u=[]):(u=u||[]).push(N,null));for(N in s){var S=s[N];if(v=o!=null?o[N]:void 0,s.hasOwnProperty(N)&&S!==v&&(S!=null||v!=null))if(N==="style")if(v){for(h in v)!v.hasOwnProperty(h)||S&&S.hasOwnProperty(h)||(n||(n={}),n[h]="");for(h in S)S.hasOwnProperty(h)&&v[h]!==S[h]&&(n||(n={}),n[h]=S[h])}else n||(u||(u=[]),u.push(N,n)),n=S;else N==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,v=v?v.__html:void 0,S!=null&&v!==S&&(u=u||[]).push(N,S)):N==="children"?typeof S!="string"&&typeof S!="number"||(u=u||[]).push(N,""+S):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&(c.hasOwnProperty(N)?(S!=null&&N==="onScroll"&&Qe("scroll",e),u||v===S||(u=[])):(u=u||[]).push(N,S))}n&&(u=u||[]).push("style",n);var N=u;(t.updateQueue=N)&&(t.flags|=4)}},Dc=function(e,t,n,s){n!==s&&(t.flags|=4)};function Ii(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function wt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,s|=o.subtreeFlags&14680064,s|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,s|=o.subtreeFlags,s|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Gh(e,t,n){var s=t.pendingProps;switch(nl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(t),null;case 1:return Ft(t.type)&&ks(),wt(t),null;case 3:return s=t.stateNode,Wr(),Ke(Dt),Ke(vt),ml(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Es(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,nn!==null&&(Vl(nn),nn=null))),Ll(e,t),wt(t),null;case 5:hl(t);var o=hr(Bi.current);if(n=t.type,e!==null&&t.stateNode!=null)Ac(e,t,n,s,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(i(166));return wt(t),null}if(e=hr(pn.current),Es(t)){s=t.stateNode,n=t.type;var u=t.memoizedProps;switch(s[hn]=t,s[Ei]=u,e=(t.mode&1)!==0,n){case"dialog":Qe("cancel",s),Qe("close",s);break;case"iframe":case"object":case"embed":Qe("load",s);break;case"video":case"audio":for(o=0;o<Si.length;o++)Qe(Si[o],s);break;case"source":Qe("error",s);break;case"img":case"image":case"link":Qe("error",s),Qe("load",s);break;case"details":Qe("toggle",s);break;case"input":C(s,u),Qe("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!u.multiple},Qe("invalid",s);break;case"textarea":R(s,u),Qe("invalid",s)}jt(n,u),o=null;for(var h in u)if(u.hasOwnProperty(h)){var v=u[h];h==="children"?typeof v=="string"?s.textContent!==v&&(u.suppressHydrationWarning!==!0&&xs(s.textContent,v,e),o=["children",v]):typeof v=="number"&&s.textContent!==""+v&&(u.suppressHydrationWarning!==!0&&xs(s.textContent,v,e),o=["children",""+v]):c.hasOwnProperty(h)&&v!=null&&h==="onScroll"&&Qe("scroll",s)}switch(n){case"input":Ht(s),Ki(s,u,!0);break;case"textarea":Ht(s),De(s);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(s.onclick=ys)}s=o,t.updateQueue=s,s!==null&&(t.flags|=4)}else{h=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ge(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=h.createElement(n,{is:s.is}):(e=h.createElement(n),n==="select"&&(h=e,s.multiple?h.multiple=!0:s.size&&(h.size=s.size))):e=h.createElementNS(e,n),e[hn]=t,e[Ei]=s,bc(e,t,!1,!1),t.stateNode=e;e:{switch(h=dt(n,s),n){case"dialog":Qe("cancel",e),Qe("close",e),o=s;break;case"iframe":case"object":case"embed":Qe("load",e),o=s;break;case"video":case"audio":for(o=0;o<Si.length;o++)Qe(Si[o],e);o=s;break;case"source":Qe("error",e),o=s;break;case"img":case"image":case"link":Qe("error",e),Qe("load",e),o=s;break;case"details":Qe("toggle",e),o=s;break;case"input":C(e,s),o=It(e,s),Qe("invalid",e);break;case"option":o=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},o=X({},s,{value:void 0}),Qe("invalid",e);break;case"textarea":R(e,s),o=ri(e,s),Qe("invalid",e);break;default:o=s}jt(n,o),v=o;for(u in v)if(v.hasOwnProperty(u)){var S=v[u];u==="style"?Je(e,S):u==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&ze(e,S)):u==="children"?typeof S=="string"?(n!=="textarea"||S!=="")&&gt(e,S):typeof S=="number"&&gt(e,""+S):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(c.hasOwnProperty(u)?S!=null&&u==="onScroll"&&Qe("scroll",e):S!=null&&ue(e,u,S,h))}switch(n){case"input":Ht(e),Ki(e,s,!1);break;case"textarea":Ht(e),De(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Be(s.value));break;case"select":e.multiple=!!s.multiple,u=s.value,u!=null?mt(e,!!s.multiple,u,!1):s.defaultValue!=null&&mt(e,!!s.multiple,s.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=ys)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return wt(t),null;case 6:if(e&&t.stateNode!=null)Dc(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(i(166));if(n=hr(Bi.current),hr(pn.current),Es(t)){if(s=t.stateNode,n=t.memoizedProps,s[hn]=t,(u=s.nodeValue!==n)&&(e=Rt,e!==null))switch(e.tag){case 3:xs(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xs(s.nodeValue,n,(e.mode&1)!==0)}u&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[hn]=t,t.stateNode=s}return wt(t),null;case 13:if(Ke(et),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qe&&Ot!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Tu(),Ur(),t.flags|=98560,u=!1;else if(u=Es(t),s!==null&&s.dehydrated!==null){if(e===null){if(!u)throw Error(i(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));u[hn]=t}else Ur(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;wt(t),u=!1}else nn!==null&&(Vl(nn),nn=null),u=!0;if(!u)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(et.current&1)!==0?ct===0&&(ct=3):Ql())),t.updateQueue!==null&&(t.flags|=4),wt(t),null);case 4:return Wr(),Ll(e,t),e===null&&_i(t.stateNode.containerInfo),wt(t),null;case 10:return al(t.type._context),wt(t),null;case 17:return Ft(t.type)&&ks(),wt(t),null;case 19:if(Ke(et),u=t.memoizedState,u===null)return wt(t),null;if(s=(t.flags&128)!==0,h=u.rendering,h===null)if(s)Ii(u,!1);else{if(ct!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=Ts(e),h!==null){for(t.flags|=128,Ii(u,!1),s=h.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)u=n,e=s,u.flags&=14680066,h=u.alternate,h===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=h.childLanes,u.lanes=h.lanes,u.child=h.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=h.memoizedProps,u.memoizedState=h.memoizedState,u.updateQueue=h.updateQueue,u.type=h.type,e=h.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ye(et,et.current&1|2),t.child}e=e.sibling}u.tail!==null&&it()>Qr&&(t.flags|=128,s=!0,Ii(u,!1),t.lanes=4194304)}else{if(!s)if(e=Ts(h),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ii(u,!0),u.tail===null&&u.tailMode==="hidden"&&!h.alternate&&!qe)return wt(t),null}else 2*it()-u.renderingStartTime>Qr&&n!==1073741824&&(t.flags|=128,s=!0,Ii(u,!1),t.lanes=4194304);u.isBackwards?(h.sibling=t.child,t.child=h):(n=u.last,n!==null?n.sibling=h:t.child=h,u.last=h)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=it(),t.sibling=null,n=et.current,Ye(et,s?n&1|2:n&1),t):(wt(t),null);case 22:case 23:return Yl(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&(t.mode&1)!==0?(Ut&1073741824)!==0&&(wt(t),t.subtreeFlags&6&&(t.flags|=8192)):wt(t),null;case 24:return null;case 25:return null}throw Error(i(156,t.tag))}function Wh(e,t){switch(nl(t),t.tag){case 1:return Ft(t.type)&&ks(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wr(),Ke(Dt),Ke(vt),ml(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return hl(t),null;case 13:if(Ke(et),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Ur()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ke(et),null;case 4:return Wr(),null;case 10:return al(t.type._context),null;case 22:case 23:return Yl(),null;case 24:return null;default:return null}}var Us=!1,St=!1,Vh=typeof WeakSet=="function"?WeakSet:Set,de=null;function $r(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){nt(e,t,s)}else n.current=null}function Il(e,t,n){try{n()}catch(s){nt(e,t,s)}}var Fc=!1;function $h(e,t){if(Yo=os,e=lu(),Oo(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var o=s.anchorOffset,u=s.focusNode;s=s.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var h=0,v=-1,S=-1,N=0,H=0,W=e,z=null;t:for(;;){for(var le;W!==n||o!==0&&W.nodeType!==3||(v=h+o),W!==u||s!==0&&W.nodeType!==3||(S=h+s),W.nodeType===3&&(h+=W.nodeValue.length),(le=W.firstChild)!==null;)z=W,W=le;for(;;){if(W===e)break t;if(z===n&&++N===o&&(v=h),z===u&&++H===s&&(S=h),(le=W.nextSibling)!==null)break;W=z,z=W.parentNode}W=le}n=v===-1||S===-1?null:{start:v,end:S}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qo={focusedElem:e,selectionRange:n},os=!1,de=t;de!==null;)if(t=de,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,de=e;else for(;de!==null;){t=de;try{var he=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var me=he.memoizedProps,st=he.memoizedState,A=t.stateNode,_=A.getSnapshotBeforeUpdate(t.elementType===t.type?me:rn(t.type,me),st);A.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var F=t.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(Q){nt(t,t.return,Q)}if(e=t.sibling,e!==null){e.return=t.return,de=e;break}de=t.return}return he=Fc,Fc=!1,he}function ji(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var o=s=s.next;do{if((o.tag&e)===e){var u=o.destroy;o.destroy=void 0,u!==void 0&&Il(t,n,u)}o=o.next}while(o!==s)}}function zs(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function jl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Bc(e){var t=e.alternate;t!==null&&(e.alternate=null,Bc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[hn],delete t[Ei],delete t[Jo],delete t[Dh],delete t[Fh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Tc(e){return e.tag===5||e.tag===3||e.tag===4}function Nc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Tc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ml(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ys));else if(s!==4&&(e=e.child,e!==null))for(Ml(e,t,n),e=e.sibling;e!==null;)Ml(e,t,n),e=e.sibling}function Rl(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Rl(e,t,n),e=e.sibling;e!==null;)Rl(e,t,n),e=e.sibling}var xt=null,sn=!1;function Kn(e,t,n){for(n=n.child;n!==null;)Pc(e,t,n),n=n.sibling}function Pc(e,t,n){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(es,n)}catch{}switch(n.tag){case 5:St||$r(n,t);case 6:var s=xt,o=sn;xt=null,Kn(e,t,n),xt=s,sn=o,xt!==null&&(sn?(e=xt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):xt.removeChild(n.stateNode));break;case 18:xt!==null&&(sn?(e=xt,n=n.stateNode,e.nodeType===8?Zo(e.parentNode,n):e.nodeType===1&&Zo(e,n),pi(e)):Zo(xt,n.stateNode));break;case 4:s=xt,o=sn,xt=n.stateNode.containerInfo,sn=!0,Kn(e,t,n),xt=s,sn=o;break;case 0:case 11:case 14:case 15:if(!St&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){o=s=s.next;do{var u=o,h=u.destroy;u=u.tag,h!==void 0&&((u&2)!==0||(u&4)!==0)&&Il(n,t,h),o=o.next}while(o!==s)}Kn(e,t,n);break;case 1:if(!St&&($r(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(v){nt(n,t,v)}Kn(e,t,n);break;case 21:Kn(e,t,n);break;case 22:n.mode&1?(St=(s=St)||n.memoizedState!==null,Kn(e,t,n),St=s):Kn(e,t,n);break;default:Kn(e,t,n)}}function Lc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Vh),t.forEach(function(s){var o=tp.bind(null,e,s);n.has(s)||(n.add(s),s.then(o,o))})}}function on(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];try{var u=e,h=t,v=h;e:for(;v!==null;){switch(v.tag){case 5:xt=v.stateNode,sn=!1;break e;case 3:xt=v.stateNode.containerInfo,sn=!0;break e;case 4:xt=v.stateNode.containerInfo,sn=!0;break e}v=v.return}if(xt===null)throw Error(i(160));Pc(u,h,o),xt=null,sn=!1;var S=o.alternate;S!==null&&(S.return=null),o.return=null}catch(N){nt(o,t,N)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Ic(t,e),t=t.sibling}function Ic(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(on(t,e),gn(e),s&4){try{ji(3,e,e.return),zs(3,e)}catch(me){nt(e,e.return,me)}try{ji(5,e,e.return)}catch(me){nt(e,e.return,me)}}break;case 1:on(t,e),gn(e),s&512&&n!==null&&$r(n,n.return);break;case 5:if(on(t,e),gn(e),s&512&&n!==null&&$r(n,n.return),e.flags&32){var o=e.stateNode;try{gt(o,"")}catch(me){nt(e,e.return,me)}}if(s&4&&(o=e.stateNode,o!=null)){var u=e.memoizedProps,h=n!==null?n.memoizedProps:u,v=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{v==="input"&&u.type==="radio"&&u.name!=null&&at(o,u),dt(v,h);var N=dt(v,u);for(h=0;h<S.length;h+=2){var H=S[h],W=S[h+1];H==="style"?Je(o,W):H==="dangerouslySetInnerHTML"?ze(o,W):H==="children"?gt(o,W):ue(o,H,W,N)}switch(v){case"input":ni(o,u);break;case"textarea":_e(o,u);break;case"select":var z=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!u.multiple;var le=u.value;le!=null?mt(o,!!u.multiple,le,!1):z!==!!u.multiple&&(u.defaultValue!=null?mt(o,!!u.multiple,u.defaultValue,!0):mt(o,!!u.multiple,u.multiple?[]:"",!1))}o[Ei]=u}catch(me){nt(e,e.return,me)}}break;case 6:if(on(t,e),gn(e),s&4){if(e.stateNode===null)throw Error(i(162));o=e.stateNode,u=e.memoizedProps;try{o.nodeValue=u}catch(me){nt(e,e.return,me)}}break;case 3:if(on(t,e),gn(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{pi(t.containerInfo)}catch(me){nt(e,e.return,me)}break;case 4:on(t,e),gn(e);break;case 13:on(t,e),gn(e),o=e.child,o.flags&8192&&(u=o.memoizedState!==null,o.stateNode.isHidden=u,!u||o.alternate!==null&&o.alternate.memoizedState!==null||(zl=it())),s&4&&Lc(e);break;case 22:if(H=n!==null&&n.memoizedState!==null,e.mode&1?(St=(N=St)||H,on(t,e),St=N):on(t,e),gn(e),s&8192){if(N=e.memoizedState!==null,(e.stateNode.isHidden=N)&&!H&&(e.mode&1)!==0)for(de=e,H=e.child;H!==null;){for(W=de=H;de!==null;){switch(z=de,le=z.child,z.tag){case 0:case 11:case 14:case 15:ji(4,z,z.return);break;case 1:$r(z,z.return);var he=z.stateNode;if(typeof he.componentWillUnmount=="function"){s=z,n=z.return;try{t=s,he.props=t.memoizedProps,he.state=t.memoizedState,he.componentWillUnmount()}catch(me){nt(s,n,me)}}break;case 5:$r(z,z.return);break;case 22:if(z.memoizedState!==null){Rc(W);continue}}le!==null?(le.return=z,de=le):Rc(W)}H=H.sibling}e:for(H=null,W=e;;){if(W.tag===5){if(H===null){H=W;try{o=W.stateNode,N?(u=o.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(v=W.stateNode,S=W.memoizedProps.style,h=S!=null&&S.hasOwnProperty("display")?S.display:null,v.style.display=$e("display",h))}catch(me){nt(e,e.return,me)}}}else if(W.tag===6){if(H===null)try{W.stateNode.nodeValue=N?"":W.memoizedProps}catch(me){nt(e,e.return,me)}}else if((W.tag!==22&&W.tag!==23||W.memoizedState===null||W===e)&&W.child!==null){W.child.return=W,W=W.child;continue}if(W===e)break e;for(;W.sibling===null;){if(W.return===null||W.return===e)break e;H===W&&(H=null),W=W.return}H===W&&(H=null),W.sibling.return=W.return,W=W.sibling}}break;case 19:on(t,e),gn(e),s&4&&Lc(e);break;case 21:break;default:on(t,e),gn(e)}}function gn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Tc(n)){var s=n;break e}n=n.return}throw Error(i(160))}switch(s.tag){case 5:var o=s.stateNode;s.flags&32&&(gt(o,""),s.flags&=-33);var u=Nc(e);Rl(e,u,o);break;case 3:case 4:var h=s.stateNode.containerInfo,v=Nc(e);Ml(e,v,h);break;default:throw Error(i(161))}}catch(S){nt(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Yh(e,t,n){de=e,jc(e)}function jc(e,t,n){for(var s=(e.mode&1)!==0;de!==null;){var o=de,u=o.child;if(o.tag===22&&s){var h=o.memoizedState!==null||Us;if(!h){var v=o.alternate,S=v!==null&&v.memoizedState!==null||St;v=Us;var N=St;if(Us=h,(St=S)&&!N)for(de=o;de!==null;)h=de,S=h.child,h.tag===22&&h.memoizedState!==null?Oc(o):S!==null?(S.return=h,de=S):Oc(o);for(;u!==null;)de=u,jc(u),u=u.sibling;de=o,Us=v,St=N}Mc(e)}else(o.subtreeFlags&8772)!==0&&u!==null?(u.return=o,de=u):Mc(e)}}function Mc(e){for(;de!==null;){var t=de;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:St||zs(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!St)if(n===null)s.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:rn(t.type,n.memoizedProps);s.componentDidUpdate(o,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&Ru(t,u,s);break;case 3:var h=t.updateQueue;if(h!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ru(t,h,n)}break;case 5:var v=t.stateNode;if(n===null&&t.flags&4){n=v;var S=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&n.focus();break;case"img":S.src&&(n.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var N=t.alternate;if(N!==null){var H=N.memoizedState;if(H!==null){var W=H.dehydrated;W!==null&&pi(W)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}St||t.flags&512&&jl(t)}catch(z){nt(t,t.return,z)}}if(t===e){de=null;break}if(n=t.sibling,n!==null){n.return=t.return,de=n;break}de=t.return}}function Rc(e){for(;de!==null;){var t=de;if(t===e){de=null;break}var n=t.sibling;if(n!==null){n.return=t.return,de=n;break}de=t.return}}function Oc(e){for(;de!==null;){var t=de;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{zs(4,t)}catch(S){nt(t,n,S)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var o=t.return;try{s.componentDidMount()}catch(S){nt(t,o,S)}}var u=t.return;try{jl(t)}catch(S){nt(t,u,S)}break;case 5:var h=t.return;try{jl(t)}catch(S){nt(t,h,S)}}}catch(S){nt(t,t.return,S)}if(t===e){de=null;break}var v=t.sibling;if(v!==null){v.return=t.return,de=v;break}de=t.return}}var Qh=Math.ceil,Hs=q.ReactCurrentDispatcher,Ol=q.ReactCurrentOwner,Qt=q.ReactCurrentBatchConfig,Me=0,ht=null,ot=null,yt=0,Ut=0,Yr=Wn(0),ct=0,Mi=null,mr=0,Gs=0,Ul=0,Ri=null,Tt=null,zl=0,Qr=1/0,Dn=null,Ws=!1,Hl=null,Xn=null,Vs=!1,Zn=null,$s=0,Oi=0,Gl=null,Ys=-1,Qs=0;function Et(){return(Me&6)!==0?it():Ys!==-1?Ys:Ys=it()}function Jn(e){return(e.mode&1)===0?1:(Me&2)!==0&&yt!==0?yt&-yt:Th.transition!==null?(Qs===0&&(Qs=Na()),Qs):(e=He,e!==0||(e=window.event,e=e===void 0?16:za(e.type)),e)}function ln(e,t,n,s){if(50<Oi)throw Oi=0,Gl=null,Error(i(185));ui(e,n,s),((Me&2)===0||e!==ht)&&(e===ht&&((Me&2)===0&&(Gs|=n),ct===4&&qn(e,yt)),Nt(e,s),n===1&&Me===0&&(t.mode&1)===0&&(Qr=it()+500,Ss&&$n()))}function Nt(e,t){var n=e.callbackNode;Tf(e,t);var s=rs(e,e===ht?yt:0);if(s===0)n!==null&&Fa(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&Fa(n),t===1)e.tag===0?Bh(zc.bind(null,e)):bu(zc.bind(null,e)),bh(function(){(Me&6)===0&&$n()}),n=null;else{switch(Pa(s)){case 1:n=So;break;case 4:n=Ba;break;case 16:n=qi;break;case 536870912:n=Ta;break;default:n=qi}n=Kc(n,Uc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Uc(e,t){if(Ys=-1,Qs=0,(Me&6)!==0)throw Error(i(327));var n=e.callbackNode;if(Kr()&&e.callbackNode!==n)return null;var s=rs(e,e===ht?yt:0);if(s===0)return null;if((s&30)!==0||(s&e.expiredLanes)!==0||t)t=Ks(e,s);else{t=s;var o=Me;Me|=2;var u=Gc();(ht!==e||yt!==t)&&(Dn=null,Qr=it()+500,xr(e,t));do try{Zh();break}catch(v){Hc(e,v)}while(!0);ll(),Hs.current=u,Me=o,ot!==null?t=0:(ht=null,yt=0,t=ct)}if(t!==0){if(t===2&&(o=_o(e),o!==0&&(s=o,t=Wl(e,o))),t===1)throw n=Mi,xr(e,0),qn(e,s),Nt(e,it()),n;if(t===6)qn(e,s);else{if(o=e.current.alternate,(s&30)===0&&!Kh(o)&&(t=Ks(e,s),t===2&&(u=_o(e),u!==0&&(s=u,t=Wl(e,u))),t===1))throw n=Mi,xr(e,0),qn(e,s),Nt(e,it()),n;switch(e.finishedWork=o,e.finishedLanes=s,t){case 0:case 1:throw Error(i(345));case 2:yr(e,Tt,Dn);break;case 3:if(qn(e,s),(s&130023424)===s&&(t=zl+500-it(),10<t)){if(rs(e,0)!==0)break;if(o=e.suspendedLanes,(o&s)!==s){Et(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Xo(yr.bind(null,e,Tt,Dn),t);break}yr(e,Tt,Dn);break;case 4:if(qn(e,s),(s&4194240)===s)break;for(t=e.eventTimes,o=-1;0<s;){var h=31-en(s);u=1<<h,h=t[h],h>o&&(o=h),s&=~u}if(s=o,s=it()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Qh(s/1960))-s,10<s){e.timeoutHandle=Xo(yr.bind(null,e,Tt,Dn),s);break}yr(e,Tt,Dn);break;case 5:yr(e,Tt,Dn);break;default:throw Error(i(329))}}}return Nt(e,it()),e.callbackNode===n?Uc.bind(null,e):null}function Wl(e,t){var n=Ri;return e.current.memoizedState.isDehydrated&&(xr(e,t).flags|=256),e=Ks(e,t),e!==2&&(t=Tt,Tt=n,t!==null&&Vl(t)),e}function Vl(e){Tt===null?Tt=e:Tt.push.apply(Tt,e)}function Kh(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var o=n[s],u=o.getSnapshot;o=o.value;try{if(!tn(u(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qn(e,t){for(t&=~Ul,t&=~Gs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-en(t),s=1<<n;e[n]=-1,t&=~s}}function zc(e){if((Me&6)!==0)throw Error(i(327));Kr();var t=rs(e,0);if((t&1)===0)return Nt(e,it()),null;var n=Ks(e,t);if(e.tag!==0&&n===2){var s=_o(e);s!==0&&(t=s,n=Wl(e,s))}if(n===1)throw n=Mi,xr(e,0),qn(e,t),Nt(e,it()),n;if(n===6)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yr(e,Tt,Dn),Nt(e,it()),null}function $l(e,t){var n=Me;Me|=1;try{return e(t)}finally{Me=n,Me===0&&(Qr=it()+500,Ss&&$n())}}function gr(e){Zn!==null&&Zn.tag===0&&(Me&6)===0&&Kr();var t=Me;Me|=1;var n=Qt.transition,s=He;try{if(Qt.transition=null,He=1,e)return e()}finally{He=s,Qt.transition=n,Me=t,(Me&6)===0&&$n()}}function Yl(){Ut=Yr.current,Ke(Yr)}function xr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Eh(n)),ot!==null)for(n=ot.return;n!==null;){var s=n;switch(nl(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ks();break;case 3:Wr(),Ke(Dt),Ke(vt),ml();break;case 5:hl(s);break;case 4:Wr();break;case 13:Ke(et);break;case 19:Ke(et);break;case 10:al(s.type._context);break;case 22:case 23:Yl()}n=n.return}if(ht=e,ot=e=er(e.current,null),yt=Ut=t,ct=0,Mi=null,Ul=Gs=mr=0,Tt=Ri=null,fr!==null){for(t=0;t<fr.length;t++)if(n=fr[t],s=n.interleaved,s!==null){n.interleaved=null;var o=s.next,u=n.pending;if(u!==null){var h=u.next;u.next=o,s.next=h}n.pending=s}fr=null}return e}function Hc(e,t){do{var n=ot;try{if(ll(),Ns.current=js,Ps){for(var s=tt.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Ps=!1}if(pr=0,ft=ut=tt=null,Ti=!1,Ni=0,Ol.current=null,n===null||n.return===null){ct=1,Mi=t,ot=null;break}e:{var u=e,h=n.return,v=n,S=t;if(t=yt,v.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var N=S,H=v,W=H.tag;if((H.mode&1)===0&&(W===0||W===11||W===15)){var z=H.alternate;z?(H.updateQueue=z.updateQueue,H.memoizedState=z.memoizedState,H.lanes=z.lanes):(H.updateQueue=null,H.memoizedState=null)}var le=hc(h);if(le!==null){le.flags&=-257,pc(le,h,v,u,t),le.mode&1&&fc(u,N,t),t=le,S=N;var he=t.updateQueue;if(he===null){var me=new Set;me.add(S),t.updateQueue=me}else he.add(S);break e}else{if((t&1)===0){fc(u,N,t),Ql();break e}S=Error(i(426))}}else if(qe&&v.mode&1){var st=hc(h);if(st!==null){(st.flags&65536)===0&&(st.flags|=256),pc(st,h,v,u,t),sl(Vr(S,v));break e}}u=S=Vr(S,v),ct!==4&&(ct=2),Ri===null?Ri=[u]:Ri.push(u),u=h;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var A=cc(u,S,t);Mu(u,A);break e;case 1:v=S;var _=u.type,F=u.stateNode;if((u.flags&128)===0&&(typeof _.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(Xn===null||!Xn.has(F)))){u.flags|=65536,t&=-t,u.lanes|=t;var Q=dc(u,v,t);Mu(u,Q);break e}}u=u.return}while(u!==null)}Vc(n)}catch(xe){t=xe,ot===n&&n!==null&&(ot=n=n.return);continue}break}while(!0)}function Gc(){var e=Hs.current;return Hs.current=js,e===null?js:e}function Ql(){(ct===0||ct===3||ct===2)&&(ct=4),ht===null||(mr&268435455)===0&&(Gs&268435455)===0||qn(ht,yt)}function Ks(e,t){var n=Me;Me|=2;var s=Gc();(ht!==e||yt!==t)&&(Dn=null,xr(e,t));do try{Xh();break}catch(o){Hc(e,o)}while(!0);if(ll(),Me=n,Hs.current=s,ot!==null)throw Error(i(261));return ht=null,yt=0,ct}function Xh(){for(;ot!==null;)Wc(ot)}function Zh(){for(;ot!==null&&!Sf();)Wc(ot)}function Wc(e){var t=Qc(e.alternate,e,Ut);e.memoizedProps=e.pendingProps,t===null?Vc(e):ot=t,Ol.current=null}function Vc(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=Gh(n,t,Ut),n!==null){ot=n;return}}else{if(n=Wh(n,t),n!==null){n.flags&=32767,ot=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ct=6,ot=null;return}}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);ct===0&&(ct=5)}function yr(e,t,n){var s=He,o=Qt.transition;try{Qt.transition=null,He=1,Jh(e,t,n,s)}finally{Qt.transition=o,He=s}return null}function Jh(e,t,n,s){do Kr();while(Zn!==null);if((Me&6)!==0)throw Error(i(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var u=n.lanes|n.childLanes;if(Nf(e,u),e===ht&&(ot=ht=null,yt=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Vs||(Vs=!0,Kc(qi,function(){return Kr(),null})),u=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||u){u=Qt.transition,Qt.transition=null;var h=He;He=1;var v=Me;Me|=4,Ol.current=null,$h(e,n),Ic(n,e),yh(Qo),os=!!Yo,Qo=Yo=null,e.current=n,Yh(n),_f(),Me=v,He=h,Qt.transition=u}else e.current=n;if(Vs&&(Vs=!1,Zn=e,$s=o),u=e.pendingLanes,u===0&&(Xn=null),bf(n.stateNode),Nt(e,it()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],s(o.value,{componentStack:o.stack,digest:o.digest});if(Ws)throw Ws=!1,e=Hl,Hl=null,e;return($s&1)!==0&&e.tag!==0&&Kr(),u=e.pendingLanes,(u&1)!==0?e===Gl?Oi++:(Oi=0,Gl=e):Oi=0,$n(),null}function Kr(){if(Zn!==null){var e=Pa($s),t=Qt.transition,n=He;try{if(Qt.transition=null,He=16>e?16:e,Zn===null)var s=!1;else{if(e=Zn,Zn=null,$s=0,(Me&6)!==0)throw Error(i(331));var o=Me;for(Me|=4,de=e.current;de!==null;){var u=de,h=u.child;if((de.flags&16)!==0){var v=u.deletions;if(v!==null){for(var S=0;S<v.length;S++){var N=v[S];for(de=N;de!==null;){var H=de;switch(H.tag){case 0:case 11:case 15:ji(8,H,u)}var W=H.child;if(W!==null)W.return=H,de=W;else for(;de!==null;){H=de;var z=H.sibling,le=H.return;if(Bc(H),H===N){de=null;break}if(z!==null){z.return=le,de=z;break}de=le}}}var he=u.alternate;if(he!==null){var me=he.child;if(me!==null){he.child=null;do{var st=me.sibling;me.sibling=null,me=st}while(me!==null)}}de=u}}if((u.subtreeFlags&2064)!==0&&h!==null)h.return=u,de=h;else e:for(;de!==null;){if(u=de,(u.flags&2048)!==0)switch(u.tag){case 0:case 11:case 15:ji(9,u,u.return)}var A=u.sibling;if(A!==null){A.return=u.return,de=A;break e}de=u.return}}var _=e.current;for(de=_;de!==null;){h=de;var F=h.child;if((h.subtreeFlags&2064)!==0&&F!==null)F.return=h,de=F;else e:for(h=_;de!==null;){if(v=de,(v.flags&2048)!==0)try{switch(v.tag){case 0:case 11:case 15:zs(9,v)}}catch(xe){nt(v,v.return,xe)}if(v===h){de=null;break e}var Q=v.sibling;if(Q!==null){Q.return=v.return,de=Q;break e}de=v.return}}if(Me=o,$n(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(es,e)}catch{}s=!0}return s}finally{He=n,Qt.transition=t}}return!1}function $c(e,t,n){t=Vr(n,t),t=cc(e,t,1),e=Qn(e,t,1),t=Et(),e!==null&&(ui(e,1,t),Nt(e,t))}function nt(e,t,n){if(e.tag===3)$c(e,e,n);else for(;t!==null;){if(t.tag===3){$c(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Xn===null||!Xn.has(s))){e=Vr(n,e),e=dc(t,e,1),t=Qn(t,e,1),e=Et(),t!==null&&(ui(t,1,e),Nt(t,e));break}}t=t.return}}function qh(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=Et(),e.pingedLanes|=e.suspendedLanes&n,ht===e&&(yt&n)===n&&(ct===4||ct===3&&(yt&130023424)===yt&&500>it()-zl?xr(e,0):Ul|=n),Nt(e,t)}function Yc(e,t){t===0&&((e.mode&1)===0?t=1:(t=ns,ns<<=1,(ns&130023424)===0&&(ns=4194304)));var n=Et();e=En(e,t),e!==null&&(ui(e,t,n),Nt(e,n))}function ep(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Yc(e,n)}function tp(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(i(314))}s!==null&&s.delete(t),Yc(e,n)}var Qc;Qc=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Dt.current)Bt=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return Bt=!1,Hh(e,t,n);Bt=(e.flags&131072)!==0}else Bt=!1,qe&&(t.flags&1048576)!==0&&Au(t,Cs,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Os(e,t),e=t.pendingProps;var o=Mr(t,vt.current);Gr(t,n),o=yl(null,t,s,e,o,n);var u=vl();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ft(s)?(u=!0,ws(t)):u=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,dl(t),o.updater=Ms,t.stateNode=o,o._reactInternals=t,El(t,s,e,n),t=Fl(null,t,s,!0,u,n)):(t.tag=0,qe&&u&&tl(t),Ct(null,t,o,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Os(e,t),e=t.pendingProps,o=s._init,s=o(s._payload),t.type=s,o=t.tag=rp(s),e=rn(s,e),o){case 0:t=Dl(null,t,s,e,n);break e;case 1:t=kc(null,t,s,e,n);break e;case 11:t=mc(null,t,s,e,n);break e;case 14:t=gc(null,t,s,rn(s.type,e),n);break e}throw Error(i(306,s,""))}return t;case 0:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:rn(s,o),Dl(e,t,s,o,n);case 1:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:rn(s,o),kc(e,t,s,o,n);case 3:e:{if(wc(t),e===null)throw Error(i(387));s=t.pendingProps,u=t.memoizedState,o=u.element,ju(e,t),Bs(t,s,null,n);var h=t.memoizedState;if(s=h.element,u.isDehydrated)if(u={element:s,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){o=Vr(Error(i(423)),t),t=Sc(e,t,s,n,o);break e}else if(s!==o){o=Vr(Error(i(424)),t),t=Sc(e,t,s,n,o);break e}else for(Ot=Gn(t.stateNode.containerInfo.firstChild),Rt=t,qe=!0,nn=null,n=Lu(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ur(),s===o){t=An(e,t,n);break e}Ct(e,t,s,n)}t=t.child}return t;case 5:return Ou(t),e===null&&il(t),s=t.type,o=t.pendingProps,u=e!==null?e.memoizedProps:null,h=o.children,Ko(s,o)?h=null:u!==null&&Ko(s,u)&&(t.flags|=32),vc(e,t),Ct(e,t,h,n),t.child;case 6:return e===null&&il(t),null;case 13:return _c(e,t,n);case 4:return fl(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=zr(t,null,s,n):Ct(e,t,s,n),t.child;case 11:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:rn(s,o),mc(e,t,s,o,n);case 7:return Ct(e,t,t.pendingProps,n),t.child;case 8:return Ct(e,t,t.pendingProps.children,n),t.child;case 12:return Ct(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,o=t.pendingProps,u=t.memoizedProps,h=o.value,Ye(As,s._currentValue),s._currentValue=h,u!==null)if(tn(u.value,h)){if(u.children===o.children&&!Dt.current){t=An(e,t,n);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var v=u.dependencies;if(v!==null){h=u.child;for(var S=v.firstContext;S!==null;){if(S.context===s){if(u.tag===1){S=bn(-1,n&-n),S.tag=2;var N=u.updateQueue;if(N!==null){N=N.shared;var H=N.pending;H===null?S.next=S:(S.next=H.next,H.next=S),N.pending=S}}u.lanes|=n,S=u.alternate,S!==null&&(S.lanes|=n),ul(u.return,n,t),v.lanes|=n;break}S=S.next}}else if(u.tag===10)h=u.type===t.type?null:u.child;else if(u.tag===18){if(h=u.return,h===null)throw Error(i(341));h.lanes|=n,v=h.alternate,v!==null&&(v.lanes|=n),ul(h,n,t),h=u.sibling}else h=u.child;if(h!==null)h.return=u;else for(h=u;h!==null;){if(h===t){h=null;break}if(u=h.sibling,u!==null){u.return=h.return,h=u;break}h=h.return}u=h}Ct(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,s=t.pendingProps.children,Gr(t,n),o=$t(o),s=s(o),t.flags|=1,Ct(e,t,s,n),t.child;case 14:return s=t.type,o=rn(s,t.pendingProps),o=rn(s.type,o),gc(e,t,s,o,n);case 15:return xc(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:rn(s,o),Os(e,t),t.tag=1,Ft(s)?(e=!0,ws(t)):e=!1,Gr(t,n),ac(t,s,o),El(t,s,o,n),Fl(null,t,s,!0,e,n);case 19:return Ec(e,t,n);case 22:return yc(e,t,n)}throw Error(i(156,t.tag))};function Kc(e,t){return Da(e,t)}function np(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(e,t,n,s){return new np(e,t,n,s)}function Kl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function rp(e){if(typeof e=="function")return Kl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ne)return 11;if(e===fe)return 14}return 2}function er(e,t){var n=e.alternate;return n===null?(n=Kt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Xs(e,t,n,s,o,u){var h=2;if(s=e,typeof e=="function")Kl(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case ae:return vr(n.children,o,u,t);case Y:h=8,o|=8;break;case ke:return e=Kt(12,n,t,o|2),e.elementType=ke,e.lanes=u,e;case ye:return e=Kt(13,n,t,o),e.elementType=ye,e.lanes=u,e;case I:return e=Kt(19,n,t,o),e.elementType=I,e.lanes=u,e;case oe:return Zs(n,o,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case we:h=10;break e;case ie:h=9;break e;case Ne:h=11;break e;case fe:h=14;break e;case Te:h=16,s=null;break e}throw Error(i(130,e==null?e:typeof e,""))}return t=Kt(h,n,t,o),t.elementType=e,t.type=s,t.lanes=u,t}function vr(e,t,n,s){return e=Kt(7,e,s,t),e.lanes=n,e}function Zs(e,t,n,s){return e=Kt(22,e,s,t),e.elementType=oe,e.lanes=n,e.stateNode={isHidden:!1},e}function Xl(e,t,n){return e=Kt(6,e,null,t),e.lanes=n,e}function Zl(e,t,n){return t=Kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ip(e,t,n,s,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Co(0),this.expirationTimes=Co(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Co(0),this.identifierPrefix=s,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Jl(e,t,n,s,o,u,h,v,S){return e=new ip(e,t,n,v,S),t===1?(t=1,u===!0&&(t|=8)):t=0,u=Kt(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},dl(u),e}function sp(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function Xc(e){if(!e)return Vn;e=e._reactInternals;e:{if(lr(e)!==e||e.tag!==1)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ft(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(i(171))}if(e.tag===1){var n=e.type;if(Ft(n))return Cu(e,n,t)}return t}function Zc(e,t,n,s,o,u,h,v,S){return e=Jl(n,s,!0,e,o,u,h,v,S),e.context=Xc(null),n=e.current,s=Et(),o=Jn(n),u=bn(s,o),u.callback=t??null,Qn(n,u,o),e.current.lanes=o,ui(e,o,s),Nt(e,s),e}function Js(e,t,n,s){var o=t.current,u=Et(),h=Jn(o);return n=Xc(n),t.context===null?t.context=n:t.pendingContext=n,t=bn(u,h),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Qn(o,t,h),e!==null&&(ln(e,o,h,u),Fs(e,o,h)),h}function qs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Jc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ql(e,t){Jc(e,t),(e=e.alternate)&&Jc(e,t)}function op(){return null}var qc=typeof reportError=="function"?reportError:function(e){console.error(e)};function ea(e){this._internalRoot=e}eo.prototype.render=ea.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));Js(e,t,null,null)},eo.prototype.unmount=ea.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gr(function(){Js(null,e,null,null)}),t[wn]=null}};function eo(e){this._internalRoot=e}eo.prototype.unstable_scheduleHydration=function(e){if(e){var t=ja();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Un.length&&t!==0&&t<Un[n].priority;n++);Un.splice(n,0,e),n===0&&Oa(e)}};function ta(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function to(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ed(){}function lp(e,t,n,s,o){if(o){if(typeof s=="function"){var u=s;s=function(){var N=qs(h);u.call(N)}}var h=Zc(t,s,e,0,null,!1,!1,"",ed);return e._reactRootContainer=h,e[wn]=h.current,_i(e.nodeType===8?e.parentNode:e),gr(),h}for(;o=e.lastChild;)e.removeChild(o);if(typeof s=="function"){var v=s;s=function(){var N=qs(S);v.call(N)}}var S=Jl(e,0,!1,null,null,!1,!1,"",ed);return e._reactRootContainer=S,e[wn]=S.current,_i(e.nodeType===8?e.parentNode:e),gr(function(){Js(t,S,n,s)}),S}function no(e,t,n,s,o){var u=n._reactRootContainer;if(u){var h=u;if(typeof o=="function"){var v=o;o=function(){var S=qs(h);v.call(S)}}Js(t,h,e,o)}else h=lp(n,t,e,o,s);return qs(h)}La=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ai(t.pendingLanes);n!==0&&(Eo(t,n|1),Nt(t,it()),(Me&6)===0&&(Qr=it()+500,$n()))}break;case 13:gr(function(){var s=En(e,1);if(s!==null){var o=Et();ln(s,e,1,o)}}),ql(e,1)}},bo=function(e){if(e.tag===13){var t=En(e,134217728);if(t!==null){var n=Et();ln(t,e,134217728,n)}ql(e,134217728)}},Ia=function(e){if(e.tag===13){var t=Jn(e),n=En(e,t);if(n!==null){var s=Et();ln(n,e,t,s)}ql(e,t)}},ja=function(){return He},Ma=function(e,t){var n=He;try{return He=e,t()}finally{He=n}},Tn=function(e,t,n){switch(t){case"input":if(ni(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var o=vs(s);if(!o)throw Error(i(90));dn(s),ni(s,o)}}}break;case"textarea":_e(e,n);break;case"select":t=n.value,t!=null&&mt(e,!!n.multiple,t,!1)}},Ar=$l,si=gr;var ap={usingClientEntryPoint:!1,Events:[bi,Ir,vs,In,ii,$l]},Ui={findFiberByHostInstance:ar,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},up={bundleType:Ui.bundleType,version:Ui.version,rendererPackageName:Ui.rendererPackageName,rendererConfig:Ui.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ba(e),e===null?null:e.stateNode},findFiberByHostInstance:Ui.findFiberByHostInstance||op,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ro=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ro.isDisabled&&ro.supportsFiber)try{es=ro.inject(up),fn=ro}catch{}}return Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ap,Pt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ta(t))throw Error(i(200));return sp(e,t,null,n)},Pt.createRoot=function(e,t){if(!ta(e))throw Error(i(299));var n=!1,s="",o=qc;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Jl(e,1,!1,null,null,n,!1,s,o),e[wn]=t.current,_i(e.nodeType===8?e.parentNode:e),new ea(t)},Pt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=ba(t),e=e===null?null:e.stateNode,e},Pt.flushSync=function(e){return gr(e)},Pt.hydrate=function(e,t,n){if(!to(t))throw Error(i(200));return no(null,e,t,!0,n)},Pt.hydrateRoot=function(e,t,n){if(!ta(e))throw Error(i(405));var s=n!=null&&n.hydratedSources||null,o=!1,u="",h=qc;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(h=n.onRecoverableError)),t=Zc(t,null,e,1,n??null,o,!1,u,h),e[wn]=t.current,_i(e),s)for(e=0;e<s.length;e++)n=s[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new eo(t)},Pt.render=function(e,t,n){if(!to(t))throw Error(i(200));return no(null,e,t,!1,n)},Pt.unmountComponentAtNode=function(e){if(!to(e))throw Error(i(40));return e._reactRootContainer?(gr(function(){no(null,null,e,!1,function(){e._reactRootContainer=null,e[wn]=null})}),!0):!1},Pt.unstable_batchedUpdates=$l,Pt.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!to(n))throw Error(i(200));if(e==null||e._reactInternals===void 0)throw Error(i(38));return no(e,t,n,!1,s)},Pt.version="18.3.1-next-f1338f8080-20240426",Pt}var ud;function vp(){if(ud)return sa.exports;ud=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(r){console.error(r)}}return l(),sa.exports=yp(),sa.exports}var cd;function kp(){if(cd)return io;cd=1;var l=vp();return io.createRoot=l.createRoot,io.hydrateRoot=l.hydrateRoot,io}var wp=kp();const Sp=Dd(wp),dd=l=>{let r;const i=new Set,a=(k,w)=>{const y=typeof k=="function"?k(r):k;if(!Object.is(y,r)){const B=r;r=w??(typeof y!="object"||y===null)?y:Object.assign({},r,y),i.forEach(T=>T(r,B))}},c=()=>r,g={setState:a,getState:c,getInitialState:()=>m,subscribe:k=>(i.add(k),()=>i.delete(k))},m=r=l(a,c,g);return g},_p=(l=>l?dd(l):dd),Cp=l=>l;function Ep(l,r=Cp){const i=Gi.useSyncExternalStore(l.subscribe,Gi.useCallback(()=>r(l.getState()),[l,r]),Gi.useCallback(()=>r(l.getInitialState()),[l,r]));return Gi.useDebugValue(i),i}const fd=l=>{const r=_p(l),i=a=>Ep(r,a);return Object.assign(i,r),i},bp=(l=>l?fd(l):fd);class Yi{constructor(r){L(this,"buffer");L(this,"index",0);this.buffer=r instanceof Uint8Array?r:new Uint8Array(r)}slice(r,i){return new Yi(this.buffer.slice(r,i))}readable(){return this.index<this.buffer.length}skip(r){this.index+=r}readUInt8(){return this.buffer[this.index++]}readInt8(){return this.buffer[this.index++]<<24>>24}readUInt16(){return this.buffer[this.index++]+(this.buffer[this.index++]<<8)}readUInt32(){return this.buffer[this.index++]+(this.buffer[this.index++]<<8)+(this.buffer[this.index++]<<16)+(this.buffer[this.index++]<<24)>>>0}readString(){const r=this.readUInt16();if(r===0)return"";const i=new TextDecoder("utf-8").decode(this.buffer.slice(this.index,this.index+r));return this.index+=r,i}readRGB(){return this.buffer[this.index++]+(this.buffer[this.index++]<<8)+(this.buffer[this.index++]<<16)}readLight(){return{level:this.readUInt16(),color:this.readUInt16()}}readAnimationLength(){return{min:this.readUInt32(),max:this.readUInt32()}}}const po=new Uint8Array([69,77,80,69,82,73,65,0]),Qi=20;var vo=(l=>(l[l.SPRITE_DATA=1]="SPRITE_DATA",l[l.OBJECT_DEFS=2]="OBJECT_DEFS",l))(vo||{});function Ap(l){const r=l instanceof Uint8Array?l:new Uint8Array(l);if(r.length<Qi)return!1;for(let i=0;i<po.length;i++)if(r[i]!==po[i])return!1;return!0}function Fd(l){const r=l instanceof Uint8Array?l:new Uint8Array(l);if(!Ap(r))return null;const i=new DataView(r.buffer,r.byteOffset,r.byteLength);return{fileType:i.getUint8(8),formatVersion:i.getUint16(9,!0),contentVersion:i.getUint32(11,!0),flags:i.getUint8(15)}}const hd={"41BF619C":740,"439D5A33":760,"42A3":1098},ge={ThingAttrGround:0,ThingAttrGroundBorder:1,ThingAttrOnBottom:2,ThingAttrOnTop:3,ThingAttrContainer:4,ThingAttrStackable:5,ThingAttrForceUse:6,ThingAttrMultiUse:7,ThingAttrWritable:8,ThingAttrWritableOnce:9,ThingAttrFluidContainer:10,ThingAttrSplash:11,ThingAttrNotWalkable:12,ThingAttrNotMoveable:13,ThingAttrBlockProjectile:14,ThingAttrNotPathable:15,ThingAttrPickupable:16,ThingAttrHangable:17,ThingAttrHookSouth:18,ThingAttrHookEast:19,ThingAttrRotateable:20,ThingAttrLight:21,ThingAttrDontHide:22,ThingAttrTranslucent:23,ThingAttrDisplacement:24,ThingAttrElevation:25,ThingAttrLyingCorpse:26,ThingAttrAnimateAlways:27,ThingAttrMinimapColor:28,ThingAttrLensHelp:29,ThingAttrFullGround:30,ThingAttrLook:31,ThingAttrCloth:32,ThingAttrMarket:33,ThingAttrUsable:34,ThingAttrWrapable:35,ThingAttrUnwrapable:36,ThingAttrTopEffect:37,ThingAttrOpacity:100,ThingAttrNotPreWalkable:101,ThingAttrFloorChange:252,ThingAttrNoMoveAnimation:253,ThingAttrChargeable:254,ThingAttrLast:255};function Dp(l,r){if(l===ge.ThingAttrLast)return l;if(r>=1e3){if(l===16)return ge.ThingAttrNoMoveAnimation;if(l>16)return l-1}else if(r>=755){if(l===23)return ge.ThingAttrFloorChange}else if(r>=740){if(l>0&&l<=15)return l===5?ge.ThingAttrMultiUse:l===6?ge.ThingAttrForceUse:l+1;switch(l){case 16:return ge.ThingAttrLight;case 17:return ge.ThingAttrFloorChange;case 18:return ge.ThingAttrFullGround;case 19:return ge.ThingAttrElevation;case 20:return ge.ThingAttrDisplacement;case 22:return ge.ThingAttrMinimapColor;case 23:return ge.ThingAttrRotateable;case 24:return ge.ThingAttrLyingCorpse;case 25:return ge.ThingAttrHangable;case 26:return ge.ThingAttrHookSouth;case 27:return ge.ThingAttrHookEast;case 28:return ge.ThingAttrAnimateAlways}}return l}function Fp(){return{ground:!1,groundBorder:!1,onBottom:!1,onTop:!1,container:!1,stackable:!1,forceUse:!1,multiUse:!1,writable:!1,writableOnce:!1,fluidContainer:!1,splash:!1,notWalkable:!1,notMoveable:!1,blockProjectile:!1,notPathable:!1,pickupable:!1,hangable:!1,hookSouth:!1,hookEast:!1,rotateable:!1,hasLight:!1,dontHide:!1,translucent:!1,hasDisplacement:!1,hasElevation:!1,lyingCorpse:!1,animateAlways:!1,hasMinimapColor:!1,fullGround:!1,look:!1,cloth:!1,hasMarket:!1,usable:!1,wrapable:!1,unwrapable:!1,topEffect:!1,noMoveAnimation:!1,chargeable:!1}}function Bp(l,r){const i=Fp();for(;;){const a=l.readUInt8(),c=Dp(a,r);switch(c){case ge.ThingAttrLast:return i;case ge.ThingAttrGround:i.ground=!0,i.groundSpeed=l.readUInt16();break;case ge.ThingAttrGroundBorder:i.groundBorder=!0;break;case ge.ThingAttrOnBottom:i.onBottom=!0;break;case ge.ThingAttrOnTop:i.onTop=!0;break;case ge.ThingAttrContainer:i.container=!0;break;case ge.ThingAttrStackable:i.stackable=!0;break;case ge.ThingAttrForceUse:i.forceUse=!0;break;case ge.ThingAttrMultiUse:i.multiUse=!0;break;case ge.ThingAttrWritable:i.writable=!0,i.writableMaxLen=l.readUInt16();break;case ge.ThingAttrWritableOnce:i.writableOnce=!0,i.writableOnceMaxLen=l.readUInt16();break;case ge.ThingAttrFluidContainer:i.fluidContainer=!0;break;case ge.ThingAttrSplash:i.splash=!0;break;case ge.ThingAttrNotWalkable:i.notWalkable=!0;break;case ge.ThingAttrNotMoveable:i.notMoveable=!0;break;case ge.ThingAttrBlockProjectile:i.blockProjectile=!0;break;case ge.ThingAttrNotPathable:i.notPathable=!0;break;case ge.ThingAttrPickupable:i.pickupable=!0;break;case ge.ThingAttrHangable:i.hangable=!0;break;case ge.ThingAttrHookSouth:i.hookSouth=!0;break;case ge.ThingAttrHookEast:i.hookEast=!0;break;case ge.ThingAttrRotateable:i.rotateable=!0;break;case ge.ThingAttrLight:{i.hasLight=!0;const d=l.readLight();i.lightLevel=d.level,i.lightColor=d.color;break}case ge.ThingAttrDontHide:i.dontHide=!0;break;case ge.ThingAttrTranslucent:i.translucent=!0;break;case ge.ThingAttrDisplacement:{if(i.hasDisplacement=!0,r>=755){const d=l.readLight();i.displacementX=d.level,i.displacementY=d.color}break}case ge.ThingAttrElevation:i.hasElevation=!0,i.elevation=l.readUInt16();break;case ge.ThingAttrLyingCorpse:i.lyingCorpse=!0;break;case ge.ThingAttrAnimateAlways:i.animateAlways=!0;break;case ge.ThingAttrMinimapColor:i.hasMinimapColor=!0,i.minimapColor=l.readUInt16();break;case ge.ThingAttrLensHelp:i.lensHelp=l.readUInt16();break;case ge.ThingAttrFullGround:i.fullGround=!0;break;case ge.ThingAttrLook:i.look=!0;break;case ge.ThingAttrCloth:i.cloth=!0,i.clothSlot=l.readUInt16();break;case ge.ThingAttrMarket:i.hasMarket=!0,i.marketCategory=l.readUInt16(),i.marketTradeAs=l.readUInt16(),i.marketShowAs=l.readUInt16(),i.marketName=l.readString(),i.marketRestrictVocation=l.readUInt16(),i.marketRequiredLevel=l.readUInt16();break;case ge.ThingAttrUsable:i.usable=!0,i.usableActionId=l.readUInt16();break;case ge.ThingAttrWrapable:i.wrapable=!0;break;case ge.ThingAttrUnwrapable:i.unwrapable=!0;break;case ge.ThingAttrTopEffect:i.topEffect=!0;break;case ge.ThingAttrOpacity:break;case ge.ThingAttrNotPreWalkable:break;case ge.ThingAttrFloorChange:break;case ge.ThingAttrNoMoveAnimation:i.noMoveAnimation=!0;break;case ge.ThingAttrChargeable:i.chargeable=!0;break;default:throw new Error(`Unknown flag 0x${c.toString(16)} at offset ${l.index}`)}}}function Tp(l,r,i){const a=i?l.readUInt8():0,c=l.readUInt8(),d=l.readUInt8();(c>1||d>1)&&l.readUInt8();const p=l.readUInt8(),g=l.readUInt8(),m=l.readUInt8(),k=r>=755?l.readUInt8():1,w=l.readUInt8();let y=0,B=0,T=0;const G=[];if(w>1&&r>=1050){y=l.readUInt8(),B=l.readUInt32(),T=l.readInt8();for(let Z=0;Z<w;Z++)G.push(l.readAnimationLength())}const O=c*d*p*g*m*k*w,V=[];for(let Z=0;Z<O;Z++)V.push(r>=960?l.readUInt32():l.readUInt16());return{type:a,width:c,height:d,layers:p,patternX:g,patternY:m,patternZ:k,animationLength:w,asynchronous:y,nLoop:B,start:T,animationLengths:G,sprites:V}}function Np(l){const r=Fd(l);let i,a;if(r){if(r.fileType!==vo.OBJECT_DEFS)throw new Error(`Expected object definitions (0x02), got 0x${r.fileType.toString(16)}`);i=r.contentVersion,a=Qi}else{const B=new DataView(l).getUint32(0,!0).toString(16).toUpperCase();if(!(B in hd))throw new Error("Unknown object definition file format.");i=hd[B],a=4}const c=new Yi(l.slice(a)),d=c.readUInt16(),p=c.readUInt16(),g=c.readUInt16(),m=c.readUInt16(),k=d+p+g+m,w=new Map;for(let y=100;y<=k;y++){const B=c.index,T=Bp(c,i),G=y>d&&y<=d+p,O=i>=1050&&G,V=O?c.readUInt8():1,Z=[];for(let $=0;$<V;$++)Z.push(Tp(c,i,O));const K=c.index,ue=c.buffer.slice(B,K);let q;y<=d?q="item":y<=d+p?q="outfit":y<=d+p+g?q="effect":q="distance",w.set(y,{id:y,category:q,flags:T,frameGroups:Z,rawBytes:ue})}return console.log(`[OB] Parsed ${w.size} things: items=${d} outfits=${p} effects=${g} distances=${m}`),{version:i,itemCount:d,outfitCount:p,effectCount:g,distanceCount:m,things:w,originalBuffer:l}}const pd={"57BBD603":1098};function Pp(l){const r=Fd(l);let i,a;if(r){if(r.fileType!==vo.SPRITE_DATA)throw new Error(`Expected sprite data (0x01), got 0x${r.fileType.toString(16)}`);i=r.contentVersion,a=Qi}else{const k=new DataView(l).getUint32(0,!0).toString(16).toUpperCase();if(!(k in pd))throw new Error("Unknown sprite file format.");i=pd[k],a=4}const c=new Uint8Array(l.slice(a)),d=new Yi(c),p=i>760?d.readUInt32():d.readUInt16(),g=new Map;for(let m=1;m<=p;m++){const k=d.readUInt32();k!==0&&g.set(m,k-a)}return console.log(`[OB] Parsed sprite index: ${p} sprites, ${g.size} non-empty`),{version:i,spriteCount:p,addresses:g,buffer:c,originalBuffer:l}}function mo(l,r){const i=l.addresses.get(r);if(i===void 0)return null;const a=l.buffer,c=a[i+3]+(a[i+4]<<8),d=new Yi(a.slice(i,i+5+c));d.readRGB(),d.skip(2);const p=new Uint32Array(1024);let g=0;for(;d.readable();){const k=d.readUInt16(),w=d.readUInt16();g+=k;for(let y=g;y<g+w;y++){const B=d.readUInt8(),T=d.readUInt8(),G=d.readUInt8(),O=d.readUInt8();p[y]=O<<24|G<<16|T<<8|B}g+=w}const m=new ImageData(32,32);return new Uint32Array(m.data.buffer).set(p),m}const go=new Map,ko=document.createElement("canvas");ko.width=32;ko.height=32;const md=ko.getContext("2d");function fa(l,r,i){if(r===0)return null;const a=go.get(r);if(a)return a;const c=(i==null?void 0:i.get(r))??mo(l,r);if(!c)return null;md.clearRect(0,0,32,32),md.putImageData(c,0,0);const d=ko.toDataURL();return go.set(r,d),d}function ei(){go.clear()}function gd(l){go.delete(l)}const Lp=["FLAG_BLOCK_SOLID","FLAG_BLOCK_PROJECTILE","FLAG_BLOCK_PATHFIND","FLAG_HAS_HEIGHT","FLAG_USEABLE","FLAG_PICKUPABLE","FLAG_MOVEABLE","FLAG_STACKABLE","FLAG_FLOORCHANGEDOWN","FLAG_FLOORCHANGENORTH","FLAG_FLOORCHANGEEAST","FLAG_FLOORCHANGESOUTH","FLAG_FLOORCHANGEWEST","FLAG_ALWAYSONTOP","FLAG_READABLE","FLAG_ROTATABLE","FLAG_HANGABLE","FLAG_VERTICAL","FLAG_HORIZONTAL","FLAG_CANNOTDECAY","FLAG_ALLOWDISTREAD","FLAG_UNUSED","FLAG_CLIENTCHARGES","FLAG_LOOKTHROUGH","FLAG_ANIMATION","FLAG_FULLTILE","FLAG_FORCEUSE"];function Ip(l){let r=0;return l.notWalkable&&(r|=1),l.blockProjectile&&(r|=2),l.notPathable&&(r|=4),l.hasElevation&&(r|=8),(l.forceUse||l.multiUse)&&(r|=16),l.pickupable&&(r|=32),l.notMoveable||(r|=64),l.stackable&&(r|=128),l.onTop&&(r|=8192),(l.writable||l.writableOnce)&&(r|=16384),l.rotateable&&(r|=32768),l.hangable&&(r|=65536),l.hookSouth&&(r|=1<<17),l.hookEast&&(r|=1<<18),l.chargeable&&(r|=1<<22),l.translucent&&(r|=1<<23),l.animateAlways&&(r|=1<<24),l.forceUse&&(r|=1<<26),r}function aa(l,r){return l&-96985344|Ip(r)}function ua(l){return l.ground||l.groundBorder?1:l.container?2:l.splash?11:l.fluidContainer?12:0}function jp(l,r,i,a){for(let d=i;d>=r;d--){const p=l.things.get(d);p&&(p.id=d+1,l.things.set(d+1,p),l.things.delete(d))}const c=new Set;for(const d of a)c.add(d>=r?d+1:d);return c}function Mp(l,r,i,a){for(let d=r+1;d<=i;d++){const p=l.things.get(d);p&&(p.id=d-1,l.things.set(d-1,p),l.things.delete(d))}const c=new Set;for(const d of a)d!==r&&c.add(d>r?d-1:d);return c}function xd(l,r,i){const a=l.itemCount+l.outfitCount+l.effectCount+l.distanceCount;let c,d;switch(r){case"item":l.itemCount++,c=l.itemCount,d=c;break;case"outfit":l.outfitCount++,c=l.itemCount+l.outfitCount,d=c;break;case"effect":l.effectCount++,c=l.itemCount+l.outfitCount+l.effectCount,d=c;break;case"distance":l.distanceCount++,c=l.itemCount+l.outfitCount+l.effectCount+l.distanceCount,d=c+1;break}const p=d<=a?jp(l,d,a,i):new Set(i);return p.add(c),{insertId:c,dirtyIds:p}}const te=bp((l,r)=>({objectData:null,spriteData:null,loaded:!1,loading:!1,error:null,dirty:!1,dirtyIds:new Set,undoStack:[],redoStack:[],spriteOverrides:new Map,dirtySpriteIds:new Set,itemDefinitions:new Map,clientToServerIds:new Map,definitionsLoaded:!1,sourceDir:null,sourceNames:{},activeCategory:"item",selectedThingId:null,searchQuery:"",editVersion:0,focusSpriteId:null,loadFiles:(i,a)=>{l({loading:!0,error:null});try{const c=Np(i),d=Pp(a);ei(),l({objectData:c,spriteData:d,loaded:!0,loading:!1,selectedThingId:100,activeCategory:"item",dirty:!1,dirtyIds:new Set,undoStack:[],redoStack:[],spriteOverrides:new Map,dirtySpriteIds:new Set,editVersion:0,focusSpriteId:null,...r().definitionsLoaded?{}:{itemDefinitions:new Map,clientToServerIds:new Map,definitionsLoaded:!1}})}catch(c){l({error:c instanceof Error?c.message:String(c),loading:!1})}},loadDefinitions:i=>{const a=new Map,c=new Map;for(const[d,p]of Object.entries(i)){const g=parseInt(d,10);if(isNaN(g))continue;const m=p.id??g;a.set(g,{serverId:g,id:m,flags:p.flags??0,group:p.group??0,properties:p.properties?{...p.properties}:null}),(!c.has(m)||g===m)&&c.set(m,g)}l({itemDefinitions:a,clientToServerIds:c,definitionsLoaded:!0}),console.log(`[OB] Loaded ${a.size} definitions (by serverId), ${c.size} clientserver mappings`)},setSourceDir:(i,a)=>{l({sourceDir:i,sourceNames:{...r().sourceNames,...a}})},setActiveCategory:i=>{const a=r().getCategoryRange(i);l({activeCategory:i,selectedThingId:a?a.start:null,searchQuery:""})},setSelectedThingId:i=>l({selectedThingId:i}),setSearchQuery:i=>l({searchQuery:i}),reset:()=>{ei(),l({objectData:null,spriteData:null,loaded:!1,loading:!1,error:null,activeCategory:"item",selectedThingId:null,searchQuery:"",dirty:!1,dirtyIds:new Set,undoStack:[],redoStack:[],spriteOverrides:new Map,dirtySpriteIds:new Set,editVersion:0,focusSpriteId:null,itemDefinitions:new Map,clientToServerIds:new Map,definitionsLoaded:!1})},updateItemDefinition:(i,a)=>{const{itemDefinitions:c,clientToServerIds:d,editVersion:p}=r(),g=d.get(i)??i,m=c.get(g),k={serverId:g,id:a.id??(m==null?void 0:m.id)??i,flags:a.flags??(m==null?void 0:m.flags)??0,group:a.group??(m==null?void 0:m.group)??0,properties:a.properties!==void 0?a.properties?{...(m==null?void 0:m.properties)??{},...a.properties}:null:m!=null&&m.properties?{...m.properties}:null},w=new Map(c);w.set(g,k);const y=new Map(d);y.has(i)||y.set(i,g),l({itemDefinitions:w,clientToServerIds:y,dirty:!0,editVersion:p+1})},updateThingFlags:(i,a)=>{const{objectData:c,undoStack:d,dirtyIds:p,editVersion:g,itemDefinitions:m}=r();if(!c)return;const k=c.things.get(i);if(!k)return;const w={...k.flags};k.flags=a,k.rawBytes=void 0;const y=new Set(p);if(y.add(i),k.category==="item"){const{clientToServerIds:B}=r(),T=B.get(i)??i,G=m.get(T),O=(G==null?void 0:G.flags)??0,V=aa(O,a),Z=ua(a),K={serverId:T,id:(G==null?void 0:G.id)??i,flags:V,group:Z,properties:G!=null&&G.properties?{...G.properties}:null},ue=new Map(m);ue.set(T,K),l({dirty:!0,dirtyIds:y,undoStack:[...d,{thingId:i,oldFlags:w,newFlags:{...a}}],redoStack:[],editVersion:g+1,itemDefinitions:ue})}else l({dirty:!0,dirtyIds:y,undoStack:[...d,{thingId:i,oldFlags:w,newFlags:{...a}}],redoStack:[],editVersion:g+1})},undo:()=>{const{objectData:i,undoStack:a,redoStack:c,editVersion:d,itemDefinitions:p}=r();if(!i||a.length===0)return;const g=a[a.length-1],m=i.things.get(g.thingId);if(m&&(m.flags={...g.oldFlags},m.category==="item")){const{clientToServerIds:k}=r(),w=k.get(g.thingId)??g.thingId,y=p.get(w),B=new Map(p);B.set(w,{serverId:w,id:(y==null?void 0:y.id)??g.thingId,flags:aa((y==null?void 0:y.flags)??0,g.oldFlags),group:ua(g.oldFlags),properties:y!=null&&y.properties?{...y.properties}:null}),l({undoStack:a.slice(0,-1),redoStack:[...c,g],editVersion:d+1,itemDefinitions:B});return}l({undoStack:a.slice(0,-1),redoStack:[...c,g],editVersion:d+1})},redo:()=>{const{objectData:i,undoStack:a,redoStack:c,editVersion:d,itemDefinitions:p}=r();if(!i||c.length===0)return;const g=c[c.length-1],m=i.things.get(g.thingId);if(m&&(m.flags={...g.newFlags},m.category==="item")){const{clientToServerIds:k}=r(),w=k.get(g.thingId)??g.thingId,y=p.get(w),B=new Map(p);B.set(w,{serverId:w,id:(y==null?void 0:y.id)??g.thingId,flags:aa((y==null?void 0:y.flags)??0,g.newFlags),group:ua(g.newFlags),properties:y!=null&&y.properties?{...y.properties}:null}),l({undoStack:[...a,g],redoStack:c.slice(0,-1),editVersion:d+1,itemDefinitions:B});return}l({undoStack:[...a,g],redoStack:c.slice(0,-1),editVersion:d+1})},replaceSprite:(i,a)=>{const{spriteOverrides:c,dirtySpriteIds:d,editVersion:p}=r(),g=new Map(c);g.set(i,a);const m=new Set(d);m.add(i),gd(i),l({dirty:!0,spriteOverrides:g,dirtySpriteIds:m,editVersion:p+1})},addSprite:i=>{const{spriteData:a,spriteOverrides:c,dirtySpriteIds:d,editVersion:p}=r();if(!a)return null;a.spriteCount++;const g=a.spriteCount,m=new Map(c);m.set(g,i);const k=new Set(d);return k.add(g),l({dirty:!0,spriteOverrides:m,dirtySpriteIds:k,editVersion:p+1}),g},deleteSprite:i=>{const{spriteOverrides:a,dirtySpriteIds:c,editVersion:d}=r();if(i<=0)return;const p=new ImageData(32,32),g=new Map(a);g.set(i,p);const m=new Set(c);m.add(i),gd(i),l({dirty:!0,spriteOverrides:g,dirtySpriteIds:m,editVersion:d+1})},addThing:i=>{const{objectData:a,editVersion:c}=r();if(!a)return null;const{insertId:d,dirtyIds:p}=xd(a,i,r().dirtyIds),k={id:d,category:i,flags:{ground:!1,groundBorder:!1,onBottom:!1,onTop:!1,container:!1,stackable:!1,forceUse:!1,multiUse:!1,writable:!1,writableOnce:!1,fluidContainer:!1,splash:!1,notWalkable:!1,notMoveable:!1,blockProjectile:!1,notPathable:!1,pickupable:!1,hangable:!1,hookSouth:!1,hookEast:!1,rotateable:!1,hasLight:!1,dontHide:!1,translucent:!1,hasDisplacement:!1,hasElevation:!1,lyingCorpse:!1,animateAlways:!1,hasMinimapColor:!1,fullGround:!1,look:!1,cloth:!1,hasMarket:!1,usable:!1,wrapable:!1,unwrapable:!1,topEffect:!1,noMoveAnimation:!1,chargeable:!1},frameGroups:[{type:0,width:1,height:1,layers:1,patternX:1,patternY:1,patternZ:1,animationLength:1,asynchronous:0,nLoop:0,start:0,animationLengths:[{min:0,max:0}],sprites:[0]}]};return a.things.set(d,k),p.add(d),l({dirty:!0,dirtyIds:p,selectedThingId:d,editVersion:c+1}),d},removeThing:i=>{const{objectData:a,editVersion:c,activeCategory:d}=r();if(!a||!a.things.get(i))return;const g=r().getCategoryRange(d);if(!g)return;const m=g.end;if(i!==m)return;const k=a.itemCount+a.outfitCount+a.effectCount+a.distanceCount;switch(a.things.delete(i),d){case"item":a.itemCount--;break;case"outfit":a.outfitCount--;break;case"effect":a.effectCount--;break;case"distance":a.distanceCount--;break}const w=Mp(a,i,k,r().dirtyIds),y=i>g.start?i-1:g.start;l({dirty:!0,dirtyIds:w,selectedThingId:a.things.has(y)?y:null,editVersion:c+1})},importThing:(i,a,c,d)=>{const{objectData:p,spriteData:g,editVersion:m,spriteOverrides:k,dirtySpriteIds:w}=r();if(!p||!g)return null;const{insertId:y,dirtyIds:B}=xd(p,i,r().dirtyIds),T=new Map(k),G=new Set(w),O=new Map;for(const[K,ue]of d){if(K===0||O.has(K))continue;g.spriteCount++;const q=g.spriteCount;O.set(K,q),T.set(q,ue),G.add(q)}const V=c.map((K,ue)=>({...K,type:ue,sprites:K.sprites.map(q=>q===0?0:O.get(q)??q),animationLengths:K.animationLengths.map(q=>({...q}))})),Z={id:y,category:i,flags:{...a},frameGroups:V};return p.things.set(y,Z),ei(),l({dirty:!0,dirtyIds:B,spriteOverrides:T,dirtySpriteIds:G,selectedThingId:y,activeCategory:i,editVersion:m+1}),y},replaceThing:(i,a,c,d)=>{const{objectData:p,spriteData:g,editVersion:m,spriteOverrides:k,dirtySpriteIds:w}=r();if(!p||!g)return!1;const y=p.things.get(i);if(!y)return!1;const B=new Map(k),T=new Set(w),G=new Map;for(const[K,ue]of d){if(K===0||G.has(K))continue;g.spriteCount++;const q=g.spriteCount;G.set(K,q),B.set(q,ue),T.add(q)}const O=c.map((K,ue)=>({...K,type:ue,sprites:K.sprites.map(q=>q===0?0:G.get(q)??q),animationLengths:K.animationLengths.map(q=>({...q}))})),V={id:i,category:y.category,flags:{...a},frameGroups:O};p.things.set(i,V);const Z=new Set(r().dirtyIds);return Z.add(i),ei(),l({dirty:!0,dirtyIds:Z,spriteOverrides:B,dirtySpriteIds:T,editVersion:m+1}),!0},markClean:()=>l({dirty:!1,dirtyIds:new Set,dirtySpriteIds:new Set}),getCategoryRange:i=>{const a=r().objectData;if(!a)return null;switch(i){case"item":return{start:100,end:a.itemCount};case"outfit":return{start:a.itemCount+1,end:a.itemCount+a.outfitCount};case"effect":return{start:a.itemCount+a.outfitCount+1,end:a.itemCount+a.outfitCount+a.effectCount};case"distance":return{start:a.itemCount+a.outfitCount+a.effectCount+1,end:a.itemCount+a.outfitCount+a.effectCount+a.distanceCount}}}}));function rr(l,r){return r<=l.itemCount?r:r<=l.itemCount+l.outfitCount?r-l.itemCount-1:r<=l.itemCount+l.outfitCount+l.effectCount?r-l.itemCount-l.outfitCount-1:r-l.itemCount-l.outfitCount-l.effectCount-1}function Rp(l,r,i,a){if(!l)return[];const c=a(r);if(!c)return[];const d=[];for(let p=c.start;p<=c.end;p++){const g=l.things.get(p);if(g){if(i&&!rr(l,p).toString().includes(i))continue;d.push(g)}}return d}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Bd=(...l)=>l.filter((r,i,a)=>!!r&&r.trim()!==""&&a.indexOf(r)===i).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Up={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=ee.forwardRef(({color:l="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:c="",children:d,iconNode:p,...g},m)=>ee.createElement("svg",{ref:m,...Up,width:r,height:r,stroke:l,strokeWidth:a?Number(i)*24/Number(r):i,className:Bd("lucide",c),...g},[...p.map(([k,w])=>ee.createElement(k,w)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(l,r)=>{const i=ee.forwardRef(({className:a,...c},d)=>ee.createElement(zp,{ref:d,iconNode:r,className:Bd(`lucide-${Op(l)}`,a),...c}));return i.displayName=`${l}`,i};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=Xe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=Xe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=Xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=Xe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=Xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $p=Xe("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=Xe("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=Xe("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=Xe("ImageDown",[["path",{d:"M10.3 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10l-3.1-3.1a2 2 0 0 0-2.814.014L6 21",key:"9csbqa"}],["path",{d:"m14 19 3 3v-5.5",key:"9ldu5r"}],["path",{d:"m17 22 3-3",key:"1nkfve"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=Xe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=Xe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=Xe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=Xe("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=Xe("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=Xe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=Xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=Xe("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=Xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=Xe("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=Xe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=Xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=Xe("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=Xe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=Xe("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=Xe("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function am(){const l=te($=>$.loadFiles),r=te($=>$.loading),i=te($=>$.error),[a,c]=ee.useState(!1),d=te($=>$.loadDefinitions),p=te($=>$.setSourceDir),g=ee.useRef(null),m=ee.useRef(null),[k,w]=ee.useState(null),[y,B]=ee.useState(null),[T,G]=ee.useState(null),O=ee.useRef(null),V=ee.useCallback(()=>{if(!(!g.current||!m.current)){if(O.current){try{const $=new TextDecoder().decode(O.current),P=JSON.parse($);d(P)}catch($){console.error("Failed to parse definitions JSON:",$)}O.current=null}l(g.current,m.current)}},[l,d]),Z=ee.useCallback($=>{var Y;const P=(Y=$.name.split(".").pop())==null?void 0:Y.toLowerCase(),ae=new FileReader;ae.onload=ke=>{var ie;const we=(ie=ke.target)==null?void 0:ie.result;P==="dat"||P==="eobj"?(g.current=we,w($.name)):P==="spr"||P==="espr"?(m.current=we,B($.name)):P==="json"&&(O.current=we,G($.name)),V()},ae.readAsArrayBuffer($)},[V]),K=ee.useCallback(async()=>{var $;if(typeof window.showDirectoryPicker=="function")try{const P=await window.showDirectoryPicker({mode:"readwrite"}),ae={};for await(const[Y,ke]of P.entries()){if(ke.kind!=="file")continue;const we=($=Y.split(".").pop())==null?void 0:$.toLowerCase();if((we==="eobj"||we==="dat")&&!ae.obj){ae.obj=Y;const ie=await ke.getFile();g.current=await ie.arrayBuffer(),w(Y)}else if((we==="espr"||we==="spr")&&!ae.spr){ae.spr=Y;const ie=await ke.getFile();m.current=await ie.arrayBuffer(),B(Y)}else if(we==="json"&&Y.toLowerCase().includes("definition")&&!ae.def){ae.def=Y;const ie=await ke.getFile();O.current=await ie.arrayBuffer(),G(Y)}}p(P,ae),console.log("[OB] Opened folder:",P.name,ae),V()}catch{}},[V,p]),ue=ee.useCallback($=>{$.preventDefault(),c(!1),Array.from($.dataTransfer.files).forEach(Z)},[Z]),q=ee.useCallback($=>{Array.from($.target.files||[]).forEach(P=>Z(P))},[Z]);return f.jsx("div",{className:"h-full flex items-center justify-center bg-emperia-bg p-8",children:f.jsxs("div",{className:"max-w-lg w-full",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-emperia-text mb-2",children:"Emperia Object Builder"}),f.jsx("p",{className:"text-emperia-muted text-sm",children:"v1.0.0  Web Edition"})]}),f.jsxs("div",{onDragOver:$=>{$.preventDefault(),c(!0)},onDragLeave:()=>c(!1),onDrop:ue,className:`
            border-2 border-dashed rounded-xl p-12 text-center cursor-pointer
            transition-all duration-200
            ${a?"border-emperia-accent bg-emperia-accent/10":"border-emperia-border hover:border-emperia-muted bg-emperia-surface"}
          `,onClick:()=>{var $;return($=document.getElementById("file-input"))==null?void 0:$.click()},children:[f.jsx("input",{id:"file-input",type:"file",multiple:!0,accept:".dat,.spr,.eobj,.espr,.json",className:"hidden",onChange:q}),r?f.jsxs("div",{className:"flex flex-col items-center gap-3",children:[f.jsx(Xp,{className:"w-12 h-12 text-emperia-accent animate-spin"}),f.jsx("p",{className:"text-emperia-text",children:"Loading files"})]}):f.jsxs("div",{className:"flex flex-col items-center gap-3",children:[f.jsx(Ld,{className:"w-12 h-12 text-emperia-muted"}),f.jsx("p",{className:"text-emperia-text font-medium",children:"Drop your files here"}),f.jsxs("p",{className:"text-emperia-muted text-sm",children:["Drag & drop ",f.jsx("code",{className:"text-emperia-accent",children:".eobj"})," + ",f.jsx("code",{className:"text-emperia-accent",children:".espr"})," files",f.jsx("br",{}),"or legacy ",f.jsx("code",{className:"text-emperia-accent",children:".dat"})," + ",f.jsx("code",{className:"text-emperia-accent",children:".spr"}),f.jsx("br",{}),f.jsxs("span",{className:"text-emperia-muted/60",children:["+ optional ",f.jsx("code",{className:"text-emperia-accent",children:"definitions.json"})]})]})]})]}),typeof window.showDirectoryPicker=="function"&&f.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2",children:[f.jsxs("div",{className:"flex items-center gap-3 text-emperia-muted/40 text-xs w-full",children:[f.jsx("div",{className:"flex-1 h-px bg-emperia-border/40"}),f.jsx("span",{children:"or"}),f.jsx("div",{className:"flex-1 h-px bg-emperia-border/40"})]}),f.jsxs("button",{onClick:K,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-emperia-accent/10 border border-emperia-accent/30 text-emperia-accent hover:bg-emperia-accent/20 transition-colors text-sm font-medium",children:[f.jsx(_a,{className:"w-4 h-4"}),"Open Folder"]}),f.jsx("p",{className:"text-emperia-muted/50 text-[10px] text-center",children:"Auto-detects files & saves directly back on compile"})]}),f.jsxs("div",{className:"mt-4 flex gap-4 justify-center text-xs",children:[f.jsxs("div",{className:`flex items-center gap-1.5 ${k?"text-green-400":"text-emperia-muted"}`,children:[f.jsx("div",{className:`w-2 h-2 rounded-full ${k?"bg-green-400":"bg-emperia-border"}`}),k||"Objects (.eobj / .dat)"]}),f.jsxs("div",{className:`flex items-center gap-1.5 ${y?"text-green-400":"text-emperia-muted"}`,children:[f.jsx("div",{className:`w-2 h-2 rounded-full ${y?"bg-green-400":"bg-emperia-border"}`}),y||"Sprites (.espr / .spr)"]}),f.jsxs("div",{className:`flex items-center gap-1.5 ${T?"text-green-400":"text-emperia-muted/50"}`,children:[f.jsx("div",{className:`w-2 h-2 rounded-full ${T?"bg-green-400":"bg-emperia-border/50"}`}),T||"Definitions (.json)  optional"]})]}),i&&f.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-red-500/10 border border-red-500/30 flex items-start gap-2",children:[f.jsx($p,{className:"w-4 h-4 text-red-400 mt-0.5 shrink-0"}),f.jsx("p",{className:"text-red-300 text-sm",children:i})]})]})})}class Id{constructor(r=4096){L(this,"chunks",[]);L(this,"current");L(this,"pos",0);this.current=new Uint8Array(r)}ensure(r){if(this.pos+r<=this.current.length)return;this.chunks.push(this.current.slice(0,this.pos));const i=Math.max(this.current.length*2,r+1024);this.current=new Uint8Array(i),this.pos=0}writeUInt8(r){this.ensure(1),this.current[this.pos++]=r&255}writeInt8(r){this.ensure(1),this.current[this.pos++]=r&255}writeUInt16(r){this.ensure(2),this.current[this.pos++]=r&255,this.current[this.pos++]=r>>8&255}writeUInt32(r){this.ensure(4),this.current[this.pos++]=r&255,this.current[this.pos++]=r>>8&255,this.current[this.pos++]=r>>16&255,this.current[this.pos++]=r>>24&255}writeBytes(r){this.ensure(r.length),this.current.set(r,this.pos),this.pos+=r.length}writeString(r){const i=new TextEncoder().encode(r);this.writeUInt16(i.length),this.ensure(i.length),this.current.set(i,this.pos),this.pos+=i.length}toArrayBuffer(){this.chunks.push(this.current.slice(0,this.pos));const r=this.chunks.reduce((c,d)=>c+d.length,0),i=new Uint8Array(r);let a=0;for(const c of this.chunks)i.set(c,a),a+=c.length;return this.chunks=[],this.current=new Uint8Array(4096),this.pos=0,i.buffer}}const Fe={ThingAttrGround:0,ThingAttrGroundBorder:1,ThingAttrOnBottom:2,ThingAttrOnTop:3,ThingAttrContainer:4,ThingAttrStackable:5,ThingAttrForceUse:6,ThingAttrMultiUse:7,ThingAttrWritable:8,ThingAttrWritableOnce:9,ThingAttrFluidContainer:10,ThingAttrSplash:11,ThingAttrNotWalkable:12,ThingAttrNotMoveable:13,ThingAttrBlockProjectile:14,ThingAttrNotPathable:15,ThingAttrPickupable:16,ThingAttrHangable:17,ThingAttrHookSouth:18,ThingAttrHookEast:19,ThingAttrRotateable:20,ThingAttrLight:21,ThingAttrDontHide:22,ThingAttrTranslucent:23,ThingAttrDisplacement:24,ThingAttrElevation:25,ThingAttrLyingCorpse:26,ThingAttrAnimateAlways:27,ThingAttrMinimapColor:28,ThingAttrLensHelp:29,ThingAttrFullGround:30,ThingAttrLook:31,ThingAttrCloth:32,ThingAttrMarket:33,ThingAttrUsable:34,ThingAttrWrapable:35,ThingAttrUnwrapable:36,ThingAttrTopEffect:37,ThingAttrNoMoveAnimation:253,ThingAttrChargeable:254,ThingAttrLast:255};function um(l,r,i){const a=c=>{if(i>=1e3){if(c===Fe.ThingAttrNoMoveAnimation){l.writeUInt8(16);return}if(c===Fe.ThingAttrChargeable){l.writeUInt8(Fe.ThingAttrChargeable+1);return}if(c>=16){l.writeUInt8(c+1);return}}l.writeUInt8(c)};r.ground&&(a(Fe.ThingAttrGround),l.writeUInt16(r.groundSpeed??0)),r.groundBorder&&a(Fe.ThingAttrGroundBorder),r.onBottom&&a(Fe.ThingAttrOnBottom),r.onTop&&a(Fe.ThingAttrOnTop),r.container&&a(Fe.ThingAttrContainer),r.stackable&&a(Fe.ThingAttrStackable),r.forceUse&&a(Fe.ThingAttrForceUse),r.multiUse&&a(Fe.ThingAttrMultiUse),r.writable&&(a(Fe.ThingAttrWritable),l.writeUInt16(r.writableMaxLen??0)),r.writableOnce&&(a(Fe.ThingAttrWritableOnce),l.writeUInt16(r.writableOnceMaxLen??0)),r.fluidContainer&&a(Fe.ThingAttrFluidContainer),r.splash&&a(Fe.ThingAttrSplash),r.notWalkable&&a(Fe.ThingAttrNotWalkable),r.notMoveable&&a(Fe.ThingAttrNotMoveable),r.blockProjectile&&a(Fe.ThingAttrBlockProjectile),r.notPathable&&a(Fe.ThingAttrNotPathable),r.pickupable&&a(Fe.ThingAttrPickupable),r.hangable&&a(Fe.ThingAttrHangable),r.hookSouth&&a(Fe.ThingAttrHookSouth),r.hookEast&&a(Fe.ThingAttrHookEast),r.rotateable&&a(Fe.ThingAttrRotateable),r.hasLight&&(a(Fe.ThingAttrLight),l.writeUInt16(r.lightLevel??0),l.writeUInt16(r.lightColor??0)),r.dontHide&&a(Fe.ThingAttrDontHide),r.translucent&&a(Fe.ThingAttrTranslucent),r.hasDisplacement&&(a(Fe.ThingAttrDisplacement),i>=755&&(l.writeUInt16(r.displacementX??0),l.writeUInt16(r.displacementY??0))),r.hasElevation&&(a(Fe.ThingAttrElevation),l.writeUInt16(r.elevation??0)),r.lyingCorpse&&a(Fe.ThingAttrLyingCorpse),r.animateAlways&&a(Fe.ThingAttrAnimateAlways),r.hasMinimapColor&&(a(Fe.ThingAttrMinimapColor),l.writeUInt16(r.minimapColor??0)),r.lensHelp!=null&&(a(Fe.ThingAttrLensHelp),l.writeUInt16(r.lensHelp)),r.fullGround&&a(Fe.ThingAttrFullGround),r.look&&a(Fe.ThingAttrLook),r.cloth&&(a(Fe.ThingAttrCloth),l.writeUInt16(r.clothSlot??0)),r.hasMarket&&(a(Fe.ThingAttrMarket),l.writeUInt16(r.marketCategory??0),l.writeUInt16(r.marketTradeAs??0),l.writeUInt16(r.marketShowAs??0),l.writeString(r.marketName??""),l.writeUInt16(r.marketRestrictVocation??0),l.writeUInt16(r.marketRequiredLevel??0)),r.usable&&(a(Fe.ThingAttrUsable),l.writeUInt16(r.usableActionId??0)),r.wrapable&&a(Fe.ThingAttrWrapable),r.unwrapable&&a(Fe.ThingAttrUnwrapable),r.topEffect&&a(Fe.ThingAttrTopEffect),r.noMoveAnimation&&a(Fe.ThingAttrNoMoveAnimation),r.chargeable&&a(Fe.ThingAttrChargeable),l.writeUInt8(Fe.ThingAttrLast)}function cm(l,r,i,a){if(a&&l.writeUInt8(r.type),l.writeUInt8(r.width),l.writeUInt8(r.height),(r.width>1||r.height>1)&&l.writeUInt8(Math.max(r.width,r.height)),l.writeUInt8(r.layers),l.writeUInt8(r.patternX),l.writeUInt8(r.patternY),i>=755&&l.writeUInt8(r.patternZ),l.writeUInt8(r.animationLength),r.animationLength>1&&i>=1050){l.writeUInt8(r.asynchronous),l.writeUInt32(r.nLoop),l.writeUInt8(r.start&255);for(let c=0;c<r.animationLength;c++){const d=r.animationLengths[c]??{min:100,max:100};l.writeUInt32(d.min),l.writeUInt32(d.max)}}for(const c of r.sprites)i>=960?l.writeUInt32(c):l.writeUInt16(c)}function dm(l,r){if(!r||r.size===0)return console.log("[OB] Compile: no edits, returning original buffer"),l.originalBuffer.slice(0);console.log(`[OB] Compile: rebuilding with ${r.size} edited thing(s)`);const i=new Id(1024*1024),a=new Uint8Array(l.originalBuffer,0,Qi);i.writeBytes(a),i.writeUInt16(l.itemCount),i.writeUInt16(l.outfitCount),i.writeUInt16(l.effectCount),i.writeUInt16(l.distanceCount);const c=l.itemCount+l.outfitCount+l.effectCount+l.distanceCount;for(let d=100;d<=c;d++){const p=l.things.get(d);if(!p){i.writeUInt8(Fe.ThingAttrLast),i.writeUInt8(1),i.writeUInt8(1),i.writeUInt8(1),i.writeUInt8(1),i.writeUInt8(1),l.version>=755&&i.writeUInt8(1),i.writeUInt8(1),l.version>=960?i.writeUInt32(0):i.writeUInt16(0);continue}if(p.rawBytes&&!r.has(d)){i.writeBytes(p.rawBytes);continue}um(i,p.flags,l.version);const g=p.category==="outfit",m=l.version>=1050&&g;m&&i.writeUInt8(p.frameGroups.length);for(const k of p.frameGroups)cm(i,k,l.version,m)}return i.toArrayBuffer()}const yd=32,so=yd*yd;function fm(l){const r=new Uint32Array(l.data.buffer),i=[];let a=0;for(;a<so;){let g=0;for(;a+g<so&&!((r[a+g]>>24&255)>0);)g++;let m=a+g,k=0;for(;m+k<so&&(r[m+k]>>24&255)!==0;)k++;if(g>0&&k===0&&a+g>=so)break;const w=new Uint8Array(4+k*4),y=new DataView(w.buffer);y.setUint16(0,g,!0),y.setUint16(2,k,!0);for(let B=0;B<k;B++){const T=r[m+B];w[4+B*4+0]=T&255,w[4+B*4+1]=T>>8&255,w[4+B*4+2]=T>>16&255,w[4+B*4+3]=T>>24&255}i.push(w),a=m+k}const c=i.reduce((g,m)=>g+m.length,0),d=new Uint8Array(5+c);d[0]=255,d[1]=0,d[2]=255,d[3]=c&255,d[4]=c>>8&255;let p=5;for(const g of i)d.set(g,p),p+=g.length;return d}function hm(l,r){if(!r||r.size===0)return console.log("[OB] Sprite compile: no edits, returning original buffer"),l.originalBuffer.slice(0);console.log(`[OB] Sprite compile: rebuilding with ${r.size} modified sprite(s)`);const i=new Map;for(const[y,B]of r)i.set(y,fm(B));const a=new Map;for(let y=1;y<=l.spriteCount;y++){const B=i.get(y);if(B)a.set(y,B);else{const T=l.addresses.get(y);if(T!==void 0){const G=l.buffer,O=G[T+3]+(G[T+4]<<8);a.set(y,G.slice(T,T+5+O))}}}const c=Qi,d=l.version>760?4:2,p=l.spriteCount*4,g=c+d+p,m=new Map;let k=g;for(let y=1;y<=l.spriteCount;y++){const B=a.get(y);B&&(m.set(y,k),k+=B.length)}const w=new Id(k+1024);for(let y=0;y<po.length;y++)w.writeUInt8(po[y]);w.writeUInt8(vo.SPRITE_DATA),w.writeUInt16(1),w.writeUInt32(l.version),w.writeUInt8(0),w.writeUInt32(0),l.version>760?w.writeUInt32(l.spriteCount):w.writeUInt16(l.spriteCount);for(let y=1;y<=l.spriteCount;y++)w.writeUInt32(m.get(y)??0);for(let y=1;y<=l.spriteCount;y++){const B=a.get(y);B&&w.writeBytes(B)}return w.toArrayBuffer()}function pm(){const l=te(y=>y.objectData),r=te(y=>y.spriteData),i=te(y=>y.reset),a=te(y=>y.dirty),c=te(y=>y.undo),d=te(y=>y.redo),p=te(y=>y.undoStack),g=te(y=>y.redoStack),m=te(y=>y.markClean),k=te(y=>y.dirtyIds);ee.useEffect(()=>{const y=B=>{a&&B.preventDefault()};return window.addEventListener("beforeunload",y),()=>window.removeEventListener("beforeunload",y)},[a]);const w=async()=>{if(!l||!r)return;const{spriteOverrides:y,itemDefinitions:B,sourceDir:T,sourceNames:G}=te.getState();async function O(ue,q,$){if(T&&q)try{const ae=await(await T.getFileHandle(q,{create:!0})).createWritable();await ae.write(ue),await ae.close();return}catch(P){console.warn(`[OB] Failed to write ${q} to folder, falling back to download:`,P)}vd(ue,$)}const V=dm(l,k);await O(V,G.obj,"emperia.eobj");const Z=hm(r,y);await O(Z,G.spr,"emperia.espr");{const ue=Array.from(B.keys()).sort((P,ae)=>P-ae),q={};for(const P of ue){const ae=B.get(P);let Y=null;if(ae.properties){Y={};for(const[we,ie]of Object.entries(ae.properties))ie!=null&&ie!==""&&(Y[we]=ie);Object.keys(Y).length===0&&(Y=null)}const ke={};ae.id!=null&&(ke.id=ae.id),ke.flags=ae.flags,ke.group=ae.group,ke.properties=Y,q[String(P)]=ke}const $=JSON.stringify(q,null,4);await O(new TextEncoder().encode($).buffer,G.def,"definitions.json")}const K=JSON.stringify({version:1,features:{spriteDataSize:4096,transparency:!0,spriteSize:32,frameDurations:!0,extended:!0,frameGroups:!0},contentVersion:l.version,format:"emperia-asset-manifest",files:{sprites:"emperia.espr",objects:"emperia.eobj"}},null,2);vd(new TextEncoder().encode(K).buffer,"emperia.easset"),m(),T&&console.log("[OB] Saved to source folder:",T.name)};return ee.useEffect(()=>{const y=B=>{(B.ctrlKey||B.metaKey)&&B.key==="z"&&!B.shiftKey&&(B.preventDefault(),c()),(B.ctrlKey||B.metaKey)&&(B.key==="y"||B.key==="z"&&B.shiftKey)&&(B.preventDefault(),d()),(B.ctrlKey||B.metaKey)&&B.key==="s"&&(B.preventDefault(),w())};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)}),f.jsxs("div",{className:"h-10 flex items-center px-3 gap-2 bg-emperia-surface border-b border-emperia-border shrink-0",children:[f.jsx("span",{className:"text-sm font-bold text-emperia-text tracking-wide",children:"Emperia Object Builder"}),f.jsx("span",{className:"text-xs text-emperia-muted",children:"v1.0.0"}),a&&f.jsx("span",{title:"Unsaved changes",children:f.jsx(Vp,{className:"w-2 h-2 fill-amber-400 text-amber-400"})}),f.jsx("div",{className:"flex-1"}),l&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center gap-3 text-xs text-emperia-muted mr-2",children:[f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx(Kp,{className:"w-3 h-3"}),"v",l.version]}),f.jsxs("span",{children:[l.things.size," objects"]})]}),f.jsx("button",{onClick:c,disabled:p.length===0,className:`p-1.5 rounded text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover
                       disabled:opacity-30 disabled:cursor-default transition-colors`,title:"Undo (Ctrl+Z)",children:f.jsx(sm,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:d,disabled:g.length===0,className:`p-1.5 rounded text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover
                       disabled:opacity-30 disabled:cursor-default transition-colors`,title:"Redo (Ctrl+Y)",children:f.jsx(tm,{className:"w-3.5 h-3.5"})}),f.jsx("div",{className:"w-px h-5 bg-emperia-border mx-1"}),f.jsxs("button",{onClick:w,className:`flex items-center gap-1.5 px-2.5 py-1 rounded text-xs font-medium
                       bg-emperia-accent/20 text-emperia-accent hover:bg-emperia-accent/30
                       transition-colors`,title:"Compile and download .eobj + .espr",children:[f.jsx(Td,{className:"w-3.5 h-3.5"}),"Compile"]})]}),f.jsxs("button",{onClick:i,className:`flex items-center gap-1.5 px-2 py-1 rounded text-xs
                   text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover
                   transition-colors`,children:[f.jsx(_a,{className:"w-3.5 h-3.5"}),"Open"]})]})}function vd(l,r){const i=new Blob([l],{type:"application/octet-stream"}),a=URL.createObjectURL(i),c=document.createElement("a");c.href=a,c.download=r,c.click(),URL.revokeObjectURL(a)}const mm=[{key:"item",label:"Items",icon:Jp},{key:"outfit",label:"Outfits",icon:nm},{key:"effect",label:"Effects",icon:rm},{key:"distance",label:"Distance",icon:Hp}];function gm(){const l=te(w=>w.activeCategory),r=te(w=>w.setActiveCategory),i=te(w=>w.objectData),a=te(w=>w.searchQuery),c=te(w=>w.setSearchQuery),d=te(w=>w.selectedThingId),p=te(w=>w.addThing),g=te(w=>w.removeThing),m=te(w=>w.getCategoryRange);te(w=>w.editVersion);const k=w=>{if(!i)return 0;switch(w){case"item":return i.itemCount-99;case"outfit":return i.outfitCount;case"effect":return i.effectCount;case"distance":return i.distanceCount}};return f.jsxs("div",{className:"shrink-0",children:[f.jsx("div",{className:"flex border-b border-emperia-border",children:mm.map(({key:w,label:y,icon:B})=>f.jsxs("button",{onClick:()=>r(w),className:`
              flex-1 flex flex-col items-center gap-0.5 py-2 text-xs transition-colors
              ${l===w?"text-emperia-accent border-b-2 border-emperia-accent bg-emperia-accent/5":"text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover"}
            `,children:[f.jsx(B,{className:"w-4 h-4"}),f.jsx("span",{children:y}),f.jsx("span",{className:"text-[10px] opacity-60",children:k(w)})]},w))}),f.jsxs("div",{className:"px-2 py-1.5 border-b border-emperia-border flex items-center gap-1",children:[f.jsxs("div",{className:"flex items-center gap-1.5 bg-emperia-surface rounded px-2 py-1 flex-1",children:[f.jsx(Pd,{className:"w-3.5 h-3.5 text-emperia-muted shrink-0"}),f.jsx("input",{type:"text",placeholder:"Search by ID",value:a,onChange:w=>c(w.target.value),className:"bg-transparent text-xs text-emperia-text placeholder-emperia-muted/50 outline-none w-full"})]}),f.jsx("button",{onClick:()=>p(l),disabled:!i,className:"p-1 rounded bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-green-400 hover:border-green-400/50 disabled:opacity-30 transition-colors",title:`Add new ${l}`,children:f.jsx(Nd,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:()=>{if(!d||!i)return;const w=m(l);if(!w||d!==w.end)return;const y=i?rr(i,d):d;confirm(`Remove ${l} #${y}? Only the last entry can be removed.`)&&g(d)},disabled:!i||!d||(()=>{const w=m(l);return!w||d!==w.end})(),className:"p-1 rounded bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-red-400 hover:border-red-400/50 disabled:opacity-30 transition-colors",title:`Remove last ${l}`,children:f.jsx(Zp,{className:"w-3.5 h-3.5"})})]})]})}const Fn=40,kd=20;function xm(){const l=te(Y=>Y.objectData),r=te(Y=>Y.activeCategory),i=te(Y=>Y.searchQuery),a=te(Y=>Y.getCategoryRange),c=te(Y=>Y.selectedThingId),d=te(Y=>Y.setSelectedThingId),p=te(Y=>Y.spriteData),g=te(Y=>Y.spriteOverrides),m=te(Y=>Y.editVersion),k=ee.useMemo(()=>Rp(l,r,i,a),[l,r,i,a,m]),w=ee.useRef(null),[y,B]=ee.useState(0),[T,G]=ee.useState(0),O=6,V=Math.ceil(k.length/O),Z=V*Fn,K=Math.max(0,Math.floor(y/Fn)-kd),ue=Math.min(V,Math.ceil((y+T)/Fn)+kd),q=K*O,$=Math.min(k.length,ue*O),P=k.slice(q,$),ae=ee.useCallback(()=>{w.current&&B(w.current.scrollTop)},[]);return ee.useEffect(()=>{const Y=w.current;if(!Y)return;const ke=new ResizeObserver(()=>G(Y.clientHeight));return ke.observe(Y),G(Y.clientHeight),()=>ke.disconnect()},[]),ee.useEffect(()=>{const Y=ke=>{var ye;if(!k.length||c==null)return;const we=(ye=ke.target)==null?void 0:ye.tagName;if(we==="INPUT"||we==="TEXTAREA"||we==="SELECT")return;const ie=k.findIndex(I=>I.id===c);if(ie<0)return;let Ne=ie;switch(ke.key){case"ArrowRight":Ne=Math.min(k.length-1,ie+1);break;case"ArrowLeft":Ne=Math.max(0,ie-1);break;case"ArrowDown":Ne=Math.min(k.length-1,ie+O);break;case"ArrowUp":Ne=Math.max(0,ie-O);break;default:return}Ne!==ie&&(ke.preventDefault(),d(k[Ne].id))};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[k,c,d]),ee.useEffect(()=>{if(c==null||!w.current)return;const Y=k.findIndex(Ne=>Ne.id===c);if(Y<0)return;const we=Math.floor(Y/O)*Fn,ie=w.current;(we<ie.scrollTop||we+Fn>ie.scrollTop+ie.clientHeight)&&(ie.scrollTop=Math.max(0,we-ie.clientHeight/2+Fn/2))},[c,k]),f.jsx("div",{ref:w,onScroll:ae,className:"flex-1 overflow-y-auto",children:f.jsx("div",{style:{height:Z,position:"relative"},children:f.jsx("div",{style:{position:"absolute",top:K*Fn,left:0,right:0,display:"grid",gridTemplateColumns:`repeat(${O}, 1fr)`},children:P.map(Y=>{var ye;const ke=((ye=Y.frameGroups[0])==null?void 0:ye.sprites[0])??0,we=p?fa(p,ke,g):null,ie=Y.id===c,Ne=l?rr(l,Y.id):Y.id;return f.jsxs("button",{onClick:()=>d(Y.id),className:`
                  relative flex items-center justify-center
                  border border-transparent transition-colors
                  ${ie?"bg-emperia-accent/20 border-emperia-accent":"hover:bg-emperia-hover"}
                `,style:{width:Fn,height:Fn},title:`#${Ne}`,children:[we?f.jsx("img",{src:we,alt:"",className:"w-8 h-8 pixelated",style:{imageRendering:"pixelated"}}):f.jsx("div",{className:"w-8 h-8 bg-emperia-border/30 rounded-sm"}),f.jsx("span",{className:"absolute bottom-0 right-0.5 text-[8px] text-emperia-muted/60 leading-none",children:Ne})]},Y.id)})})})})}const Cr=[16777215,12571903,12577279,12582911,12582889,12582868,12582847,13959103,15335359,16777151,16771519,16766143,16760767,16760788,16760809,16760831,15319039,13942783,12566527,14342874,9412543,9416639,9420735,9420719,9420703,9420687,10469263,11517839,12566415,12562319,12558223,12554127,12554143,12554159,12554175,11505599,10457023,9408447,11974326,6258623,9416639,6275007,6274975,6274943,6274911,8372063,10469215,12566367,12558175,12549983,12541791,12541823,12541855,12541887,10444735,8347583,6250431,9539985,4156095,4166847,4177855,4177812,4177770,4177727,6995775,9748287,12566335,12555327,12544575,12533567,12533610,12533652,12533695,9715647,6963135,4145087,7171437,22015,43775,65535,65450,65364,65280,5570304,11206400,16776960,16754944,16733440,16711680,16711765,16711849,16711934,11141375,5570815,255,4737096,16319,32703,49087,49023,48959,48896,4177664,8371968,12566272,12549888,12533504,12517376,12517439,12517503,12517567,8323263,4128959,191,2368548,10879,21887,32639,32597,32554,32512,2785024,5603072,8355584,8344576,8333824,8323072,8323114,8323156,8323199,5570687,2752639,127],ti=Cr.length,ym=4278255615,vm=4278190335,km=4278255360,wm=4294901760;function Sm(l,r,i){const a=Cr[Math.max(0,Math.min(ti-1,i.head))],c=Cr[Math.max(0,Math.min(ti-1,i.body))],d=Cr[Math.max(0,Math.min(ti-1,i.legs))],p=Cr[Math.max(0,Math.min(ti-1,i.feet))],g=new Uint32Array(r.data.buffer),m=l.data;for(let k=0;k<g.length;k++){const w=4*k;let y;switch(g[k]){case ym:y=a;break;case vm:y=c;break;case km:y=d;break;case wm:y=p;break;default:continue}m[w+0]=m[w+0]*(y>>0&255)/255,m[w+1]=m[w+1]*(y>>8&255)/255,m[w+2]=m[w+2]*(y>>16&255)/255}}function wd(l){const r=Cr[Math.max(0,Math.min(ti-1,l))],i=r>>0&255,a=r>>8&255,c=r>>16&255;return`#${i.toString(16).padStart(2,"0")}${a.toString(16).padStart(2,"0")}${c.toString(16).padStart(2,"0")}`}const cn=4294967296,Sd=2147483647,_d=-2147483648,Zr=268435455,_m=4294967295,jd=1073741823,Cd=192,oo=12,Cm=114,Em=768,bm=4096,Am=2,ca=[4294967295,-cn],qr=[0,0],Dm=[1,0],lo=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],Ve=Bm(),ir=Tm();function Pe(l,r=0){const i=[];if(i[l-1]=void 0,r!==0)for(let a=0;a<l;a++)i[a]=r;return i}function Md(l,r,i,a,c){if(!(r<0||a<0||c<0||r+c>l.length||a+c>i.length))if(l===i&&r<a&&a<r+c)for(let d=c-1;d>=0;d--)i[a+d]=l[r+d];else for(let d=0;d<c;d++)i[a+d]=l[r+d]}function yn(l,r){return Ve[((l-r^-r)&2047)>>>2]}function $i(l,r){let i,a;for(r%=18446744073709552e3,l%=18446744073709552e3,i=r%cn,a=Math.floor(l/cn)*cn,r=r-i+a,l=l-a+i;l<0;)l+=cn,r-=cn;for(;l>4294967295;)l-=cn,r+=cn;for(r=r%18446744073709552e3;r>9223372032559809e3;)r-=18446744073709552e3;for(;r<-9223372036854776e3;)r+=18446744073709552e3;return[l,r]}function vn(l,r){return $i(l[0]+r[0],l[1]+r[1])}function Rd(l,r){return $i(l[0]-r[0],l[1]-r[1])}function Bn(l,r){if(l[0]==r[0]&&l[1]==r[1])return 0;const i=l[1]<0,a=r[1]<0;return i&&!a?-1:!i&&a?1:Rd(l,r)[1]<0?-1:1}function bt(l){return l[0]>=2147483648?~~Math.max(Math.min(l[0]-cn,Sd),_d):~~Math.max(Math.min(l[0],Sd),_d)}function Er(l){return l>=0?[l,0]:[l+cn,-cn]}function Fm(l,r){if(r&=63,r<=30){const a=1<<r;return $i(Math.floor(l[0]/a),l[1]/a)}const i=(1<<30)*(1<<r-30);return $i(Math.floor(l[0]/i),l[1]/i)}function Ie(l){for(let r=l.length-1;r>=0;--r)l[r]=1024}function xo(l){return l-=2,l<4?l:3}function nr(l){return l<4?0:l<10?l-3:l-6}function _t(l){return{numBitLevels:l,models:Pe(1<<l)}}function Bm(){const l=[];for(let r=8;r>=0;--r){let i=1<<9-r-1,a=1<<9-r;for(let c=i;c<a;++c)l[c]=(r<<6)+(a-c<<6>>>9-r-1)}return l}function Tm(){const l=[0,1];let r=2;for(let i=2;i<22;++i){let a=1<<(i>>1)-1;for(let c=0;c<a;++c,++r)l[r]=i}return l}class Nm{constructor(r){L(this,"encoder",null);L(this,"decoder",null);L(this,"alive",0);L(this,"inBytesProcessed",[0,0]);L(this,"lzma");this.lzma=r}processChunk(){if(!this.alive)throw new Error("bad state");if(!this.encoder)throw new Error("No decoding");return this.lzma.codeOneBlock(),this.inBytesProcessed=this.encoder.processedInSize[0],this.encoder.finished[0]&&(this.lzma.releaseStreams(),this.alive=0),this.alive}}class Ed{constructor(r){L(this,"encoder",null);L(this,"decoder");L(this,"alive",0);L(this,"inBytesProcessed",[0,0]);this.decoder=r}processChunk(){if(!this.alive)throw new Error("Bad state");if(this.encoder)throw new Error("No encoding");const r=this.decoder.codeOneChunk();if(r===-1)throw new Error("Corrupted input");this.inBytesProcessed=this.decoder.nowPos64;const i=Bn(this.decoder.outSize,qr)>=0&&Bn(this.decoder.nowPos64,this.decoder.outSize)>=0;return(r||i)&&(this.decoder.flush(),this.decoder.cleanup(),this.alive=0),this.alive}}class Pm{constructor(r=null,i=4096){L(this,"buffer",null);L(this,"pos",0);L(this,"streamPos",0);L(this,"stream",null);L(this,"windowSize",0);L(this,"w",null);L(this,"buf",[]);this.w=r,this.stream=r,this.windowSize=i,this.buf=new Array(i),this.buffer=this.buf,this.pos=0,this.streamPos=0}copyBlock(r,i){if(this.buffer)for(let a=0;a<i;a++){let c=this.pos-r-1;c<0&&(c+=this.windowSize);const d=this.buffer[c];this.putByte(d)}}putByte(r){this.buffer&&(this.buffer[this.pos]=r,this.pos++,this.streamPos++,this.pos>=this.windowSize&&this.flush())}getByte(r){if(!this.buffer)return 0;let i=this.pos+r;return i<0?i+=this.windowSize:i>=this.windowSize&&(i-=this.windowSize),this.buffer[i]}flush(){if(this.w&&this.buffer&&this.pos>0){const r=this.buffer.slice(0,this.pos);this.w.write(r),this.pos=0}}isEmpty(){return this.streamPos===0}reset(){this.pos=0,this.streamPos=0,this.buffer&&this.buffer.fill(0)}}class Lm{constructor(){L(this,"stream",null);L(this,"code",0);L(this,"rrange",0)}setStream(r){this.stream=r}init(){this.code=0,this.rrange=-1;for(let r=0;r<5;++r)this.code=this.code<<8|this.readFromStream()}decodeBit(r,i){let a,c=r[i];return a=(this.rrange>>>11)*c,(this.code^-2147483648)<(a^-2147483648)?(this.rrange=a,r[i]=c+(2048-c>>>5)<<16>>16,this.rrange&-16777216||(this.code=this.code<<8|this.readFromStream(),this.rrange<<=8),0):(this.rrange-=a,this.code-=a,r[i]=c-(c>>>5)<<16>>16,this.rrange&-16777216||(this.code=this.code<<8|this.readFromStream(),this.rrange<<=8),1)}decodeDirectBits(r){let i=0;for(let a=r;a!=0;a-=1){this.rrange>>>=1;let c=this.code-this.rrange>>>31;this.code-=this.rrange&c-1,i=i<<1|1-c,this.rrange&-16777216||(this.code=this.code<<8|this.readFromStream(),this.rrange<<=8)}return i}get currentCode(){return this.code}get currentRange(){return this.rrange}readFromStream(){if(!this.stream)return 0;if(this.stream.pos>=this.stream.count)return-1;let r;return this.stream.buf instanceof ArrayBuffer?r=new Uint8Array(this.stream.buf)[this.stream.pos++]:this.stream.buf instanceof Uint8Array?r=this.stream.buf[this.stream.pos++]:r=this.stream.buf[this.stream.pos++],r&255}}class Im{constructor(){L(this,"rangeDecoder");L(this,"outWindow");L(this,"state",0);L(this,"rep0",0);L(this,"rep1",0);L(this,"rep2",0);L(this,"rep3",0);L(this,"prevByte",0);L(this,"nowPos64",[0,0]);L(this,"outSize",[0,0]);L(this,"posStateMask",0);L(this,"dictSizeCheck",0);L(this,"matchDecoders",[]);L(this,"rep0LongDecoders",[]);L(this,"repDecoders",[]);L(this,"repG0Decoders",[]);L(this,"repG1Decoders",[]);L(this,"repG2Decoders",[]);L(this,"posDecoders",[]);L(this,"literalDecoder");L(this,"posSlotDecoders",[]);L(this,"lenDecoder");L(this,"repLenDecoder");L(this,"posAlignDecoder");L(this,"decoder");L(this,"encoder",null);L(this,"alive",0);L(this,"inBytesProcessed",[0,0]);this.rangeDecoder=new Lm,this.outWindow=new Pm(null,bm),this.matchDecoders=Pe(Cd),this.rep0LongDecoders=Pe(Cd),this.repDecoders=Pe(oo),this.repG0Decoders=Pe(oo),this.repG1Decoders=Pe(oo),this.repG2Decoders=Pe(oo),this.posDecoders=Pe(Cm),this.literalDecoder={coders:[],numPrevBits:0,numPosBits:0,posMask:0,init:()=>this.initLiteralDecoder()};for(let r=0;r<4;r++)this.posSlotDecoders[r]=_t(6);this.lenDecoder=this.createLenDecoder(),this.repLenDecoder=this.createLenDecoder(),this.posAlignDecoder=_t(4),this.decoder=this}get literalCoder(){return this.literalDecoder}createLenDecoder(){return{choice:Pe(Am),lowCoder:[],midCoder:[],highCoder:_t(8),numPosStates:0}}setDecoderProperties(r){if(r.length<5)return!1;const i=r[0]%9,a=Math.floor(r[0]/9),c=a%5,d=Math.floor(a/5);if(d>4)return!1;this.literalDecoder.numPrevBits=i,this.literalDecoder.numPosBits=c,this.literalDecoder.posMask=(1<<c)-1,this.posStateMask=(1<<d)-1;let p=0;for(let m=0;m<4;m++){const k=r[1+m]&255;p+=k<<m*8}this.dictSizeCheck=Math.max(p,1),p>0&&(this.outWindow.windowSize=Math.max(p,4096),this.outWindow.buffer=Pe(this.outWindow.windowSize));const g=1<<this.literalDecoder.numPrevBits+this.literalDecoder.numPosBits;this.literalDecoder.coders=[];for(let m=0;m<g;m++)this.literalDecoder.coders[m]={decoders:Pe(Em)};this.lenDecoder.numPosStates=1<<d,this.repLenDecoder.numPosStates=1<<d,this.lenDecoder.lowCoder=[],this.lenDecoder.midCoder=[],this.repLenDecoder.lowCoder=[],this.repLenDecoder.midCoder=[];for(let m=0;m<1<<d;m++)this.lenDecoder.lowCoder[m]=_t(3),this.lenDecoder.midCoder[m]=_t(3),this.repLenDecoder.lowCoder[m]=_t(3),this.repLenDecoder.midCoder[m]=_t(3);return!0}copyBlock(r){const i=this.outWindow,a=this.rep0;let c=i.pos-a-1;for(c<0&&(c+=i.windowSize);r!=0;r-=1)c>=i.windowSize&&(c=0),i.buffer[i.pos]=i.buffer[c],i.pos+=1,c+=1,i.pos>=i.windowSize&&this.flush()}putByte(r){this.outWindow.buffer[this.outWindow.pos]=r,this.outWindow.pos+=1,this.outWindow.pos>=this.outWindow.windowSize&&this.flush()}getByte(r){const i=this.outWindow;let a=i.pos-r-1;return a<0&&(a+=i.windowSize),i.buffer[a]}getDecoder(r,i){const a=r&this.literalDecoder.posMask,c=(i&255)>>>8-this.literalDecoder.numPrevBits,d=(a<<this.literalDecoder.numPrevBits)+c;return this.literalDecoder.coders[d]}initLiteralDecoder(){let r=1<<this.literalDecoder.numPrevBits+this.literalDecoder.numPosBits;for(let i=0;i<r;++i)for(let a=0;a<this.literalDecoder.coders[i].decoders.length;a++)this.literalDecoder.coders[i].decoders[a]=1024}init(){this.outWindow.streamPos=0,this.outWindow.pos=0,Ie(this.matchDecoders),Ie(this.rep0LongDecoders),Ie(this.repDecoders),Ie(this.repG0Decoders),Ie(this.repG1Decoders),Ie(this.repG2Decoders),Ie(this.posDecoders),this.initLiteralDecoder();for(let r=0;r<4;++r)Ie(this.posSlotDecoders[r].models);this.initLenDecoder(this.lenDecoder),this.initLenDecoder(this.repLenDecoder),Ie(this.posAlignDecoder.models),this.initRangeDecoder()}initLenDecoder(r){Ie(r.choice);for(let i=0;i<r.numPosStates;++i)Ie(r.lowCoder[i].models),Ie(r.midCoder[i].models);Ie(r.highCoder.models)}outWindowReleaseStream(){this.flush(),this.outWindow.stream=null}decodeBit(r,i){return this.rangeDecoder.decodeBit(r,i)}decodeDirectBits(r){return this.rangeDecoder.decodeDirectBits(r)}initRangeDecoder(){this.rangeDecoder.init()}rangeBitTreeDecoder(r){let i,a=1;for(i=r.numBitLevels;i!=0;i-=1)a=(a<<1)+this.decodeBit(r.models,a);return a-(1<<r.numBitLevels)}reverseDecode(r,i,a){let c=0;for(let d=0,p=1,g;d<a;++d)g=this.decodeBit(r,i+p),p<<=1,p+=g,c|=g<<d;return c}reverseDecodeAlignDecoder(){let r=0;for(let i=1,a=0,c;a<this.posAlignDecoder.numBitLevels;++a)c=this.decodeBit(this.posAlignDecoder.models,i),i<<=1,i+=c,r|=c<<a;return r}decodeNormalWithRangeDecoder(r){let i=1;do i=i<<1|this.decodeBit(r.decoders,i);while(i<256);return i<<24>>24}decodeWithMatchByteWithRangeDecoder(r,i){let a,c,d=1;do if(c=i>>7&1,i<<=1,a=this.decodeBit(r.decoders,(1+c<<8)+d),d=d<<1|a,c!=a){for(;d<256;)d=d<<1|this.decodeBit(r.decoders,d);break}while(d<256);return d<<24>>24}decodeLenWithRangeDecoder(r,i){if(!this.decodeBit(r.choice,0))return this.rangeBitTreeDecoder(r.lowCoder[i]);let a=8;return this.decodeBit(r.choice,1)?a+=8+this.rangeBitTreeDecoder(r.highCoder):a+=this.rangeBitTreeDecoder(r.midCoder[i]),a}codeOneChunk(){let r,i,a,c,d,p=bt(this.nowPos64)&this.posStateMask;if(!this.decodeBit(this.matchDecoders,(this.state<<4)+p))r=this.getDecoder(bt(this.nowPos64),this.prevByte),this.state<7?this.prevByte=this.decodeNormalWithRangeDecoder(r):this.prevByte=this.decodeWithMatchByteWithRangeDecoder(r,this.getByte(this.rep0)),this.putByte(this.prevByte),this.state=nr(this.state),this.nowPos64=vn(this.nowPos64,[1,0]);else{if(this.decodeBit(this.repDecoders,this.state))a=0,this.decodeBit(this.repG0Decoders,this.state)?(this.decodeBit(this.repG1Decoders,this.state)?(this.decodeBit(this.repG2Decoders,this.state)?(i=this.rep3,this.rep3=this.rep2):i=this.rep2,this.rep2=this.rep1):i=this.rep1,this.rep1=this.rep0,this.rep0=i):this.decodeBit(this.rep0LongDecoders,(this.state<<4)+p)||(this.state=this.state<7?9:11,a=1),a||(a=this.decodeLenWithRangeDecoder(this.repLenDecoder,p)+2,this.state=this.state<7?8:11);else if(this.rep3=this.rep2,this.rep2=this.rep1,this.rep1=this.rep0,a=2+this.decodeLenWithRangeDecoder(this.lenDecoder,p),this.state=this.state<7?7:10,d=this.rangeBitTreeDecoder(this.posSlotDecoders[xo(a)]),d>=4){if(c=(d>>1)-1,this.rep0=(2|d&1)<<c,d<14)this.rep0+=this.reverseDecode(this.posDecoders,this.rep0-d-1,c);else if(this.rep0+=this.decodeDirectBits(c-4)<<4,this.rep0+=this.reverseDecodeAlignDecoder(),this.rep0<0)return this.rep0==-1?1:-1}else this.rep0=d;if(Bn([this.rep0,0],this.nowPos64)>=0||this.rep0>=this.dictSizeCheck)return-1;this.copyBlock(a),this.nowPos64=vn(this.nowPos64,[a,0]),this.prevByte=this.getByte(0)}return 0}setupForDecoding(r,i,a){this.rangeDecoder.setStream(r),this.outSize=i,this.outWindowReleaseStream(),this.outWindow.stream=a,this.init(),this.state=0,this.rep0=0,this.rep1=0,this.rep2=0,this.rep3=0,this.outSize=i,this.nowPos64=[0,0],this.prevByte=0,this.decoder=this,this.encoder=null,this.alive=1}processChunk(){if(!this.alive)throw new Error("Bad state");if(this.encoder)throw new Error("No encoding");const r=this.codeOneChunk();if(r===-1)throw new Error("Corrupted input");const i=Bn(this.outSize,[0,0])>=0&&Bn(this.nowPos64,this.outSize)>=0;return(r||i)&&(this.flush(),this.outWindowReleaseStream(),this.rangeDecoder.setStream(null),this.alive=0),this.alive}writeToOutput(r,i,a,c){const d=r.count+c;if(d>r.buf.length){const p=Math.max(r.buf.length*2,d),g=new Array(p);for(let m=0;m<r.count;m++)g[m]=r.buf[m];r.buf=g}for(let p=0;p<c;p++)r.buf[r.count+p]=i[a+p];r.count+=c}isBufferWithCount(r){const i=r;return!!i&&Array.isArray(i.buf)&&typeof i.count=="number"&&typeof i.write=="function"}flush(){const r=this.outWindow.pos-this.outWindow.streamPos;if(r){if(this.outWindow.stream&&this.outWindow.buffer){const i=this.outWindow.stream;if(this.isBufferWithCount(i))this.writeToOutput(i,this.outWindow.buffer,this.outWindow.streamPos,r);else if(typeof i.write=="function"){const a=this.outWindow.buffer.slice(this.outWindow.streamPos,this.outWindow.streamPos+r);i.write(a)}}this.outWindow.pos>=this.outWindow.windowSize&&(this.outWindow.pos=0),this.outWindow.streamPos=this.outWindow.pos}}cleanup(){this.outWindow.stream=null,this.rangeDecoder.stream=null}}class jm{constructor(){L(this,"choice",Pe(2));L(this,"lowCoder",[]);L(this,"midCoder",[]);L(this,"highCoder",_t(8));L(this,"tableSize",0);L(this,"prices",[]);L(this,"counters",[]);for(let r=0;r<16;++r)this.lowCoder[r]=_t(3),this.midCoder[r]=_t(3)}init(r){Ie(this.choice);for(let i=0;i<r;++i)Ie(this.lowCoder[i].models),Ie(this.midCoder[i].models);Ie(this.highCoder.models)}encode(r,i,a){r<8?(a.encodeBit(this.choice,0,0),a.encodeBitTree(this.lowCoder[i],r)):(r-=8,a.encodeBit(this.choice,0,1),r<8?(a.encodeBit(this.choice,1,0),a.encodeBitTree(this.midCoder[i],r)):(a.encodeBit(this.choice,1,1),a.encodeBitTree(this.highCoder,r-8)))}encodeWithUpdate(r,i,a){this.encode(r,i,a),this.counters&&(this.counters[i]-=1)==0&&(this.counters[i]=this.tableSize)}getPrice(r,i){return this.prices[i*272+r]}initPriceTable(){this.prices=[],this.counters=[]}setTableSize(r){this.tableSize=r}setTableSizeAndInitCounters(r,i){if(this.tableSize=r,this.counters)for(let a=0;a<i;++a)this.counters[a]=r}getTableSize(){return this.tableSize}updateTables(r){(!this.prices||!this.counters)&&this.initPriceTable();for(let i=0;i<r;++i)this.setPrices(i,this.tableSize,this.prices,0),this.counters&&(this.counters[i]=this.tableSize)}getBitTreePrice(r,i){let a,c,d=1,p=0;for(c=r.numBitLevels;c!=0;)c-=1,a=i>>>c&1,p+=this.getBitPrice(r.models[d],a),d=(d<<1)+a;return p}getBitPrice(r,i){return yn(r,i)}setPrices(r,i,a,c){const d=this.getBitPrice(this.choice[0],0),p=this.getBitPrice(this.choice[0],1),g=p+this.getBitPrice(this.choice[1],0),m=p+this.getBitPrice(this.choice[1],1);let k=0;const w=c+r*272;for(k=0;k<8;++k){if(k>=i)return;a[w+k]=d+this.getBitTreePrice(this.lowCoder[r],k)}for(;k<16;++k){if(k>=i)return;a[w+k]=g+this.getBitTreePrice(this.midCoder[r],k-8)}for(;k<i;++k)a[w+k]=m+this.getBitTreePrice(this.highCoder,k-8-8)}}class Mm{constructor(){L(this,"coders");this.coders=Pe(768,1024)}decodeNormal(r){let i=1;for(;i<256;){const a=r.decodeBit(this.coders,i);i=i<<1|a}return i&255}decodeWithMatchByte(r,i){let a=i,c=1;for(;c<256;){const d=a>>7&1;a<<=1;const p=r.decodeBit(this.coders,(1+d<<8)+c);if(c=c<<1|p,d!==p){for(;c<256;){const g=r.decodeBit(this.coders,c);c=c<<1|g}break}}return c&255}encode(r,i){let a=1;for(let c=7;c>=0;c--){const d=i>>c&1;r.encodeBit(this.coders,a,d),a=a<<1|d}}encodeMatched(r,i,a){let c=i,d=1,p=!0;for(let g=7;g>=0;g--){const m=a>>g&1;let k=d;if(p){const w=c>>g&1;k+=1+w<<8,p=w===m}r.encodeBit(this.coders,k,m),d=d<<1|m}}getPrice(r,i,a){let c=i,d=0,p=1,g=7;if(r)for(;g>=0;){const m=c>>g&1,k=a>>g&1;if(d+=yn(this.coders[1+m<<8+p],k),p=p<<1|k,m!==k){g--;break}g--}for(;g>=0;){const m=a>>g&1;d+=yn(this.coders[p],m),p=p<<1|m,g--}return d}reset(){this.coders.fill(1024)}get decoders(){return this.coders}}class Rm{constructor(r,i){L(this,"_coders");L(this,"_numPrevBits");L(this,"_posMask");const a=1<<i+r;this._coders=[],this._numPrevBits=i,this._posMask=(1<<r)-1;for(let c=0;c<a;c++)this._coders[c]=new Mm}getSubCoder(r,i){return this._coders[((r&this._posMask)<<this._numPrevBits)+(i>>8-this._numPrevBits)]}reset(){this._coders.forEach(r=>r.reset())}get numPrevBits(){return this._numPrevBits}get numPosBits(){return Math.log2(this._posMask+1)}get posMask(){return this._posMask}get coders(){return this._coders}}const ao=new Map;function Om(l){return l<<6}function ha(l,r){const i=`${l.numBitLevels}-${r}`;if(ao.has(i))return ao.get(i);let a=0,c=1;for(let d=l.numBitLevels;d>0;d--){const p=r>>>d-1&1;a+=yn(l.models[c],p),c=(c<<1)+p}return ao.size<1e4&&ao.set(i,a),a}class Um{constructor(){L(this,"state",0);L(this,"previousByte",0);L(this,"position",[0,0]);L(this,"repDistances",[0,0,0,0]);L(this,"longestMatchLength",0);L(this,"longestMatchWasFound",!1);L(this,"additionalOffset",0);L(this,"isMatch",Pe(192));L(this,"isRep",Pe(12));L(this,"isRepG0",Pe(12));L(this,"isRepG1",Pe(12));L(this,"isRepG2",Pe(12));L(this,"isRep0Long",Pe(192))}initModels(){Ie(this.isMatch),Ie(this.isRep),Ie(this.isRepG0),Ie(this.isRepG1),Ie(this.isRepG2),Ie(this.isRep0Long)}updateRepDistances(r,i){if(i===0)this.repDistances[3]=this.repDistances[2],this.repDistances[2]=this.repDistances[1],this.repDistances[1]=this.repDistances[0],this.repDistances[0]=r;else{const a=this.repDistances[i];for(let c=i;c>0;c--)this.repDistances[c]=this.repDistances[c-1];this.repDistances[0]=a}}}class zm{constructor(){L(this,"posSlotEncoder",[]);L(this,"posEncoders",Pe(114));L(this,"posAlignEncoder");for(let r=0;r<4;r++)this.posSlotEncoder[r]=_t(6);this.posAlignEncoder=_t(4)}init(){for(const r of this.posSlotEncoder)Ie(r.models);Ie(this.posEncoders),Ie(this.posAlignEncoder.models)}encodePosition(r,i,a){const c=this.getPosSlot(r);if(a.encodeBitTree(this.posSlotEncoder[i],c),c>=4){const d=(c>>1)-1,p=(2|c&1)<<d,g=r-p;c<14?this.encodeReverseBits(g,d,a):(a.encodeDirectBits(g>>4,d-4),a.encodeBitTree(this.posAlignEncoder,g&15))}}getPositionPrice(r,i){const a=this.getPosSlot(r);let c=ha(this.posSlotEncoder[i],a);if(a>=4){const d=(a>>1)-1,p=(2|a&1)<<d,g=r-p;a<14?c+=this.getReverseBitsPrice(g,d):(c+=Om(d-4),c+=ha(this.posAlignEncoder,g&15))}return c}getPosSlot(r){return r<4?r:r<1<<20?ir[r>>6]+12:ir[r>>26]+52}encodeReverseBits(r,i,a){let c=1;for(let d=0;d<i;d++){const p=r&1;a.encodeBit(this.posEncoders,c,p),c=c<<1|p,r>>>=1}}getReverseBitsPrice(r,i){let a=0,c=1;for(let d=0;d<i;d++){const p=r&1;a+=yn(this.posEncoders[c],p),c=c<<1|p,r>>>=1}return a}}class Hm{constructor(){L(this,"encoderState",new Um);L(this,"positionEncoder",new zm);L(this,"_state",0);L(this,"_previousByte",0);L(this,"_distTableSize",0);L(this,"_longestMatchWasFound",0);L(this,"_optimumEndIndex",0);L(this,"_optimumCurrentIndex",0);L(this,"_additionalOffset",0);L(this,"_dictionarySize",0);L(this,"_matchFinder",null);L(this,"_dictionarySizePrev",0);L(this,"_numFastBytes",0);L(this,"_numLiteralContextBits",0);L(this,"_numLiteralPosStateBits",0);L(this,"_posStateBits",0);L(this,"_posStateMask",0);L(this,"_needReleaseMFStream",0);L(this,"_inStream",null);L(this,"_finished",0);L(this,"nowPos64",[0,0]);L(this,"_repDistances",Pe(4));L(this,"_optimum",[]);L(this,"_rangeEncoder",{stream:{buf:[],count:0},rrange:0,cache:0,low:[0,0],cacheSize:0,position:[0,0],encodeBit:()=>{},encodeBitTree:()=>{},encodeDirectBits:()=>{}});L(this,"_isMatch",Pe(192));L(this,"_isRep",Pe(12));L(this,"_isRepG0",Pe(12));L(this,"_isRepG1",Pe(12));L(this,"_isRepG2",Pe(12));L(this,"_isRep0Long",Pe(192));L(this,"_posSlotEncoder",[]);L(this,"_posEncoders",Pe(114));L(this,"_posAlignEncoder",null);L(this,"_lenEncoder",null);L(this,"_repMatchLenEncoder",null);L(this,"_literalEncoder",null);L(this,"_matchDistances",[]);L(this,"_posSlotPrices",[]);L(this,"_distancesPrices",[]);L(this,"_alignPrices",Pe(16));L(this,"_matchPriceCount",0);L(this,"_alignPriceCount",0);L(this,"reps",Pe(4));L(this,"repLens",Pe(4));L(this,"processedInSize",[[0,0]]);L(this,"processedOutSize",[[0,0]]);L(this,"finished",[0]);L(this,"properties",Pe(5));L(this,"tempPrices",Pe(128));L(this,"_longestMatchLength",0);L(this,"_matchFinderType",1);L(this,"_numDistancePairs",0);L(this,"_numFastBytesPrev",-1);L(this,"backRes",0)}baseInit(){this._state=0,this._previousByte=0;for(let r=0;r<4;++r)this._repDistances[r]=0}getOptimum(){return this._optimum}getBackRes(){return this.backRes}setBackRes(r){this.backRes=r}init(){this.baseInit(),this.encoderState.initModels(),this.positionEncoder.init(),this._optimum=[];for(let r=0;r<4096;r++)this._optimum[r]={};this.initEncoderState(),Ie(this._isMatch),Ie(this._isRep0Long),Ie(this._isRep),Ie(this._isRepG0),Ie(this._isRepG1),Ie(this._isRepG2),Ie(this._posEncoders),this.initLiteralEncoder();for(let r=0;r<4;++r)Ie(this._posSlotEncoder[r].models);this._lenEncoder&&this._lenEncoder.init(1<<this._posStateBits),this._repMatchLenEncoder&&this._repMatchLenEncoder.init(1<<this._posStateBits),this._posAlignEncoder&&Ie(this._posAlignEncoder.models),this._longestMatchWasFound=0,this._optimumEndIndex=0,this._optimumCurrentIndex=0,this._additionalOffset=0}initEncoderState(){this._rangeEncoder.low=[0,0],this._rangeEncoder.rrange=4294967295,this._rangeEncoder.cacheSize=1,this._rangeEncoder.cache=0,this._rangeEncoder.position=[0,0]}initLiteralEncoder(){const r=1<<this._literalEncoder.numPrevBits+this._literalEncoder.numPosBits;for(let i=0;i<r;++i)Ie(this._literalEncoder.coders[i].decoders)}createOptimumStructures(){for(let r=0;r<4096;++r)this._optimum[r]={};for(let r=0;r<4;++r)this._posSlotEncoder[r]=_t(6)}createLenPriceTableEncoder(){const r=new jm;return r.initPriceTable(),r}createLiteralEncoderEncoder2(){return{decoders:Pe(768)}}createLiteralEncoder(){this._literalEncoder!=null&&this._literalEncoder.numPrevBits==this._numLiteralContextBits&&this._literalEncoder.numPosBits==this._numLiteralPosStateBits||(this._literalEncoder=new Rm(this._numLiteralPosStateBits,this._numLiteralContextBits))}initialize(){this._lenEncoder=this.createLenPriceTableEncoder(),this._repMatchLenEncoder=this.createLenPriceTableEncoder(),this._posAlignEncoder=_t(4),this._optimum=[],this.createOptimumStructures(),this.createLiteralEncoder(),this.init()}configure(r){this.setDictionarySize(1<<r.searchDepth),this._numFastBytes=r.filterStrength,this._matchFinderType=r.modeIndex,this._numLiteralContextBits=3,this._numLiteralPosStateBits=0,this._posStateBits=2,this._posStateMask=3}setDictionarySize(r){this._dictionarySize=r;let i=0;for(;r>1<<i;++i);this._distTableSize=i*2}encodeBit(r,i,a){const c=this._rangeEncoder;let d,p=r[i];d=(c.rrange>>>11)*p,a?(c.low=vn(c.low,this.and64(Er(d),[4294967295,0])),c.rrange-=d,r[i]=p-(p>>>5)<<16>>16):(c.rrange=d,r[i]=p+(2048-p>>>5)<<16>>16),c.rrange&-16777216||(c.rrange<<=8,this.shiftLow())}encodeBitTree(r,i){let a,c,d=1;for(c=r.numBitLevels;c!=0;)c-=1,a=i>>>c&1,this.encodeBit(r.models,d,a),d=d<<1|a}encodeLiteral(r,i){let a,c=1;for(let d=7;d>=0;--d)a=i>>d&1,this.encodeBit(r.decoders,c,a),c=c<<1|a}encodeMatched(r,i,a){let c,d,p,g=!0,m=1;for(let k=7;k>=0;--k)c=a>>k&1,p=m,g&&(d=i>>k&1,p+=1+d<<8,g=d===c),this.encodeBit(r.decoders,p,c),m=m<<1|c}encodeLength(r,i,a){r.encode(i,a,this)}encodeDirectBits(r,i){const a=this._rangeEncoder;for(let c=i-1;c>=0;c-=1)a.rrange>>>=1,(r>>>c&1)==1&&(a.low=vn(a.low,Er(a.rrange))),a.rrange&-16777216||(a.rrange<<=8,this.shiftLow())}reverseEncode(r){const i=this._posAlignEncoder;if(!i)return;let a,c=1;for(let d=0;d<i.numBitLevels;++d)a=r&1,this.encodeBit(i.models,c,a),c=c<<1|a,r>>=1}reverseEncodeRange(r,i,a){let c,d=1;for(let p=0;p<i;++p)c=a&1,this.encodeBit(this._posEncoders,r+d,c),d=d<<1|c,a>>=1}writeEndMarker(r){this.encodeBit(this._isMatch,(this._state<<4)+r,1),this.encodeBit(this._isRep,this._state,0),this._state=this._state<7?7:10,this.encodeLength(this._lenEncoder,0,r);const i=63,a=xo(2);this.encodeBitTree(this._posSlotEncoder[a],i),this.encodeDirectBits(67108863,26),this.reverseEncode(15)}encodeLengthWithPriceUpdate(r,i,a){r.encodeWithUpdate(i,a,this)}and64(r,i){const a=~~Math.max(Math.min(r[1]/4294967296,2147483647),-2147483648)&~~Math.max(Math.min(i[1]/4294967296,2147483647),-2147483648),c=bt(r)&bt(i);let d=a*4294967296,p=c;return c<0&&(p+=4294967296),[p,d]}shru64(r,i){i&=63;let a=this.pwrAsDouble(i),c=$i(Math.floor(r[0]/a),r[1]/a);return r[1]<0&&(c=vn(c,this.shl64([2,0],63-i))),c}shl64(r,i){let a,c,d,p;if(i&=63,r[0]==0&&r[1]==-9223372036854776e3)return i?[0,0]:r;if(r[1]<0)throw new Error("Neg");return p=this.pwrAsDouble(i),c=r[1]*p%18446744073709552e3,d=r[0]*p,a=d-d%4294967296,c+=a,d-=a,c>=9223372036854776e3&&(c-=18446744073709552e3),[d,c]}pwrAsDouble(r){return r<=30?1<<r:this.pwrAsDouble(30)*this.pwrAsDouble(r-30)}shiftLow(){const r=this._rangeEncoder,i=bt(this.shru64(r.low,32));if(i!=0||Bn(r.low,[4278190080,0])<0){r.position=vn(r.position,Er(r.cacheSize));let a=r.cache;do this.writeToStream(r.stream,a+i),a=255;while((r.cacheSize-=1)!=0);r.cache=bt(r.low)>>>24}r.cacheSize+=1,r.low=this.shl64(this.and64(r.low,[16777215,0]),8)}writeToStream(r,i){if(r){if(r.count>=r.buf.length){const a=Math.max(r.buf.length*2,r.count+1),c=new Array(a);for(let d=0;d<r.count;d++)c[d]=r.buf[d];r.buf=c}r.buf[r.count++]=i<<24>>24}}initRangeEncoder(){this._rangeEncoder.position=[0,0],this._rangeEncoder.low=[0,0],this._rangeEncoder.rrange=-1,this._rangeEncoder.cacheSize=1,this._rangeEncoder.cache=0}fillAlignPrices(){for(let r=0;r<16;++r)this._alignPrices[r]=this.reverseGetPrice(this._posAlignEncoder,r);this._alignPriceCount=0}fillDistancesPrices(){let r,i,a,c,d,p;for(let g=4;g<128;++g)c=this.getPosSlot(g),a=(c>>1)-1,r=(2|c&1)<<a,this.tempPrices[g]=this.reverseGetPriceArray(this._posEncoders,r-c-1,a,g-r);for(let g=0;g<4;++g){for(i=this._posSlotEncoder[g],d=g<<6,c=0;c<this._distTableSize;c+=1)this._posSlotPrices[d+c]=this.rangeCoder_Encoder_GetPrice_1(i,c);for(c=14;c<this._distTableSize;c+=1)this._posSlotPrices[d+c]+=(c>>1)-1-4<<6;p=g*128;for(let m=0;m<4;++m)this._distancesPrices[p+m]=this._posSlotPrices[d+m];for(let m=4;m<128;++m)this._distancesPrices[p+m]=this._posSlotPrices[d+this.getPosSlot(m)]+this.tempPrices[m]}this._matchPriceCount=0}getPosSlot(r){return r<2048?ir[r]:r<2097152?ir[r>>10]+20:ir[r>>20]+40}reverseGetPrice(r,i){let a,c=1,d=0;for(let p=r.numBitLevels;p!=0;p-=1)a=i&1,i>>>=1,d+=this.getPrice(r.models[c],a),c=c<<1|a;return d}reverseGetPriceArray(r,i,a,c){let d,p=1,g=0;for(let m=a;m!=0;m-=1)d=c&1,c>>>=1,g+=Ve[((r[i+p]-d^-d)&2047)>>>2],p=p<<1|d;return g}getPrice(r,i){return yn(r,i)}rangeCoder_Encoder_GetPrice_1(r,i){return ha(r,i)}createEncoderStructures(){this._optimum=[];for(let r=0;r<4096;r++)this._optimum[r]={};for(let r=0;r<4096;++r)this._optimum[r]={};this._posSlotEncoder=new Array(4);for(let r=0;r<4;++r)this._posSlotEncoder[r]=_t(6)}createMatchFinderAndStructures(){if(!this._matchFinder){const r={};let i=4;this._matchFinderType||(i=2),r.HASH_ARRAY=i>2,r.HASH_ARRAY?(r.kNumHashDirectBytes=0,r.kMinMatchCheck=4,r.kFixHashSize=66560):(r.kNumHashDirectBytes=2,r.kMinMatchCheck=3,r.kFixHashSize=0),r._cyclicBufferSize=0,r._cyclicBufferPos=0,r._streamPos=0,r._cutValue=255,r._matchMaxLen=0,r._streamEndWasReached=0,r._pos=0,r._posLimit=0,r._son=[],r._hash=[],r._bufferBase=[],r._blockSize=0,r._keepSizeAfter=0,r._keepSizeBefore=0,r._pointerToLastSafePosition=0,this._matchFinder=r}this.createLiteralEncoder(),!(this._dictionarySize==this._dictionarySizePrev&&this._numFastBytesPrev==this._numFastBytes)&&(this._dictionarySizePrev=this._dictionarySize,this._numFastBytesPrev=this._numFastBytes)}getSubCoderUtility(r,i){const c=(r&this._literalEncoder.posMask)<<this._literalEncoder.numPrevBits,d=8-this._literalEncoder.numPrevBits,p=(i&255)>>>d,g=c+p;return this._literalEncoder.coders[g]}}class Gm{constructor(r){L(this,"matchFinder");this.matchFinder=r}getIndexByte(r){return this.matchFinder._bufferBase[this.matchFinder._bufferOffset+this.matchFinder._pos+r]}getMatchLen(r,i,a){this.matchFinder._streamEndWasReached&&this.matchFinder._pos+r+a>this.matchFinder._streamPos&&(a=this.matchFinder._streamPos-(this.matchFinder._pos+r)),++i;let c;const d=this.matchFinder._bufferOffset+this.matchFinder._pos+r;for(c=0;c<a&&this.matchFinder._bufferBase[d+c]==this.matchFinder._bufferBase[d+c-i];++c);return c}getNumAvailableBytes(){return this.matchFinder._streamPos-this.matchFinder._pos}moveBlock(){let r=this.matchFinder._bufferOffset+this.matchFinder._pos-this.matchFinder._keepSizeBefore;r>0&&--r;const i=this.matchFinder._bufferOffset+this.matchFinder._streamPos-r;for(let a=0;a<i;++a)this.matchFinder._bufferBase[a]=this.matchFinder._bufferBase[r+a];this.matchFinder._bufferOffset-=r}movePos(){this.matchFinder._pos+=1,this.matchFinder._pos>this.matchFinder._posLimit&&(this.matchFinder._bufferOffset+this.matchFinder._pos>this.matchFinder._pointerToLastSafePosition&&this.moveBlock(),this.readBlock())}readBlock(){if(!this.matchFinder._streamEndWasReached)for(;;){const r=-this.matchFinder._bufferOffset+this.matchFinder._blockSize-this.matchFinder._streamPos;if(!r)return;const i=this.readFromStream(this.matchFinder._bufferOffset+this.matchFinder._streamPos,r);if(i==-1){this.matchFinder._posLimit=this.matchFinder._streamPos,this.matchFinder._bufferOffset+this.matchFinder._posLimit>this.matchFinder._pointerToLastSafePosition&&(this.matchFinder._posLimit=this.matchFinder._pointerToLastSafePosition-this.matchFinder._bufferOffset),this.matchFinder._streamEndWasReached=1;return}this.matchFinder._streamPos+=i,this.matchFinder._streamPos>=this.matchFinder._pos+this.matchFinder._keepSizeAfter&&(this.matchFinder._posLimit=this.matchFinder._streamPos-this.matchFinder._keepSizeAfter)}}reduceOffsets(r){this.matchFinder._bufferOffset+=r,this.matchFinder._posLimit-=r,this.matchFinder._pos-=r,this.matchFinder._streamPos-=r}readFromStream(r,i){const a=this.matchFinder._stream,c=this.matchFinder._bufferBase;if(a.pos>=a.count)return-1;let d;return a.buf instanceof Uint8Array?d=Array.from(a.buf):a.buf instanceof ArrayBuffer?d=Array.from(new Uint8Array(a.buf)):d=a.buf,i=Math.min(i,a.count-a.pos),Md(d,a.pos,c,r,i),a.pos+=i,i}}function Wm(l,r,i,a){return~~((l+r+i+a)/2)+256}function Vm(l,r){const i=r+1;if(l._cyclicBufferSize!==i){const a=(l._cyclicBufferSize=i)*2;l._son=Pe(a)}}function $m(l,r){let i=65536,a=0;return r&&(i=l-1,i|=i>>1,i|=i>>2,i|=i>>4,i|=i>>8,i>>=1,i|=65535,i>16777216&&(i>>=1),a=i,i+=1),{hashMask:a,hashSizeSum:i}}function Ym(l){return 16+(l>>1)}function Qm(l){return l<jd}const Km={1:{searchDepth:16,filterStrength:64,modeIndex:0},2:{searchDepth:20,filterStrength:64,modeIndex:0},3:{searchDepth:19,filterStrength:64,modeIndex:1},4:{searchDepth:20,filterStrength:64,modeIndex:1},5:{searchDepth:21,filterStrength:128,modeIndex:1},6:{searchDepth:22,filterStrength:128,modeIndex:1},7:{searchDepth:23,filterStrength:128,modeIndex:1},8:{searchDepth:24,filterStrength:255,modeIndex:1},9:{searchDepth:25,filterStrength:255,modeIndex:1}};var ce,lt,je,D,un,j,Ud,zd,pa,co,Hd,Gd,Wd,Vd,$d,Yd,Qd,ma,Kd,Xd,Zd,Jd,qd,Wi,ga,ef,tf,nf,rf,xa,sf,of,lf,af,fo,uf,ya,Sr,cf,va,ho,ka,df,_r,Vi,wa,ff,hf,pf,mf;class Od{constructor(){kr(this,j);kr(this,ce);kr(this,lt);kr(this,je,null);kr(this,D);kr(this,un);Xr(this,ce,new Hm),Xr(this,lt,new Im),Xr(this,D,ne(this,j,Ud).call(this)),Xr(this,un,ne(this,j,zd).call(this))}writeHeaderProperties(){x(this,ce).properties[0]=(x(this,ce)._posStateBits*5+x(this,ce)._numLiteralPosStateBits)*9+x(this,ce)._numLiteralContextBits&255;for(let i=0;i<4;i++)x(this,ce).properties[1+i]=x(this,ce)._dictionarySize>>8*i&255;ne(this,j,Gd).call(this,x(this,D).output,x(this,ce).properties,0,5)}GetPosSlot2(r){return r<131072?ir[r>>6]+12:r<134217728?ir[r>>16]+32:ir[r>>26]+52}ReverseEncode(r,i,a){let c,d=1;for(let p=0;p<i;++p)c=a&1,x(this,D).chunker.encoder.encodeBit(x(this,D).chunker.encoder._posEncoders,r+d,c),d=d<<1|c,a>>=1}encodeString(r){let i,a=[],c=0,d=r.length;ne(this,j,Wd).call(this,r,0,d,a,0);for(let g=0;g<d;++g)i=a[g],i>=1&&i<=127?++c:!i||i>=128&&i<=2047?c+=2:c+=3;const p=[];c=0;for(let g=0;g<d;++g)i=a[g],i>=1&&i<=127?p[c++]=i<<24>>24:!i||i>=128&&i<=2047?(p[c++]=(192|i>>6&31)<<24>>24,p[c++]=(128|i&63)<<24>>24):(p[c++]=(224|i>>12&15)<<24>>24,p[c++]=(128|i>>6&63)<<24>>24,p[c++]=(128|i&63)<<24>>24);return p}compress(r,i=5){const a=Km[i];for(ne(this,j,Yd).call(this,r,a);x(this,D).chunker.processChunk(););const c=ne(this,j,co).call(this,x(this,D).output);return new Int8Array(c)}compressString(r,i=5){const a=this.encodeString(r);return this.compress(new Uint8Array(a),i)}decompress(r){for(ne(this,j,ma).call(this,r);x(this,un).chunker.processChunk(););return ne(this,j,co).call(this,x(this,un).output)}decompressString(r){for(ne(this,j,ma).call(this,r);x(this,un).chunker.processChunk(););const i=ne(this,j,co).call(this,x(this,un).output),a=ne(this,j,mf).call(this,i);return typeof a=="string"?a:String.fromCharCode(...a)}codeOneBlock(){ne(this,j,sf).call(this)}releaseStreams(){ne(this,j,df).call(this)}}ce=new WeakMap,lt=new WeakMap,je=new WeakMap,D=new WeakMap,un=new WeakMap,j=new WeakSet,Ud=function(){return{chunker:new Nm(this),output:{buf:Pe(32),count:0,write:()=>{}}}},zd=function(){return{chunker:new Ed(x(this,lt)),output:{buf:Pe(32),count:0,write:()=>{}}}},pa=function(r){if(r.pos>=r.count)return-1;let i;return r.buf instanceof ArrayBuffer?i=new Uint8Array(r.buf)[r.pos++]:(r.buf instanceof Uint8Array,i=r.buf[r.pos++]),i&255},co=function(r){return r.buf.slice(0,r.count)},Hd=function(r,i){if(r){if(r.count>=r.buf.length){const a=Math.max(r.buf.length*2,r.count+1),c=new Array(a);for(let d=0;d<r.count;d++)c[d]=r.buf[d];r.buf=c}r.buf[r.count++]=i<<24>>24}},Gd=function(r,i,a,c){const d=r.count+c;if(d>r.buf.length){const p=Math.max(r.buf.length*2,d),g=new Array(p);for(let m=0;m<r.count;m++)g[m]=r.buf[m];r.buf=g}Md(i,a,r.buf,r.count,c),r.count+=c},Wd=function(r,i,a,c,d){for(let p=i;p<a;++p)c[d++]=r.charCodeAt(p)},Vd=function(r){x(this,ce).initialize(),x(this,ce).configure(r)},$d=function(r,i,a){if(Bn(i,ca)<0)throw new Error("invalid length "+i);x(this,D).length_0=i,ne(this,j,lf).call(this),ne(this,j,Vd).call(this,a),this.writeHeaderProperties();for(let c=0;c<64;c+=8)ne(this,j,Hd).call(this,x(this,D).output,bt(Fm(i,c))&255);x(this,ce)._needReleaseMFStream=0,x(this,ce)._inStream=r,x(this,ce)._finished=0,ne(this,j,of).call(this),x(this,ce)._rangeEncoder.stream=x(this,D).output,x(this,ce).init(),x(this,ce).fillDistancesPrices(),x(this,ce).fillAlignPrices(),x(this,ce)._lenEncoder.setTableSize(x(this,ce)._numFastBytes+1-2),x(this,ce)._lenEncoder.updateTables(1<<x(this,ce)._posStateBits),x(this,ce)._repMatchLenEncoder.setTableSize(x(this,ce)._numFastBytes+1-2),x(this,ce)._repMatchLenEncoder.updateTables(1<<x(this,ce)._posStateBits),x(this,ce).nowPos64=qr,x(this,D).chunker.encoder=x(this,ce),x(this,D).chunker.alive=1},Yd=function(r,i){const a=r instanceof ArrayBuffer?r.byteLength:r.length,c=Math.max(32,Math.ceil(a*1.2));x(this,D).output={buf:Pe(c),count:0,write:()=>{}};const d={pos:0,buf:r instanceof ArrayBuffer?new Uint8Array(r):r,count:r instanceof ArrayBuffer?new Uint8Array(r).length:r.length};ne(this,j,$d).call(this,d,Er(r instanceof ArrayBuffer?r.byteLength:r.length),i)},Qd=function(r){let i="",a=[],c,d;for(let g=0;g<5;++g){if(c=ne(this,j,pa).call(this,r),c==-1)throw new Error("truncated input");a[g]=c<<24>>24}if(x(this,lt).setDecoderProperties(a)?0:1)throw new Error("corrupted input");for(let g=0;g<64;g+=8){if(c=ne(this,j,pa).call(this,r),c==-1)throw new Error("truncated input");c=c.toString(16),c.length==1&&(c="0"+c),i=c+""+i}/^0+$|^f+$/i.test(i)?x(this,D).length_0=ca:(d=parseInt(i,16),d>_m?x(this,D).length_0=ca:x(this,D).length_0=Er(d)),x(this,un).chunker=ne(this,j,nf).call(this,r,x(this,D).length_0)},ma=function(r){const i=r instanceof ArrayBuffer?r.byteLength:r.length,a=32,c=i*2,d=Math.max(a,c);x(this,un).output={buf:Pe(d),count:0,write:()=>{}};const p={buf:r,pos:0,count:r instanceof ArrayBuffer?r.byteLength:r.length};ne(this,j,Qd).call(this,p)},Kd=function(r,i,a){let c;x(this,ce)._matchFinder._keepSizeBefore=r,x(this,ce)._matchFinder._keepSizeAfter=i,c=r+i+a,(x(this,ce)._matchFinder._bufferBase==null||x(this,ce)._matchFinder._blockSize!=c)&&(x(this,ce)._matchFinder._bufferBase=Pe(c),x(this,ce)._matchFinder._blockSize=c),x(this,ce)._matchFinder._pointerToLastSafePosition=x(this,ce)._matchFinder._blockSize-i},Xd=function(){const r=x(this,D).chunker.encoder._matchFinder;let i;r._pos+=1,r._pos>r._posLimit&&(i=r._bufferOffset+r._pos,i>r._pointerToLastSafePosition&&x(this,je).moveBlock(),x(this,je).readBlock())},Zd=function(r,i){const a=x(this,ce)._dictionarySize,c=x(this,ce)._numFastBytes;if(Qm(a)){x(this,ce)._matchFinder._cutValue=Ym(c);const d=Wm(a,r,c,i);ne(this,j,Kd).call(this,a+r,c+i,d),x(this,ce)._matchFinder._matchMaxLen=c,Vm(x(this,ce)._matchFinder,a);const{hashMask:p,hashSizeSum:g}=$m(a,x(this,ce)._matchFinder.HASH_ARRAY);if(x(this,ce)._matchFinder.HASH_ARRAY){x(this,ce)._matchFinder._hashMask=p;const m=g+x(this,ce)._matchFinder.kFixHashSize;m!==x(this,ce)._matchFinder._hashSizeSum&&(x(this,ce)._matchFinder._hashSizeSum=m,x(this,ce)._matchFinder._hash=Pe(m))}else g!==x(this,ce)._matchFinder._hashSizeSum&&(x(this,ce)._matchFinder._hashSizeSum=g,x(this,ce)._matchFinder._hash=Pe(g))}},Jd=function(){let r,i,a,c,d,p,g,m,k,w,y,B,T,G,O,V,Z,K,ue,q,$;const P=x(this,D).chunker.encoder._matchFinder,ae=x(this,D).chunker.encoder._matchDistances;if(P._pos+P._matchMaxLen<=P._streamPos)G=P._matchMaxLen;else if(G=P._streamPos-P._pos,G<P.kMinMatchCheck)return ne(this,j,Wi).call(this),0;for(Z=0,O=P._pos>P._cyclicBufferSize?P._pos-P._cyclicBufferSize:0,i=P._bufferOffset+P._pos,V=1,m=0,k=0,P.HASH_ARRAY?($=lo[P._bufferBase[i]&255]^P._bufferBase[i+1]&255,m=$&1023,$^=(P._bufferBase[i+2]&255)<<8,k=$&65535,w=($^lo[P._bufferBase[i+3]&255]<<5)&P._hashMask):w=P._bufferBase[i]&255^(P._bufferBase[i+1]&255)<<8,a=P._hash[P.kFixHashSize+w]||0,P.HASH_ARRAY&&(c=P._hash[m]||0,d=P._hash[1024+k]||0,P._hash[m]=P._pos,P._hash[1024+k]=P._pos,c>O&&P._bufferBase[P._bufferOffset+c]==P._bufferBase[i]&&(ae[Z++]=V=2,ae[Z++]=P._pos-c-1),d>O&&P._bufferBase[P._bufferOffset+d]==P._bufferBase[i]&&(d==c&&(Z-=2),ae[Z++]=V=3,ae[Z++]=P._pos-d-1,c=d),Z!=0&&c==a&&(Z-=2,V=1)),P._hash[P.kFixHashSize+w]=P._pos,ue=(P._cyclicBufferPos<<1)+1,q=P._cyclicBufferPos<<1,B=T=P.kNumHashDirectBytes,P.kNumHashDirectBytes!=0&&a>O&&P._bufferBase[P._bufferOffset+a+P.kNumHashDirectBytes]!=P._bufferBase[i+P.kNumHashDirectBytes]&&(ae[Z++]=V=P.kNumHashDirectBytes,ae[Z++]=P._pos-a-1),r=P._cutValue;;){if(a<=O||r==0){r-=1,P._son[ue]=P._son[q]=0;break}if(g=P._pos-a,p=(g<=P._cyclicBufferPos?P._cyclicBufferPos-g:P._cyclicBufferPos-g+P._cyclicBufferSize)<<1,K=P._bufferOffset+a,y=B<T?B:T,P._bufferBase[K+y]==P._bufferBase[i+y]){for(;(y+=1)!=G&&P._bufferBase[K+y]==P._bufferBase[i+y];);if(V<y&&(ae[Z++]=V=y,ae[Z++]=g-1,y==G)){P._son[q]=P._son[p],P._son[ue]=P._son[p+1];break}}(P._bufferBase[K+y]&255)<(P._bufferBase[i+y]&255)?(P._son[q]=a,q=p+1,a=P._son[q],T=y):(P._son[ue]=a,ue=p,a=P._son[ue],B=y)}return ne(this,j,Wi).call(this),Z},qd=function(){x(this,D).chunker.encoder._matchFinder._bufferOffset=0,x(this,D).chunker.encoder._matchFinder._pos=0,x(this,D).chunker.encoder._matchFinder._streamPos=0,x(this,D).chunker.encoder._matchFinder._streamEndWasReached=0,x(this,je).readBlock(),x(this,D).chunker.encoder._matchFinder._cyclicBufferPos=0,x(this,je).reduceOffsets(-1)},Wi=function(){let r;const i=x(this,D).chunker.encoder._matchFinder;(i._cyclicBufferPos+=1)>=i._cyclicBufferSize&&(i._cyclicBufferPos=0),ne(this,j,Xd).call(this),i._pos==jd&&(r=i._pos-i._cyclicBufferSize,ne(this,j,ga).call(this,i._cyclicBufferSize*2,r),ne(this,j,ga).call(this,i._hashSizeSum,r),x(this,je).reduceOffsets(r))},ga=function(r,i){const a=x(this,D).chunker.encoder._matchFinder._son;for(let c=0,d;c<r;++c)d=a[c]||0,d<=i?d=0:d-=i,a[c]=d},ef=function(r,i){r.HASH_ARRAY=i>2,r.HASH_ARRAY?(r.kNumHashDirectBytes=0,r.kMinMatchCheck=4,r.kFixHashSize=66560):(r.kNumHashDirectBytes=2,r.kMinMatchCheck=3,r.kFixHashSize=0)},tf=function(r){const i=x(this,D).chunker.encoder._matchFinder;let a,c,d,p,g,m,k,w,y,B,T,G,O,V,Z,K,ue;do{if(i._pos+i._matchMaxLen<=i._streamPos)G=i._matchMaxLen;else if(G=i._streamPos-i._pos,G<i.kMinMatchCheck){ne(this,j,Wi).call(this);continue}for(O=i._pos>i._cyclicBufferSize?i._pos-i._cyclicBufferSize:0,c=i._bufferOffset+i._pos,i.HASH_ARRAY?(ue=lo[i._bufferBase[c]&255]^i._bufferBase[c+1]&255,m=ue&1023,i._hash[m]=i._pos,ue^=(i._bufferBase[c+2]&255)<<8,k=ue&65535,i._hash[1024+k]=i._pos,w=(ue^lo[i._bufferBase[c+3]&255]<<5)&i._hashMask):w=i._bufferBase[c]&255^(i._bufferBase[c+1]&255)<<8,d=i._hash[i.kFixHashSize+w],i._hash[i.kFixHashSize+w]=i._pos,Z=(i._cyclicBufferPos<<1)+1,K=i._cyclicBufferPos<<1,B=T=i.kNumHashDirectBytes,a=i._cutValue;;){if(d<=O||a==0){a-=1,i._son[Z]=i._son[K]=0;break}if(g=i._pos-d,p=(g<=i._cyclicBufferPos?i._cyclicBufferPos-g:i._cyclicBufferPos-g+i._cyclicBufferSize)<<1,V=i._bufferOffset+d,y=B<T?B:T,i._bufferBase[V+y]==i._bufferBase[c+y]){for(;(y+=1)!=G&&i._bufferBase[V+y]==i._bufferBase[c+y];);if(y==G){i._son[K]=i._son[p],i._son[Z]=i._son[p+1];break}}(i._bufferBase[V+y]&255)<(i._bufferBase[c+y]&255)?(i._son[K]=d,K=p+1,d=i._son[K],T=y):(i._son[Z]=d,Z=p,d=i._son[Z],B=y)}ne(this,j,Wi).call(this)}while((r-=1)!=0)},nf=function(r,i){x(this,lt).rangeDecoder.stream=r,x(this,lt).flush(),x(this,lt).outWindow.stream=null,x(this,lt).outWindow.stream=x(this,un).output,ne(this,j,rf).call(this),x(this,lt).state=0,x(this,lt).rep0=0,x(this,lt).rep1=0,x(this,lt).rep2=0,x(this,lt).rep3=0,x(this,lt).outSize=i,x(this,lt).nowPos64=qr,x(this,lt).prevByte=0;const a=new Ed(x(this,lt));return a.alive=1,a},rf=function(){x(this,lt).init()},xa=function(r){const i=x(this,D).chunker.encoder;let a,c,d,p;i._optimumEndIndex=r,d=i._optimum[r].posPrev,c=i._optimum[r].backPrev;do i._optimum[r].prev1IsChar&&(ne(this,j,wa).call(this,i._optimum[d]),i._optimum[d].posPrev=d-1,i._optimum[r].prev2&&(i._optimum[d-1].prev1IsChar=0,i._optimum[d-1].posPrev=i._optimum[r].posPrev2,i._optimum[d-1].backPrev=i._optimum[r].backPrev2)),p=d,a=c,c=i._optimum[p].backPrev,d=i._optimum[p].posPrev,i._optimum[p].backPrev=a,i._optimum[p].posPrev=r,r=p;while(r>0);return i.backRes=i._optimum[0].backPrev,i._optimumCurrentIndex=i._optimum[0].posPrev,i._optimumCurrentIndex},sf=function(){let r,i,a,c,d,p,g,m,k,w,y,B,T,G;if(x(this,D).chunker.encoder.processedInSize[0]=qr,x(this,D).chunker.encoder.processedOutSize[0]=qr,x(this,D).chunker.encoder.finished[0]=1,T=x(this,D).chunker.encoder.nowPos64,x(this,D).chunker.encoder._inStream&&(x(this,D).chunker.encoder._matchFinder._stream=x(this,D).chunker.encoder._inStream,ne(this,j,qd).call(this),x(this,D).chunker.encoder._needReleaseMFStream=1,x(this,D).chunker.encoder._inStream=null),!x(this,D).chunker.encoder._finished){if(x(this,D).chunker.encoder._finished=1,Bn(x(this,D).chunker.encoder.nowPos64,qr)===0){if(!x(this,je).getNumAvailableBytes()){ne(this,j,fo).call(this,bt(x(this,D).chunker.encoder.nowPos64));return}ne(this,j,ho).call(this),B=bt(x(this,D).chunker.encoder.nowPos64)&x(this,D).chunker.encoder._posStateMask,x(this,D).chunker.encoder.encodeBit(x(this,D).chunker.encoder._isMatch,(x(this,D).chunker.encoder._state<<4)+B,0),x(this,D).chunker.encoder._state=nr(x(this,D).chunker.encoder._state),a=x(this,je).getIndexByte(-x(this,D).chunker.encoder._additionalOffset),x(this,D).chunker.encoder.encodeLiteral(ne(this,j,_r).call(this,bt(x(this,D).chunker.encoder.nowPos64),x(this,D).chunker.encoder._previousByte),a),x(this,D).chunker.encoder._previousByte=a,x(this,D).chunker.encoder._additionalOffset-=1,x(this,D).chunker.encoder.nowPos64=vn(x(this,D).chunker.encoder.nowPos64,Dm)}if(!x(this,je).getNumAvailableBytes()){ne(this,j,fo).call(this,bt(x(this,D).chunker.encoder.nowPos64));return}for(;;){if(p=ne(this,j,uf).call(this,bt(x(this,D).chunker.encoder.nowPos64)),k=x(this,D).chunker.encoder.backRes,B=bt(x(this,D).chunker.encoder.nowPos64)&x(this,D).chunker.encoder._posStateMask,i=(x(this,D).chunker.encoder._state<<4)+B,p==1&&k==-1)x(this,D).chunker.encoder.encodeBit(x(this,D).chunker.encoder._isMatch,i,0),a=x(this,je).getIndexByte(-x(this,D).chunker.encoder._additionalOffset),G=ne(this,j,_r).call(this,bt(x(this,D).chunker.encoder.nowPos64),x(this,D).chunker.encoder._previousByte),x(this,D).chunker.encoder._state<7?x(this,D).chunker.encoder.encodeLiteral(G,a):(m=x(this,je).getIndexByte(-x(this,D).chunker.encoder._repDistances[0]-1-x(this,D).chunker.encoder._additionalOffset),x(this,D).chunker.encoder.encodeMatched(G,m,a)),x(this,D).chunker.encoder._previousByte=a,x(this,D).chunker.encoder._state=nr(x(this,D).chunker.encoder._state);else{if(x(this,D).chunker.encoder.encodeBit(x(this,D).chunker.encoder._isMatch,i,1),k<4){if(x(this,D).chunker.encoder.encodeBit(x(this,D).chunker.encoder._isRep,x(this,D).chunker.encoder._state,1),k?(x(this,D).chunker.encoder.encodeBit(x(this,D).chunker.encoder._isRepG0,x(this,D).chunker.encoder._state,1),k==1?x(this,D).chunker.encoder.encodeBit(x(this,D).chunker.encoder._isRepG1,x(this,D).chunker.encoder._state,0):(x(this,D).chunker.encoder.encodeBit(x(this,D).chunker.encoder._isRepG1,x(this,D).chunker.encoder._state,1),x(this,D).chunker.encoder.encodeBit(x(this,D).chunker.encoder._isRepG2,x(this,D).chunker.encoder._state,k-2))):(x(this,D).chunker.encoder.encodeBit(x(this,D).chunker.encoder._isRepG0,x(this,D).chunker.encoder._state,0),p==1?x(this,D).chunker.encoder.encodeBit(x(this,D).chunker.encoder._isRep0Long,i,0):x(this,D).chunker.encoder.encodeBit(x(this,D).chunker.encoder._isRep0Long,i,1)),p==1?x(this,D).chunker.encoder._state=x(this,D).chunker.encoder._state<7?9:11:(x(this,D).chunker.encoder.encodeLength(x(this,D).chunker.encoder._repMatchLenEncoder,p-2,B),x(this,D).chunker.encoder._state=x(this,D).chunker.encoder._state<7?8:11),c=x(this,D).chunker.encoder._repDistances[k],k!=0){const O=x(this,D).chunker.encoder;for(let V=k;V>=1;--V)O._repDistances[V]=O._repDistances[V-1];O._repDistances[0]=c}}else{x(this,D).chunker.encoder.encodeBit(x(this,D).chunker.encoder._isRep,x(this,D).chunker.encoder._state,0),x(this,D).chunker.encoder._state=x(this,D).chunker.encoder._state<7?7:10,x(this,D).chunker.encoder.encodeLength(x(this,D).chunker.encoder._lenEncoder,p-2,B),k-=4,y=x(this,D).chunker.encoder.getPosSlot(k),g=xo(p),x(this,D).chunker.encoder.encodeBitTree(x(this,D).chunker.encoder._posSlotEncoder[g],y),y>=4&&(d=(y>>1)-1,r=(2|y&1)<<d,w=k-r,y<14?x(this,D).chunker.encoder.reverseEncodeRange(r-y-1,d,w):(x(this,D).chunker.encoder.encodeDirectBits(w>>4,d-4),x(this,D).chunker.encoder.reverseEncode(w&15),x(this,D).chunker.encoder._alignPriceCount+=1)),c=k;const O=x(this,D).chunker.encoder;for(let V=3;V>=1;--V)O._repDistances[V]=O._repDistances[V-1];O._repDistances[0]=c,O._matchPriceCount+=1}x(this,D).chunker.encoder._previousByte=x(this,je).getIndexByte(p-1-x(this,D).chunker.encoder._additionalOffset)}if(x(this,D).chunker.encoder._additionalOffset-=p,x(this,D).chunker.encoder.nowPos64=vn(x(this,D).chunker.encoder.nowPos64,Er(p)),!x(this,D).chunker.encoder._additionalOffset){if(x(this,D).chunker.encoder._matchPriceCount>=128&&x(this,D).chunker.encoder.fillDistancesPrices(),x(this,D).chunker.encoder._alignPriceCount>=16&&ne(this,j,af).call(this,x(this,D).chunker.encoder),x(this,D).chunker.encoder.processedInSize[0]=x(this,D).chunker.encoder.nowPos64,x(this,D).chunker.encoder.processedOutSize[0]=ne(this,j,pf).call(this),!x(this,je).getNumAvailableBytes()){ne(this,j,fo).call(this,bt(x(this,D).chunker.encoder.nowPos64));return}if(Bn(Rd(x(this,D).chunker.encoder.nowPos64,T),[4096,0])>=0){x(this,D).chunker.encoder._finished=0,x(this,D).chunker.encoder.finished[0]=0;return}}}}},of=function(){let r,i;x(this,ce)._matchFinder||(r={},i=4,x(this,ce)._matchFinderType||(i=2),ne(this,j,ef).call(this,r,i),x(this,ce)._matchFinder=r,Xr(this,je,new Gm(r))),x(this,ce).createLiteralEncoder(),!(x(this,ce)._dictionarySize==x(this,ce)._dictionarySizePrev&&x(this,ce)._numFastBytesPrev==x(this,ce)._numFastBytes)&&(ne(this,j,Zd).call(this,4096,274),x(this,ce)._dictionarySizePrev=x(this,ce)._dictionarySize,x(this,ce)._numFastBytesPrev=x(this,ce)._numFastBytes)},lf=function(){for(let r=0;r<4096;++r)x(this,ce)._optimum[r]={};for(let r=0;r<4;++r)x(this,ce)._posSlotEncoder[r]=_t(6)},af=function(r){for(let i=0;i<16;++i)r._alignPrices[i]=ne(this,j,hf).call(this,r._posAlignEncoder,i);r._alignPriceCount=0},fo=function(r){ne(this,j,ka).call(this),x(this,D).chunker.encoder.writeEndMarker(r&x(this,D).chunker.encoder._posStateMask);for(let i=0;i<5;++i)x(this,D).chunker.encoder.shiftLow()},uf=function(r){let i,a,c,d,p,g,m,k,w,y,B,T,G,O,V,Z,K,ue,q,$,P,ae,Y,ke,we,ie,Ne,ye,I,fe,Te,oe,U,se,X,E,M,pe,Se,Ae,re,ve,Be,Oe,b,Ht,dn,Gt,It;const C=x(this,D).chunker.encoder;if(C._optimumEndIndex!=C._optimumCurrentIndex)return It=C._optimum[C._optimumCurrentIndex].posPrev-C._optimumCurrentIndex,C.backRes=C._optimum[C._optimumCurrentIndex].backPrev,C._optimumCurrentIndex=C._optimum[C._optimumCurrentIndex].posPrev,It;if(C._optimumCurrentIndex=C._optimumEndIndex=0,C._longestMatchWasFound?(B=C._longestMatchLength,C._longestMatchWasFound=0):B=ne(this,j,ho).call(this),we=C._numDistancePairs,Y=x(this,je).getNumAvailableBytes()+1,Y<2)return C.backRes=-1,1;Y>273&&(Y=273),pe=0;for(let at=0;at<4;++at)C.reps[at]=C._repDistances[at],C.repLens[at]=x(this,je).getMatchLen(-1,C.reps[at],273),C.repLens[at]>C.repLens[pe]&&(pe=at);if(C.repLens[pe]>=C._numFastBytes)return C.backRes=pe,It=C.repLens[pe],ne(this,j,va).call(this,It-1),It;if(B>=C._numFastBytes)return C.backRes=x(this,D).chunker.encoder._matchDistances[we-1]+4,ne(this,j,va).call(this,B-1),B;if(m=x(this,je).getIndexByte(-1),V=x(this,je).getIndexByte(-C._repDistances[0]-1-1),B<2&&m!=V&&C.repLens[pe]<2)return C.backRes=-1,1;if(C._optimum[0].state=C._state,oe=r&C._posStateMask,C._optimum[1].price=Ve[C._isMatch[(C._state<<4)+oe]>>>2]+ne(this,j,Vi).call(this,ne(this,j,_r).call(this,r,C._previousByte),C._state>=7,V,m),ne(this,j,wa).call(this,C._optimum[1]),Z=Ve[2048-C._isMatch[(C._state<<4)+oe]>>>2],M=Z+Ve[2048-C._isRep[C._state]>>>2],V==m&&(Se=M+ne(this,j,cf).call(this,oe),Se<C._optimum[1].price&&(C._optimum[1].price=Se,ne(this,j,ff).call(this,C._optimum[1]))),y=B>=C.repLens[pe]?B:C.repLens[pe],y<2)return C.backRes=C._optimum[1].backPrev,1;C._optimum[1].posPrev=0,C._optimum[0].backs0=C.reps[0],C._optimum[0].backs1=C.reps[1],C._optimum[0].backs2=C.reps[2],C._optimum[0].backs3=C.reps[3],w=y;do C._optimum[w].price=Zr,w-=1;while(w>=2);for(let at=0;at<4;++at)if(E=C.repLens[at],!(E<2)){se=M+ne(this,j,Sr).call(this,at,C._state,oe);do d=se+C._repMatchLenEncoder.getPrice(E-2,oe),I=C._optimum[E],d<I.price&&(I.price=d,I.posPrev=0,I.backPrev=at,I.prev1IsChar=0);while((E-=1)>=2)}if(ae=Z+Ve[C._isRep[C._state]>>>2],w=C.repLens[0]>=2?C.repLens[0]+1:2,w<=B){for(ie=0;w>C._matchDistances[ie];)ie+=2;for(;k=C._matchDistances[ie+1],d=ae+ne(this,j,ya).call(this,k,w,oe),I=C._optimum[w],d<I.price&&(I.price=d,I.posPrev=0,I.backPrev=k+4,I.prev1IsChar=0),!(w==C._matchDistances[ie]&&(ie+=2,ie==we));w+=1);}for(i=0;;){if(++i,i==y)return ne(this,j,xa).call(this,i);if(K=ne(this,j,ho).call(this),we=C._numDistancePairs,K>=C._numFastBytes)return C._longestMatchLength=K,C._longestMatchWasFound=1,ne(this,j,xa).call(this,i);if(r+=1,Te=C._optimum[i].posPrev,C._optimum[i].prev1IsChar?(Te-=1,C._optimum[i].prev2?(re=C._optimum[C._optimum[i].posPrev2].state,C._optimum[i].backPrev2<4?re=re<7?8:11:re=re<7?7:10):re=C._optimum[Te].state,re=nr(re)):re=C._optimum[Te].state,Te==i-1?C._optimum[i].backPrev?re=nr(re):re=re<7?9:11:(C._optimum[i].prev1IsChar&&C._optimum[i].prev2?(Te=C._optimum[i].posPrev2,fe=C._optimum[i].backPrev2,re=re<7?8:11):(fe=C._optimum[i].backPrev,fe<4?re=re<7?8:11:re=re<7?7:10),ye=C._optimum[Te],fe<4?fe?fe==1?(C.reps[0]=ye.backs1,C.reps[1]=ye.backs0,C.reps[2]=ye.backs2,C.reps[3]=ye.backs3):fe==2?(C.reps[0]=ye.backs2,C.reps[1]=ye.backs0,C.reps[2]=ye.backs1,C.reps[3]=ye.backs3):(C.reps[0]=ye.backs3,C.reps[1]=ye.backs0,C.reps[2]=ye.backs1,C.reps[3]=ye.backs2):(C.reps[0]=ye.backs0,C.reps[1]=ye.backs1,C.reps[2]=ye.backs2,C.reps[3]=ye.backs3):(C.reps[0]=fe-4,C.reps[1]=ye.backs0,C.reps[2]=ye.backs1,C.reps[3]=ye.backs2)),C._optimum[i].state=re,C._optimum[i].backs0=C.reps[0],C._optimum[i].backs1=C.reps[1],C._optimum[i].backs2=C.reps[2],C._optimum[i].backs3=C.reps[3],g=C._optimum[i].price,m=x(this,je).getIndexByte(-1),V=x(this,je).getIndexByte(-C.reps[0]-1-1),oe=r&C._posStateMask,a=g+Ve[C._isMatch[(re<<4)+oe]>>>2]+ne(this,j,Vi).call(this,ne(this,j,_r).call(this,r,x(this,je).getIndexByte(-2)),re>=7,V,m),$=C._optimum[i+1],ue=0,a<$.price&&($.price=a,$.posPrev=i,$.backPrev=-1,$.prev1IsChar=0,ue=1),Z=g+Ve[2048-C._isMatch[(re<<4)+oe]>>>2],M=Z+Ve[2048-C._isRep[re]>>>2],V==m&&!($.posPrev<i&&!$.backPrev)&&(Se=M+(Ve[C._isRepG0[re]>>>2]+Ve[C._isRep0Long[(re<<4)+oe]>>>2]),Se<=$.price&&($.price=Se,$.posPrev=i,$.backPrev=0,$.prev1IsChar=0,ue=1)),ke=x(this,je).getNumAvailableBytes()+1,ke=4095-i<ke?4095-i:ke,Y=ke,!(Y<2)){if(Y>C._numFastBytes&&(Y=C._numFastBytes),!ue&&V!=m&&(Be=Math.min(ke-1,C._numFastBytes),G=x(this,je).getMatchLen(0,C.reps[0],Be),G>=2)){for(ve=nr(re),U=r+1&C._posStateMask,P=a+Ve[2048-C._isMatch[(ve<<4)+U]>>>2]+Ve[2048-C._isRep[ve]>>>2],Ne=i+1+G;y<Ne;)C._optimum[y+=1].price=Zr;d=P+(Oe=C._repMatchLenEncoder.getPrice(G-2,U),Oe+ne(this,j,Sr).call(this,0,ve,U)),I=C._optimum[Ne],d<I.price&&(I.price=d,I.posPrev=i+1,I.backPrev=0,I.prev1IsChar=1,I.prev2=0)}for(Ae=2,X=0;X<4;++X)if(T=x(this,je).getMatchLen(-1,C.reps[X],Y),!(T<2)){O=T;do{for(;y<i+T;)C._optimum[y+=1].price=Zr;d=M+(b=C._repMatchLenEncoder.getPrice(T-2,oe),b+ne(this,j,Sr).call(this,X,re,oe)),I=C._optimum[i+T],d<I.price&&(I.price=d,I.posPrev=i,I.backPrev=X,I.prev1IsChar=0)}while((T-=1)>=2);if(T=O,X||(Ae=T+1),T<ke&&(Be=Math.min(ke-1-T,C._numFastBytes),G=x(this,je).getMatchLen(T,C.reps[X],Be),G>=2)){for(ve=re<7?8:11,U=r+T&C._posStateMask,c=M+(Ht=C._repMatchLenEncoder.getPrice(T-2,oe),Ht+ne(this,j,Sr).call(this,X,re,oe))+Ve[C._isMatch[(ve<<4)+U]>>>2]+ne(this,j,Vi).call(this,ne(this,j,_r).call(this,r+T,x(this,je).getIndexByte(T-1-1)),!0,x(this,je).getIndexByte(T-1-(C.reps[X]+1)),x(this,je).getIndexByte(T-1)),ve=nr(ve),U=r+T+1&C._posStateMask,q=c+Ve[2048-C._isMatch[(ve<<4)+U]>>>2],P=q+Ve[2048-C._isRep[ve]>>>2],Ne=T+1+G;y<i+Ne;)C._optimum[y+=1].price=Zr;d=P+(dn=C._repMatchLenEncoder.getPrice(G-2,U),dn+ne(this,j,Sr).call(this,0,ve,U)),I=C._optimum[i+Ne],d<I.price&&(I.price=d,I.posPrev=i+T+1,I.backPrev=0,I.prev1IsChar=1,I.prev2=1,I.posPrev2=i,I.backPrev2=X)}}if(K>Y){for(K=Y,we=0;K>C._matchDistances[we];we+=2);C._matchDistances[we]=K,we+=2}if(K>=Ae){for(ae=Z+Ve[C._isRep[re]>>>2];y<i+K;)C._optimum[y+=1].price=Zr;for(ie=0;Ae>C._matchDistances[ie];)ie+=2;for(T=Ae;;T+=1)if(p=C._matchDistances[ie+1],d=ae+ne(this,j,ya).call(this,p,T,oe),I=C._optimum[i+T],d<I.price&&(I.price=d,I.posPrev=i,I.backPrev=p+4,I.prev1IsChar=0),T==C._matchDistances[ie]){if(T<ke&&(Be=Math.min(ke-1-T,C._numFastBytes),G=x(this,je).getMatchLen(T,p,Be),G>=2)){for(ve=re<7?7:10,U=r+T&C._posStateMask,c=d+Ve[C._isMatch[(ve<<4)+U]>>>2]+ne(this,j,Vi).call(this,ne(this,j,_r).call(this,r+T,x(this,je).getIndexByte(T-1-1)),!0,x(this,je).getIndexByte(T-(p+1)-1),x(this,je).getIndexByte(T-1)),ve=nr(ve),U=r+T+1&C._posStateMask,q=c+Ve[2048-C._isMatch[(ve<<4)+U]>>>2],P=q+Ve[2048-C._isRep[ve]>>>2],Ne=T+1+G;y<i+Ne;)C._optimum[y+=1].price=Zr;d=P+(Gt=C._repMatchLenEncoder.getPrice(G-2,U),Gt+ne(this,j,Sr).call(this,0,ve,U)),I=C._optimum[i+Ne],d<I.price&&(I.price=d,I.posPrev=i+T+1,I.backPrev=0,I.prev1IsChar=1,I.prev2=1,I.posPrev2=i,I.backPrev2=p+4)}if(ie+=2,ie==we)break}}}}return 1},ya=function(r,i,a){const c=x(this,D).chunker.encoder;let d,p=xo(i);if(r<128)d=c._distancesPrices[p*128+r];else{const g=(p<<6)+this.GetPosSlot2(r);d=c._posSlotPrices[g]+c._alignPrices[r&15]}return d+c._lenEncoder.getPrice(i-2,a)},Sr=function(r,i,a){const c=x(this,D).chunker.encoder;let d;return r?(d=Ve[2048-x(this,D).chunker.encoder._isRepG0[i]>>>2],r==1?d+=Ve[x(this,D).chunker.encoder._isRepG1[i]>>>2]:(d+=Ve[2048-x(this,D).chunker.encoder._isRepG1[i]>>>2],d+=yn(x(this,D).chunker.encoder._isRepG2[i],r-2))):(d=Ve[c._isRepG0[i]>>>2],d+=Ve[2048-x(this,D).chunker.encoder._isRep0Long[(i<<4)+a]>>>2]),d},cf=function(r){const i=x(this,D).chunker.encoder,a=Ve[i._isRepG0[i._state]>>>2],c=Ve[i._isRep0Long[(i._state<<4)+r]>>>2];return a+c},va=function(r){r>0&&(ne(this,j,tf).call(this,r),x(this,D).chunker.encoder._additionalOffset+=r)},ho=function(){let r=0;const i=x(this,D).chunker.encoder;return i._numDistancePairs=ne(this,j,Jd).call(this),i._numDistancePairs>0&&(r=i._matchDistances[i._numDistancePairs-2],r==i._numFastBytes&&(r+=x(this,je).getMatchLen(r-1,i._matchDistances[i._numDistancePairs-1],273-r))),i._additionalOffset+=1,r},ka=function(){const r=x(this,D).chunker.encoder;r._matchFinder&&r._needReleaseMFStream&&(r._matchFinder._stream=null,r._needReleaseMFStream=0)},df=function(){ne(this,j,ka).call(this),x(this,D).chunker.encoder._rangeEncoder.stream=null},_r=function(r,i){return{decoders:x(this,D).chunker.encoder._literalEncoder.getSubCoder(r,i).decoders}},Vi=function(r,i,a,c){let d,p=1,g=7,m,k=0;if(i){for(;g>=0;--g)if(m=a>>g&1,d=c>>g&1,k+=yn(r.decoders[(1+m<<8)+p],d),p=p<<1|d,m!=d){--g;break}}for(;g>=0;--g)d=c>>g&1,k+=yn(r.decoders[p],d),p=p<<1|d;return k},wa=function(r){r.backPrev=-1,r.prev1IsChar=0},ff=function(r){r.backPrev=0,r.prev1IsChar=0},hf=function(r,i){let a,c=1,d=0;for(let p=r.numBitLevels;p!=0;p-=1)a=i&1,i>>>=1,d+=yn(r.models[c],a),c=c<<1|a;return d},pf=function(){const r=vn(Er(x(this,D).chunker.encoder._rangeEncoder.cacheSize),x(this,D).chunker.encoder._rangeEncoder.position);return vn(r,[4,0])},mf=function(r){let i=0,a,c,d,p=r.length,g=[],m=[];for(let k=0;k<p;++k,++i){if(a=r[k]&255,a&128)if((a&224)==192){if(k+1>=p)return String.fromCharCode(...r);if(c=r[++k]&255,(c&192)!=128)return String.fromCharCode(...r);m[i]=(a&31)<<6|c&63}else if((a&240)==224){if(k+2>=p||(c=r[++k]&255,(c&192)!=128)||(d=r[++k]&255,(d&192)!=128))return r;m[i]=(a&15)<<12|(c&63)<<6|d&63}else return r;else{if(!a)return r;m[i]=a}i==16383&&(g.push(String.fromCharCode.apply(String,m)),i=-1)}return i>0&&(m.length=i,g.push(String.fromCharCode.apply(String,m))),g.join("")};/**
 * @license
 * Copyright Filip Seman
 * SPDX-License-Identifier: MIT
 */function Xm(l,r=5){const i=l instanceof ArrayBuffer?new Uint8Array(l):l,a=new Od().compress(i,r);return new Uint8Array(a)}function Zm(l){const r=l instanceof ArrayBuffer?new Uint8Array(l):l,i=new Od().decompress(r);return new Uint8Array(i)}const Jm=300,gf=255,yo=4096,qm={item:1,outfit:2,effect:3,distance:4},e0={1:"item",2:"outfit",3:"effect",4:"distance"},J={GROUND:0,GROUND_BORDER:1,ON_BOTTOM:2,ON_TOP:3,CONTAINER:4,STACKABLE:5,FORCE_USE:6,MULTI_USE:7,WRITABLE:8,WRITABLE_ONCE:9,FLUID_CONTAINER:10,FLUID:11,UNPASSABLE:12,UNMOVEABLE:13,BLOCK_MISSILE:14,BLOCK_PATHFIND:15,NO_MOVE_ANIMATION:16,PICKUPABLE:17,HANGABLE:18,HOOK_SOUTH:19,HOOK_EAST:20,ROTATABLE:21,HAS_LIGHT:22,DONT_HIDE:23,TRANSLUCENT:24,HAS_OFFSET:25,HAS_ELEVATION:26,LYING_OBJECT:27,ANIMATE_ALWAYS:28,MINI_MAP:29,LENS_HELP:30,FULL_GROUND:31,IGNORE_LOOK:32,CLOTH:33,MARKET_ITEM:34,DEFAULT_ACTION:35,WRAPPABLE:36,UNWRAPPABLE:37,TOP_EFFECT:38,HAS_CHARGES:252,FLOOR_CHANGE:253,USABLE:254};function t0(l){const r=new Uint8Array(l.length);for(let i=0;i<l.length;i+=4)r[i]=l[i+3],r[i+1]=l[i],r[i+2]=l[i+1],r[i+3]=l[i+2];return r}function n0(l){const r=new Uint8ClampedArray(l.length);for(let i=0;i<l.length;i+=4)r[i]=l[i+1],r[i+1]=l[i+2],r[i+2]=l[i+3],r[i+3]=l[i];return r}class r0{constructor(r=65536){L(this,"buf");L(this,"view");L(this,"pos",0);this.buf=new Uint8Array(r),this.view=new DataView(this.buf.buffer)}grow(r){for(;this.pos+r>this.buf.length;){const i=new Uint8Array(this.buf.length*2);i.set(this.buf),this.buf=i,this.view=new DataView(this.buf.buffer)}}u8(r){this.grow(1),this.view.setUint8(this.pos,r),this.pos+=1}u16(r){this.grow(2),this.view.setUint16(this.pos,r,!0),this.pos+=2}i16(r){this.grow(2),this.view.setInt16(this.pos,r,!0),this.pos+=2}u32(r){this.grow(4),this.view.setUint32(this.pos,r,!0),this.pos+=4}i32(r){this.grow(4),this.view.setInt32(this.pos,r,!0),this.pos+=4}bytes(r){this.grow(r.length),this.buf.set(r,this.pos),this.pos+=r.length}result(){return this.buf.slice(0,this.pos)}patchU32(r,i){this.view.setUint32(r,i,!0)}}class i0{constructor(r){L(this,"view");L(this,"pos",0);this.data=r,this.view=new DataView(r.buffer,r.byteOffset,r.byteLength)}u8(){const r=this.view.getUint8(this.pos);return this.pos+=1,r}u16(){const r=this.view.getUint16(this.pos,!0);return this.pos+=2,r}i16(){const r=this.view.getInt16(this.pos,!0);return this.pos+=2,r}u32(){const r=this.view.getUint32(this.pos,!0);return this.pos+=4,r}i32(){const r=this.view.getInt32(this.pos,!0);return this.pos+=4,r}bytes(r){const i=this.data.slice(this.pos,this.pos+r);return this.pos+=r,i}str(r){return new TextDecoder("latin1").decode(this.bytes(r))}}function s0(l,r){if(r.ground?(l.u8(J.GROUND),l.u16(r.groundSpeed??0)):r.groundBorder?l.u8(J.GROUND_BORDER):r.onBottom?l.u8(J.ON_BOTTOM):r.onTop&&l.u8(J.ON_TOP),r.container&&l.u8(J.CONTAINER),r.stackable&&l.u8(J.STACKABLE),r.forceUse&&l.u8(J.FORCE_USE),r.multiUse&&l.u8(J.MULTI_USE),r.writable&&(l.u8(J.WRITABLE),l.u16(r.writableMaxLen??0)),r.writableOnce&&(l.u8(J.WRITABLE_ONCE),l.u16(r.writableOnceMaxLen??0)),r.fluidContainer&&l.u8(J.FLUID_CONTAINER),r.splash&&l.u8(J.FLUID),r.notWalkable&&l.u8(J.UNPASSABLE),r.notMoveable&&l.u8(J.UNMOVEABLE),r.blockProjectile&&l.u8(J.BLOCK_MISSILE),r.notPathable&&l.u8(J.BLOCK_PATHFIND),r.noMoveAnimation&&l.u8(J.NO_MOVE_ANIMATION),r.pickupable&&l.u8(J.PICKUPABLE),r.hangable&&l.u8(J.HANGABLE),r.hookSouth&&l.u8(J.HOOK_SOUTH),r.hookEast&&l.u8(J.HOOK_EAST),r.rotateable&&l.u8(J.ROTATABLE),r.hasLight&&(l.u8(J.HAS_LIGHT),l.u16(r.lightLevel??0),l.u16(r.lightColor??0)),r.dontHide&&l.u8(J.DONT_HIDE),r.translucent&&l.u8(J.TRANSLUCENT),r.hasDisplacement&&(l.u8(J.HAS_OFFSET),l.i16(r.displacementX??0),l.i16(r.displacementY??0)),r.hasElevation&&(l.u8(J.HAS_ELEVATION),l.u16(r.elevation??0)),r.lyingCorpse&&l.u8(J.LYING_OBJECT),r.animateAlways&&l.u8(J.ANIMATE_ALWAYS),r.hasMinimapColor&&(l.u8(J.MINI_MAP),l.u16(r.minimapColor??0)),r.lensHelp!=null&&(l.u8(J.LENS_HELP),l.u16(r.lensHelp)),r.fullGround&&l.u8(J.FULL_GROUND),r.look&&l.u8(J.IGNORE_LOOK),r.cloth&&(l.u8(J.CLOTH),l.u16(r.clothSlot??0)),r.hasMarket){l.u8(J.MARKET_ITEM),l.u16(r.marketCategory??0),l.u16(r.marketTradeAs??0),l.u16(r.marketShowAs??0);const i=r.marketName??"";l.u16(i.length);for(let a=0;a<i.length;a++)l.u8(i.charCodeAt(a)&255);l.u16(r.marketRestrictVocation??0),l.u16(r.marketRequiredLevel??0)}r.usable&&(l.u8(J.DEFAULT_ACTION),l.u16(r.usableActionId??0)),r.wrapable&&l.u8(J.WRAPPABLE),r.unwrapable&&l.u8(J.UNWRAPPABLE),r.topEffect&&l.u8(J.TOP_EFFECT),r.chargeable&&l.u8(J.HAS_CHARGES),l.u8(gf)}function o0(l){const r={ground:!1,groundBorder:!1,onBottom:!1,onTop:!1,container:!1,stackable:!1,forceUse:!1,multiUse:!1,writable:!1,writableOnce:!1,fluidContainer:!1,splash:!1,notWalkable:!1,notMoveable:!1,blockProjectile:!1,notPathable:!1,pickupable:!1,hangable:!1,hookSouth:!1,hookEast:!1,rotateable:!1,hasLight:!1,dontHide:!1,translucent:!1,hasDisplacement:!1,hasElevation:!1,lyingCorpse:!1,animateAlways:!1,hasMinimapColor:!1,fullGround:!1,look:!1,cloth:!1,hasMarket:!1,usable:!1,wrapable:!1,unwrapable:!1,topEffect:!1,noMoveAnimation:!1,chargeable:!1};for(;;){const i=l.u8();if(i===gf)break;switch(i){case J.GROUND:r.ground=!0,r.groundSpeed=l.u16();break;case J.GROUND_BORDER:r.groundBorder=!0;break;case J.ON_BOTTOM:r.onBottom=!0;break;case J.ON_TOP:r.onTop=!0;break;case J.CONTAINER:r.container=!0;break;case J.STACKABLE:r.stackable=!0;break;case J.FORCE_USE:r.forceUse=!0;break;case J.MULTI_USE:r.multiUse=!0;break;case J.WRITABLE:r.writable=!0,r.writableMaxLen=l.u16();break;case J.WRITABLE_ONCE:r.writableOnce=!0,r.writableOnceMaxLen=l.u16();break;case J.FLUID_CONTAINER:r.fluidContainer=!0;break;case J.FLUID:r.splash=!0;break;case J.UNPASSABLE:r.notWalkable=!0;break;case J.UNMOVEABLE:r.notMoveable=!0;break;case J.BLOCK_MISSILE:r.blockProjectile=!0;break;case J.BLOCK_PATHFIND:r.notPathable=!0;break;case J.NO_MOVE_ANIMATION:r.noMoveAnimation=!0;break;case J.PICKUPABLE:r.pickupable=!0;break;case J.HANGABLE:r.hangable=!0;break;case J.HOOK_SOUTH:r.hookSouth=!0;break;case J.HOOK_EAST:r.hookEast=!0;break;case J.ROTATABLE:r.rotateable=!0;break;case J.HAS_LIGHT:r.hasLight=!0,r.lightLevel=l.u16(),r.lightColor=l.u16();break;case J.DONT_HIDE:r.dontHide=!0;break;case J.TRANSLUCENT:r.translucent=!0;break;case J.HAS_OFFSET:r.hasDisplacement=!0,r.displacementX=l.i16(),r.displacementY=l.i16();break;case J.HAS_ELEVATION:r.hasElevation=!0,r.elevation=l.u16();break;case J.LYING_OBJECT:r.lyingCorpse=!0;break;case J.ANIMATE_ALWAYS:r.animateAlways=!0;break;case J.MINI_MAP:r.hasMinimapColor=!0,r.minimapColor=l.u16();break;case J.LENS_HELP:r.lensHelp=l.u16();break;case J.FULL_GROUND:r.fullGround=!0;break;case J.IGNORE_LOOK:r.look=!0;break;case J.CLOTH:r.cloth=!0,r.clothSlot=l.u16();break;case J.MARKET_ITEM:{r.hasMarket=!0,r.marketCategory=l.u16(),r.marketTradeAs=l.u16(),r.marketShowAs=l.u16();const a=l.u16();r.marketName=l.str(a),r.marketRestrictVocation=l.u16(),r.marketRequiredLevel=l.u16();break}case J.DEFAULT_ACTION:r.usable=!0,r.usableActionId=l.u16();break;case J.HAS_CHARGES:r.chargeable=!0;break;case J.FLOOR_CHANGE:break;case J.WRAPPABLE:r.wrapable=!0;break;case J.UNWRAPPABLE:r.unwrapable=!0;break;case J.TOP_EFFECT:r.topEffect=!0;break;case J.USABLE:r.usable=!0;break;default:throw new Error(`Unknown OBD flag 0x${i.toString(16)}`)}}return r}function l0(l){const{thing:r,clientVersion:i,spriteData:a,spriteOverrides:c}=l,d=new r0;d.u16(Jm),d.u16(i),d.u8(qm[r.category]??1);const p=d.pos;d.u32(0),s0(d,r.flags),d.patchU32(p,d.pos);const g=r.category==="outfit",m=r.frameGroups.length;g&&d.u8(m);for(let k=0;k<m;k++){g&&d.u8(m<2?1:k);const w=r.frameGroups[k];if(d.u8(w.width),d.u8(w.height),(w.width>1||w.height>1)&&d.u8(32),d.u8(w.layers),d.u8(w.patternX),d.u8(w.patternY),d.u8(w.patternZ||1),d.u8(w.animationLength),w.animationLength>1){d.u8(w.asynchronous),d.i32(w.nLoop),d.u8(w.start);for(let y=0;y<w.animationLength;y++){const B=w.animationLengths[y]??{min:100,max:100};d.u32(B.min),d.u32(B.max)}}for(let y=0;y<w.sprites.length;y++){const B=w.sprites[y];d.u32(B);let T;if(B===0)T=new Uint8Array(yo);else{const O=c.get(B)??mo(a,B);O?T=t0(new Uint8Array(O.data.buffer,O.data.byteOffset,O.data.byteLength)):T=new Uint8Array(yo)}d.u32(T.length),d.bytes(T)}}return Xm(d.result(),5)}function a0(l){let r;try{r=Zm(l)}catch(T){throw new Error(`Failed to decompress OBD file. Ensure this is a valid .obd file.
${T instanceof Error?T.message:T}`)}if(r.length<9)throw new Error("OBD file too small.");const i=new i0(r),a=i.u16();let c,d;if(a===300)c=3,d=i.u16();else if(a===200)c=2,d=i.u16();else throw a>=710?new Error(`This is an OBD Version 1 file (client ${a}). V1 is not supported  please re-export from the Object Builder as V2 or V3.`):new Error(`Unrecognised OBD header: 0x${a.toString(16)} (${a}). Not a valid .obd file.`);const p=i.u8(),g=e0[p];if(!g)throw new Error(`Invalid category byte: ${p}`);i.u32();const m=o0(i),k=g==="outfit";let w=1;k&&c===3&&(w=i.u8());const y=[],B=new Map;for(let T=0;T<w;T++){k&&c===3&&i.u8();const G=i.u8(),O=i.u8();(G>1||O>1)&&i.u8();const V=i.u8(),Z=i.u8(),K=i.u8(),ue=i.u8()||1,q=i.u8();let $=0,P=0,ae=0;const Y=[];if(q>1){$=i.u8(),P=i.i32(),ae=i.u8();for(let ie=0;ie<q;ie++)Y.push({min:i.u32(),max:i.u32()})}else Y.push({min:0,max:0});const ke=G*O*V*Z*K*ue*q,we=[];for(let ie=0;ie<ke;ie++){const Ne=i.u32();we.push(Ne);let ye;if(c===3){const I=i.u32();ye=i.bytes(I)}else ye=i.bytes(yo);if(Ne>0&&ye.length===yo&&!B.has(Ne)){const I=n0(ye),fe=new ImageData(I,32,32);B.set(Ne,fe)}}y.push({type:T,width:G,height:O,layers:V,patternX:Z,patternY:K,patternZ:ue,animationLength:q,asynchronous:$,nLoop:P,start:ae,animationLengths:Y,sprites:we})}return{category:g,clientVersion:d,flags:m,frameGroups:y,spritePixels:B}}const u0=["North","East","South","West"],c0=["","","",""];function d0(){const l=te(R=>R.selectedThingId),r=te(R=>R.objectData),i=te(R=>R.spriteData),a=te(R=>R.spriteOverrides),c=te(R=>R.replaceSprite),d=te(R=>R.addSprite);te(R=>R.editVersion);const p=l!=null?(r==null?void 0:r.things.get(l))??null:null,[g,m]=ee.useState(0),[k,w]=ee.useState(0),[y,B]=ee.useState(!1),[T,G]=ee.useState(4),[O,V]=ee.useState(!1),[Z,K]=ee.useState(!1),[ue,q]=ee.useState(!1),[$,P]=ee.useState(null),[ae,Y]=ee.useState(0),[ke,we]=ee.useState(0),[ie,Ne]=ee.useState(!1),[ye,I]=ee.useState({head:0,body:0,legs:0,feet:0}),[fe,Te]=ee.useState(!1),[oe,U]=ee.useState(2),[se,X]=ee.useState(0),[E,M]=ee.useState(null),pe=ee.useRef(null),Se=ee.useRef(0),Ae=ee.useRef(null),re=te(R=>R.activeCategory),ve=re==="outfit",Be=re==="effect",Oe=re==="distance";ee.useEffect(()=>{m(0),w(0),B(!1),Y(0),we(0),U(2),X(0),Te(ve||Be||Oe),Ne(ve)},[l,ve,Be,Oe]);const b=(p==null?void 0:p.frameGroups[g])??null,Ht=ee.useCallback(R=>{const _e=pe.current;if(!_e||!b||!i)return;const De=b.width*32,Ge=b.height*32,Ue=fe?[oe<b.patternX?oe:0]:Array.from({length:b.patternX},(jt,dt)=>dt),We=fe?[se<b.patternY?se:0]:Array.from({length:b.patternY},(jt,dt)=>dt),ze=Ue.length,gt=We.length,Ze=ze*De,rt=gt*Ge;_e.width=Ze,_e.height=rt;const $e=_e.getContext("2d");$e.clearRect(0,0,Ze,rt);const Je=ve&&ie&&b.layers>=2,At=Je?[0]:ie?Array.from({length:b.layers},(jt,dt)=>dt):[ae];for(const jt of At)for(let dt=0;dt<We.length;dt++){const Zt=We[dt];for(let Jt=0;Jt<Ue.length;Jt++){const Tn=Ue[Jt],Nn=Jt*De,Pn=dt*Ge;for(let Ln=0;Ln<b.height;Ln++)for(let In=0;In<b.width;In++){const ii=Hi(b,R,Tn,Zt,ke,jt,In,Ln);if(ii>=b.sprites.length)continue;const Ar=b.sprites[ii];if(Ar<=0)continue;const si=a.get(Ar)??mo(i,Ar);if(!si)continue;const or=new ImageData(new Uint8ClampedArray(si.data),32,32);if(Je){const qt=Hi(b,R,Tn,Zt,ke,1,In,Ln);if(qt<b.sprites.length){const kn=b.sprites[qt];if(kn>0){const Xi=a.get(kn)??mo(i,kn);Xi&&Sm(or,Xi,ye)}}}const oi=Nn+(b.width-1-In)*32,jn=Pn+(b.height-1-Ln)*32;if(ie&&!Je&&jt>0){const qt=document.createElement("canvas");qt.width=32,qt.height=32,qt.getContext("2d").putImageData(or,0,0),$e.drawImage(qt,oi,jn)}else $e.putImageData(or,oi,jn)}}}},[b,i,a,ae,ke,ie,fe,oe,se,ve,ye]);ee.useEffect(()=>{Ht(k)},[k,Ht]),ee.useEffect(()=>{var Ge;if(!y||!b||b.animationLength<=1)return;let R=k;const _e=()=>{var We;R=(R+1)%b.animationLength,w(R),Ht(R);const Ue=((We=b.animationLengths[R])==null?void 0:We.min)??200;Se.current=window.setTimeout(_e,Ue)},De=((Ge=b.animationLengths[R])==null?void 0:Ge.min)??200;return Se.current=window.setTimeout(_e,De),()=>{clearTimeout(Se.current)}},[y,b,Ht]);const dn=b?fe?1:b.patternX:1,Gt=b?fe?1:b.patternY:1,It=ee.useCallback((R,_e)=>{if(!b||!pe.current)return 0;const De=pe.current.getBoundingClientRect(),Ge=(R-De.left)/T,Ue=(_e-De.top)/T,We=Math.floor(Ge/32),ze=Math.floor(Ue/32),gt=dn*b.width,Ze=Gt*b.height;if(We<0||We>=gt||ze<0||ze>=Ze)return 0;const rt=Math.floor(We/b.width),$e=Math.floor(ze/b.height),Je=fe?oe<b.patternX?oe:0:rt,At=fe?se<b.patternY?se:0:$e,jt=b.width-1-We%b.width,dt=b.height-1-ze%b.height,Zt=Hi(b,k,Je,At,ke,ae,jt,dt);return Zt<b.sprites.length?b.sprites[Zt]:0},[b,T,k,ae,ke,fe,oe,se,dn,Gt]),C=ee.useCallback((R,_e,De)=>{if(!b||!i)return;const Ge=R[0];if(!Ge||!Ge.type.startsWith("image/"))return;const Ue=new Image;Ue.onload=()=>{const We=document.createElement("canvas");We.width=32,We.height=32;const ze=We.getContext("2d"),gt=(Ze,rt)=>{const $e=b.sprites[Ze];if($e>0)c($e,rt);else{const Je=d(rt);if(Je!=null&&(b.sprites[Ze]=Je,p)){const At=new Set(te.getState().dirtyIds);At.add(p.id),te.setState({dirty:!0,dirtyIds:At})}}};if(Ue.width<=32&&Ue.height<=32){ze.clearRect(0,0,32,32),ze.drawImage(Ue,0,0,32,32);const Ze=ze.getImageData(0,0,32,32);let rt=-1;if(_e!=null&&De!=null){const $e=It(_e,De);$e>0&&(rt=b.sprites.indexOf($e))}rt<0&&(rt=Hi(b,k,0,0,0,0,0,0)),rt>=0&&rt<b.sprites.length&&gt(rt,Ze)}else{const Ze=b.patternX*b.width,rt=b.patternY*b.height;for(let $e=0;$e<rt&&$e*32<Ue.height;$e++)for(let Je=0;Je<Ze&&Je*32<Ue.width;Je++){const At=Math.floor(Je/b.width),jt=Math.floor($e/b.height),dt=b.width-1-Je%b.width,Zt=b.height-1-$e%b.height,Jt=Hi(b,k,At,jt,0,0,dt,Zt);if(Jt>=b.sprites.length)continue;ze.clearRect(0,0,32,32),ze.drawImage(Ue,Je*32,$e*32,32,32,0,0,32,32);const Tn=ze.getImageData(0,0,32,32);gt(Jt,Tn)}}},Ue.src=URL.createObjectURL(Ge)},[b,p,i,k,c,d,It]),at=ee.useCallback(R=>{R.preventDefault(),q(!1),R.dataTransfer.files.length>0&&C(R.dataTransfer.files,R.clientX,R.clientY)},[C]),ni=()=>{const R=pe.current;if(!R)return;const _e=R.toDataURL("image/png"),De=document.createElement("a");De.href=_e,De.download=`sprite_${(p==null?void 0:p.id)??0}_frame${k}.png`,De.click()},Ki=()=>{if(!(!p||!i))try{const R=l0({thing:p,clientVersion:1098,spriteData:i,spriteOverrides:a}),_e=new Blob([new Uint8Array(R)],{type:"application/octet-stream"}),De=URL.createObjectURL(_e),Ge=document.createElement("a");Ge.href=De;const Ue=r?rr(r,p.id):p.id;Ge.download=`${re}_${Ue}.obd`,Ge.click(),URL.revokeObjectURL(De)}catch(R){alert(`Export failed: ${R instanceof Error?R.message:R}`)}},br=ee.useRef(null),sr=R=>{var Ge;const _e=(Ge=R.target.files)==null?void 0:Ge[0];if(!_e)return;const De=new FileReader;De.onload=()=>{var Ue;try{const We=new Uint8Array(De.result),ze=a0(We),gt=te.getState(),Ze=gt.selectedThingId,rt=Ze!=null?(Ue=gt.objectData)==null?void 0:Ue.things.get(Ze):null;if(Ze!=null&&rt&&rt.category===ze.category)if(gt.replaceThing(Ze,ze.flags,ze.frameGroups,ze.spritePixels)){const Je=te.getState().objectData,At=Je?rr(Je,Ze):Ze;alert(`Replaced ${ze.category} #${At} with ${ze.spritePixels.size} sprites.`)}else alert("Replace failed  could not overwrite selected thing.");else{const $e=gt.importThing(ze.category,ze.flags,ze.frameGroups,ze.spritePixels);if($e!=null){const Je=te.getState().objectData,At=Je?rr(Je,$e):$e;alert(`Imported ${ze.category} #${At} with ${ze.spritePixels.size} sprites.`)}}}catch(We){alert(`Import failed: ${We instanceof Error?We.message:We}`)}},De.readAsArrayBuffer(_e),R.target.value=""},mt=ee.useCallback((R,_e)=>{if(!p||!b)return;b[R]=_e;const De=b.width*b.height*b.layers*b.patternX*b.patternY*b.patternZ*b.animationLength;if(b.sprites.length<De)for(;b.sprites.length<De;)b.sprites.push(0);else b.sprites.length>De&&(b.sprites.length=De);for(;b.animationLengths.length<b.animationLength;)b.animationLengths.push({min:100,max:100});b.animationLengths.length>b.animationLength&&(b.animationLengths.length=b.animationLength),p.rawBytes=void 0,ei();const Ge=te.getState(),Ue=new Set(Ge.dirtyIds);Ue.add(p.id),te.setState({dirty:!0,dirtyIds:Ue,editVersion:Ge.editVersion+1})},[p,b]);if(!p)return f.jsx("div",{className:"flex items-center justify-center h-full text-emperia-muted text-sm",children:"Select an object to preview"});const ri=b?b.animationLength>1:!1;return f.jsxs("div",{className:"flex flex-col h-full",children:[f.jsxs("div",{className:"flex items-center px-4 py-2 border-b border-emperia-border gap-3",children:[f.jsx("span",{className:"text-[10px] text-emperia-muted",children:"Zoom:"}),f.jsx("input",{type:"range",min:1,max:8,value:T,onChange:R=>G(Number(R.target.value)),className:"flex-1 h-1 accent-emperia-accent"}),f.jsxs("span",{className:"text-[10px] text-emperia-muted w-6 text-right",children:[T,"x"]})]}),f.jsx("div",{className:"flex-1 flex items-center justify-center overflow-auto min-h-0",children:f.jsxs("div",{className:`checkerboard rounded-lg border relative transition-colors
            ${ue?"border-emperia-accent border-2":"border-emperia-border"}`,style:{padding:8},onDragOver:R=>{if(R.preventDefault(),q(!0),pe.current&&b){const _e=pe.current.getBoundingClientRect(),De=Math.floor((R.clientX-_e.left)/(32*T)),Ge=Math.floor((R.clientY-_e.top)/(32*T)),Ue=dn*b.width,We=Gt*b.height;De>=0&&De<Ue&&Ge>=0&&Ge<We?P({col:De,row:Ge}):P(null)}},onDragLeave:()=>{q(!1),P(null)},onDrop:R=>{P(null),at(R)},children:[f.jsx("canvas",{ref:pe,className:"cursor-pointer",onClick:R=>{const _e=It(R.clientX,R.clientY);_e>0&&te.setState({focusSpriteId:_e})},style:{width:(b?dn*b.width:1)*32*T,height:(b?Gt*b.height:1)*32*T,imageRendering:"pixelated"}}),O&&b&&f.jsx("div",{className:"absolute inset-2 pointer-events-none",style:{backgroundImage:`
                  repeating-linear-gradient(0deg, rgba(255,255,255,0.15), rgba(255,255,255,0.15) 1px, transparent 1px, transparent ${32*T}px),
                  repeating-linear-gradient(90deg, rgba(255,255,255,0.15), rgba(255,255,255,0.15) 1px, transparent 1px, transparent ${32*T}px)
                `,backgroundSize:`${32*T}px ${32*T}px`}}),Z&&b&&f.jsx("div",{className:"absolute pointer-events-none border border-yellow-400/60",style:{bottom:8,left:8,width:b.width*32*T,height:b.height*32*T}}),ue&&!$&&f.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-emperia-accent/10 rounded-lg pointer-events-none",children:f.jsx("span",{className:"text-emperia-accent text-xs font-medium",children:"Drop PNG to replace"})}),$&&f.jsx("div",{className:"absolute pointer-events-none border-2 border-emperia-accent bg-emperia-accent/15 rounded-sm",style:{left:8+$.col*32*T,top:8+$.row*32*T,width:32*T,height:32*T}})]})}),f.jsxs("div",{className:"flex items-center justify-center px-4 py-2 gap-2 border-t border-emperia-border",children:[f.jsx("button",{onClick:()=>G(Math.max(1,T-1)),className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Zoom out",children:f.jsx(lm,{className:"w-3.5 h-3.5"})}),f.jsxs("span",{className:"text-[10px] text-emperia-muted w-6 text-center",children:[T,"x"]}),f.jsx("button",{onClick:()=>G(Math.min(8,T+1)),className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Zoom in",children:f.jsx(om,{className:"w-3.5 h-3.5"})}),f.jsx("div",{className:"w-px h-4 bg-emperia-border mx-0.5"}),f.jsx("button",{onClick:()=>V(!O),className:`p-1 rounded transition-colors ${O?"bg-emperia-accent/20 text-emperia-accent":"text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover"}`,title:"Show Grid",children:f.jsx(Yp,{className:"w-3.5 h-3.5"})}),f.jsx("div",{className:"w-px h-4 bg-emperia-border mx-0.5"}),f.jsx("input",{ref:Ae,type:"file",accept:"image/png,image/gif,image/bmp",className:"hidden",onChange:R=>R.target.files&&C(R.target.files)}),f.jsx("button",{onClick:()=>{var R;return(R=Ae.current)==null?void 0:R.click()},className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Import PNG",children:f.jsx(Ld,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:ni,className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Export PNG",children:f.jsx(Qp,{className:"w-3.5 h-3.5"})}),f.jsx("div",{className:"w-px h-4 bg-emperia-border mx-0.5"}),f.jsx("button",{onClick:Ki,className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Export OBD",children:f.jsx(Td,{className:"w-3.5 h-3.5"})}),f.jsx("input",{ref:br,type:"file",accept:".obd",className:"hidden",onChange:sr}),f.jsx("button",{onClick:()=>{var R;return(R=br.current)==null?void 0:R.click()},className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Import OBD",children:f.jsx(_a,{className:"w-3.5 h-3.5"})}),ri&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-px h-4 bg-emperia-border mx-0.5"}),f.jsx("button",{onClick:()=>{w((k-1+((b==null?void 0:b.animationLength)??1))%((b==null?void 0:b.animationLength)??1)),B(!1)},className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",children:f.jsx(Gp,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:()=>B(!y),className:`p-1 rounded transition-colors ${y?"bg-emperia-accent/20 text-emperia-accent":"text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover"}`,children:y?f.jsx(qp,{className:"w-3.5 h-3.5"}):f.jsx(em,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:()=>{w((k+1)%((b==null?void 0:b.animationLength)??1)),B(!1)},className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",children:f.jsx(Wp,{className:"w-3.5 h-3.5"})}),f.jsxs("span",{className:"text-[10px] text-emperia-muted",children:[k+1,"/",b==null?void 0:b.animationLength]})]})]}),f.jsxs("div",{className:"flex items-center px-4 py-1.5 gap-4 border-t border-emperia-border flex-wrap",children:[f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:Z,onChange:()=>K(!Z),className:"w-3 h-3 accent-emperia-accent"}),f.jsx("span",{className:"text-[10px] text-emperia-muted",children:"Crop"})]}),f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:O,onChange:()=>V(!O),className:"w-3 h-3 accent-emperia-accent"}),f.jsx("span",{className:"text-[10px] text-emperia-muted",children:"Grid"})]}),b&&(b.patternX>1||b.patternY>1)&&f.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:fe,onChange:()=>Te(!fe),className:"w-3 h-3 accent-emperia-accent"}),f.jsx("span",{className:"text-[10px] text-emperia-muted",children:"Preview"})]})]}),b&&p.flags.hasDisplacement&&f.jsxs("div",{className:"flex items-center justify-end px-4 py-1.5 gap-4 border-t border-emperia-border",children:[f.jsx(xn,{label:"Offset X",value:p.flags.displacementX??0,readOnly:!0}),f.jsx(xn,{label:"Offset Y",value:p.flags.displacementY??0,readOnly:!0})]}),p.frameGroups.length>1&&f.jsx("div",{className:"flex items-center justify-center px-4 py-1.5 gap-1 border-t border-emperia-border",children:p.frameGroups.map((R,_e)=>f.jsx("button",{onClick:()=>{m(_e),w(0),B(!1),Y(0),we(0)},className:`px-2 py-0.5 rounded text-[10px] transition-colors
                ${g===_e?"bg-emperia-accent text-white":"bg-emperia-surface text-emperia-muted hover:bg-emperia-hover"}
              `,children:_e===0?"Idle":_e===1?"Moving":`Group ${_e}`},_e))}),b&&(b.animationLength>1||b.layers>1||b.patternZ>1||fe&&(b.patternX>1||b.patternY>1)||ve)&&f.jsxs("div",{className:"border-t border-emperia-border",children:[f.jsx("div",{className:"px-4 py-1.5 bg-emperia-surface/50",children:f.jsx("span",{className:"text-[10px] font-medium text-emperia-text uppercase tracking-wider",children:ve?"Outfit":Be?"Effect":Oe?"Distance":"Animation"})}),f.jsx("div",{className:"px-4 py-2",children:f.jsx("table",{className:"w-full text-[10px]",style:{borderSpacing:"0 3px",borderCollapse:"separate"},children:f.jsxs("tbody",{children:[fe&&b.patternX>1&&f.jsxs("tr",{children:[f.jsx("td",{className:"text-emperia-muted text-right pr-2 w-24",children:"Direction:"}),f.jsx("td",{children:f.jsxs("div",{className:"flex items-center gap-1",children:[Array.from({length:Math.min(b.patternX,4)},(R,_e)=>f.jsx("button",{onClick:()=>U(_e),className:`w-6 h-5 flex items-center justify-center rounded text-[10px] transition-colors ${oe===_e?"bg-emperia-accent text-white":"bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-emperia-text"}`,title:u0[_e]??`Dir ${_e}`,children:c0[_e]??_e},_e)),b.patternX>4&&f.jsxs(f.Fragment,{children:[f.jsx(Xt,{onClick:()=>U(Math.max(0,oe-1)),children:""}),f.jsxs("span",{className:"text-emperia-text font-mono w-10 text-center",children:[oe+1,"/",b.patternX]}),f.jsx(Xt,{onClick:()=>U(Math.min(b.patternX-1,oe+1)),children:""})]})]})})]}),fe&&b.patternY>1&&f.jsxs("tr",{children:[f.jsx("td",{className:"text-emperia-muted text-right pr-2",children:ve?"Addon:":"Pattern Y:"}),f.jsx("td",{children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Xt,{onClick:()=>X(Math.max(0,se-1)),children:""}),f.jsx("span",{className:"text-emperia-text font-mono w-10 text-center",children:ve?se===0?"None":`#${se}`:`${se+1}/${b.patternY}`}),f.jsx(Xt,{onClick:()=>X(Math.min(b.patternY-1,se+1)),children:""})]})})]}),b.animationLength>1&&f.jsxs("tr",{children:[f.jsx("td",{className:"text-emperia-muted text-right pr-2 w-24",children:"Frame:"}),f.jsx("td",{children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Xt,{onClick:()=>{w((k-1+b.animationLength)%b.animationLength),B(!1)},children:""}),f.jsxs("span",{className:"text-emperia-text font-mono w-10 text-center",children:[k+1,"/",b.animationLength]}),f.jsx(Xt,{onClick:()=>{w((k+1)%b.animationLength),B(!1)},children:""}),f.jsx("button",{onClick:()=>B(!y),className:`ml-1 px-2 py-0.5 rounded text-[10px] transition-colors ${y?"bg-emperia-accent text-white":"bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-emperia-text"}`,children:y?"Stop":"Play"})]})})]}),b.layers>1&&f.jsxs("tr",{children:[f.jsx("td",{className:"text-emperia-muted text-right pr-2",children:"Layer:"}),f.jsx("td",{children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Xt,{onClick:()=>Y(Math.max(0,ae-1)),disabled:ie,children:""}),f.jsx("span",{className:`font-mono w-10 text-center ${ie?"text-emperia-muted":"text-emperia-text"}`,children:ie?"All":`${ae+1}/${b.layers}`}),f.jsx(Xt,{onClick:()=>Y(Math.min(b.layers-1,ae+1)),disabled:ie,children:""}),f.jsxs("label",{className:"flex items-center gap-1 cursor-pointer ml-1",children:[f.jsx("input",{type:"checkbox",checked:ie,onChange:()=>Ne(!ie),className:"w-3 h-3 accent-emperia-accent"}),f.jsx("span",{className:"text-emperia-muted",children:"Blend"})]})]})})]}),b.patternZ>1&&f.jsxs("tr",{children:[f.jsx("td",{className:"text-emperia-muted text-right pr-2",children:"Pattern Z:"}),f.jsx("td",{children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Xt,{onClick:()=>we(Math.max(0,ke-1)),children:""}),f.jsxs("span",{className:"text-emperia-text font-mono w-10 text-center",children:[ke+1,"/",b.patternZ]}),f.jsx(Xt,{onClick:()=>we(Math.min(b.patternZ-1,ke+1)),children:""})]})})]}),ve&&ie&&b.layers>=2&&f.jsxs(f.Fragment,{children:[f.jsx("tr",{children:f.jsx("td",{colSpan:2,children:f.jsx("div",{className:"border-t border-emperia-border/40 my-0.5"})})}),["head","body","legs","feet"].map(R=>f.jsxs("tr",{children:[f.jsxs("td",{className:"text-emperia-muted text-right pr-2 capitalize",children:[R,":"]}),f.jsxs("td",{children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:()=>M(E===R?null:R),className:"w-5 h-5 rounded border border-emperia-border",style:{backgroundColor:wd(ye[R])},title:`Color ${ye[R]}`}),f.jsx("span",{className:"text-emperia-text font-mono w-8 text-center",children:ye[R]}),f.jsx(Xt,{onClick:()=>I({...ye,[R]:Math.max(0,ye[R]-1)}),children:""}),f.jsx(Xt,{onClick:()=>I({...ye,[R]:Math.min(ti-1,ye[R]+1)}),children:""})]}),E===R&&f.jsx("div",{className:"mt-1 p-1 bg-emperia-surface border border-emperia-border rounded grid gap-px",style:{gridTemplateColumns:"repeat(19, 14px)"},children:Cr.map((_e,De)=>f.jsx("button",{onClick:()=>{I({...ye,[R]:De}),M(null)},className:`w-3.5 h-3.5 rounded-sm border ${ye[R]===De?"border-white":"border-transparent"}`,style:{backgroundColor:wd(De)},title:`${De}`},De))})]})]},R))]}),b.animationLength>1&&f.jsxs(f.Fragment,{children:[f.jsx("tr",{children:f.jsx("td",{colSpan:2,children:f.jsx("div",{className:"border-t border-emperia-border/40 my-0.5"})})}),f.jsxs("tr",{children:[f.jsx("td",{className:"text-emperia-muted text-right pr-2",children:"Anim mode:"}),f.jsx("td",{children:f.jsxs("select",{value:b.asynchronous,onChange:R=>mt("asynchronous",Number(R.target.value)),className:"w-full px-1.5 py-0.5 bg-emperia-surface border border-emperia-border rounded text-[10px] text-emperia-text outline-none focus:border-emperia-accent",children:[f.jsx("option",{value:0,children:"Synchronous"}),f.jsx("option",{value:1,children:"Asynchronous"})]})})]}),f.jsxs("tr",{children:[f.jsx("td",{className:"text-emperia-muted text-right pr-2",children:"Loop count:"}),f.jsx("td",{children:f.jsx(uo,{value:b.nLoop,min:0,max:255,onChange:R=>mt("nLoop",R)})})]}),f.jsxs("tr",{children:[f.jsx("td",{className:"text-emperia-muted text-right pr-2",children:"Start frame:"}),f.jsx("td",{children:f.jsx(uo,{value:b.start,min:0,max:b.animationLength-1,onChange:R=>mt("start",R)})})]}),b.animationLengths[k]&&f.jsxs(f.Fragment,{children:[f.jsx("tr",{children:f.jsx("td",{colSpan:2,children:f.jsx("div",{className:"border-t border-emperia-border/40 my-0.5"})})}),f.jsxs("tr",{children:[f.jsx("td",{className:"text-emperia-muted text-right pr-2",children:"Min (ms):"}),f.jsx("td",{children:f.jsx(uo,{value:b.animationLengths[k].min,min:0,max:65535,onChange:R=>{b.animationLengths[k].min=R,p.rawBytes=void 0;const _e=te.getState(),De=new Set(_e.dirtyIds);De.add(p.id),te.setState({dirty:!0,dirtyIds:De,editVersion:_e.editVersion+1})}})})]}),f.jsxs("tr",{children:[f.jsx("td",{className:"text-emperia-muted text-right pr-2",children:"Max (ms):"}),f.jsx("td",{children:f.jsx(uo,{value:b.animationLengths[k].max,min:0,max:65535,onChange:R=>{b.animationLengths[k].max=R,p.rawBytes=void 0;const _e=te.getState(),De=new Set(_e.dirtyIds);De.add(p.id),te.setState({dirty:!0,dirtyIds:De,editVersion:_e.editVersion+1})}})})]}),f.jsx("tr",{children:f.jsxs("td",{colSpan:2,className:"text-emperia-muted/60 text-right pt-0.5",children:["Frame ",k+1," of ",b.animationLength]})})]})]})]})})})]}),b&&f.jsxs("div",{className:"border-t border-emperia-border",children:[f.jsx("div",{className:"px-4 py-1.5 bg-emperia-surface/50",children:f.jsx("span",{className:"text-[10px] font-medium text-emperia-text uppercase tracking-wider",children:"Patterns"})}),f.jsxs("div",{className:"px-4 py-2 grid grid-cols-2 gap-x-6 gap-y-1",children:[f.jsx(xn,{label:"Width",value:b.width,onChange:R=>mt("width",R),min:1,max:4}),f.jsx(xn,{label:"Height",value:b.height,onChange:R=>mt("height",R),min:1,max:4}),f.jsx(xn,{label:"Crop Size",value:32,readOnly:!0}),f.jsx(xn,{label:"Layers",value:b.layers,onChange:R=>mt("layers",R),min:1,max:4}),f.jsx(xn,{label:"Pattern X",value:b.patternX,onChange:R=>mt("patternX",R),min:1,max:8}),f.jsx(xn,{label:"Pattern Y",value:b.patternY,onChange:R=>mt("patternY",R),min:1,max:8}),f.jsx(xn,{label:"Pattern Z",value:b.patternZ,onChange:R=>mt("patternZ",R),min:1,max:8}),f.jsx(xn,{label:"Animations",value:b.animationLength,onChange:R=>mt("animationLength",R),min:1,max:255})]})]})]})}function xn({label:l,value:r,onChange:i,min:a,max:c,readOnly:d}){return f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("span",{className:"text-[10px] text-emperia-muted",children:[l,":"]}),d?f.jsx("span",{className:"text-[10px] text-emperia-text font-mono w-14 text-right",children:r}):f.jsxs("div",{className:"flex items-center gap-0.5",children:[f.jsx("button",{onClick:()=>i==null?void 0:i(Math.max(a??0,r-1)),className:"w-4 h-4 flex items-center justify-center rounded bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-emperia-text text-[10px]",children:"-"}),f.jsx("input",{type:"number",value:r,min:a,max:c,onChange:p=>{const g=parseInt(p.target.value,10);isNaN(g)||i==null||i(Math.max(a??0,Math.min(c??9999,g)))},className:"w-10 px-1 py-0 bg-emperia-surface border border-emperia-border rounded text-[10px] text-emperia-text font-mono text-center outline-none focus:border-emperia-accent"}),f.jsx("button",{onClick:()=>i==null?void 0:i(Math.min(c??9999,r+1)),className:"w-4 h-4 flex items-center justify-center rounded bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-emperia-text text-[10px]",children:"+"})]})]})}function Xt({onClick:l,disabled:r,children:i}){return f.jsx("button",{onClick:l,disabled:r,className:"w-5 h-5 flex items-center justify-center rounded bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-emperia-text text-[10px] disabled:opacity-30",children:i})}function uo({value:l,min:r,max:i,onChange:a}){return f.jsx("input",{type:"number",value:l,min:r,max:i,onChange:c=>{const d=parseInt(c.target.value,10);isNaN(d)||a(Math.max(r,Math.min(i,d)))},className:"w-16 px-1.5 py-0.5 bg-emperia-surface border border-emperia-border rounded text-[10px] text-emperia-text font-mono text-right outline-none focus:border-emperia-accent"})}function Hi(l,r,i,a,c,d,p,g){return(((((r*l.patternZ+c)*l.patternY+a)*l.patternX+i)*l.layers+d)*l.height+g)*l.width+p}const da=[{key:"ground",label:"Ground"},{key:"groundBorder",label:"Ground Border"},{key:"onBottom",label:"On Bottom"},{key:"onTop",label:"On Top"},{key:"container",label:"Container"},{key:"stackable",label:"Stackable"},{key:"forceUse",label:"Force Use"},{key:"multiUse",label:"Multi Use"},{key:"writable",label:"Writable"},{key:"writableOnce",label:"Writable Once"},{key:"fluidContainer",label:"Fluid Container"},{key:"splash",label:"Splash"},{key:"notWalkable",label:"Not Walkable"},{key:"notMoveable",label:"Not Moveable"},{key:"blockProjectile",label:"Block Projectile"},{key:"notPathable",label:"Not Pathable"},{key:"pickupable",label:"Pickupable"},{key:"hangable",label:"Hangable"},{key:"hookSouth",label:"Hook South"},{key:"hookEast",label:"Hook East"},{key:"rotateable",label:"Rotateable"},{key:"hasLight",label:"Light"},{key:"dontHide",label:"Don't Hide"},{key:"translucent",label:"Translucent"},{key:"hasDisplacement",label:"Displacement"},{key:"hasElevation",label:"Elevation"},{key:"lyingCorpse",label:"Lying Corpse"},{key:"animateAlways",label:"Animate Always"},{key:"hasMinimapColor",label:"Minimap Color"},{key:"fullGround",label:"Full Ground"},{key:"look",label:"Look"},{key:"cloth",label:"Cloth"},{key:"hasMarket",label:"Market"},{key:"usable",label:"Usable"},{key:"wrapable",label:"Wrapable"},{key:"unwrapable",label:"Unwrapable"},{key:"topEffect",label:"Top Effect"},{key:"noMoveAnimation",label:"No Move Animation"},{key:"chargeable",label:"Chargeable"}],f0=[{key:"groundSpeed",label:"Ground Speed",parentFlag:"ground",min:0,max:65535},{key:"lightLevel",label:"Light Level",parentFlag:"hasLight",min:0,max:65535},{key:"lightColor",label:"Light Color",parentFlag:"hasLight",min:0,max:65535},{key:"displacementX",label:"Displacement X",parentFlag:"hasDisplacement",min:0,max:65535},{key:"displacementY",label:"Displacement Y",parentFlag:"hasDisplacement",min:0,max:65535},{key:"elevation",label:"Elevation",parentFlag:"hasElevation",min:0,max:65535},{key:"minimapColor",label:"Minimap Color",parentFlag:"hasMinimapColor",min:0,max:65535},{key:"clothSlot",label:"Cloth Slot",parentFlag:"cloth",min:0,max:65535}];function bd({showAttributesOnly:l}={}){const r=te(m=>m.selectedThingId),i=te(m=>m.objectData),a=te(m=>m.updateThingFlags);te(m=>m.editVersion);const c=r!=null?(i==null?void 0:i.things.get(r))??null:null,d=c&&i?rr(i,c.id):(c==null?void 0:c.id)??0,p=ee.useCallback(m=>{if(!c)return;const k={...c.flags};k[m]=!k[m],k[m]||(m==="ground"&&(k.groundSpeed=void 0),m==="hasLight"&&(k.lightLevel=void 0,k.lightColor=void 0),m==="hasDisplacement"&&(k.displacementX=void 0,k.displacementY=void 0),m==="hasElevation"&&(k.elevation=void 0),m==="hasMinimapColor"&&(k.minimapColor=void 0),m==="cloth"&&(k.clothSlot=void 0)),k[m]&&(m==="ground"&&k.groundSpeed==null&&(k.groundSpeed=100),m==="hasLight"&&(k.lightLevel==null&&(k.lightLevel=7),k.lightColor==null&&(k.lightColor=215)),m==="hasDisplacement"&&(k.displacementX==null&&(k.displacementX=8),k.displacementY==null&&(k.displacementY=8)),m==="hasElevation"&&k.elevation==null&&(k.elevation=8),m==="hasMinimapColor"&&k.minimapColor==null&&(k.minimapColor=0),m==="cloth"&&k.clothSlot==null&&(k.clothSlot=0)),a(c.id,k)},[c,a]),g=ee.useCallback((m,k)=>{if(!c)return;const w={...c.flags,[m]:k};a(c.id,w)},[c,a]);return c?l?f.jsxs("div",{className:"p-3 text-xs space-y-4",children:[f.jsxs(Jr,{title:"Identity",children:[f.jsx(Lt,{label:"ID",value:d}),f.jsx(Lt,{label:"Category",value:c.category})]}),c.frameGroups.map((m,k)=>f.jsxs(Jr,{title:`Frame Group ${k}${c.category==="outfit"?k===0?" (Idle)":" (Moving)":""}`,children:[f.jsx(Lt,{label:"Size",value:`${m.width}x${m.height}`}),f.jsx(Lt,{label:"Layers",value:m.layers}),f.jsx(Lt,{label:"Pattern X",value:m.patternX}),f.jsx(Lt,{label:"Pattern Y",value:m.patternY}),f.jsx(Lt,{label:"Pattern Z",value:m.patternZ}),f.jsx(Lt,{label:"Animations",value:m.animationLength}),f.jsx(Lt,{label:"Sprites",value:m.sprites.length}),m.animationLength>1&&f.jsxs(f.Fragment,{children:[f.jsx(Lt,{label:"Async",value:m.asynchronous?"Yes":"No"}),f.jsx(Lt,{label:"Loop Count",value:m.nLoop===0?"Infinite":m.nLoop}),f.jsx(Lt,{label:"Start Frame",value:m.start})]})]},k)),f.jsx(Jr,{title:"Active Flags",children:f.jsxs("div",{className:"space-y-0.5",children:[da.filter(({key:m})=>!!c.flags[m]).map(({key:m,label:k})=>f.jsx("div",{className:"text-emperia-text text-xs",children:k},m)),da.every(({key:m})=>!c.flags[m])&&f.jsx("span",{className:"text-emperia-muted italic",children:"None"})]})})]}):f.jsxs("div",{className:"p-3 text-xs space-y-4",children:[f.jsxs(Jr,{title:"Identity",children:[f.jsx(Lt,{label:"ID",value:d}),f.jsx(Lt,{label:"Category",value:c.category})]}),f.jsx(Jr,{title:"Flags",children:f.jsx("div",{className:"grid grid-cols-1 gap-0",children:da.map(({key:m,label:k})=>f.jsxs("label",{className:"flex items-center gap-2 py-[3px] px-1 rounded hover:bg-emperia-hover cursor-pointer select-none",children:[f.jsx("input",{type:"checkbox",checked:!!c.flags[m],onChange:()=>p(m),className:"w-3 h-3 rounded border-emperia-border bg-emperia-surface accent-emperia-accent cursor-pointer"}),f.jsx("span",{className:c.flags[m]?"text-emperia-text":"text-emperia-muted",children:k})]},m))})}),f.jsx(Jr,{title:"Properties",children:f.jsx(h0,{flags:c.flags,onChange:g})})]}):f.jsx("div",{className:"p-4 text-emperia-muted text-sm",children:"No object selected"})}function Jr({title:l,children:r}){return f.jsxs("div",{children:[f.jsx("h3",{className:"text-emperia-accent font-semibold text-[11px] uppercase tracking-wider mb-1.5 pb-1 border-b border-emperia-border",children:l}),f.jsx("div",{className:"space-y-0.5",children:r})]})}function Lt({label:l,value:r}){return f.jsxs("div",{className:"flex justify-between py-0.5",children:[f.jsx("span",{className:"text-emperia-muted",children:l}),f.jsx("span",{className:"text-emperia-text font-mono",children:String(r)})]})}function h0({flags:l,onChange:r}){const i=f0.filter(a=>a.parentFlag?!!l[a.parentFlag]:!0);return i.length===0?f.jsx("span",{className:"text-emperia-muted italic",children:"No active properties"}):f.jsx("div",{className:"space-y-1",children:i.map(a=>f.jsxs("div",{className:"flex items-center justify-between gap-2",children:[f.jsx("span",{className:"text-emperia-muted shrink-0",children:a.label}),f.jsx("input",{type:"number",value:l[a.key]??0,min:a.min,max:a.max,onChange:c=>{const d=parseInt(c.target.value,10);isNaN(d)||r(a.key,Math.max(a.min??0,Math.min(a.max??65535,d)))},className:`w-20 px-1.5 py-0.5 rounded bg-emperia-surface border border-emperia-border
                       text-emperia-text font-mono text-right text-xs outline-none
                       focus:border-emperia-accent transition-colors`})]},a.key))})}const an=40,wr=6;function p0(){const l=te(I=>I.selectedThingId),r=te(I=>I.objectData),i=te(I=>I.spriteData),a=te(I=>I.spriteOverrides),c=te(I=>I.focusSpriteId),[d,p]=ee.useState(null),[g,m]=ee.useState(""),[k,w]=ee.useState(0),[y,B]=ee.useState(0),[T,G]=ee.useState(null),O=ee.useRef(null),V=ee.useRef(null),Z=l!=null?(r==null?void 0:r.things.get(l))??null:null,K=ee.useCallback(I=>{const fe=te.getState().addSprite;Array.from(I).forEach(Te=>{const oe=new Image;oe.onload=()=>{const U=document.createElement("canvas"),se=U.getContext("2d"),X=Math.max(1,Math.floor(oe.width/32)),E=Math.max(1,Math.floor(oe.height/32));U.width=32,U.height=32;const M=[];for(let pe=0;pe<E;pe++)for(let Se=0;Se<X;Se++){se.clearRect(0,0,32,32),se.drawImage(oe,Se*32,pe*32,32,32,0,0,32,32);const Ae=se.getImageData(0,0,32,32);let re=!1;for(let Be=3;Be<Ae.data.length;Be+=4)if(Ae.data[Be]>0){re=!0;break}if(!re)continue;const ve=fe(Ae);ve!=null&&M.push(ve)}if(M.length>0&&(m(""),G(M[0]),setTimeout(()=>G(null),2e3),O.current&&i)){const pe=M[0]-1,Se=Math.floor(pe/wr);O.current.scrollTop=Se*an}},oe.src=URL.createObjectURL(Te)})},[i]),ue=ee.useCallback(I=>{I<=0||confirm(`Delete sprite #${I}? It will be replaced with a blank sprite.`)&&te.getState().deleteSprite(I)},[]);ee.useEffect(()=>{p(null)},[l]),ee.useEffect(()=>{if(c!=null&&c>0&&O.current&&i){m("");const I=c-1,fe=Math.floor(I/wr);O.current.scrollTop=fe*an,G(c),te.setState({focusSpriteId:null}),setTimeout(()=>G(null),2e3)}},[c,i]);const q=te(I=>I.editVersion),$=ee.useMemo(()=>{if(!Z)return[];const I=[];return Z.frameGroups.forEach((fe,Te)=>{fe.sprites.forEach((oe,U)=>{I.push({spriteId:oe,group:Te,index:U})})}),I},[Z,q]),P=ee.useMemo(()=>{if(!i)return[];if(g){const fe=parseInt(g,10);if(!isNaN(fe)){const Te=[];for(let oe=Math.max(1,fe-50);oe<=Math.min(i.spriteCount,fe+200);oe++)Te.push(oe);return Te}}const I=[];for(let fe=1;fe<=i.spriteCount;fe++)I.push(fe);return I},[i,g,q]),ae=Math.ceil(P.length/wr),Y=ae*an,ke=ee.useCallback(()=>{O.current&&(w(O.current.scrollTop),B(O.current.clientHeight))},[]);ee.useEffect(()=>{ke();const I=O.current;if(I){const fe=new ResizeObserver(ke);return fe.observe(I),()=>fe.disconnect()}},[ke]),ee.useEffect(()=>{if(g&&O.current){const I=parseInt(g,10);if(!isNaN(I)){const fe=P.indexOf(I);if(fe>=0){const Te=Math.floor(fe/wr);O.current.scrollTop=Te*an}}}},[g,P]);const we=Math.max(0,Math.floor(k/an)-2),ie=Math.min(ae,Math.ceil((k+y)/an)+2),Ne=P.slice(we*wr,ie*wr),ye=ee.useCallback(I=>{if(!d||!Z)return;const fe=Z.frameGroups[d.group];if(!fe)return;fe.sprites[d.index]=I,Z.rawBytes=void 0,ei();const Te=te.getState(),oe=new Set(Te.dirtyIds);oe.add(Z.id),te.setState({dirty:!0,dirtyIds:oe,editVersion:Te.editVersion+1})},[d,Z]);return i?f.jsxs("div",{className:"flex flex-col h-full",children:[Z&&f.jsxs("div",{className:"shrink-0 border-b border-emperia-border",children:[f.jsxs("div",{className:"px-2 py-1.5 flex items-center justify-between",children:[f.jsx("span",{className:"text-[10px] font-medium text-emperia-text uppercase tracking-wider",children:"Object Sprites"}),f.jsx("span",{className:"text-[10px] text-emperia-muted",children:$.length})]}),f.jsx("div",{className:"overflow-y-auto max-h-40 px-1.5 pb-1.5",children:f.jsx("div",{className:"grid grid-cols-6 gap-0.5",children:$.map(({spriteId:I,group:fe,index:Te},oe)=>{const U=I>0?fa(i,I,a):null,se=(d==null?void 0:d.group)===fe&&(d==null?void 0:d.index)===Te,X=a.has(I);return f.jsxs("button",{onClick:()=>p(se?null:{group:fe,index:Te}),className:`relative flex items-center justify-center rounded border transition-colors
                      ${se?"border-emperia-accent bg-emperia-accent/20":X?"border-amber-500/50 bg-amber-500/10":"border-emperia-border/40 hover:border-emperia-muted"}
                    `,style:{width:an,height:an},title:`Slot ${oe}  Sprite #${I}${se?" (selected  click atlas sprite to assign)":""}`,children:[U?f.jsx("img",{src:U,alt:"",className:"w-8 h-8",style:{imageRendering:"pixelated"}}):f.jsx("div",{className:"w-8 h-8 bg-emperia-border/20 rounded-sm"}),f.jsx("span",{className:"absolute bottom-0 right-0.5 text-[6px] text-emperia-muted/50 leading-none",children:I})]},`${fe}-${Te}`)})})}),d&&f.jsx("div",{className:"px-2 pb-1.5 text-[10px] text-emperia-accent",children:"Click a sprite below to assign it to the selected slot"})]}),f.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[f.jsxs("div",{className:"px-2 py-1.5 border-b border-emperia-border flex items-center gap-1.5",children:[f.jsx("span",{className:"text-[10px] font-medium text-emperia-text uppercase tracking-wider shrink-0",children:"Sprite Atlas"}),f.jsxs("div",{className:"flex-1 relative",children:[f.jsx(Pd,{className:"absolute left-1.5 top-1/2 -translate-y-1/2 w-3 h-3 text-emperia-muted"}),f.jsx("input",{type:"text",value:g,onChange:I=>m(I.target.value),placeholder:"Go to ID...",className:"w-full pl-6 pr-2 py-0.5 bg-emperia-bg border border-emperia-border rounded text-[10px] text-emperia-text placeholder:text-emperia-muted/50 focus:outline-none focus:border-emperia-accent"})]}),f.jsx("input",{ref:V,type:"file",accept:"image/png,image/gif,image/bmp",multiple:!0,className:"hidden",onChange:I=>{I.target.files&&K(I.target.files),I.target.value=""}}),f.jsx("button",{onClick:()=>{var I;return(I=V.current)==null?void 0:I.click()},className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-green-400 transition-colors shrink-0",title:"Add new sprites from PNG (auto-splits into 3232 tiles)",children:f.jsx(Nd,{className:"w-3.5 h-3.5"})})]}),f.jsx("div",{ref:O,onScroll:ke,className:"flex-1 overflow-y-auto",children:f.jsx("div",{style:{height:Y,position:"relative"},children:f.jsx("div",{style:{position:"absolute",top:we*an,left:0,right:0,display:"grid",gridTemplateColumns:`repeat(${wr}, 1fr)`},children:Ne.map(I=>{const fe=fa(i,I,a),Te=I===T;return f.jsxs("div",{className:`group relative flex items-center justify-center border transition-colors
                      ${Te?"border-green-400 bg-green-400/20":d?"border-transparent hover:bg-emperia-accent/10 hover:border-emperia-accent/30 cursor-pointer":"border-transparent hover:bg-emperia-hover"}
                    `,style:{width:an,height:an},title:`#${I}`,onClick:()=>ye(I),onContextMenu:oe=>{oe.preventDefault(),ue(I)},children:[fe?f.jsx("img",{src:fe,alt:"",className:"w-8 h-8",style:{imageRendering:"pixelated"}}):f.jsx("div",{className:"w-6 h-6"}),f.jsx("span",{className:"absolute bottom-0 right-0.5 text-[6px] text-emperia-muted/40 leading-none",children:I}),f.jsx("button",{className:"absolute top-0 right-0 p-0.5 rounded-bl bg-red-500/80 text-white opacity-0 group-hover:opacity-100 transition-opacity",onClick:oe=>{oe.stopPropagation(),ue(I)},title:`Delete sprite #${I}`,children:f.jsx(im,{className:"w-2.5 h-2.5"})})]},I)})})})})]})]}):f.jsx("div",{className:"p-3 text-emperia-muted text-xs",children:"Load files to browse sprites"})}const m0=[{key:"name",label:"Name",type:"string"},{key:"article",label:"Article",type:"string",placeholder:"a / an"},{key:"description",label:"Description",type:"string"},{key:"type",label:"Type",type:"select",options:["","bed","container","corpse","depot","door","fluidContainer","key","magicfield","mailbox","readable","rune","splash","teleport","trashholder","window"]}],g0=[{key:"weaponType",label:"Weapon Type",type:"select",options:["","sword","axe","club","distance","shield","wand","orb","magical"]},{key:"slotType",label:"Slot Type",type:"select",options:["","hand","two-handed","head","body","legs","feet","ring","necklace","backpack","ammo"]},{key:"ammoType",label:"Ammo Type",type:"string"},{key:"shootType",label:"Shoot Type",type:"string"},{key:"damageElement",label:"Damage Element",type:"select",options:["","fire","ice","energy","earth","death","holy","arcane","wind"]}],x0=[{key:"physicalAttack",label:"Physical Attack",type:"number"},{key:"magicalAttack",label:"Magical Attack",type:"number"},{key:"physicalDefense",label:"Physical Defense",type:"number"},{key:"magicalDefense",label:"Magical Defense",type:"number"},{key:"armor",label:"Armor",type:"number"},{key:"extradef",label:"Extra Def",type:"number"},{key:"hitChance",label:"Hit Chance",type:"number"},{key:"maxHitChance",label:"Max Hit Chance",type:"number"},{key:"range",label:"Range",type:"number"}],y0=[{key:"weight",label:"Weight",type:"number"},{key:"speed",label:"Speed",type:"number"},{key:"friction",label:"Friction",type:"number"},{key:"floorchange",label:"Floor Change",type:"select",options:["","down","north","south","east","west"]}],v0=[{key:"level",label:"Level",type:"number"},{key:"expertise",label:"Expertise",type:"number"}],k0=[{key:"containerSize",label:"Container Size",type:"number"},{key:"containerSizePotions",label:"Container Size (Potions)",type:"number"},{key:"weightReduction",label:"Weight Reduction",type:"number"}],w0=[{key:"charges",label:"Charges",type:"number"},{key:"duration",label:"Duration",type:"number"},{key:"decayTo",label:"Decay To (Item ID)",type:"number"},{key:"destroyTo",label:"Destroy To (Item ID)",type:"number"},{key:"rotateTo",label:"Rotate To (Item ID)",type:"number"},{key:"transformEquipTo",label:"Transform Equip To",type:"number"},{key:"transformDeEquipTo",label:"Transform DeEquip To",type:"number"}],S0=[{key:"fluidSource",label:"Fluid Source",type:"string"},{key:"field",label:"Field",type:"string"},{key:"readable",label:"Readable",type:"boolean"},{key:"writeable",label:"Writeable",type:"boolean"},{key:"maxTextLen",label:"Max Text Length",type:"number"}],_0=[{key:"healthGain",label:"Health Gain",type:"number"},{key:"healthTicks",label:"Health Ticks",type:"number"},{key:"manaGain",label:"Mana Gain",type:"number"},{key:"manaTicks",label:"Mana Ticks",type:"number"}],C0=[{key:"skillSword",label:"Skill Sword",type:"number"},{key:"skillAxe",label:"Skill Axe",type:"number"},{key:"skillClub",label:"Skill Club",type:"number"},{key:"skillDist",label:"Skill Distance",type:"number"},{key:"skillShield",label:"Skill Shield",type:"number"},{key:"skillFist",label:"Skill Fist",type:"number"},{key:"magiclevelpoints",label:"Magic Level Points",type:"number"}],E0=[{key:"absorbPercentPhysical",label:"Absorb Physical %",type:"number"},{key:"absorbPercentFire",label:"Absorb Fire %",type:"number"},{key:"absorbPercentIce",label:"Absorb Ice %",type:"number"},{key:"absorbPercentEnergy",label:"Absorb Energy %",type:"number"},{key:"absorbPercentEarth",label:"Absorb Earth %",type:"number"},{key:"absorbPercentDeath",label:"Absorb Death %",type:"number"},{key:"absorbPercentHoly",label:"Absorb Holy %",type:"number"}],b0=[{key:"bonusStrength",label:"Strength",type:"number"},{key:"bonusDexterity",label:"Dexterity",type:"number"},{key:"bonusEndurance",label:"Endurance",type:"number"},{key:"bonusAgility",label:"Agility",type:"number"},{key:"bonusIntelligence",label:"Intelligence",type:"number"},{key:"bonusWisdom",label:"Wisdom",type:"number"},{key:"bonusFocus",label:"Focus",type:"number"},{key:"bonusSpirit",label:"Spirit",type:"number"}],A0=[{key:"bonusCritChance",label:"Crit Chance",type:"number"},{key:"bonusCritDamage",label:"Crit Damage",type:"number"},{key:"bonusDodge",label:"Dodge",type:"number"},{key:"bonusCDR",label:"CDR",type:"number"},{key:"bonusHealingPower",label:"Healing Power",type:"number"},{key:"bonusAttackSpeed",label:"Attack Speed",type:"number"},{key:"bonusPhysicalHit",label:"Physical Hit",type:"number"},{key:"bonusSpellHit",label:"Spell Hit",type:"number"},{key:"bonusMaxHealth",label:"Max Health",type:"number"},{key:"bonusMaxMana",label:"Max Mana",type:"number"},{key:"bonusCapacity",label:"Capacity",type:"number"},{key:"bonusHealthRegen",label:"Health Regen",type:"number"},{key:"bonusManaRegen",label:"Mana Regen",type:"number"},{key:"bonusMaxStamina",label:"Max Stamina",type:"number"},{key:"bonusStaminaRegen",label:"Stamina Regen",type:"number"},{key:"bonusStatusResist",label:"Status Resist",type:"number"}],D0=[{value:0,label:"0  Normal"},{value:1,label:"1  Ground"},{value:2,label:"2  Container"},{value:11,label:"11  Splash"},{value:12,label:"12  Fluid Container"},{value:14,label:"14  None / Unused"}];function F0(){var Z;const l=te(K=>K.selectedThingId),r=te(K=>K.objectData),i=te(K=>K.activeCategory),a=te(K=>K.itemDefinitions),c=te(K=>K.clientToServerIds),d=te(K=>K.updateItemDefinition);te(K=>K.editVersion);const p=l!=null?(r==null?void 0:r.things.get(l))??null:null,g=l!=null?c.get(l):void 0,m=g!=null?a.get(g)??null:null,k=p&&r?rr(r,p.id):l??0,w=ee.useMemo(()=>(m==null?void 0:m.properties)??{},[m]),y=ee.useCallback((K,ue)=>{if(l==null)return;const q=c.get(l),$=q!=null?a.get(q):void 0,P=$!=null&&$.properties?{...$.properties}:{};ue===void 0||ue===""||ue===!1?delete P[K]:P[K]=ue,d(l,{properties:Object.keys(P).length>0?P:null})},[l,a,d]);if(i!=="item")return f.jsx("div",{className:"flex items-center justify-center h-full text-emperia-muted text-sm p-4",children:"Server properties are only available for items."});if(!p)return f.jsx("div",{className:"flex items-center justify-center h-full text-emperia-muted text-sm p-4",children:"No item selected"});const B=(m==null?void 0:m.flags)??0,T=(m==null?void 0:m.group)??0,G=m==null?void 0:m.serverId,O=Lp.filter((K,ue)=>(B&1<<ue)!==0).map(K=>K.replace("FLAG_","")),V=((Z=D0.find(K=>K.value===T))==null?void 0:Z.label)??String(T);return f.jsxs("div",{className:"p-3 text-xs space-y-3 overflow-y-auto",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsxs("span",{className:"text-emperia-text font-semibold",children:["Item #",k]}),w.name&&f.jsxs("span",{className:"text-emperia-muted",children:[" ",w.name]}),G!=null&&G!==l&&f.jsxs("span",{className:"text-emperia-muted/50 text-[10px]",children:["(Server ID: ",G,")"]})]}),f.jsx(xf,{title:"OTB Flags & Group (from definitions.json)",children:f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-16 text-emperia-muted shrink-0",children:"Group"}),f.jsx("span",{className:"text-emperia-text font-mono text-[10px]",children:V})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-16 text-emperia-muted shrink-0",children:"Flags"}),f.jsx("span",{className:"text-emperia-text font-mono text-[10px]",children:B})]}),f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx("span",{className:"w-16 text-emperia-muted shrink-0",children:"Active"}),f.jsx("span",{className:"text-emperia-text font-mono text-[10px] leading-relaxed",children:O.length>0?O.join(", "):f.jsx("span",{className:"text-emperia-muted/50",children:"none"})})]}),f.jsx("p",{className:"text-[9px] text-emperia-muted/50 mt-1",children:"Imported from definitions.json. New items use flags derived from the Properties tab."})]})}),f.jsx(zt,{title:"Identity",fields:m0,props:w,setProperty:y}),f.jsx(zt,{title:"Equipment",fields:g0,props:w,setProperty:y}),f.jsx(zt,{title:"Combat Stats",fields:x0,props:w,setProperty:y}),f.jsx(zt,{title:"Weight / Speed",fields:y0,props:w,setProperty:y}),f.jsx(zt,{title:"Requirements",fields:v0,props:w,setProperty:y}),f.jsx(zt,{title:"Container",fields:k0,props:w,setProperty:y}),f.jsx(zt,{title:"Decay / Transform",fields:w0,props:w,setProperty:y}),f.jsx(zt,{title:"Special",fields:S0,props:w,setProperty:y}),f.jsx(zt,{title:"Regeneration",fields:_0,props:w,setProperty:y}),f.jsx(zt,{title:"Skill Bonuses",fields:C0,props:w,setProperty:y}),f.jsx(zt,{title:"Absorb %",fields:E0,props:w,setProperty:y}),f.jsx(zt,{title:"Stat Bonuses",fields:b0,props:w,setProperty:y}),f.jsx(zt,{title:"Combat Bonuses",fields:A0,props:w,setProperty:y})]})}function xf({title:l,children:r}){return f.jsxs("div",{children:[f.jsx("h3",{className:"text-[10px] font-semibold text-emperia-muted uppercase tracking-wider mb-1",children:l}),r]})}function zt({title:l,fields:r,props:i,setProperty:a}){return!r.some(p=>i[p.key]!==void 0&&i[p.key]!=="")&&!(l==="Identity")?f.jsxs("details",{children:[f.jsx("summary",{className:"text-[10px] font-semibold text-emperia-muted uppercase tracking-wider cursor-pointer hover:text-emperia-text select-none",children:l}),f.jsx("div",{className:"mt-1 space-y-1",children:r.map(p=>f.jsx(Ad,{field:p,value:i[p.key],onChange:g=>a(p.key,g)},p.key))})]}):f.jsx(xf,{title:l,children:f.jsx("div",{className:"space-y-1",children:r.map(p=>f.jsx(Ad,{field:p,value:i[p.key],onChange:g=>a(p.key,g)},p.key))})})}function Ad({field:l,value:r,onChange:i}){const{label:a,type:c,options:d,placeholder:p}=l;return c==="boolean"?f.jsxs("label",{className:"flex items-center gap-2 py-[2px] px-1 rounded hover:bg-emperia-hover cursor-pointer select-none",children:[f.jsx("input",{type:"checkbox",checked:!!r,onChange:()=>i(!r),className:"accent-emperia-accent"}),f.jsx("span",{className:"text-emperia-text",children:a})]}):c==="select"?f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-28 text-emperia-muted shrink-0",children:a}),f.jsx("select",{value:r!=null?String(r):"",onChange:g=>i(g.target.value||void 0),className:"flex-1 bg-emperia-bg border border-emperia-border rounded px-2 py-0.5 text-emperia-text text-xs",children:d.map(g=>f.jsx("option",{value:g,children:g||""},g))})]}):c==="number"?f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-28 text-emperia-muted shrink-0",children:a}),f.jsx("input",{type:"number",value:r!=null?String(r):"",placeholder:p,onChange:g=>{const m=g.target.value;if(m===""){i(void 0);return}const k=parseFloat(m);isNaN(k)||i(k)},className:"flex-1 bg-emperia-bg border border-emperia-border rounded px-2 py-0.5 text-emperia-text text-xs w-0"})]}):f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-28 text-emperia-muted shrink-0",children:a}),f.jsx("input",{type:"text",value:r!=null?String(r):"",placeholder:p,onChange:g=>i(g.target.value||void 0),className:"flex-1 bg-emperia-bg border border-emperia-border rounded px-2 py-0.5 text-emperia-text text-xs w-0"})]})}const B0={texture:"Texture",properties:"Properties",attributes:"Attributes",server:"Server"};function T0(){const l=te(a=>a.loaded),[r,i]=ee.useState("texture");return l?f.jsxs("div",{className:"h-full flex flex-col",children:[f.jsx(pm,{}),f.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f.jsxs("div",{className:"w-64 flex flex-col border-r border-emperia-border bg-emperia-bg",children:[f.jsx(gm,{}),f.jsx(xm,{})]}),f.jsxs("div",{className:"flex-1 flex flex-col bg-emperia-bg overflow-hidden",children:[f.jsx("div",{className:"flex border-b border-emperia-border shrink-0",children:["texture","properties","attributes","server"].map(a=>f.jsx("button",{onClick:()=>i(a),className:`px-4 py-2 text-xs font-medium transition-colors
                  ${r===a?"text-emperia-accent border-b-2 border-emperia-accent":"text-emperia-muted hover:text-emperia-text"}
                `,children:B0[a]},a))}),f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[r==="texture"&&f.jsx(d0,{}),r==="properties"&&f.jsx(bd,{}),r==="attributes"&&f.jsx(bd,{showAttributesOnly:!0}),r==="server"&&f.jsx(F0,{})]})]}),f.jsx("div",{className:"w-72 border-l border-emperia-border bg-emperia-bg overflow-hidden flex flex-col",children:f.jsx(p0,{})})]})]}):f.jsx(am,{})}Sp.createRoot(document.getElementById("root")).render(f.jsx(Gi.StrictMode,{children:f.jsx(T0,{})}));
