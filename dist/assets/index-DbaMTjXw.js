var zp=Object.defineProperty;var Sd=o=>{throw TypeError(o)};var Hp=(o,n,i)=>n in o?zp(o,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[n]=i;var $=(o,n,i)=>Hp(o,typeof n!="symbol"?n+"":n,i),ba=(o,n,i)=>n.has(o)||Sd("Cannot "+i);var v=(o,n,i)=>(ba(o,n,"read from private field"),i?i.call(o):n.get(o)),Vr=(o,n,i)=>n.has(o)?Sd("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(o):n.set(o,i),_i=(o,n,i,l)=>(ba(o,n,"write to private field"),l?l.call(o,i):n.set(o,i),i),de=(o,n,i)=>(ba(o,n,"access private method"),i);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const m of u.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function i(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(c){if(c.ep)return;c.ep=!0;const u=i(c);fetch(c.href,u)}})();function sf(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var _a={exports:{}},ds={},Ca={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bd;function Gp(){if(bd)return Oe;bd=1;var o=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),m=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),y=Symbol.iterator;function S(C){return C===null||typeof C!="object"?null:(C=y&&C[y]||C["@@iterator"],typeof C=="function"?C:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,O={};function I(C,W,oe){this.props=C,this.context=W,this.refs=O,this.updater=oe||b}I.prototype.isReactComponent={},I.prototype.setState=function(C,W){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,W,"setState")},I.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function F(){}F.prototype=I.prototype;function D(C,W,oe){this.props=C,this.context=W,this.refs=O,this.updater=oe||b}var L=D.prototype=new F;L.constructor=D,_(L,I.prototype),L.isPureReactComponent=!0;var A=Array.isArray,Z=Object.prototype.hasOwnProperty,P={current:null},Q={key:!0,ref:!0,__self:!0,__source:!0};function J(C,W,oe){var he,xe={},re=null,ve=null;if(W!=null)for(he in W.ref!==void 0&&(ve=W.ref),W.key!==void 0&&(re=""+W.key),W)Z.call(W,he)&&!Q.hasOwnProperty(he)&&(xe[he]=W[he]);var Ie=arguments.length-2;if(Ie===1)xe.children=oe;else if(1<Ie){for(var z=Array(Ie),ue=0;ue<Ie;ue++)z[ue]=arguments[ue+2];xe.children=z}if(C&&C.defaultProps)for(he in Ie=C.defaultProps,Ie)xe[he]===void 0&&(xe[he]=Ie[he]);return{$$typeof:o,type:C,key:re,ref:ve,props:xe,_owner:P.current}}function Se(C,W){return{$$typeof:o,type:C.type,key:W,ref:C.ref,props:C.props,_owner:C._owner}}function Ce(C){return typeof C=="object"&&C!==null&&C.$$typeof===o}function fe(C){var W={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(oe){return W[oe]})}var me=/\/+/g;function K(C,W){return typeof C=="object"&&C!==null&&C.key!=null?fe(""+C.key):W.toString(36)}function ne(C,W,oe,he,xe){var re=typeof C;(re==="undefined"||re==="boolean")&&(C=null);var ve=!1;if(C===null)ve=!0;else switch(re){case"string":case"number":ve=!0;break;case"object":switch(C.$$typeof){case o:case n:ve=!0}}if(ve)return ve=C,xe=xe(ve),C=he===""?"."+K(ve,0):he,A(xe)?(oe="",C!=null&&(oe=C.replace(me,"$&/")+"/"),ne(xe,W,oe,"",function(ue){return ue})):xe!=null&&(Ce(xe)&&(xe=Se(xe,oe+(!xe.key||ve&&ve.key===xe.key?"":(""+xe.key).replace(me,"$&/")+"/")+C)),W.push(xe)),1;if(ve=0,he=he===""?".":he+":",A(C))for(var Ie=0;Ie<C.length;Ie++){re=C[Ie];var z=he+K(re,Ie);ve+=ne(re,W,oe,z,xe)}else if(z=S(C),typeof z=="function")for(C=z.call(C),Ie=0;!(re=C.next()).done;)re=re.value,z=he+K(re,Ie++),ve+=ne(re,W,oe,z,xe);else if(re==="object")throw W=String(C),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return ve}function ge(C,W,oe){if(C==null)return C;var he=[],xe=0;return ne(C,he,"","",function(re){return W.call(oe,re,xe++)}),he}function ae(C){if(C._status===-1){var W=C._result;W=W(),W.then(function(oe){(C._status===0||C._status===-1)&&(C._status=1,C._result=oe)},function(oe){(C._status===0||C._status===-1)&&(C._status=2,C._result=oe)}),C._status===-1&&(C._status=0,C._result=W)}if(C._status===1)return C._result.default;throw C._result}var ce={current:null},N={transition:null},ie={ReactCurrentDispatcher:ce,ReactCurrentBatchConfig:N,ReactCurrentOwner:P};function Y(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:ge,forEach:function(C,W,oe){ge(C,function(){W.apply(this,arguments)},oe)},count:function(C){var W=0;return ge(C,function(){W++}),W},toArray:function(C){return ge(C,function(W){return W})||[]},only:function(C){if(!Ce(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Oe.Component=I,Oe.Fragment=i,Oe.Profiler=c,Oe.PureComponent=D,Oe.StrictMode=l,Oe.Suspense=p,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,Oe.act=Y,Oe.cloneElement=function(C,W,oe){if(C==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+C+".");var he=_({},C.props),xe=C.key,re=C.ref,ve=C._owner;if(W!=null){if(W.ref!==void 0&&(re=W.ref,ve=P.current),W.key!==void 0&&(xe=""+W.key),C.type&&C.type.defaultProps)var Ie=C.type.defaultProps;for(z in W)Z.call(W,z)&&!Q.hasOwnProperty(z)&&(he[z]=W[z]===void 0&&Ie!==void 0?Ie[z]:W[z])}var z=arguments.length-2;if(z===1)he.children=oe;else if(1<z){Ie=Array(z);for(var ue=0;ue<z;ue++)Ie[ue]=arguments[ue+2];he.children=Ie}return{$$typeof:o,type:C.type,key:xe,ref:re,props:he,_owner:ve}},Oe.createContext=function(C){return C={$$typeof:m,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},C.Provider={$$typeof:u,_context:C},C.Consumer=C},Oe.createElement=J,Oe.createFactory=function(C){var W=J.bind(null,C);return W.type=C,W},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(C){return{$$typeof:h,render:C}},Oe.isValidElement=Ce,Oe.lazy=function(C){return{$$typeof:w,_payload:{_status:-1,_result:C},_init:ae}},Oe.memo=function(C,W){return{$$typeof:x,type:C,compare:W===void 0?null:W}},Oe.startTransition=function(C){var W=N.transition;N.transition={};try{C()}finally{N.transition=W}},Oe.unstable_act=Y,Oe.useCallback=function(C,W){return ce.current.useCallback(C,W)},Oe.useContext=function(C){return ce.current.useContext(C)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(C){return ce.current.useDeferredValue(C)},Oe.useEffect=function(C,W){return ce.current.useEffect(C,W)},Oe.useId=function(){return ce.current.useId()},Oe.useImperativeHandle=function(C,W,oe){return ce.current.useImperativeHandle(C,W,oe)},Oe.useInsertionEffect=function(C,W){return ce.current.useInsertionEffect(C,W)},Oe.useLayoutEffect=function(C,W){return ce.current.useLayoutEffect(C,W)},Oe.useMemo=function(C,W){return ce.current.useMemo(C,W)},Oe.useReducer=function(C,W,oe){return ce.current.useReducer(C,W,oe)},Oe.useRef=function(C){return ce.current.useRef(C)},Oe.useState=function(C){return ce.current.useState(C)},Oe.useSyncExternalStore=function(C,W,oe){return ce.current.useSyncExternalStore(C,W,oe)},Oe.useTransition=function(){return ce.current.useTransition()},Oe.version="18.3.1",Oe}var _d;function Va(){return _d||(_d=1,Ca.exports=Gp()),Ca.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cd;function $p(){if(Cd)return ds;Cd=1;var o=Va(),n=Symbol.for("react.element"),i=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,c=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function m(h,p,x){var w,y={},S=null,b=null;x!==void 0&&(S=""+x),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(b=p.ref);for(w in p)l.call(p,w)&&!u.hasOwnProperty(w)&&(y[w]=p[w]);if(h&&h.defaultProps)for(w in p=h.defaultProps,p)y[w]===void 0&&(y[w]=p[w]);return{$$typeof:n,type:h,key:S,ref:b,props:y,_owner:c.current}}return ds.Fragment=i,ds.jsx=m,ds.jsxs=m,ds}var Ed;function Wp(){return Ed||(Ed=1,_a.exports=$p()),_a.exports}var f=Wp(),V=Va();const fs=sf(V);var Co={},Ea={exports:{}},tn={},Da={exports:{}},Aa={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dd;function Vp(){return Dd||(Dd=1,(function(o){function n(N,ie){var Y=N.length;N.push(ie);e:for(;0<Y;){var C=Y-1>>>1,W=N[C];if(0<c(W,ie))N[C]=ie,N[Y]=W,Y=C;else break e}}function i(N){return N.length===0?null:N[0]}function l(N){if(N.length===0)return null;var ie=N[0],Y=N.pop();if(Y!==ie){N[0]=Y;e:for(var C=0,W=N.length,oe=W>>>1;C<oe;){var he=2*(C+1)-1,xe=N[he],re=he+1,ve=N[re];if(0>c(xe,Y))re<W&&0>c(ve,xe)?(N[C]=ve,N[re]=Y,C=re):(N[C]=xe,N[he]=Y,C=he);else if(re<W&&0>c(ve,Y))N[C]=ve,N[re]=Y,C=re;else break e}}return ie}function c(N,ie){var Y=N.sortIndex-ie.sortIndex;return Y!==0?Y:N.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;o.unstable_now=function(){return u.now()}}else{var m=Date,h=m.now();o.unstable_now=function(){return m.now()-h}}var p=[],x=[],w=1,y=null,S=3,b=!1,_=!1,O=!1,I=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(N){for(var ie=i(x);ie!==null;){if(ie.callback===null)l(x);else if(ie.startTime<=N)l(x),ie.sortIndex=ie.expirationTime,n(p,ie);else break;ie=i(x)}}function A(N){if(O=!1,L(N),!_)if(i(p)!==null)_=!0,ae(Z);else{var ie=i(x);ie!==null&&ce(A,ie.startTime-N)}}function Z(N,ie){_=!1,O&&(O=!1,F(J),J=-1),b=!0;var Y=S;try{for(L(ie),y=i(p);y!==null&&(!(y.expirationTime>ie)||N&&!fe());){var C=y.callback;if(typeof C=="function"){y.callback=null,S=y.priorityLevel;var W=C(y.expirationTime<=ie);ie=o.unstable_now(),typeof W=="function"?y.callback=W:y===i(p)&&l(p),L(ie)}else l(p);y=i(p)}if(y!==null)var oe=!0;else{var he=i(x);he!==null&&ce(A,he.startTime-ie),oe=!1}return oe}finally{y=null,S=Y,b=!1}}var P=!1,Q=null,J=-1,Se=5,Ce=-1;function fe(){return!(o.unstable_now()-Ce<Se)}function me(){if(Q!==null){var N=o.unstable_now();Ce=N;var ie=!0;try{ie=Q(!0,N)}finally{ie?K():(P=!1,Q=null)}}else P=!1}var K;if(typeof D=="function")K=function(){D(me)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,ge=ne.port2;ne.port1.onmessage=me,K=function(){ge.postMessage(null)}}else K=function(){I(me,0)};function ae(N){Q=N,P||(P=!0,K())}function ce(N,ie){J=I(function(){N(o.unstable_now())},ie)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(N){N.callback=null},o.unstable_continueExecution=function(){_||b||(_=!0,ae(Z))},o.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Se=0<N?Math.floor(1e3/N):5},o.unstable_getCurrentPriorityLevel=function(){return S},o.unstable_getFirstCallbackNode=function(){return i(p)},o.unstable_next=function(N){switch(S){case 1:case 2:case 3:var ie=3;break;default:ie=S}var Y=S;S=ie;try{return N()}finally{S=Y}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(N,ie){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var Y=S;S=N;try{return ie()}finally{S=Y}},o.unstable_scheduleCallback=function(N,ie,Y){var C=o.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?C+Y:C):Y=C,N){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=Y+W,N={id:w++,callback:ie,priorityLevel:N,startTime:Y,expirationTime:W,sortIndex:-1},Y>C?(N.sortIndex=Y,n(x,N),i(p)===null&&N===i(x)&&(O?(F(J),J=-1):O=!0,ce(A,Y-C))):(N.sortIndex=W,n(p,N),_||b||(_=!0,ae(Z))),N},o.unstable_shouldYield=fe,o.unstable_wrapCallback=function(N){var ie=S;return function(){var Y=S;S=ie;try{return N.apply(this,arguments)}finally{S=Y}}}})(Aa)),Aa}var Ad;function Yp(){return Ad||(Ad=1,Da.exports=Vp()),Da.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nd;function Xp(){if(Nd)return tn;Nd=1;var o=Va(),n=Yp();function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,c={};function u(e,t){m(e,t),m(e+"Capture",t)}function m(e,t){for(c[e]=t,e=0;e<t.length;e++)l.add(t[e])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},y={};function S(e){return p.call(y,e)?!0:p.call(w,e)?!1:x.test(e)?y[e]=!0:(w[e]=!0,!1)}function b(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _(e,t,r,s){if(t===null||typeof t>"u"||b(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function O(e,t,r,s,a,d,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=g}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){I[e]=new O(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];I[t]=new O(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){I[e]=new O(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){I[e]=new O(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){I[e]=new O(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){I[e]=new O(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){I[e]=new O(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){I[e]=new O(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){I[e]=new O(e,5,!1,e.toLowerCase(),null,!1,!1)});var F=/[\-:]([a-z])/g;function D(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(F,D);I[t]=new O(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(F,D);I[t]=new O(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(F,D);I[t]=new O(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){I[e]=new O(e,1,!1,e.toLowerCase(),null,!1,!1)}),I.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){I[e]=new O(e,1,!1,e.toLowerCase(),null,!0,!0)});function L(e,t,r,s){var a=I.hasOwnProperty(t)?I[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_(t,r,a,s)&&(r=null),s||a===null?S(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var A=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z=Symbol.for("react.element"),P=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),Se=Symbol.for("react.profiler"),Ce=Symbol.for("react.provider"),fe=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),ge=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),ce=Symbol.for("react.offscreen"),N=Symbol.iterator;function ie(e){return e===null||typeof e!="object"?null:(e=N&&e[N]||e["@@iterator"],typeof e=="function"?e:null)}var Y=Object.assign,C;function W(e){if(C===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);C=t&&t[1]||""}return`
`+C+e}var oe=!1;function he(e,t){if(!e||oe)return"";oe=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(G){var s=G}Reflect.construct(e,[],t)}else{try{t.call()}catch(G){s=G}e.call(t.prototype)}else{try{throw Error()}catch(G){s=G}e()}}catch(G){if(G&&s&&typeof G.stack=="string"){for(var a=G.stack.split(`
`),d=s.stack.split(`
`),g=a.length-1,k=d.length-1;1<=g&&0<=k&&a[g]!==d[k];)k--;for(;1<=g&&0<=k;g--,k--)if(a[g]!==d[k]){if(g!==1||k!==1)do if(g--,k--,0>k||a[g]!==d[k]){var E=`
`+a[g].replace(" at new "," at ");return e.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",e.displayName)),E}while(1<=g&&0<=k);break}}}finally{oe=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?W(e):""}function xe(e){switch(e.tag){case 5:return W(e.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return e=he(e.type,!1),e;case 11:return e=he(e.type.render,!1),e;case 1:return e=he(e.type,!0),e;default:return""}}function re(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Q:return"Fragment";case P:return"Portal";case Se:return"Profiler";case J:return"StrictMode";case K:return"Suspense";case ne:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case fe:return(e.displayName||"Context")+".Consumer";case Ce:return(e._context.displayName||"Context")+".Provider";case me:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ge:return t=e.displayName||null,t!==null?t:re(e.type)||"Memo";case ae:t=e._payload,e=e._init;try{return re(e(t))}catch{}}return null}function ve(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(t);case 8:return t===J?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ie(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function z(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ue(e){var t=z(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,d=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(g){s=""+g,d.call(this,g)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(g){s=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ne(e){e._valueTracker||(e._valueTracker=ue(e))}function Re(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=z(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function He(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function mt(e,t){var r=t.checked;return Y({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function B(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Ie(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function j(e,t){t=t.checked,t!=null&&L(e,"checked",t,!1)}function Ht(e,t){j(e,t);var r=Ie(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?sr(e,t.type,r):t.hasOwnProperty("defaultValue")&&sr(e,t.type,Ie(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Nr(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function sr(e,t,r){(t!=="number"||He(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Nt=Array.isArray;function gt(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Ie(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function rn(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(i(91));return Y({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function wt(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(i(92));if(Nt(r)){if(1<r.length)throw Error(i(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ie(r)}}function Tt(e,t){var r=Ie(t.value),s=Ie(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function Xt(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Gt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sn(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Gt(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bt,or=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Bt=Bt||document.createElement("div"),Bt.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function on(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var kn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jr=["Webkit","ms","Moz","O"];Object.keys(kn).forEach(function(e){Jr.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),kn[t]=kn[e]})});function be(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||kn.hasOwnProperty(e)&&kn[e]?(""+t).trim():t+"px"}function je(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=be(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var Ke=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ze(e,t){if(t){if(Ke[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(i(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(i(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(t.style!=null&&typeof t.style!="object")throw Error(i(62))}}function $e(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xe=null;function et(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var It=null,Ae=null,Le=null;function We(e){if(e=Qi(e)){if(typeof It!="function")throw Error(i(280));var t=e.stateNode;t&&(t=Os(t),It(e.stateNode,e.type,t))}}function qe(e){Ae?Le?Le.push(e):Le=[e]:Ae=e}function xt(){if(Ae){var e=Ae,t=Le;if(Le=Ae=null,We(e),t)for(e=0;e<t.length;e++)We(t[e])}}function jt(e,t){return e(t)}function Ft(){}var _t=!1;function ln(e,t,r){if(_t)return e(t,r);_t=!0;try{return jt(e,t,r)}finally{_t=!1,(Ae!==null||Le!==null)&&(Ft(),xt())}}function an(e,t){var r=e.stateNode;if(r===null)return null;var s=Os(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(i(231,t,typeof r));return r}var Lt=!1;if(h)try{var Pt={};Object.defineProperty(Pt,"passive",{get:function(){Lt=!0}}),window.addEventListener("test",Pt,Pt),window.removeEventListener("test",Pt,Pt)}catch{Lt=!1}function ct(e,t,r,s,a,d,g,k,E){var G=Array.prototype.slice.call(arguments,3);try{t.apply(r,G)}catch(ee){this.onError(ee)}}var ut=!1,Ct=null,$t=!1,Kt=null,jn={onError:function(e){ut=!0,Ct=e}};function Tr(e,t,r,s,a,d,g,k,E){ut=!1,Ct=null,ct.apply(jn,arguments)}function ei(e,t,r,s,a,d,g,k,E){if(Tr.apply(this,arguments),ut){if(ut){var G=Ct;ut=!1,Ct=null}else throw Error(i(198));$t||($t=!0,Kt=G)}}function Et(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Fn(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Br(e){if(Et(e)!==e)throw Error(i(188))}function Sn(e){var t=e.alternate;if(!t){if(t=Et(e),t===null)throw Error(i(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var d=a.alternate;if(d===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===d.child){for(d=a.child;d;){if(d===r)return Br(a),e;if(d===s)return Br(a),t;d=d.sibling}throw Error(i(188))}if(r.return!==s.return)r=a,s=d;else{for(var g=!1,k=a.child;k;){if(k===r){g=!0,r=a,s=d;break}if(k===s){g=!0,s=a,r=d;break}k=k.sibling}if(!g){for(k=d.child;k;){if(k===r){g=!0,r=d,s=a;break}if(k===s){g=!0,s=d,r=a;break}k=k.sibling}if(!g)throw Error(i(189))}}if(r.alternate!==s)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?e:t}function ft(e){return e=Sn(e),e!==null?Ln(e):null}function Ln(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ln(e);if(t!==null)return t;e=e.sibling}return null}var Ir=n.unstable_scheduleCallback,lr=n.unstable_cancelCallback,ys=n.unstable_shouldYield,Bi=n.unstable_requestPaint,it=n.unstable_now,vs=n.unstable_getCurrentPriorityLevel,bn=n.unstable_ImmediatePriority,ti=n.unstable_UserBlockingPriority,jr=n.unstable_NormalPriority,th=n.unstable_LowPriority,qa=n.unstable_IdlePriority,ws=null,Pn=null;function nh(e){if(Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(ws,e,void 0,(e.current.flags&128)===128)}catch{}}var _n=Math.clz32?Math.clz32:sh,rh=Math.log,ih=Math.LN2;function sh(e){return e>>>=0,e===0?32:31-(rh(e)/ih|0)|0}var ks=64,Ss=4194304;function Ii(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bs(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,d=e.pingedLanes,g=r&268435455;if(g!==0){var k=g&~a;k!==0?s=Ii(k):(d&=g,d!==0&&(s=Ii(d)))}else g=r&~a,g!==0?s=Ii(g):d!==0&&(s=Ii(d));if(s===0)return 0;if(t!==0&&t!==s&&(t&a)===0&&(a=s&-s,d=t&-t,a>=d||a===16&&(d&4194240)!==0))return t;if((s&4)!==0&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-_n(t),a=1<<r,s|=e[r],t&=~a;return s}function oh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lh(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,d=e.pendingLanes;0<d;){var g=31-_n(d),k=1<<g,E=a[g];E===-1?((k&r)===0||(k&s)!==0)&&(a[g]=oh(k,t)):E<=t&&(e.expiredLanes|=k),d&=~k}}function $o(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ja(){var e=ks;return ks<<=1,(ks&4194240)===0&&(ks=64),e}function Wo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ji(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-_n(t),e[t]=r}function ah(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-_n(r),d=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~d}}function Vo(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-_n(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var Qe=0;function ec(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var tc,Yo,nc,rc,ic,Xo=!1,_s=[],ar=null,cr=null,ur=null,Fi=new Map,Li=new Map,dr=[],ch="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sc(e,t){switch(e){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":Fi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Li.delete(t.pointerId)}}function Pi(e,t,r,s,a,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:d,targetContainers:[a]},t!==null&&(t=Qi(t),t!==null&&Yo(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function uh(e,t,r,s,a){switch(t){case"focusin":return ar=Pi(ar,e,t,r,s,a),!0;case"dragenter":return cr=Pi(cr,e,t,r,s,a),!0;case"mouseover":return ur=Pi(ur,e,t,r,s,a),!0;case"pointerover":var d=a.pointerId;return Fi.set(d,Pi(Fi.get(d)||null,e,t,r,s,a)),!0;case"gotpointercapture":return d=a.pointerId,Li.set(d,Pi(Li.get(d)||null,e,t,r,s,a)),!0}return!1}function oc(e){var t=Fr(e.target);if(t!==null){var r=Et(t);if(r!==null){if(t=r.tag,t===13){if(t=Fn(r),t!==null){e.blockedOn=t,ic(e.priority,function(){nc(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Cs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Qo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);Xe=s,r.target.dispatchEvent(s),Xe=null}else return t=Qi(r),t!==null&&Yo(t),e.blockedOn=r,!1;t.shift()}return!0}function lc(e,t,r){Cs(e)&&r.delete(t)}function dh(){Xo=!1,ar!==null&&Cs(ar)&&(ar=null),cr!==null&&Cs(cr)&&(cr=null),ur!==null&&Cs(ur)&&(ur=null),Fi.forEach(lc),Li.forEach(lc)}function Mi(e,t){e.blockedOn===t&&(e.blockedOn=null,Xo||(Xo=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,dh)))}function Ri(e){function t(a){return Mi(a,e)}if(0<_s.length){Mi(_s[0],e);for(var r=1;r<_s.length;r++){var s=_s[r];s.blockedOn===e&&(s.blockedOn=null)}}for(ar!==null&&Mi(ar,e),cr!==null&&Mi(cr,e),ur!==null&&Mi(ur,e),Fi.forEach(t),Li.forEach(t),r=0;r<dr.length;r++)s=dr[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<dr.length&&(r=dr[0],r.blockedOn===null);)oc(r),r.blockedOn===null&&dr.shift()}var ni=A.ReactCurrentBatchConfig,Es=!0;function fh(e,t,r,s){var a=Qe,d=ni.transition;ni.transition=null;try{Qe=1,Ko(e,t,r,s)}finally{Qe=a,ni.transition=d}}function hh(e,t,r,s){var a=Qe,d=ni.transition;ni.transition=null;try{Qe=4,Ko(e,t,r,s)}finally{Qe=a,ni.transition=d}}function Ko(e,t,r,s){if(Es){var a=Qo(e,t,r,s);if(a===null)hl(e,t,s,Ds,r),sc(e,s);else if(uh(a,e,t,r,s))s.stopPropagation();else if(sc(e,s),t&4&&-1<ch.indexOf(e)){for(;a!==null;){var d=Qi(a);if(d!==null&&tc(d),d=Qo(e,t,r,s),d===null&&hl(e,t,s,Ds,r),d===a)break;a=d}a!==null&&s.stopPropagation()}else hl(e,t,s,null,r)}}var Ds=null;function Qo(e,t,r,s){if(Ds=null,e=et(s),e=Fr(e),e!==null)if(t=Et(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Fn(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ds=e,null}function ac(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vs()){case bn:return 1;case ti:return 4;case jr:case th:return 16;case qa:return 536870912;default:return 16}default:return 16}}var fr=null,Zo=null,As=null;function cc(){if(As)return As;var e,t=Zo,r=t.length,s,a="value"in fr?fr.value:fr.textContent,d=a.length;for(e=0;e<r&&t[e]===a[e];e++);var g=r-e;for(s=1;s<=g&&t[r-s]===a[d-s];s++);return As=a.slice(e,1<s?1-s:void 0)}function Ns(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ts(){return!0}function uc(){return!1}function cn(e){function t(r,s,a,d,g){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=d,this.target=g,this.currentTarget=null;for(var k in e)e.hasOwnProperty(k)&&(r=e[k],this[k]=r?r(d):d[k]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ts:uc,this.isPropagationStopped=uc,this}return Y(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ts)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ts)},persist:function(){},isPersistent:Ts}),t}var ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qo=cn(ri),Oi=Y({},ri,{view:0,detail:0}),ph=cn(Oi),Jo,el,Ui,Bs=Y({},Oi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ui&&(Ui&&e.type==="mousemove"?(Jo=e.screenX-Ui.screenX,el=e.screenY-Ui.screenY):el=Jo=0,Ui=e),Jo)},movementY:function(e){return"movementY"in e?e.movementY:el}}),dc=cn(Bs),mh=Y({},Bs,{dataTransfer:0}),gh=cn(mh),xh=Y({},Oi,{relatedTarget:0}),tl=cn(xh),yh=Y({},ri,{animationName:0,elapsedTime:0,pseudoElement:0}),vh=cn(yh),wh=Y({},ri,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kh=cn(wh),Sh=Y({},ri,{data:0}),fc=cn(Sh),bh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_h={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ch={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ch[e])?!!t[e]:!1}function nl(){return Eh}var Dh=Y({},Oi,{key:function(e){if(e.key){var t=bh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ns(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_h[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nl,charCode:function(e){return e.type==="keypress"?Ns(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ns(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ah=cn(Dh),Nh=Y({},Bs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hc=cn(Nh),Th=Y({},Oi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nl}),Bh=cn(Th),Ih=Y({},ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),jh=cn(Ih),Fh=Y({},Bs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Lh=cn(Fh),Ph=[9,13,27,32],rl=h&&"CompositionEvent"in window,zi=null;h&&"documentMode"in document&&(zi=document.documentMode);var Mh=h&&"TextEvent"in window&&!zi,pc=h&&(!rl||zi&&8<zi&&11>=zi),mc=" ",gc=!1;function xc(e,t){switch(e){case"keyup":return Ph.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ii=!1;function Rh(e,t){switch(e){case"compositionend":return yc(t);case"keypress":return t.which!==32?null:(gc=!0,mc);case"textInput":return e=t.data,e===mc&&gc?null:e;default:return null}}function Oh(e,t){if(ii)return e==="compositionend"||!rl&&xc(e,t)?(e=cc(),As=Zo=fr=null,ii=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pc&&t.locale!=="ko"?null:t.data;default:return null}}var Uh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Uh[e.type]:t==="textarea"}function wc(e,t,r,s){qe(s),t=Ps(t,"onChange"),0<t.length&&(r=new qo("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Hi=null,Gi=null;function zh(e){Rc(e,0)}function Is(e){var t=ci(e);if(Re(t))return e}function Hh(e,t){if(e==="change")return t}var kc=!1;if(h){var il;if(h){var sl="oninput"in document;if(!sl){var Sc=document.createElement("div");Sc.setAttribute("oninput","return;"),sl=typeof Sc.oninput=="function"}il=sl}else il=!1;kc=il&&(!document.documentMode||9<document.documentMode)}function bc(){Hi&&(Hi.detachEvent("onpropertychange",_c),Gi=Hi=null)}function _c(e){if(e.propertyName==="value"&&Is(Gi)){var t=[];wc(t,Gi,e,et(e)),ln(zh,t)}}function Gh(e,t,r){e==="focusin"?(bc(),Hi=t,Gi=r,Hi.attachEvent("onpropertychange",_c)):e==="focusout"&&bc()}function $h(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Is(Gi)}function Wh(e,t){if(e==="click")return Is(t)}function Vh(e,t){if(e==="input"||e==="change")return Is(t)}function Yh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cn=typeof Object.is=="function"?Object.is:Yh;function $i(e,t){if(Cn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!p.call(t,a)||!Cn(e[a],t[a]))return!1}return!0}function Cc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ec(e,t){var r=Cc(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Cc(r)}}function Dc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Dc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ac(){for(var e=window,t=He();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=He(e.document)}return t}function ol(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Xh(e){var t=Ac(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Dc(r.ownerDocument.documentElement,r)){if(s!==null&&ol(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,d=Math.min(s.start,a);s=s.end===void 0?d:Math.min(s.end,a),!e.extend&&d>s&&(a=s,s=d,d=a),a=Ec(r,d);var g=Ec(r,s);a&&g&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),d>s?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Kh=h&&"documentMode"in document&&11>=document.documentMode,si=null,ll=null,Wi=null,al=!1;function Nc(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;al||si==null||si!==He(s)||(s=si,"selectionStart"in s&&ol(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Wi&&$i(Wi,s)||(Wi=s,s=Ps(ll,"onSelect"),0<s.length&&(t=new qo("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=si)))}function js(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var oi={animationend:js("Animation","AnimationEnd"),animationiteration:js("Animation","AnimationIteration"),animationstart:js("Animation","AnimationStart"),transitionend:js("Transition","TransitionEnd")},cl={},Tc={};h&&(Tc=document.createElement("div").style,"AnimationEvent"in window||(delete oi.animationend.animation,delete oi.animationiteration.animation,delete oi.animationstart.animation),"TransitionEvent"in window||delete oi.transitionend.transition);function Fs(e){if(cl[e])return cl[e];if(!oi[e])return e;var t=oi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Tc)return cl[e]=t[r];return e}var Bc=Fs("animationend"),Ic=Fs("animationiteration"),jc=Fs("animationstart"),Fc=Fs("transitionend"),Lc=new Map,Pc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hr(e,t){Lc.set(e,t),u(t,[e])}for(var ul=0;ul<Pc.length;ul++){var dl=Pc[ul],Qh=dl.toLowerCase(),Zh=dl[0].toUpperCase()+dl.slice(1);hr(Qh,"on"+Zh)}hr(Bc,"onAnimationEnd"),hr(Ic,"onAnimationIteration"),hr(jc,"onAnimationStart"),hr("dblclick","onDoubleClick"),hr("focusin","onFocus"),hr("focusout","onBlur"),hr(Fc,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vi));function Mc(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,ei(s,t,void 0,e),e.currentTarget=null}function Rc(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var d=void 0;if(t)for(var g=s.length-1;0<=g;g--){var k=s[g],E=k.instance,G=k.currentTarget;if(k=k.listener,E!==d&&a.isPropagationStopped())break e;Mc(a,k,G),d=E}else for(g=0;g<s.length;g++){if(k=s[g],E=k.instance,G=k.currentTarget,k=k.listener,E!==d&&a.isPropagationStopped())break e;Mc(a,k,G),d=E}}}if($t)throw e=Kt,$t=!1,Kt=null,e}function nt(e,t){var r=t[vl];r===void 0&&(r=t[vl]=new Set);var s=e+"__bubble";r.has(s)||(Oc(t,e,2,!1),r.add(s))}function fl(e,t,r){var s=0;t&&(s|=4),Oc(r,e,s,t)}var Ls="_reactListening"+Math.random().toString(36).slice(2);function Yi(e){if(!e[Ls]){e[Ls]=!0,l.forEach(function(r){r!=="selectionchange"&&(qh.has(r)||fl(r,!1,e),fl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ls]||(t[Ls]=!0,fl("selectionchange",!1,t))}}function Oc(e,t,r,s){switch(ac(t)){case 1:var a=fh;break;case 4:a=hh;break;default:a=Ko}r=a.bind(null,t,r,e),a=void 0,!Lt||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function hl(e,t,r,s,a){var d=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var g=s.tag;if(g===3||g===4){var k=s.stateNode.containerInfo;if(k===a||k.nodeType===8&&k.parentNode===a)break;if(g===4)for(g=s.return;g!==null;){var E=g.tag;if((E===3||E===4)&&(E=g.stateNode.containerInfo,E===a||E.nodeType===8&&E.parentNode===a))return;g=g.return}for(;k!==null;){if(g=Fr(k),g===null)return;if(E=g.tag,E===5||E===6){s=d=g;continue e}k=k.parentNode}}s=s.return}ln(function(){var G=d,ee=et(r),te=[];e:{var q=Lc.get(e);if(q!==void 0){var pe=qo,ke=e;switch(e){case"keypress":if(Ns(r)===0)break e;case"keydown":case"keyup":pe=Ah;break;case"focusin":ke="focus",pe=tl;break;case"focusout":ke="blur",pe=tl;break;case"beforeblur":case"afterblur":pe=tl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=dc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=gh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=Bh;break;case Bc:case Ic:case jc:pe=vh;break;case Fc:pe=jh;break;case"scroll":pe=ph;break;case"wheel":pe=Lh;break;case"copy":case"cut":case"paste":pe=kh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=hc}var _e=(t&4)!==0,dt=!_e&&e==="scroll",M=_e?q!==null?q+"Capture":null:q;_e=[];for(var T=G,U;T!==null;){U=T;var se=U.stateNode;if(U.tag===5&&se!==null&&(U=se,M!==null&&(se=an(T,M),se!=null&&_e.push(Xi(T,se,U)))),dt)break;T=T.return}0<_e.length&&(q=new pe(q,ke,null,r,ee),te.push({event:q,listeners:_e}))}}if((t&7)===0){e:{if(q=e==="mouseover"||e==="pointerover",pe=e==="mouseout"||e==="pointerout",q&&r!==Xe&&(ke=r.relatedTarget||r.fromElement)&&(Fr(ke)||ke[Wn]))break e;if((pe||q)&&(q=ee.window===ee?ee:(q=ee.ownerDocument)?q.defaultView||q.parentWindow:window,pe?(ke=r.relatedTarget||r.toElement,pe=G,ke=ke?Fr(ke):null,ke!==null&&(dt=Et(ke),ke!==dt||ke.tag!==5&&ke.tag!==6)&&(ke=null)):(pe=null,ke=G),pe!==ke)){if(_e=dc,se="onMouseLeave",M="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(_e=hc,se="onPointerLeave",M="onPointerEnter",T="pointer"),dt=pe==null?q:ci(pe),U=ke==null?q:ci(ke),q=new _e(se,T+"leave",pe,r,ee),q.target=dt,q.relatedTarget=U,se=null,Fr(ee)===G&&(_e=new _e(M,T+"enter",ke,r,ee),_e.target=U,_e.relatedTarget=dt,se=_e),dt=se,pe&&ke)t:{for(_e=pe,M=ke,T=0,U=_e;U;U=li(U))T++;for(U=0,se=M;se;se=li(se))U++;for(;0<T-U;)_e=li(_e),T--;for(;0<U-T;)M=li(M),U--;for(;T--;){if(_e===M||M!==null&&_e===M.alternate)break t;_e=li(_e),M=li(M)}_e=null}else _e=null;pe!==null&&Uc(te,q,pe,_e,!1),ke!==null&&dt!==null&&Uc(te,dt,ke,_e,!0)}}e:{if(q=G?ci(G):window,pe=q.nodeName&&q.nodeName.toLowerCase(),pe==="select"||pe==="input"&&q.type==="file")var De=Hh;else if(vc(q))if(kc)De=Vh;else{De=$h;var Te=Gh}else(pe=q.nodeName)&&pe.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(De=Wh);if(De&&(De=De(e,G))){wc(te,De,r,ee);break e}Te&&Te(e,q,G),e==="focusout"&&(Te=q._wrapperState)&&Te.controlled&&q.type==="number"&&sr(q,"number",q.value)}switch(Te=G?ci(G):window,e){case"focusin":(vc(Te)||Te.contentEditable==="true")&&(si=Te,ll=G,Wi=null);break;case"focusout":Wi=ll=si=null;break;case"mousedown":al=!0;break;case"contextmenu":case"mouseup":case"dragend":al=!1,Nc(te,r,ee);break;case"selectionchange":if(Kh)break;case"keydown":case"keyup":Nc(te,r,ee)}var Be;if(rl)e:{switch(e){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else ii?xc(e,r)&&(Fe="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Fe="onCompositionStart");Fe&&(pc&&r.locale!=="ko"&&(ii||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&ii&&(Be=cc()):(fr=ee,Zo="value"in fr?fr.value:fr.textContent,ii=!0)),Te=Ps(G,Fe),0<Te.length&&(Fe=new fc(Fe,e,null,r,ee),te.push({event:Fe,listeners:Te}),Be?Fe.data=Be:(Be=yc(r),Be!==null&&(Fe.data=Be)))),(Be=Mh?Rh(e,r):Oh(e,r))&&(G=Ps(G,"onBeforeInput"),0<G.length&&(ee=new fc("onBeforeInput","beforeinput",null,r,ee),te.push({event:ee,listeners:G}),ee.data=Be))}Rc(te,t)})}function Xi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ps(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,d=a.stateNode;a.tag===5&&d!==null&&(a=d,d=an(e,r),d!=null&&s.unshift(Xi(e,d,a)),d=an(e,t),d!=null&&s.push(Xi(e,d,a))),e=e.return}return s}function li(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Uc(e,t,r,s,a){for(var d=t._reactName,g=[];r!==null&&r!==s;){var k=r,E=k.alternate,G=k.stateNode;if(E!==null&&E===s)break;k.tag===5&&G!==null&&(k=G,a?(E=an(r,d),E!=null&&g.unshift(Xi(r,E,k))):a||(E=an(r,d),E!=null&&g.push(Xi(r,E,k)))),r=r.return}g.length!==0&&e.push({event:t,listeners:g})}var Jh=/\r\n?/g,ep=/\u0000|\uFFFD/g;function zc(e){return(typeof e=="string"?e:""+e).replace(Jh,`
`).replace(ep,"")}function Ms(e,t,r){if(t=zc(t),zc(e)!==t&&r)throw Error(i(425))}function Rs(){}var pl=null,ml=null;function gl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xl=typeof setTimeout=="function"?setTimeout:void 0,tp=typeof clearTimeout=="function"?clearTimeout:void 0,Hc=typeof Promise=="function"?Promise:void 0,np=typeof queueMicrotask=="function"?queueMicrotask:typeof Hc<"u"?function(e){return Hc.resolve(null).then(e).catch(rp)}:xl;function rp(e){setTimeout(function(){throw e})}function yl(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),Ri(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);Ri(t)}function pr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Gc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ai=Math.random().toString(36).slice(2),Mn="__reactFiber$"+ai,Ki="__reactProps$"+ai,Wn="__reactContainer$"+ai,vl="__reactEvents$"+ai,ip="__reactListeners$"+ai,sp="__reactHandles$"+ai;function Fr(e){var t=e[Mn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Wn]||r[Mn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Gc(e);e!==null;){if(r=e[Mn])return r;e=Gc(e)}return t}e=r,r=e.parentNode}return null}function Qi(e){return e=e[Mn]||e[Wn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ci(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(i(33))}function Os(e){return e[Ki]||null}var wl=[],ui=-1;function mr(e){return{current:e}}function rt(e){0>ui||(e.current=wl[ui],wl[ui]=null,ui--)}function tt(e,t){ui++,wl[ui]=e.current,e.current=t}var gr={},Mt=mr(gr),Qt=mr(!1),Lr=gr;function di(e,t){var r=e.type.contextTypes;if(!r)return gr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},d;for(d in r)a[d]=t[d];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Zt(e){return e=e.childContextTypes,e!=null}function Us(){rt(Qt),rt(Mt)}function $c(e,t,r){if(Mt.current!==gr)throw Error(i(168));tt(Mt,t),tt(Qt,r)}function Wc(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(i(108,ve(e)||"Unknown",a));return Y({},r,s)}function zs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gr,Lr=Mt.current,tt(Mt,e),tt(Qt,Qt.current),!0}function Vc(e,t,r){var s=e.stateNode;if(!s)throw Error(i(169));r?(e=Wc(e,t,Lr),s.__reactInternalMemoizedMergedChildContext=e,rt(Qt),rt(Mt),tt(Mt,e)):rt(Qt),tt(Qt,r)}var Vn=null,Hs=!1,kl=!1;function Yc(e){Vn===null?Vn=[e]:Vn.push(e)}function op(e){Hs=!0,Yc(e)}function xr(){if(!kl&&Vn!==null){kl=!0;var e=0,t=Qe;try{var r=Vn;for(Qe=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Vn=null,Hs=!1}catch(a){throw Vn!==null&&(Vn=Vn.slice(e+1)),Ir(bn,xr),a}finally{Qe=t,kl=!1}}return null}var fi=[],hi=0,Gs=null,$s=0,pn=[],mn=0,Pr=null,Yn=1,Xn="";function Mr(e,t){fi[hi++]=$s,fi[hi++]=Gs,Gs=e,$s=t}function Xc(e,t,r){pn[mn++]=Yn,pn[mn++]=Xn,pn[mn++]=Pr,Pr=e;var s=Yn;e=Xn;var a=32-_n(s)-1;s&=~(1<<a),r+=1;var d=32-_n(t)+a;if(30<d){var g=a-a%5;d=(s&(1<<g)-1).toString(32),s>>=g,a-=g,Yn=1<<32-_n(t)+a|r<<a|s,Xn=d+e}else Yn=1<<d|r<<a|s,Xn=e}function Sl(e){e.return!==null&&(Mr(e,1),Xc(e,1,0))}function bl(e){for(;e===Gs;)Gs=fi[--hi],fi[hi]=null,$s=fi[--hi],fi[hi]=null;for(;e===Pr;)Pr=pn[--mn],pn[mn]=null,Xn=pn[--mn],pn[mn]=null,Yn=pn[--mn],pn[mn]=null}var un=null,dn=null,st=!1,En=null;function Kc(e,t){var r=vn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Qc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,un=e,dn=pr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,un=e,dn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Pr!==null?{id:Yn,overflow:Xn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=vn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,un=e,dn=null,!0):!1;default:return!1}}function _l(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Cl(e){if(st){var t=dn;if(t){var r=t;if(!Qc(e,t)){if(_l(e))throw Error(i(418));t=pr(r.nextSibling);var s=un;t&&Qc(e,t)?Kc(s,r):(e.flags=e.flags&-4097|2,st=!1,un=e)}}else{if(_l(e))throw Error(i(418));e.flags=e.flags&-4097|2,st=!1,un=e}}}function Zc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;un=e}function Ws(e){if(e!==un)return!1;if(!st)return Zc(e),st=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!gl(e.type,e.memoizedProps)),t&&(t=dn)){if(_l(e))throw qc(),Error(i(418));for(;t;)Kc(e,t),t=pr(t.nextSibling)}if(Zc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){dn=pr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}dn=null}}else dn=un?pr(e.stateNode.nextSibling):null;return!0}function qc(){for(var e=dn;e;)e=pr(e.nextSibling)}function pi(){dn=un=null,st=!1}function El(e){En===null?En=[e]:En.push(e)}var lp=A.ReactCurrentBatchConfig;function Zi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(i(309));var s=r.stateNode}if(!s)throw Error(i(147,e));var a=s,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(g){var k=a.refs;g===null?delete k[d]:k[d]=g},t._stringRef=d,t)}if(typeof e!="string")throw Error(i(284));if(!r._owner)throw Error(i(290,e))}return e}function Vs(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Jc(e){var t=e._init;return t(e._payload)}function eu(e){function t(M,T){if(e){var U=M.deletions;U===null?(M.deletions=[T],M.flags|=16):U.push(T)}}function r(M,T){if(!e)return null;for(;T!==null;)t(M,T),T=T.sibling;return null}function s(M,T){for(M=new Map;T!==null;)T.key!==null?M.set(T.key,T):M.set(T.index,T),T=T.sibling;return M}function a(M,T){return M=Cr(M,T),M.index=0,M.sibling=null,M}function d(M,T,U){return M.index=U,e?(U=M.alternate,U!==null?(U=U.index,U<T?(M.flags|=2,T):U):(M.flags|=2,T)):(M.flags|=1048576,T)}function g(M){return e&&M.alternate===null&&(M.flags|=2),M}function k(M,T,U,se){return T===null||T.tag!==6?(T=xa(U,M.mode,se),T.return=M,T):(T=a(T,U),T.return=M,T)}function E(M,T,U,se){var De=U.type;return De===Q?ee(M,T,U.props.children,se,U.key):T!==null&&(T.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===ae&&Jc(De)===T.type)?(se=a(T,U.props),se.ref=Zi(M,T,U),se.return=M,se):(se=xo(U.type,U.key,U.props,null,M.mode,se),se.ref=Zi(M,T,U),se.return=M,se)}function G(M,T,U,se){return T===null||T.tag!==4||T.stateNode.containerInfo!==U.containerInfo||T.stateNode.implementation!==U.implementation?(T=ya(U,M.mode,se),T.return=M,T):(T=a(T,U.children||[]),T.return=M,T)}function ee(M,T,U,se,De){return T===null||T.tag!==7?(T=Wr(U,M.mode,se,De),T.return=M,T):(T=a(T,U),T.return=M,T)}function te(M,T,U){if(typeof T=="string"&&T!==""||typeof T=="number")return T=xa(""+T,M.mode,U),T.return=M,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Z:return U=xo(T.type,T.key,T.props,null,M.mode,U),U.ref=Zi(M,null,T),U.return=M,U;case P:return T=ya(T,M.mode,U),T.return=M,T;case ae:var se=T._init;return te(M,se(T._payload),U)}if(Nt(T)||ie(T))return T=Wr(T,M.mode,U,null),T.return=M,T;Vs(M,T)}return null}function q(M,T,U,se){var De=T!==null?T.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return De!==null?null:k(M,T,""+U,se);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Z:return U.key===De?E(M,T,U,se):null;case P:return U.key===De?G(M,T,U,se):null;case ae:return De=U._init,q(M,T,De(U._payload),se)}if(Nt(U)||ie(U))return De!==null?null:ee(M,T,U,se,null);Vs(M,U)}return null}function pe(M,T,U,se,De){if(typeof se=="string"&&se!==""||typeof se=="number")return M=M.get(U)||null,k(T,M,""+se,De);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case Z:return M=M.get(se.key===null?U:se.key)||null,E(T,M,se,De);case P:return M=M.get(se.key===null?U:se.key)||null,G(T,M,se,De);case ae:var Te=se._init;return pe(M,T,U,Te(se._payload),De)}if(Nt(se)||ie(se))return M=M.get(U)||null,ee(T,M,se,De,null);Vs(T,se)}return null}function ke(M,T,U,se){for(var De=null,Te=null,Be=T,Fe=T=0,bt=null;Be!==null&&Fe<U.length;Fe++){Be.index>Fe?(bt=Be,Be=null):bt=Be.sibling;var Ye=q(M,Be,U[Fe],se);if(Ye===null){Be===null&&(Be=bt);break}e&&Be&&Ye.alternate===null&&t(M,Be),T=d(Ye,T,Fe),Te===null?De=Ye:Te.sibling=Ye,Te=Ye,Be=bt}if(Fe===U.length)return r(M,Be),st&&Mr(M,Fe),De;if(Be===null){for(;Fe<U.length;Fe++)Be=te(M,U[Fe],se),Be!==null&&(T=d(Be,T,Fe),Te===null?De=Be:Te.sibling=Be,Te=Be);return st&&Mr(M,Fe),De}for(Be=s(M,Be);Fe<U.length;Fe++)bt=pe(Be,M,Fe,U[Fe],se),bt!==null&&(e&&bt.alternate!==null&&Be.delete(bt.key===null?Fe:bt.key),T=d(bt,T,Fe),Te===null?De=bt:Te.sibling=bt,Te=bt);return e&&Be.forEach(function(Er){return t(M,Er)}),st&&Mr(M,Fe),De}function _e(M,T,U,se){var De=ie(U);if(typeof De!="function")throw Error(i(150));if(U=De.call(U),U==null)throw Error(i(151));for(var Te=De=null,Be=T,Fe=T=0,bt=null,Ye=U.next();Be!==null&&!Ye.done;Fe++,Ye=U.next()){Be.index>Fe?(bt=Be,Be=null):bt=Be.sibling;var Er=q(M,Be,Ye.value,se);if(Er===null){Be===null&&(Be=bt);break}e&&Be&&Er.alternate===null&&t(M,Be),T=d(Er,T,Fe),Te===null?De=Er:Te.sibling=Er,Te=Er,Be=bt}if(Ye.done)return r(M,Be),st&&Mr(M,Fe),De;if(Be===null){for(;!Ye.done;Fe++,Ye=U.next())Ye=te(M,Ye.value,se),Ye!==null&&(T=d(Ye,T,Fe),Te===null?De=Ye:Te.sibling=Ye,Te=Ye);return st&&Mr(M,Fe),De}for(Be=s(M,Be);!Ye.done;Fe++,Ye=U.next())Ye=pe(Be,M,Fe,Ye.value,se),Ye!==null&&(e&&Ye.alternate!==null&&Be.delete(Ye.key===null?Fe:Ye.key),T=d(Ye,T,Fe),Te===null?De=Ye:Te.sibling=Ye,Te=Ye);return e&&Be.forEach(function(Up){return t(M,Up)}),st&&Mr(M,Fe),De}function dt(M,T,U,se){if(typeof U=="object"&&U!==null&&U.type===Q&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case Z:e:{for(var De=U.key,Te=T;Te!==null;){if(Te.key===De){if(De=U.type,De===Q){if(Te.tag===7){r(M,Te.sibling),T=a(Te,U.props.children),T.return=M,M=T;break e}}else if(Te.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===ae&&Jc(De)===Te.type){r(M,Te.sibling),T=a(Te,U.props),T.ref=Zi(M,Te,U),T.return=M,M=T;break e}r(M,Te);break}else t(M,Te);Te=Te.sibling}U.type===Q?(T=Wr(U.props.children,M.mode,se,U.key),T.return=M,M=T):(se=xo(U.type,U.key,U.props,null,M.mode,se),se.ref=Zi(M,T,U),se.return=M,M=se)}return g(M);case P:e:{for(Te=U.key;T!==null;){if(T.key===Te)if(T.tag===4&&T.stateNode.containerInfo===U.containerInfo&&T.stateNode.implementation===U.implementation){r(M,T.sibling),T=a(T,U.children||[]),T.return=M,M=T;break e}else{r(M,T);break}else t(M,T);T=T.sibling}T=ya(U,M.mode,se),T.return=M,M=T}return g(M);case ae:return Te=U._init,dt(M,T,Te(U._payload),se)}if(Nt(U))return ke(M,T,U,se);if(ie(U))return _e(M,T,U,se);Vs(M,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,T!==null&&T.tag===6?(r(M,T.sibling),T=a(T,U),T.return=M,M=T):(r(M,T),T=xa(U,M.mode,se),T.return=M,M=T),g(M)):r(M,T)}return dt}var mi=eu(!0),tu=eu(!1),Ys=mr(null),Xs=null,gi=null,Dl=null;function Al(){Dl=gi=Xs=null}function Nl(e){var t=Ys.current;rt(Ys),e._currentValue=t}function Tl(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function xi(e,t){Xs=e,Dl=gi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(qt=!0),e.firstContext=null)}function gn(e){var t=e._currentValue;if(Dl!==e)if(e={context:e,memoizedValue:t,next:null},gi===null){if(Xs===null)throw Error(i(308));gi=e,Xs.dependencies={lanes:0,firstContext:e}}else gi=gi.next=e;return t}var Rr=null;function Bl(e){Rr===null?Rr=[e]:Rr.push(e)}function nu(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,Bl(t)):(r.next=a.next,a.next=r),t.interleaved=r,Kn(e,s)}function Kn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var yr=!1;function Il(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ru(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Qn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vr(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Ve&2)!==0){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Kn(e,r)}return a=s.interleaved,a===null?(t.next=t,Bl(s)):(t.next=a.next,a.next=t),s.interleaved=t,Kn(e,r)}function Ks(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Vo(e,r)}}function iu(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var g={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};d===null?a=d=g:d=d.next=g,r=r.next}while(r!==null);d===null?a=d=t:d=d.next=t}else a=d=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:d,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Qs(e,t,r,s){var a=e.updateQueue;yr=!1;var d=a.firstBaseUpdate,g=a.lastBaseUpdate,k=a.shared.pending;if(k!==null){a.shared.pending=null;var E=k,G=E.next;E.next=null,g===null?d=G:g.next=G,g=E;var ee=e.alternate;ee!==null&&(ee=ee.updateQueue,k=ee.lastBaseUpdate,k!==g&&(k===null?ee.firstBaseUpdate=G:k.next=G,ee.lastBaseUpdate=E))}if(d!==null){var te=a.baseState;g=0,ee=G=E=null,k=d;do{var q=k.lane,pe=k.eventTime;if((s&q)===q){ee!==null&&(ee=ee.next={eventTime:pe,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var ke=e,_e=k;switch(q=t,pe=r,_e.tag){case 1:if(ke=_e.payload,typeof ke=="function"){te=ke.call(pe,te,q);break e}te=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=_e.payload,q=typeof ke=="function"?ke.call(pe,te,q):ke,q==null)break e;te=Y({},te,q);break e;case 2:yr=!0}}k.callback!==null&&k.lane!==0&&(e.flags|=64,q=a.effects,q===null?a.effects=[k]:q.push(k))}else pe={eventTime:pe,lane:q,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ee===null?(G=ee=pe,E=te):ee=ee.next=pe,g|=q;if(k=k.next,k===null){if(k=a.shared.pending,k===null)break;q=k,k=q.next,q.next=null,a.lastBaseUpdate=q,a.shared.pending=null}}while(!0);if(ee===null&&(E=te),a.baseState=E,a.firstBaseUpdate=G,a.lastBaseUpdate=ee,t=a.shared.interleaved,t!==null){a=t;do g|=a.lane,a=a.next;while(a!==t)}else d===null&&(a.shared.lanes=0);zr|=g,e.lanes=g,e.memoizedState=te}}function su(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(i(191,a));a.call(s)}}}var qi={},Rn=mr(qi),Ji=mr(qi),es=mr(qi);function Or(e){if(e===qi)throw Error(i(174));return e}function jl(e,t){switch(tt(es,t),tt(Ji,e),tt(Rn,qi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:sn(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=sn(t,e)}rt(Rn),tt(Rn,t)}function yi(){rt(Rn),rt(Ji),rt(es)}function ou(e){Or(es.current);var t=Or(Rn.current),r=sn(t,e.type);t!==r&&(tt(Ji,e),tt(Rn,r))}function Fl(e){Ji.current===e&&(rt(Rn),rt(Ji))}var ot=mr(0);function Zs(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ll=[];function Pl(){for(var e=0;e<Ll.length;e++)Ll[e]._workInProgressVersionPrimary=null;Ll.length=0}var qs=A.ReactCurrentDispatcher,Ml=A.ReactCurrentBatchConfig,Ur=0,lt=null,yt=null,kt=null,Js=!1,ts=!1,ns=0,ap=0;function Rt(){throw Error(i(321))}function Rl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Cn(e[r],t[r]))return!1;return!0}function Ol(e,t,r,s,a,d){if(Ur=d,lt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qs.current=e===null||e.memoizedState===null?fp:hp,e=r(s,a),ts){d=0;do{if(ts=!1,ns=0,25<=d)throw Error(i(301));d+=1,kt=yt=null,t.updateQueue=null,qs.current=pp,e=r(s,a)}while(ts)}if(qs.current=no,t=yt!==null&&yt.next!==null,Ur=0,kt=yt=lt=null,Js=!1,t)throw Error(i(300));return e}function Ul(){var e=ns!==0;return ns=0,e}function On(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?lt.memoizedState=kt=e:kt=kt.next=e,kt}function xn(){if(yt===null){var e=lt.alternate;e=e!==null?e.memoizedState:null}else e=yt.next;var t=kt===null?lt.memoizedState:kt.next;if(t!==null)kt=t,yt=e;else{if(e===null)throw Error(i(310));yt=e,e={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},kt===null?lt.memoizedState=kt=e:kt=kt.next=e}return kt}function rs(e,t){return typeof t=="function"?t(e):t}function zl(e){var t=xn(),r=t.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=e;var s=yt,a=s.baseQueue,d=r.pending;if(d!==null){if(a!==null){var g=a.next;a.next=d.next,d.next=g}s.baseQueue=a=d,r.pending=null}if(a!==null){d=a.next,s=s.baseState;var k=g=null,E=null,G=d;do{var ee=G.lane;if((Ur&ee)===ee)E!==null&&(E=E.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),s=G.hasEagerState?G.eagerState:e(s,G.action);else{var te={lane:ee,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};E===null?(k=E=te,g=s):E=E.next=te,lt.lanes|=ee,zr|=ee}G=G.next}while(G!==null&&G!==d);E===null?g=s:E.next=k,Cn(s,t.memoizedState)||(qt=!0),t.memoizedState=s,t.baseState=g,t.baseQueue=E,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do d=a.lane,lt.lanes|=d,zr|=d,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Hl(e){var t=xn(),r=t.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,d=t.memoizedState;if(a!==null){r.pending=null;var g=a=a.next;do d=e(d,g.action),g=g.next;while(g!==a);Cn(d,t.memoizedState)||(qt=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),r.lastRenderedState=d}return[d,s]}function lu(){}function au(e,t){var r=lt,s=xn(),a=t(),d=!Cn(s.memoizedState,a);if(d&&(s.memoizedState=a,qt=!0),s=s.queue,Gl(du.bind(null,r,s,e),[e]),s.getSnapshot!==t||d||kt!==null&&kt.memoizedState.tag&1){if(r.flags|=2048,is(9,uu.bind(null,r,s,a,t),void 0,null),St===null)throw Error(i(349));(Ur&30)!==0||cu(r,t,a)}return a}function cu(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=lt.updateQueue,t===null?(t={lastEffect:null,stores:null},lt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function uu(e,t,r,s){t.value=r,t.getSnapshot=s,fu(t)&&hu(e)}function du(e,t,r){return r(function(){fu(t)&&hu(e)})}function fu(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Cn(e,r)}catch{return!0}}function hu(e){var t=Kn(e,1);t!==null&&Tn(t,e,1,-1)}function pu(e){var t=On();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rs,lastRenderedState:e},t.queue=e,e=e.dispatch=dp.bind(null,lt,e),[t.memoizedState,e]}function is(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=lt.updateQueue,t===null?(t={lastEffect:null,stores:null},lt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function mu(){return xn().memoizedState}function eo(e,t,r,s){var a=On();lt.flags|=e,a.memoizedState=is(1|t,r,void 0,s===void 0?null:s)}function to(e,t,r,s){var a=xn();s=s===void 0?null:s;var d=void 0;if(yt!==null){var g=yt.memoizedState;if(d=g.destroy,s!==null&&Rl(s,g.deps)){a.memoizedState=is(t,r,d,s);return}}lt.flags|=e,a.memoizedState=is(1|t,r,d,s)}function gu(e,t){return eo(8390656,8,e,t)}function Gl(e,t){return to(2048,8,e,t)}function xu(e,t){return to(4,2,e,t)}function yu(e,t){return to(4,4,e,t)}function vu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wu(e,t,r){return r=r!=null?r.concat([e]):null,to(4,4,vu.bind(null,t,e),r)}function $l(){}function ku(e,t){var r=xn();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Rl(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Su(e,t){var r=xn();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Rl(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function bu(e,t,r){return(Ur&21)===0?(e.baseState&&(e.baseState=!1,qt=!0),e.memoizedState=r):(Cn(r,t)||(r=Ja(),lt.lanes|=r,zr|=r,e.baseState=!0),t)}function cp(e,t){var r=Qe;Qe=r!==0&&4>r?r:4,e(!0);var s=Ml.transition;Ml.transition={};try{e(!1),t()}finally{Qe=r,Ml.transition=s}}function _u(){return xn().memoizedState}function up(e,t,r){var s=br(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Cu(e))Eu(t,r);else if(r=nu(e,t,r,s),r!==null){var a=Vt();Tn(r,e,s,a),Du(r,t,s)}}function dp(e,t,r){var s=br(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Cu(e))Eu(t,a);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var g=t.lastRenderedState,k=d(g,r);if(a.hasEagerState=!0,a.eagerState=k,Cn(k,g)){var E=t.interleaved;E===null?(a.next=a,Bl(t)):(a.next=E.next,E.next=a),t.interleaved=a;return}}catch{}finally{}r=nu(e,t,a,s),r!==null&&(a=Vt(),Tn(r,e,s,a),Du(r,t,s))}}function Cu(e){var t=e.alternate;return e===lt||t!==null&&t===lt}function Eu(e,t){ts=Js=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Du(e,t,r){if((r&4194240)!==0){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Vo(e,r)}}var no={readContext:gn,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},fp={readContext:gn,useCallback:function(e,t){return On().memoizedState=[e,t===void 0?null:t],e},useContext:gn,useEffect:gu,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,eo(4194308,4,vu.bind(null,t,e),r)},useLayoutEffect:function(e,t){return eo(4194308,4,e,t)},useInsertionEffect:function(e,t){return eo(4,2,e,t)},useMemo:function(e,t){var r=On();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=On();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=up.bind(null,lt,e),[s.memoizedState,e]},useRef:function(e){var t=On();return e={current:e},t.memoizedState=e},useState:pu,useDebugValue:$l,useDeferredValue:function(e){return On().memoizedState=e},useTransition:function(){var e=pu(!1),t=e[0];return e=cp.bind(null,e[1]),On().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=lt,a=On();if(st){if(r===void 0)throw Error(i(407));r=r()}else{if(r=t(),St===null)throw Error(i(349));(Ur&30)!==0||cu(s,t,r)}a.memoizedState=r;var d={value:r,getSnapshot:t};return a.queue=d,gu(du.bind(null,s,d,e),[e]),s.flags|=2048,is(9,uu.bind(null,s,d,r,t),void 0,null),r},useId:function(){var e=On(),t=St.identifierPrefix;if(st){var r=Xn,s=Yn;r=(s&~(1<<32-_n(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=ns++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ap++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},hp={readContext:gn,useCallback:ku,useContext:gn,useEffect:Gl,useImperativeHandle:wu,useInsertionEffect:xu,useLayoutEffect:yu,useMemo:Su,useReducer:zl,useRef:mu,useState:function(){return zl(rs)},useDebugValue:$l,useDeferredValue:function(e){var t=xn();return bu(t,yt.memoizedState,e)},useTransition:function(){var e=zl(rs)[0],t=xn().memoizedState;return[e,t]},useMutableSource:lu,useSyncExternalStore:au,useId:_u,unstable_isNewReconciler:!1},pp={readContext:gn,useCallback:ku,useContext:gn,useEffect:Gl,useImperativeHandle:wu,useInsertionEffect:xu,useLayoutEffect:yu,useMemo:Su,useReducer:Hl,useRef:mu,useState:function(){return Hl(rs)},useDebugValue:$l,useDeferredValue:function(e){var t=xn();return yt===null?t.memoizedState=e:bu(t,yt.memoizedState,e)},useTransition:function(){var e=Hl(rs)[0],t=xn().memoizedState;return[e,t]},useMutableSource:lu,useSyncExternalStore:au,useId:_u,unstable_isNewReconciler:!1};function Dn(e,t){if(e&&e.defaultProps){t=Y({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Wl(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Y({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ro={isMounted:function(e){return(e=e._reactInternals)?Et(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Vt(),a=br(e),d=Qn(s,a);d.payload=t,r!=null&&(d.callback=r),t=vr(e,d,a),t!==null&&(Tn(t,e,a,s),Ks(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Vt(),a=br(e),d=Qn(s,a);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=vr(e,d,a),t!==null&&(Tn(t,e,a,s),Ks(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Vt(),s=br(e),a=Qn(r,s);a.tag=2,t!=null&&(a.callback=t),t=vr(e,a,s),t!==null&&(Tn(t,e,s,r),Ks(t,e,s))}};function Au(e,t,r,s,a,d,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,d,g):t.prototype&&t.prototype.isPureReactComponent?!$i(r,s)||!$i(a,d):!0}function Nu(e,t,r){var s=!1,a=gr,d=t.contextType;return typeof d=="object"&&d!==null?d=gn(d):(a=Zt(t)?Lr:Mt.current,s=t.contextTypes,d=(s=s!=null)?di(e,a):gr),t=new t(r,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=d),t}function Tu(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function Vl(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Il(e);var d=t.contextType;typeof d=="object"&&d!==null?a.context=gn(d):(d=Zt(t)?Lr:Mt.current,a.context=di(e,d)),a.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(Wl(e,t,d,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&ro.enqueueReplaceState(a,a.state,null),Qs(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function vi(e,t){try{var r="",s=t;do r+=xe(s),s=s.return;while(s);var a=r}catch(d){a=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:a,digest:null}}function Yl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Xl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var mp=typeof WeakMap=="function"?WeakMap:Map;function Bu(e,t,r){r=Qn(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){uo||(uo=!0,ca=s),Xl(e,t)},r}function Iu(e,t,r){r=Qn(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){Xl(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(r.callback=function(){Xl(e,t),typeof s!="function"&&(kr===null?kr=new Set([this]):kr.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),r}function ju(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new mp;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=Np.bind(null,e,t,r),t.then(e,e))}function Fu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Lu(e,t,r,s,a){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Qn(-1,1),t.tag=2,vr(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var gp=A.ReactCurrentOwner,qt=!1;function Wt(e,t,r,s){t.child=e===null?tu(t,null,r,s):mi(t,e.child,r,s)}function Pu(e,t,r,s,a){r=r.render;var d=t.ref;return xi(t,a),s=Ol(e,t,r,s,d,a),r=Ul(),e!==null&&!qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Zn(e,t,a)):(st&&r&&Sl(t),t.flags|=1,Wt(e,t,s,a),t.child)}function Mu(e,t,r,s,a){if(e===null){var d=r.type;return typeof d=="function"&&!ga(d)&&d.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=d,Ru(e,t,d,s,a)):(e=xo(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,(e.lanes&a)===0){var g=d.memoizedProps;if(r=r.compare,r=r!==null?r:$i,r(g,s)&&e.ref===t.ref)return Zn(e,t,a)}return t.flags|=1,e=Cr(d,s),e.ref=t.ref,e.return=t,t.child=e}function Ru(e,t,r,s,a){if(e!==null){var d=e.memoizedProps;if($i(d,s)&&e.ref===t.ref)if(qt=!1,t.pendingProps=s=d,(e.lanes&a)!==0)(e.flags&131072)!==0&&(qt=!0);else return t.lanes=e.lanes,Zn(e,t,a)}return Kl(e,t,r,s,a)}function Ou(e,t,r){var s=t.pendingProps,a=s.children,d=e!==null?e.memoizedState:null;if(s.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(ki,fn),fn|=r;else{if((r&1073741824)===0)return e=d!==null?d.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,tt(ki,fn),fn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=d!==null?d.baseLanes:r,tt(ki,fn),fn|=s}else d!==null?(s=d.baseLanes|r,t.memoizedState=null):s=r,tt(ki,fn),fn|=s;return Wt(e,t,a,r),t.child}function Uu(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Kl(e,t,r,s,a){var d=Zt(r)?Lr:Mt.current;return d=di(t,d),xi(t,a),r=Ol(e,t,r,s,d,a),s=Ul(),e!==null&&!qt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Zn(e,t,a)):(st&&s&&Sl(t),t.flags|=1,Wt(e,t,r,a),t.child)}function zu(e,t,r,s,a){if(Zt(r)){var d=!0;zs(t)}else d=!1;if(xi(t,a),t.stateNode===null)so(e,t),Nu(t,r,s),Vl(t,r,s,a),s=!0;else if(e===null){var g=t.stateNode,k=t.memoizedProps;g.props=k;var E=g.context,G=r.contextType;typeof G=="object"&&G!==null?G=gn(G):(G=Zt(r)?Lr:Mt.current,G=di(t,G));var ee=r.getDerivedStateFromProps,te=typeof ee=="function"||typeof g.getSnapshotBeforeUpdate=="function";te||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(k!==s||E!==G)&&Tu(t,g,s,G),yr=!1;var q=t.memoizedState;g.state=q,Qs(t,s,g,a),E=t.memoizedState,k!==s||q!==E||Qt.current||yr?(typeof ee=="function"&&(Wl(t,r,ee,s),E=t.memoizedState),(k=yr||Au(t,r,k,s,q,E,G))?(te||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=E),g.props=s,g.state=E,g.context=G,s=k):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{g=t.stateNode,ru(e,t),k=t.memoizedProps,G=t.type===t.elementType?k:Dn(t.type,k),g.props=G,te=t.pendingProps,q=g.context,E=r.contextType,typeof E=="object"&&E!==null?E=gn(E):(E=Zt(r)?Lr:Mt.current,E=di(t,E));var pe=r.getDerivedStateFromProps;(ee=typeof pe=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(k!==te||q!==E)&&Tu(t,g,s,E),yr=!1,q=t.memoizedState,g.state=q,Qs(t,s,g,a);var ke=t.memoizedState;k!==te||q!==ke||Qt.current||yr?(typeof pe=="function"&&(Wl(t,r,pe,s),ke=t.memoizedState),(G=yr||Au(t,r,G,s,q,ke,E)||!1)?(ee||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(s,ke,E),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(s,ke,E)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||k===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||k===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=ke),g.props=s,g.state=ke,g.context=E,s=G):(typeof g.componentDidUpdate!="function"||k===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||k===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),s=!1)}return Ql(e,t,r,s,d,a)}function Ql(e,t,r,s,a,d){Uu(e,t);var g=(t.flags&128)!==0;if(!s&&!g)return a&&Vc(t,r,!1),Zn(e,t,d);s=t.stateNode,gp.current=t;var k=g&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&g?(t.child=mi(t,e.child,null,d),t.child=mi(t,null,k,d)):Wt(e,t,k,d),t.memoizedState=s.state,a&&Vc(t,r,!0),t.child}function Hu(e){var t=e.stateNode;t.pendingContext?$c(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$c(e,t.context,!1),jl(e,t.containerInfo)}function Gu(e,t,r,s,a){return pi(),El(a),t.flags|=256,Wt(e,t,r,s),t.child}var Zl={dehydrated:null,treeContext:null,retryLane:0};function ql(e){return{baseLanes:e,cachePool:null,transitions:null}}function $u(e,t,r){var s=t.pendingProps,a=ot.current,d=!1,g=(t.flags&128)!==0,k;if((k=g)||(k=e!==null&&e.memoizedState===null?!1:(a&2)!==0),k?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),tt(ot,a&1),e===null)return Cl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(g=s.children,e=s.fallback,d?(s=t.mode,d=t.child,g={mode:"hidden",children:g},(s&1)===0&&d!==null?(d.childLanes=0,d.pendingProps=g):d=yo(g,s,0,null),e=Wr(e,s,r,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=ql(r),t.memoizedState=Zl,e):Jl(t,g));if(a=e.memoizedState,a!==null&&(k=a.dehydrated,k!==null))return xp(e,t,g,s,k,a,r);if(d){d=s.fallback,g=t.mode,a=e.child,k=a.sibling;var E={mode:"hidden",children:s.children};return(g&1)===0&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=E,t.deletions=null):(s=Cr(a,E),s.subtreeFlags=a.subtreeFlags&14680064),k!==null?d=Cr(k,d):(d=Wr(d,g,r,null),d.flags|=2),d.return=t,s.return=t,s.sibling=d,t.child=s,s=d,d=t.child,g=e.child.memoizedState,g=g===null?ql(r):{baseLanes:g.baseLanes|r,cachePool:null,transitions:g.transitions},d.memoizedState=g,d.childLanes=e.childLanes&~r,t.memoizedState=Zl,s}return d=e.child,e=d.sibling,s=Cr(d,{mode:"visible",children:s.children}),(t.mode&1)===0&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Jl(e,t){return t=yo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function io(e,t,r,s){return s!==null&&El(s),mi(t,e.child,null,r),e=Jl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xp(e,t,r,s,a,d,g){if(r)return t.flags&256?(t.flags&=-257,s=Yl(Error(i(422))),io(e,t,g,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=s.fallback,a=t.mode,s=yo({mode:"visible",children:s.children},a,0,null),d=Wr(d,a,g,null),d.flags|=2,s.return=t,d.return=t,s.sibling=d,t.child=s,(t.mode&1)!==0&&mi(t,e.child,null,g),t.child.memoizedState=ql(g),t.memoizedState=Zl,d);if((t.mode&1)===0)return io(e,t,g,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var k=s.dgst;return s=k,d=Error(i(419)),s=Yl(d,s,void 0),io(e,t,g,s)}if(k=(g&e.childLanes)!==0,qt||k){if(s=St,s!==null){switch(g&-g){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=(a&(s.suspendedLanes|g))!==0?0:a,a!==0&&a!==d.retryLane&&(d.retryLane=a,Kn(e,a),Tn(s,e,a,-1))}return ma(),s=Yl(Error(i(421))),io(e,t,g,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Tp.bind(null,e),a._reactRetry=t,null):(e=d.treeContext,dn=pr(a.nextSibling),un=t,st=!0,En=null,e!==null&&(pn[mn++]=Yn,pn[mn++]=Xn,pn[mn++]=Pr,Yn=e.id,Xn=e.overflow,Pr=t),t=Jl(t,s.children),t.flags|=4096,t)}function Wu(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Tl(e.return,t,r)}function ea(e,t,r,s,a){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=s,d.tail=r,d.tailMode=a)}function Vu(e,t,r){var s=t.pendingProps,a=s.revealOrder,d=s.tail;if(Wt(e,t,s.children,r),s=ot.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Wu(e,r,t);else if(e.tag===19)Wu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(tt(ot,s),(t.mode&1)===0)t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Zs(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),ea(t,!1,a,r,d);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Zs(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}ea(t,!0,r,null,d);break;case"together":ea(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function so(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),zr|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,r=Cr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Cr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function yp(e,t,r){switch(t.tag){case 3:Hu(t),pi();break;case 5:ou(t);break;case 1:Zt(t.type)&&zs(t);break;case 4:jl(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;tt(Ys,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(tt(ot,ot.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?$u(e,t,r):(tt(ot,ot.current&1),e=Zn(e,t,r),e!==null?e.sibling:null);tt(ot,ot.current&1);break;case 19:if(s=(r&t.childLanes)!==0,(e.flags&128)!==0){if(s)return Vu(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),tt(ot,ot.current),s)break;return null;case 22:case 23:return t.lanes=0,Ou(e,t,r)}return Zn(e,t,r)}var Yu,ta,Xu,Ku;Yu=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},ta=function(){},Xu=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,Or(Rn.current);var d=null;switch(r){case"input":a=mt(e,a),s=mt(e,s),d=[];break;case"select":a=Y({},a,{value:void 0}),s=Y({},s,{value:void 0}),d=[];break;case"textarea":a=rn(e,a),s=rn(e,s),d=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Rs)}Ze(r,s);var g;r=null;for(G in a)if(!s.hasOwnProperty(G)&&a.hasOwnProperty(G)&&a[G]!=null)if(G==="style"){var k=a[G];for(g in k)k.hasOwnProperty(g)&&(r||(r={}),r[g]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(c.hasOwnProperty(G)?d||(d=[]):(d=d||[]).push(G,null));for(G in s){var E=s[G];if(k=a!=null?a[G]:void 0,s.hasOwnProperty(G)&&E!==k&&(E!=null||k!=null))if(G==="style")if(k){for(g in k)!k.hasOwnProperty(g)||E&&E.hasOwnProperty(g)||(r||(r={}),r[g]="");for(g in E)E.hasOwnProperty(g)&&k[g]!==E[g]&&(r||(r={}),r[g]=E[g])}else r||(d||(d=[]),d.push(G,r)),r=E;else G==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,k=k?k.__html:void 0,E!=null&&k!==E&&(d=d||[]).push(G,E)):G==="children"?typeof E!="string"&&typeof E!="number"||(d=d||[]).push(G,""+E):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(c.hasOwnProperty(G)?(E!=null&&G==="onScroll"&&nt("scroll",e),d||k===E||(d=[])):(d=d||[]).push(G,E))}r&&(d=d||[]).push("style",r);var G=d;(t.updateQueue=G)&&(t.flags|=4)}},Ku=function(e,t,r,s){r!==s&&(t.flags|=4)};function ss(e,t){if(!st)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Ot(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function vp(e,t,r){var s=t.pendingProps;switch(bl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(t),null;case 1:return Zt(t.type)&&Us(),Ot(t),null;case 3:return s=t.stateNode,yi(),rt(Qt),rt(Mt),Pl(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ws(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,En!==null&&(fa(En),En=null))),ta(e,t),Ot(t),null;case 5:Fl(t);var a=Or(es.current);if(r=t.type,e!==null&&t.stateNode!=null)Xu(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(i(166));return Ot(t),null}if(e=Or(Rn.current),Ws(t)){s=t.stateNode,r=t.type;var d=t.memoizedProps;switch(s[Mn]=t,s[Ki]=d,e=(t.mode&1)!==0,r){case"dialog":nt("cancel",s),nt("close",s);break;case"iframe":case"object":case"embed":nt("load",s);break;case"video":case"audio":for(a=0;a<Vi.length;a++)nt(Vi[a],s);break;case"source":nt("error",s);break;case"img":case"image":case"link":nt("error",s),nt("load",s);break;case"details":nt("toggle",s);break;case"input":B(s,d),nt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!d.multiple},nt("invalid",s);break;case"textarea":wt(s,d),nt("invalid",s)}Ze(r,d),a=null;for(var g in d)if(d.hasOwnProperty(g)){var k=d[g];g==="children"?typeof k=="string"?s.textContent!==k&&(d.suppressHydrationWarning!==!0&&Ms(s.textContent,k,e),a=["children",k]):typeof k=="number"&&s.textContent!==""+k&&(d.suppressHydrationWarning!==!0&&Ms(s.textContent,k,e),a=["children",""+k]):c.hasOwnProperty(g)&&k!=null&&g==="onScroll"&&nt("scroll",s)}switch(r){case"input":Ne(s),Nr(s,d,!0);break;case"textarea":Ne(s),Xt(s);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(s.onclick=Rs)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{g=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Gt(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=g.createElement(r,{is:s.is}):(e=g.createElement(r),r==="select"&&(g=e,s.multiple?g.multiple=!0:s.size&&(g.size=s.size))):e=g.createElementNS(e,r),e[Mn]=t,e[Ki]=s,Yu(e,t,!1,!1),t.stateNode=e;e:{switch(g=$e(r,s),r){case"dialog":nt("cancel",e),nt("close",e),a=s;break;case"iframe":case"object":case"embed":nt("load",e),a=s;break;case"video":case"audio":for(a=0;a<Vi.length;a++)nt(Vi[a],e);a=s;break;case"source":nt("error",e),a=s;break;case"img":case"image":case"link":nt("error",e),nt("load",e),a=s;break;case"details":nt("toggle",e),a=s;break;case"input":B(e,s),a=mt(e,s),nt("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Y({},s,{value:void 0}),nt("invalid",e);break;case"textarea":wt(e,s),a=rn(e,s),nt("invalid",e);break;default:a=s}Ze(r,a),k=a;for(d in k)if(k.hasOwnProperty(d)){var E=k[d];d==="style"?je(e,E):d==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&or(e,E)):d==="children"?typeof E=="string"?(r!=="textarea"||E!=="")&&on(e,E):typeof E=="number"&&on(e,""+E):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(c.hasOwnProperty(d)?E!=null&&d==="onScroll"&&nt("scroll",e):E!=null&&L(e,d,E,g))}switch(r){case"input":Ne(e),Nr(e,s,!1);break;case"textarea":Ne(e),Xt(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Ie(s.value));break;case"select":e.multiple=!!s.multiple,d=s.value,d!=null?gt(e,!!s.multiple,d,!1):s.defaultValue!=null&&gt(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Rs)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ot(t),null;case 6:if(e&&t.stateNode!=null)Ku(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(i(166));if(r=Or(es.current),Or(Rn.current),Ws(t)){if(s=t.stateNode,r=t.memoizedProps,s[Mn]=t,(d=s.nodeValue!==r)&&(e=un,e!==null))switch(e.tag){case 3:Ms(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ms(s.nodeValue,r,(e.mode&1)!==0)}d&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Mn]=t,t.stateNode=s}return Ot(t),null;case 13:if(rt(ot),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(st&&dn!==null&&(t.mode&1)!==0&&(t.flags&128)===0)qc(),pi(),t.flags|=98560,d=!1;else if(d=Ws(t),s!==null&&s.dehydrated!==null){if(e===null){if(!d)throw Error(i(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[Mn]=t}else pi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ot(t),d=!1}else En!==null&&(fa(En),En=null),d=!0;if(!d)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(ot.current&1)!==0?vt===0&&(vt=3):ma())),t.updateQueue!==null&&(t.flags|=4),Ot(t),null);case 4:return yi(),ta(e,t),e===null&&Yi(t.stateNode.containerInfo),Ot(t),null;case 10:return Nl(t.type._context),Ot(t),null;case 17:return Zt(t.type)&&Us(),Ot(t),null;case 19:if(rt(ot),d=t.memoizedState,d===null)return Ot(t),null;if(s=(t.flags&128)!==0,g=d.rendering,g===null)if(s)ss(d,!1);else{if(vt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=Zs(e),g!==null){for(t.flags|=128,ss(d,!1),s=g.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)d=r,e=s,d.flags&=14680066,g=d.alternate,g===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=g.childLanes,d.lanes=g.lanes,d.child=g.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=g.memoizedProps,d.memoizedState=g.memoizedState,d.updateQueue=g.updateQueue,d.type=g.type,e=g.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return tt(ot,ot.current&1|2),t.child}e=e.sibling}d.tail!==null&&it()>Si&&(t.flags|=128,s=!0,ss(d,!1),t.lanes=4194304)}else{if(!s)if(e=Zs(g),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ss(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!st)return Ot(t),null}else 2*it()-d.renderingStartTime>Si&&r!==1073741824&&(t.flags|=128,s=!0,ss(d,!1),t.lanes=4194304);d.isBackwards?(g.sibling=t.child,t.child=g):(r=d.last,r!==null?r.sibling=g:t.child=g,d.last=g)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=it(),t.sibling=null,r=ot.current,tt(ot,s?r&1|2:r&1),t):(Ot(t),null);case 22:case 23:return pa(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&(t.mode&1)!==0?(fn&1073741824)!==0&&(Ot(t),t.subtreeFlags&6&&(t.flags|=8192)):Ot(t),null;case 24:return null;case 25:return null}throw Error(i(156,t.tag))}function wp(e,t){switch(bl(t),t.tag){case 1:return Zt(t.type)&&Us(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return yi(),rt(Qt),rt(Mt),Pl(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Fl(t),null;case 13:if(rt(ot),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));pi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return rt(ot),null;case 4:return yi(),null;case 10:return Nl(t.type._context),null;case 22:case 23:return pa(),null;case 24:return null;default:return null}}var oo=!1,Ut=!1,kp=typeof WeakSet=="function"?WeakSet:Set,we=null;function wi(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){at(e,t,s)}else r.current=null}function na(e,t,r){try{r()}catch(s){at(e,t,s)}}var Qu=!1;function Sp(e,t){if(pl=Es,e=Ac(),ol(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,d=s.focusNode;s=s.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break e}var g=0,k=-1,E=-1,G=0,ee=0,te=e,q=null;t:for(;;){for(var pe;te!==r||a!==0&&te.nodeType!==3||(k=g+a),te!==d||s!==0&&te.nodeType!==3||(E=g+s),te.nodeType===3&&(g+=te.nodeValue.length),(pe=te.firstChild)!==null;)q=te,te=pe;for(;;){if(te===e)break t;if(q===r&&++G===a&&(k=g),q===d&&++ee===s&&(E=g),(pe=te.nextSibling)!==null)break;te=q,q=te.parentNode}te=pe}r=k===-1||E===-1?null:{start:k,end:E}}else r=null}r=r||{start:0,end:0}}else r=null;for(ml={focusedElem:e,selectionRange:r},Es=!1,we=t;we!==null;)if(t=we,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,we=e;else for(;we!==null;){t=we;try{var ke=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ke!==null){var _e=ke.memoizedProps,dt=ke.memoizedState,M=t.stateNode,T=M.getSnapshotBeforeUpdate(t.elementType===t.type?_e:Dn(t.type,_e),dt);M.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var U=t.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(se){at(t,t.return,se)}if(e=t.sibling,e!==null){e.return=t.return,we=e;break}we=t.return}return ke=Qu,Qu=!1,ke}function os(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var d=a.destroy;a.destroy=void 0,d!==void 0&&na(t,r,d)}a=a.next}while(a!==s)}}function lo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function ra(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Zu(e){var t=e.alternate;t!==null&&(e.alternate=null,Zu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Mn],delete t[Ki],delete t[vl],delete t[ip],delete t[sp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qu(e){return e.tag===5||e.tag===3||e.tag===4}function Ju(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ia(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Rs));else if(s!==4&&(e=e.child,e!==null))for(ia(e,t,r),e=e.sibling;e!==null;)ia(e,t,r),e=e.sibling}function sa(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(sa(e,t,r),e=e.sibling;e!==null;)sa(e,t,r),e=e.sibling}var Dt=null,An=!1;function wr(e,t,r){for(r=r.child;r!==null;)ed(e,t,r),r=r.sibling}function ed(e,t,r){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(ws,r)}catch{}switch(r.tag){case 5:Ut||wi(r,t);case 6:var s=Dt,a=An;Dt=null,wr(e,t,r),Dt=s,An=a,Dt!==null&&(An?(e=Dt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Dt.removeChild(r.stateNode));break;case 18:Dt!==null&&(An?(e=Dt,r=r.stateNode,e.nodeType===8?yl(e.parentNode,r):e.nodeType===1&&yl(e,r),Ri(e)):yl(Dt,r.stateNode));break;case 4:s=Dt,a=An,Dt=r.stateNode.containerInfo,An=!0,wr(e,t,r),Dt=s,An=a;break;case 0:case 11:case 14:case 15:if(!Ut&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var d=a,g=d.destroy;d=d.tag,g!==void 0&&((d&2)!==0||(d&4)!==0)&&na(r,t,g),a=a.next}while(a!==s)}wr(e,t,r);break;case 1:if(!Ut&&(wi(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(k){at(r,t,k)}wr(e,t,r);break;case 21:wr(e,t,r);break;case 22:r.mode&1?(Ut=(s=Ut)||r.memoizedState!==null,wr(e,t,r),Ut=s):wr(e,t,r);break;default:wr(e,t,r)}}function td(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new kp),t.forEach(function(s){var a=Bp.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function Nn(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var d=e,g=t,k=g;e:for(;k!==null;){switch(k.tag){case 5:Dt=k.stateNode,An=!1;break e;case 3:Dt=k.stateNode.containerInfo,An=!0;break e;case 4:Dt=k.stateNode.containerInfo,An=!0;break e}k=k.return}if(Dt===null)throw Error(i(160));ed(d,g,a),Dt=null,An=!1;var E=a.alternate;E!==null&&(E.return=null),a.return=null}catch(G){at(a,t,G)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)nd(t,e),t=t.sibling}function nd(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Nn(t,e),Un(e),s&4){try{os(3,e,e.return),lo(3,e)}catch(_e){at(e,e.return,_e)}try{os(5,e,e.return)}catch(_e){at(e,e.return,_e)}}break;case 1:Nn(t,e),Un(e),s&512&&r!==null&&wi(r,r.return);break;case 5:if(Nn(t,e),Un(e),s&512&&r!==null&&wi(r,r.return),e.flags&32){var a=e.stateNode;try{on(a,"")}catch(_e){at(e,e.return,_e)}}if(s&4&&(a=e.stateNode,a!=null)){var d=e.memoizedProps,g=r!==null?r.memoizedProps:d,k=e.type,E=e.updateQueue;if(e.updateQueue=null,E!==null)try{k==="input"&&d.type==="radio"&&d.name!=null&&j(a,d),$e(k,g);var G=$e(k,d);for(g=0;g<E.length;g+=2){var ee=E[g],te=E[g+1];ee==="style"?je(a,te):ee==="dangerouslySetInnerHTML"?or(a,te):ee==="children"?on(a,te):L(a,ee,te,G)}switch(k){case"input":Ht(a,d);break;case"textarea":Tt(a,d);break;case"select":var q=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!d.multiple;var pe=d.value;pe!=null?gt(a,!!d.multiple,pe,!1):q!==!!d.multiple&&(d.defaultValue!=null?gt(a,!!d.multiple,d.defaultValue,!0):gt(a,!!d.multiple,d.multiple?[]:"",!1))}a[Ki]=d}catch(_e){at(e,e.return,_e)}}break;case 6:if(Nn(t,e),Un(e),s&4){if(e.stateNode===null)throw Error(i(162));a=e.stateNode,d=e.memoizedProps;try{a.nodeValue=d}catch(_e){at(e,e.return,_e)}}break;case 3:if(Nn(t,e),Un(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Ri(t.containerInfo)}catch(_e){at(e,e.return,_e)}break;case 4:Nn(t,e),Un(e);break;case 13:Nn(t,e),Un(e),a=e.child,a.flags&8192&&(d=a.memoizedState!==null,a.stateNode.isHidden=d,!d||a.alternate!==null&&a.alternate.memoizedState!==null||(aa=it())),s&4&&td(e);break;case 22:if(ee=r!==null&&r.memoizedState!==null,e.mode&1?(Ut=(G=Ut)||ee,Nn(t,e),Ut=G):Nn(t,e),Un(e),s&8192){if(G=e.memoizedState!==null,(e.stateNode.isHidden=G)&&!ee&&(e.mode&1)!==0)for(we=e,ee=e.child;ee!==null;){for(te=we=ee;we!==null;){switch(q=we,pe=q.child,q.tag){case 0:case 11:case 14:case 15:os(4,q,q.return);break;case 1:wi(q,q.return);var ke=q.stateNode;if(typeof ke.componentWillUnmount=="function"){s=q,r=q.return;try{t=s,ke.props=t.memoizedProps,ke.state=t.memoizedState,ke.componentWillUnmount()}catch(_e){at(s,r,_e)}}break;case 5:wi(q,q.return);break;case 22:if(q.memoizedState!==null){sd(te);continue}}pe!==null?(pe.return=q,we=pe):sd(te)}ee=ee.sibling}e:for(ee=null,te=e;;){if(te.tag===5){if(ee===null){ee=te;try{a=te.stateNode,G?(d=a.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(k=te.stateNode,E=te.memoizedProps.style,g=E!=null&&E.hasOwnProperty("display")?E.display:null,k.style.display=be("display",g))}catch(_e){at(e,e.return,_e)}}}else if(te.tag===6){if(ee===null)try{te.stateNode.nodeValue=G?"":te.memoizedProps}catch(_e){at(e,e.return,_e)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===e)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===e)break e;for(;te.sibling===null;){if(te.return===null||te.return===e)break e;ee===te&&(ee=null),te=te.return}ee===te&&(ee=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Nn(t,e),Un(e),s&4&&td(e);break;case 21:break;default:Nn(t,e),Un(e)}}function Un(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(qu(r)){var s=r;break e}r=r.return}throw Error(i(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(on(a,""),s.flags&=-33);var d=Ju(e);sa(e,d,a);break;case 3:case 4:var g=s.stateNode.containerInfo,k=Ju(e);ia(e,k,g);break;default:throw Error(i(161))}}catch(E){at(e,e.return,E)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bp(e,t,r){we=e,rd(e)}function rd(e,t,r){for(var s=(e.mode&1)!==0;we!==null;){var a=we,d=a.child;if(a.tag===22&&s){var g=a.memoizedState!==null||oo;if(!g){var k=a.alternate,E=k!==null&&k.memoizedState!==null||Ut;k=oo;var G=Ut;if(oo=g,(Ut=E)&&!G)for(we=a;we!==null;)g=we,E=g.child,g.tag===22&&g.memoizedState!==null?od(a):E!==null?(E.return=g,we=E):od(a);for(;d!==null;)we=d,rd(d),d=d.sibling;we=a,oo=k,Ut=G}id(e)}else(a.subtreeFlags&8772)!==0&&d!==null?(d.return=a,we=d):id(e)}}function id(e){for(;we!==null;){var t=we;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Ut||lo(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Ut)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Dn(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&su(t,d,s);break;case 3:var g=t.updateQueue;if(g!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}su(t,g,r)}break;case 5:var k=t.stateNode;if(r===null&&t.flags&4){r=k;var E=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&r.focus();break;case"img":E.src&&(r.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var G=t.alternate;if(G!==null){var ee=G.memoizedState;if(ee!==null){var te=ee.dehydrated;te!==null&&Ri(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Ut||t.flags&512&&ra(t)}catch(q){at(t,t.return,q)}}if(t===e){we=null;break}if(r=t.sibling,r!==null){r.return=t.return,we=r;break}we=t.return}}function sd(e){for(;we!==null;){var t=we;if(t===e){we=null;break}var r=t.sibling;if(r!==null){r.return=t.return,we=r;break}we=t.return}}function od(e){for(;we!==null;){var t=we;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{lo(4,t)}catch(E){at(t,r,E)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(E){at(t,a,E)}}var d=t.return;try{ra(t)}catch(E){at(t,d,E)}break;case 5:var g=t.return;try{ra(t)}catch(E){at(t,g,E)}}}catch(E){at(t,t.return,E)}if(t===e){we=null;break}var k=t.sibling;if(k!==null){k.return=t.return,we=k;break}we=t.return}}var _p=Math.ceil,ao=A.ReactCurrentDispatcher,oa=A.ReactCurrentOwner,yn=A.ReactCurrentBatchConfig,Ve=0,St=null,ht=null,At=0,fn=0,ki=mr(0),vt=0,ls=null,zr=0,co=0,la=0,as=null,Jt=null,aa=0,Si=1/0,qn=null,uo=!1,ca=null,kr=null,fo=!1,Sr=null,ho=0,cs=0,ua=null,po=-1,mo=0;function Vt(){return(Ve&6)!==0?it():po!==-1?po:po=it()}function br(e){return(e.mode&1)===0?1:(Ve&2)!==0&&At!==0?At&-At:lp.transition!==null?(mo===0&&(mo=Ja()),mo):(e=Qe,e!==0||(e=window.event,e=e===void 0?16:ac(e.type)),e)}function Tn(e,t,r,s){if(50<cs)throw cs=0,ua=null,Error(i(185));ji(e,r,s),((Ve&2)===0||e!==St)&&(e===St&&((Ve&2)===0&&(co|=r),vt===4&&_r(e,At)),en(e,s),r===1&&Ve===0&&(t.mode&1)===0&&(Si=it()+500,Hs&&xr()))}function en(e,t){var r=e.callbackNode;lh(e,t);var s=bs(e,e===St?At:0);if(s===0)r!==null&&lr(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&lr(r),t===1)e.tag===0?op(ad.bind(null,e)):Yc(ad.bind(null,e)),np(function(){(Ve&6)===0&&xr()}),r=null;else{switch(ec(s)){case 1:r=bn;break;case 4:r=ti;break;case 16:r=jr;break;case 536870912:r=qa;break;default:r=jr}r=gd(r,ld.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ld(e,t){if(po=-1,mo=0,(Ve&6)!==0)throw Error(i(327));var r=e.callbackNode;if(bi()&&e.callbackNode!==r)return null;var s=bs(e,e===St?At:0);if(s===0)return null;if((s&30)!==0||(s&e.expiredLanes)!==0||t)t=go(e,s);else{t=s;var a=Ve;Ve|=2;var d=ud();(St!==e||At!==t)&&(qn=null,Si=it()+500,Gr(e,t));do try{Dp();break}catch(k){cd(e,k)}while(!0);Al(),ao.current=d,Ve=a,ht!==null?t=0:(St=null,At=0,t=vt)}if(t!==0){if(t===2&&(a=$o(e),a!==0&&(s=a,t=da(e,a))),t===1)throw r=ls,Gr(e,0),_r(e,s),en(e,it()),r;if(t===6)_r(e,s);else{if(a=e.current.alternate,(s&30)===0&&!Cp(a)&&(t=go(e,s),t===2&&(d=$o(e),d!==0&&(s=d,t=da(e,d))),t===1))throw r=ls,Gr(e,0),_r(e,s),en(e,it()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(i(345));case 2:$r(e,Jt,qn);break;case 3:if(_r(e,s),(s&130023424)===s&&(t=aa+500-it(),10<t)){if(bs(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){Vt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=xl($r.bind(null,e,Jt,qn),t);break}$r(e,Jt,qn);break;case 4:if(_r(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var g=31-_n(s);d=1<<g,g=t[g],g>a&&(a=g),s&=~d}if(s=a,s=it()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*_p(s/1960))-s,10<s){e.timeoutHandle=xl($r.bind(null,e,Jt,qn),s);break}$r(e,Jt,qn);break;case 5:$r(e,Jt,qn);break;default:throw Error(i(329))}}}return en(e,it()),e.callbackNode===r?ld.bind(null,e):null}function da(e,t){var r=as;return e.current.memoizedState.isDehydrated&&(Gr(e,t).flags|=256),e=go(e,t),e!==2&&(t=Jt,Jt=r,t!==null&&fa(t)),e}function fa(e){Jt===null?Jt=e:Jt.push.apply(Jt,e)}function Cp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],d=a.getSnapshot;a=a.value;try{if(!Cn(d(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function _r(e,t){for(t&=~la,t&=~co,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-_n(t),s=1<<r;e[r]=-1,t&=~s}}function ad(e){if((Ve&6)!==0)throw Error(i(327));bi();var t=bs(e,0);if((t&1)===0)return en(e,it()),null;var r=go(e,t);if(e.tag!==0&&r===2){var s=$o(e);s!==0&&(t=s,r=da(e,s))}if(r===1)throw r=ls,Gr(e,0),_r(e,t),en(e,it()),r;if(r===6)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$r(e,Jt,qn),en(e,it()),null}function ha(e,t){var r=Ve;Ve|=1;try{return e(t)}finally{Ve=r,Ve===0&&(Si=it()+500,Hs&&xr())}}function Hr(e){Sr!==null&&Sr.tag===0&&(Ve&6)===0&&bi();var t=Ve;Ve|=1;var r=yn.transition,s=Qe;try{if(yn.transition=null,Qe=1,e)return e()}finally{Qe=s,yn.transition=r,Ve=t,(Ve&6)===0&&xr()}}function pa(){fn=ki.current,rt(ki)}function Gr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,tp(r)),ht!==null)for(r=ht.return;r!==null;){var s=r;switch(bl(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Us();break;case 3:yi(),rt(Qt),rt(Mt),Pl();break;case 5:Fl(s);break;case 4:yi();break;case 13:rt(ot);break;case 19:rt(ot);break;case 10:Nl(s.type._context);break;case 22:case 23:pa()}r=r.return}if(St=e,ht=e=Cr(e.current,null),At=fn=t,vt=0,ls=null,la=co=zr=0,Jt=as=null,Rr!==null){for(t=0;t<Rr.length;t++)if(r=Rr[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,d=r.pending;if(d!==null){var g=d.next;d.next=a,s.next=g}r.pending=s}Rr=null}return e}function cd(e,t){do{var r=ht;try{if(Al(),qs.current=no,Js){for(var s=lt.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Js=!1}if(Ur=0,kt=yt=lt=null,ts=!1,ns=0,oa.current=null,r===null||r.return===null){vt=1,ls=t,ht=null;break}e:{var d=e,g=r.return,k=r,E=t;if(t=At,k.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var G=E,ee=k,te=ee.tag;if((ee.mode&1)===0&&(te===0||te===11||te===15)){var q=ee.alternate;q?(ee.updateQueue=q.updateQueue,ee.memoizedState=q.memoizedState,ee.lanes=q.lanes):(ee.updateQueue=null,ee.memoizedState=null)}var pe=Fu(g);if(pe!==null){pe.flags&=-257,Lu(pe,g,k,d,t),pe.mode&1&&ju(d,G,t),t=pe,E=G;var ke=t.updateQueue;if(ke===null){var _e=new Set;_e.add(E),t.updateQueue=_e}else ke.add(E);break e}else{if((t&1)===0){ju(d,G,t),ma();break e}E=Error(i(426))}}else if(st&&k.mode&1){var dt=Fu(g);if(dt!==null){(dt.flags&65536)===0&&(dt.flags|=256),Lu(dt,g,k,d,t),El(vi(E,k));break e}}d=E=vi(E,k),vt!==4&&(vt=2),as===null?as=[d]:as.push(d),d=g;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var M=Bu(d,E,t);iu(d,M);break e;case 1:k=E;var T=d.type,U=d.stateNode;if((d.flags&128)===0&&(typeof T.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(kr===null||!kr.has(U)))){d.flags|=65536,t&=-t,d.lanes|=t;var se=Iu(d,k,t);iu(d,se);break e}}d=d.return}while(d!==null)}fd(r)}catch(De){t=De,ht===r&&r!==null&&(ht=r=r.return);continue}break}while(!0)}function ud(){var e=ao.current;return ao.current=no,e===null?no:e}function ma(){(vt===0||vt===3||vt===2)&&(vt=4),St===null||(zr&268435455)===0&&(co&268435455)===0||_r(St,At)}function go(e,t){var r=Ve;Ve|=2;var s=ud();(St!==e||At!==t)&&(qn=null,Gr(e,t));do try{Ep();break}catch(a){cd(e,a)}while(!0);if(Al(),Ve=r,ao.current=s,ht!==null)throw Error(i(261));return St=null,At=0,vt}function Ep(){for(;ht!==null;)dd(ht)}function Dp(){for(;ht!==null&&!ys();)dd(ht)}function dd(e){var t=md(e.alternate,e,fn);e.memoizedProps=e.pendingProps,t===null?fd(e):ht=t,oa.current=null}function fd(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=vp(r,t,fn),r!==null){ht=r;return}}else{if(r=wp(r,t),r!==null){r.flags&=32767,ht=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{vt=6,ht=null;return}}if(t=t.sibling,t!==null){ht=t;return}ht=t=e}while(t!==null);vt===0&&(vt=5)}function $r(e,t,r){var s=Qe,a=yn.transition;try{yn.transition=null,Qe=1,Ap(e,t,r,s)}finally{yn.transition=a,Qe=s}return null}function Ap(e,t,r,s){do bi();while(Sr!==null);if((Ve&6)!==0)throw Error(i(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var d=r.lanes|r.childLanes;if(ah(e,d),e===St&&(ht=St=null,At=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||fo||(fo=!0,gd(jr,function(){return bi(),null})),d=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||d){d=yn.transition,yn.transition=null;var g=Qe;Qe=1;var k=Ve;Ve|=4,oa.current=null,Sp(e,r),nd(r,e),Xh(ml),Es=!!pl,ml=pl=null,e.current=r,bp(r),Bi(),Ve=k,Qe=g,yn.transition=d}else e.current=r;if(fo&&(fo=!1,Sr=e,ho=a),d=e.pendingLanes,d===0&&(kr=null),nh(r.stateNode),en(e,it()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(uo)throw uo=!1,e=ca,ca=null,e;return(ho&1)!==0&&e.tag!==0&&bi(),d=e.pendingLanes,(d&1)!==0?e===ua?cs++:(cs=0,ua=e):cs=0,xr(),null}function bi(){if(Sr!==null){var e=ec(ho),t=yn.transition,r=Qe;try{if(yn.transition=null,Qe=16>e?16:e,Sr===null)var s=!1;else{if(e=Sr,Sr=null,ho=0,(Ve&6)!==0)throw Error(i(331));var a=Ve;for(Ve|=4,we=e.current;we!==null;){var d=we,g=d.child;if((we.flags&16)!==0){var k=d.deletions;if(k!==null){for(var E=0;E<k.length;E++){var G=k[E];for(we=G;we!==null;){var ee=we;switch(ee.tag){case 0:case 11:case 15:os(8,ee,d)}var te=ee.child;if(te!==null)te.return=ee,we=te;else for(;we!==null;){ee=we;var q=ee.sibling,pe=ee.return;if(Zu(ee),ee===G){we=null;break}if(q!==null){q.return=pe,we=q;break}we=pe}}}var ke=d.alternate;if(ke!==null){var _e=ke.child;if(_e!==null){ke.child=null;do{var dt=_e.sibling;_e.sibling=null,_e=dt}while(_e!==null)}}we=d}}if((d.subtreeFlags&2064)!==0&&g!==null)g.return=d,we=g;else e:for(;we!==null;){if(d=we,(d.flags&2048)!==0)switch(d.tag){case 0:case 11:case 15:os(9,d,d.return)}var M=d.sibling;if(M!==null){M.return=d.return,we=M;break e}we=d.return}}var T=e.current;for(we=T;we!==null;){g=we;var U=g.child;if((g.subtreeFlags&2064)!==0&&U!==null)U.return=g,we=U;else e:for(g=T;we!==null;){if(k=we,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:lo(9,k)}}catch(De){at(k,k.return,De)}if(k===g){we=null;break e}var se=k.sibling;if(se!==null){se.return=k.return,we=se;break e}we=k.return}}if(Ve=a,xr(),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(ws,e)}catch{}s=!0}return s}finally{Qe=r,yn.transition=t}}return!1}function hd(e,t,r){t=vi(r,t),t=Bu(e,t,1),e=vr(e,t,1),t=Vt(),e!==null&&(ji(e,1,t),en(e,t))}function at(e,t,r){if(e.tag===3)hd(e,e,r);else for(;t!==null;){if(t.tag===3){hd(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(kr===null||!kr.has(s))){e=vi(r,e),e=Iu(t,e,1),t=vr(t,e,1),e=Vt(),t!==null&&(ji(t,1,e),en(t,e));break}}t=t.return}}function Np(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Vt(),e.pingedLanes|=e.suspendedLanes&r,St===e&&(At&r)===r&&(vt===4||vt===3&&(At&130023424)===At&&500>it()-aa?Gr(e,0):la|=r),en(e,t)}function pd(e,t){t===0&&((e.mode&1)===0?t=1:(t=Ss,Ss<<=1,(Ss&130023424)===0&&(Ss=4194304)));var r=Vt();e=Kn(e,t),e!==null&&(ji(e,t,r),en(e,r))}function Tp(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),pd(e,r)}function Bp(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(i(314))}s!==null&&s.delete(t),pd(e,r)}var md;md=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Qt.current)qt=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return qt=!1,yp(e,t,r);qt=(e.flags&131072)!==0}else qt=!1,st&&(t.flags&1048576)!==0&&Xc(t,$s,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;so(e,t),e=t.pendingProps;var a=di(t,Mt.current);xi(t,r),a=Ol(null,t,s,e,a,r);var d=Ul();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Zt(s)?(d=!0,zs(t)):d=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Il(t),a.updater=ro,t.stateNode=a,a._reactInternals=t,Vl(t,s,e,r),t=Ql(null,t,s,!0,d,r)):(t.tag=0,st&&d&&Sl(t),Wt(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(so(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=jp(s),e=Dn(s,e),a){case 0:t=Kl(null,t,s,e,r);break e;case 1:t=zu(null,t,s,e,r);break e;case 11:t=Pu(null,t,s,e,r);break e;case 14:t=Mu(null,t,s,Dn(s.type,e),r);break e}throw Error(i(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Dn(s,a),Kl(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Dn(s,a),zu(e,t,s,a,r);case 3:e:{if(Hu(t),e===null)throw Error(i(387));s=t.pendingProps,d=t.memoizedState,a=d.element,ru(e,t),Qs(t,s,null,r);var g=t.memoizedState;if(s=g.element,d.isDehydrated)if(d={element:s,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){a=vi(Error(i(423)),t),t=Gu(e,t,s,r,a);break e}else if(s!==a){a=vi(Error(i(424)),t),t=Gu(e,t,s,r,a);break e}else for(dn=pr(t.stateNode.containerInfo.firstChild),un=t,st=!0,En=null,r=tu(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(pi(),s===a){t=Zn(e,t,r);break e}Wt(e,t,s,r)}t=t.child}return t;case 5:return ou(t),e===null&&Cl(t),s=t.type,a=t.pendingProps,d=e!==null?e.memoizedProps:null,g=a.children,gl(s,a)?g=null:d!==null&&gl(s,d)&&(t.flags|=32),Uu(e,t),Wt(e,t,g,r),t.child;case 6:return e===null&&Cl(t),null;case 13:return $u(e,t,r);case 4:return jl(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=mi(t,null,s,r):Wt(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Dn(s,a),Pu(e,t,s,a,r);case 7:return Wt(e,t,t.pendingProps,r),t.child;case 8:return Wt(e,t,t.pendingProps.children,r),t.child;case 12:return Wt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,d=t.memoizedProps,g=a.value,tt(Ys,s._currentValue),s._currentValue=g,d!==null)if(Cn(d.value,g)){if(d.children===a.children&&!Qt.current){t=Zn(e,t,r);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var k=d.dependencies;if(k!==null){g=d.child;for(var E=k.firstContext;E!==null;){if(E.context===s){if(d.tag===1){E=Qn(-1,r&-r),E.tag=2;var G=d.updateQueue;if(G!==null){G=G.shared;var ee=G.pending;ee===null?E.next=E:(E.next=ee.next,ee.next=E),G.pending=E}}d.lanes|=r,E=d.alternate,E!==null&&(E.lanes|=r),Tl(d.return,r,t),k.lanes|=r;break}E=E.next}}else if(d.tag===10)g=d.type===t.type?null:d.child;else if(d.tag===18){if(g=d.return,g===null)throw Error(i(341));g.lanes|=r,k=g.alternate,k!==null&&(k.lanes|=r),Tl(g,r,t),g=d.sibling}else g=d.child;if(g!==null)g.return=d;else for(g=d;g!==null;){if(g===t){g=null;break}if(d=g.sibling,d!==null){d.return=g.return,g=d;break}g=g.return}d=g}Wt(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,xi(t,r),a=gn(a),s=s(a),t.flags|=1,Wt(e,t,s,r),t.child;case 14:return s=t.type,a=Dn(s,t.pendingProps),a=Dn(s.type,a),Mu(e,t,s,a,r);case 15:return Ru(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Dn(s,a),so(e,t),t.tag=1,Zt(s)?(e=!0,zs(t)):e=!1,xi(t,r),Nu(t,s,a),Vl(t,s,a,r),Ql(null,t,s,!0,e,r);case 19:return Vu(e,t,r);case 22:return Ou(e,t,r)}throw Error(i(156,t.tag))};function gd(e,t){return Ir(e,t)}function Ip(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(e,t,r,s){return new Ip(e,t,r,s)}function ga(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jp(e){if(typeof e=="function")return ga(e)?1:0;if(e!=null){if(e=e.$$typeof,e===me)return 11;if(e===ge)return 14}return 2}function Cr(e,t){var r=e.alternate;return r===null?(r=vn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function xo(e,t,r,s,a,d){var g=2;if(s=e,typeof e=="function")ga(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case Q:return Wr(r.children,a,d,t);case J:g=8,a|=8;break;case Se:return e=vn(12,r,t,a|2),e.elementType=Se,e.lanes=d,e;case K:return e=vn(13,r,t,a),e.elementType=K,e.lanes=d,e;case ne:return e=vn(19,r,t,a),e.elementType=ne,e.lanes=d,e;case ce:return yo(r,a,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ce:g=10;break e;case fe:g=9;break e;case me:g=11;break e;case ge:g=14;break e;case ae:g=16,s=null;break e}throw Error(i(130,e==null?e:typeof e,""))}return t=vn(g,r,t,a),t.elementType=e,t.type=s,t.lanes=d,t}function Wr(e,t,r,s){return e=vn(7,e,s,t),e.lanes=r,e}function yo(e,t,r,s){return e=vn(22,e,s,t),e.elementType=ce,e.lanes=r,e.stateNode={isHidden:!1},e}function xa(e,t,r){return e=vn(6,e,null,t),e.lanes=r,e}function ya(e,t,r){return t=vn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fp(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wo(0),this.expirationTimes=Wo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wo(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function va(e,t,r,s,a,d,g,k,E){return e=new Fp(e,t,r,k,E),t===1?(t=1,d===!0&&(t|=8)):t=0,d=vn(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Il(d),e}function Lp(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function xd(e){if(!e)return gr;e=e._reactInternals;e:{if(Et(e)!==e||e.tag!==1)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Zt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(i(171))}if(e.tag===1){var r=e.type;if(Zt(r))return Wc(e,r,t)}return t}function yd(e,t,r,s,a,d,g,k,E){return e=va(r,s,!0,e,a,d,g,k,E),e.context=xd(null),r=e.current,s=Vt(),a=br(r),d=Qn(s,a),d.callback=t??null,vr(r,d,a),e.current.lanes=a,ji(e,a,s),en(e,s),e}function vo(e,t,r,s){var a=t.current,d=Vt(),g=br(a);return r=xd(r),t.context===null?t.context=r:t.pendingContext=r,t=Qn(d,g),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=vr(a,t,g),e!==null&&(Tn(e,a,g,d),Ks(e,a,g)),g}function wo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function vd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function wa(e,t){vd(e,t),(e=e.alternate)&&vd(e,t)}function Pp(){return null}var wd=typeof reportError=="function"?reportError:function(e){console.error(e)};function ka(e){this._internalRoot=e}ko.prototype.render=ka.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));vo(e,t,null,null)},ko.prototype.unmount=ka.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hr(function(){vo(null,e,null,null)}),t[Wn]=null}};function ko(e){this._internalRoot=e}ko.prototype.unstable_scheduleHydration=function(e){if(e){var t=rc();e={blockedOn:null,target:e,priority:t};for(var r=0;r<dr.length&&t!==0&&t<dr[r].priority;r++);dr.splice(r,0,e),r===0&&oc(e)}};function Sa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function So(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function kd(){}function Mp(e,t,r,s,a){if(a){if(typeof s=="function"){var d=s;s=function(){var G=wo(g);d.call(G)}}var g=yd(t,s,e,0,null,!1,!1,"",kd);return e._reactRootContainer=g,e[Wn]=g.current,Yi(e.nodeType===8?e.parentNode:e),Hr(),g}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var k=s;s=function(){var G=wo(E);k.call(G)}}var E=va(e,0,!1,null,null,!1,!1,"",kd);return e._reactRootContainer=E,e[Wn]=E.current,Yi(e.nodeType===8?e.parentNode:e),Hr(function(){vo(t,E,r,s)}),E}function bo(e,t,r,s,a){var d=r._reactRootContainer;if(d){var g=d;if(typeof a=="function"){var k=a;a=function(){var E=wo(g);k.call(E)}}vo(t,g,e,a)}else g=Mp(r,t,e,a,s);return wo(g)}tc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Ii(t.pendingLanes);r!==0&&(Vo(t,r|1),en(t,it()),(Ve&6)===0&&(Si=it()+500,xr()))}break;case 13:Hr(function(){var s=Kn(e,1);if(s!==null){var a=Vt();Tn(s,e,1,a)}}),wa(e,1)}},Yo=function(e){if(e.tag===13){var t=Kn(e,134217728);if(t!==null){var r=Vt();Tn(t,e,134217728,r)}wa(e,134217728)}},nc=function(e){if(e.tag===13){var t=br(e),r=Kn(e,t);if(r!==null){var s=Vt();Tn(r,e,t,s)}wa(e,t)}},rc=function(){return Qe},ic=function(e,t){var r=Qe;try{return Qe=e,t()}finally{Qe=r}},It=function(e,t,r){switch(t){case"input":if(Ht(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=Os(s);if(!a)throw Error(i(90));Re(s),Ht(s,a)}}}break;case"textarea":Tt(e,r);break;case"select":t=r.value,t!=null&&gt(e,!!r.multiple,t,!1)}},jt=ha,Ft=Hr;var Rp={usingClientEntryPoint:!1,Events:[Qi,ci,Os,qe,xt,ha]},us={findFiberByHostInstance:Fr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Op={bundleType:us.bundleType,version:us.version,rendererPackageName:us.rendererPackageName,rendererConfig:us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ft(e),e===null?null:e.stateNode},findFiberByHostInstance:us.findFiberByHostInstance||Pp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _o=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_o.isDisabled&&_o.supportsFiber)try{ws=_o.inject(Op),Pn=_o}catch{}}return tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rp,tn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sa(t))throw Error(i(200));return Lp(e,t,null,r)},tn.createRoot=function(e,t){if(!Sa(e))throw Error(i(299));var r=!1,s="",a=wd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=va(e,1,!1,null,null,r,!1,s,a),e[Wn]=t.current,Yi(e.nodeType===8?e.parentNode:e),new ka(t)},tn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=ft(t),e=e===null?null:e.stateNode,e},tn.flushSync=function(e){return Hr(e)},tn.hydrate=function(e,t,r){if(!So(t))throw Error(i(200));return bo(null,e,t,!0,r)},tn.hydrateRoot=function(e,t,r){if(!Sa(e))throw Error(i(405));var s=r!=null&&r.hydratedSources||null,a=!1,d="",g=wd;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(g=r.onRecoverableError)),t=yd(t,null,e,1,r??null,a,!1,d,g),e[Wn]=t.current,Yi(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new ko(t)},tn.render=function(e,t,r){if(!So(t))throw Error(i(200));return bo(null,e,t,!1,r)},tn.unmountComponentAtNode=function(e){if(!So(e))throw Error(i(40));return e._reactRootContainer?(Hr(function(){bo(null,null,e,!1,function(){e._reactRootContainer=null,e[Wn]=null})}),!0):!1},tn.unstable_batchedUpdates=ha,tn.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!So(r))throw Error(i(200));if(e==null||e._reactInternals===void 0)throw Error(i(38));return bo(e,t,r,!1,s)},tn.version="18.3.1-next-f1338f8080-20240426",tn}var Td;function Kp(){if(Td)return Ea.exports;Td=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(n){console.error(n)}}return o(),Ea.exports=Xp(),Ea.exports}var Bd;function Qp(){if(Bd)return Co;Bd=1;var o=Kp();return Co.createRoot=o.createRoot,Co.hydrateRoot=o.hydrateRoot,Co}var Zp=Qp();const qp=sf(Zp),Id=o=>{let n;const i=new Set,l=(x,w)=>{const y=typeof x=="function"?x(n):x;if(!Object.is(y,n)){const S=n;n=w??(typeof y!="object"||y===null)?y:Object.assign({},n,y),i.forEach(b=>b(n,S))}},c=()=>n,h={setState:l,getState:c,getInitialState:()=>p,subscribe:x=>(i.add(x),()=>i.delete(x))},p=n=o(l,c,h);return h},Jp=(o=>o?Id(o):Id),em=o=>o;function tm(o,n=em){const i=fs.useSyncExternalStore(o.subscribe,fs.useCallback(()=>n(o.getState()),[o,n]),fs.useCallback(()=>n(o.getInitialState()),[o,n]));return fs.useDebugValue(i),i}const jd=o=>{const n=Jp(o),i=l=>tm(n,l);return Object.assign(i,n),i},nm=(o=>o?jd(o):jd);class xs{constructor(n){$(this,"buffer");$(this,"index",0);this.buffer=n instanceof Uint8Array?n:new Uint8Array(n)}slice(n,i){return new xs(this.buffer.slice(n,i))}readable(){return this.index<this.buffer.length}skip(n){this.index+=n}readUInt8(){return this.buffer[this.index++]}readInt8(){return this.buffer[this.index++]<<24>>24}readUInt16(){return this.buffer[this.index++]+(this.buffer[this.index++]<<8)}readUInt32(){return this.buffer[this.index++]+(this.buffer[this.index++]<<8)+(this.buffer[this.index++]<<16)+(this.buffer[this.index++]<<24)>>>0}readString(){const n=this.readUInt16();if(n===0)return"";const i=new TextDecoder("utf-8").decode(this.buffer.slice(this.index,this.index+n));return this.index+=n,i}readRGB(){return this.buffer[this.index++]+(this.buffer[this.index++]<<8)+(this.buffer[this.index++]<<16)}readLight(){return{level:this.readUInt16(),color:this.readUInt16()}}readAnimationLength(){return{min:this.readUInt32(),max:this.readUInt32()}}}const Fo=new Uint8Array([69,77,80,69,82,73,65,0]),qr=20;var Ro=(o=>(o[o.SPRITE_DATA=1]="SPRITE_DATA",o[o.OBJECT_DEFS=2]="OBJECT_DEFS",o))(Ro||{});function Ya(o){const n=o instanceof Uint8Array?o:new Uint8Array(o);if(n.length<qr)return!1;for(let i=0;i<Fo.length;i++)if(n[i]!==Fo[i])return!1;return!0}function of(o){const n=o instanceof Uint8Array?o:new Uint8Array(o);if(!Ya(n))return null;const i=new DataView(n.buffer,n.byteOffset,n.byteLength);return{fileType:i.getUint8(8),formatVersion:i.getUint16(9,!0),contentVersion:i.getUint32(11,!0),flags:i.getUint8(15)}}function rm(o){const n=o instanceof Uint8Array?o:new Uint8Array(o);return n.length>=2&&n[0]===31&&n[1]===139}async function im(o){const n=new CompressionStream("gzip"),i=n.writable.getWriter();i.write(new Uint8Array(o)),i.close();const l=n.readable.getReader(),c=[];for(;;){const{done:p,value:x}=await l.read();if(p)break;c.push(x)}let u=0;for(const p of c)u+=p.byteLength;const m=new Uint8Array(u);let h=0;for(const p of c)m.set(p,h),h+=p.byteLength;return m.buffer}async function sm(o){if(!rm(o))return o;const n=new DecompressionStream("gzip"),i=n.writable.getWriter();i.write(new Uint8Array(o)),i.close();const l=n.readable.getReader(),c=[];for(;;){const{done:p,value:x}=await l.read();if(p)break;c.push(x)}let u=0;for(const p of c)u+=p.byteLength;const m=new Uint8Array(u);let h=0;for(const p of c)m.set(p,h),h+=p.byteLength;return m.buffer}const Fd={"41BF619C":740,"439D5A33":760,"42A3":1098},Ee={ThingAttrGround:0,ThingAttrGroundBorder:1,ThingAttrOnBottom:2,ThingAttrOnTop:3,ThingAttrContainer:4,ThingAttrStackable:5,ThingAttrForceUse:6,ThingAttrMultiUse:7,ThingAttrWritable:8,ThingAttrWritableOnce:9,ThingAttrFluidContainer:10,ThingAttrSplash:11,ThingAttrNotWalkable:12,ThingAttrNotMoveable:13,ThingAttrBlockProjectile:14,ThingAttrNotPathable:15,ThingAttrPickupable:16,ThingAttrHangable:17,ThingAttrHookSouth:18,ThingAttrHookEast:19,ThingAttrRotateable:20,ThingAttrLight:21,ThingAttrDontHide:22,ThingAttrTranslucent:23,ThingAttrDisplacement:24,ThingAttrElevation:25,ThingAttrLyingCorpse:26,ThingAttrAnimateAlways:27,ThingAttrMinimapColor:28,ThingAttrLensHelp:29,ThingAttrFullGround:30,ThingAttrLook:31,ThingAttrCloth:32,ThingAttrMarket:33,ThingAttrUsable:34,ThingAttrWrapable:35,ThingAttrUnwrapable:36,ThingAttrTopEffect:37,ThingAttrOpacity:100,ThingAttrNotPreWalkable:101,ThingAttrFloorChange:252,ThingAttrNoMoveAnimation:253,ThingAttrChargeable:254,ThingAttrLast:255};function om(o,n){if(o===Ee.ThingAttrLast)return o;if(n>=1e3){if(o===16)return Ee.ThingAttrNoMoveAnimation;if(o>16)return o-1}else if(n>=755){if(o===23)return Ee.ThingAttrFloorChange}else if(n>=740){if(o>0&&o<=15)return o===5?Ee.ThingAttrMultiUse:o===6?Ee.ThingAttrForceUse:o+1;switch(o){case 16:return Ee.ThingAttrLight;case 17:return Ee.ThingAttrFloorChange;case 18:return Ee.ThingAttrFullGround;case 19:return Ee.ThingAttrElevation;case 20:return Ee.ThingAttrDisplacement;case 22:return Ee.ThingAttrMinimapColor;case 23:return Ee.ThingAttrRotateable;case 24:return Ee.ThingAttrLyingCorpse;case 25:return Ee.ThingAttrHangable;case 26:return Ee.ThingAttrHookSouth;case 27:return Ee.ThingAttrHookEast;case 28:return Ee.ThingAttrAnimateAlways}}return o}function lm(){return{ground:!1,groundBorder:!1,onBottom:!1,onTop:!1,container:!1,stackable:!1,forceUse:!1,multiUse:!1,writable:!1,writableOnce:!1,fluidContainer:!1,splash:!1,notWalkable:!1,notMoveable:!1,blockProjectile:!1,notPathable:!1,pickupable:!1,hangable:!1,hookSouth:!1,hookEast:!1,rotateable:!1,hasLight:!1,dontHide:!1,translucent:!1,hasDisplacement:!1,hasElevation:!1,lyingCorpse:!1,animateAlways:!1,hasMinimapColor:!1,fullGround:!1,look:!1,cloth:!1,hasMarket:!1,usable:!1,wrapable:!1,unwrapable:!1,topEffect:!1,noMoveAnimation:!1,chargeable:!1}}function am(o,n){const i=lm();for(;;){const l=o.readUInt8(),c=om(l,n);switch(c){case Ee.ThingAttrLast:return i;case Ee.ThingAttrGround:i.ground=!0,i.groundSpeed=o.readUInt16();break;case Ee.ThingAttrGroundBorder:i.groundBorder=!0;break;case Ee.ThingAttrOnBottom:i.onBottom=!0;break;case Ee.ThingAttrOnTop:i.onTop=!0;break;case Ee.ThingAttrContainer:i.container=!0;break;case Ee.ThingAttrStackable:i.stackable=!0;break;case Ee.ThingAttrForceUse:i.forceUse=!0;break;case Ee.ThingAttrMultiUse:i.multiUse=!0;break;case Ee.ThingAttrWritable:i.writable=!0,i.writableMaxLen=o.readUInt16();break;case Ee.ThingAttrWritableOnce:i.writableOnce=!0,i.writableOnceMaxLen=o.readUInt16();break;case Ee.ThingAttrFluidContainer:i.fluidContainer=!0;break;case Ee.ThingAttrSplash:i.splash=!0;break;case Ee.ThingAttrNotWalkable:i.notWalkable=!0;break;case Ee.ThingAttrNotMoveable:i.notMoveable=!0;break;case Ee.ThingAttrBlockProjectile:i.blockProjectile=!0;break;case Ee.ThingAttrNotPathable:i.notPathable=!0;break;case Ee.ThingAttrPickupable:i.pickupable=!0;break;case Ee.ThingAttrHangable:i.hangable=!0;break;case Ee.ThingAttrHookSouth:i.hookSouth=!0;break;case Ee.ThingAttrHookEast:i.hookEast=!0;break;case Ee.ThingAttrRotateable:i.rotateable=!0;break;case Ee.ThingAttrLight:{i.hasLight=!0;const u=o.readLight();i.lightLevel=u.level,i.lightColor=u.color;break}case Ee.ThingAttrDontHide:i.dontHide=!0;break;case Ee.ThingAttrTranslucent:i.translucent=!0;break;case Ee.ThingAttrDisplacement:{if(i.hasDisplacement=!0,n>=755){const u=o.readLight();i.displacementX=u.level,i.displacementY=u.color}break}case Ee.ThingAttrElevation:i.hasElevation=!0,i.elevation=o.readUInt16();break;case Ee.ThingAttrLyingCorpse:i.lyingCorpse=!0;break;case Ee.ThingAttrAnimateAlways:i.animateAlways=!0;break;case Ee.ThingAttrMinimapColor:i.hasMinimapColor=!0,i.minimapColor=o.readUInt16();break;case Ee.ThingAttrLensHelp:i.lensHelp=o.readUInt16();break;case Ee.ThingAttrFullGround:i.fullGround=!0;break;case Ee.ThingAttrLook:i.look=!0;break;case Ee.ThingAttrCloth:i.cloth=!0,i.clothSlot=o.readUInt16();break;case Ee.ThingAttrMarket:i.hasMarket=!0,i.marketCategory=o.readUInt16(),i.marketTradeAs=o.readUInt16(),i.marketShowAs=o.readUInt16(),i.marketName=o.readString(),i.marketRestrictVocation=o.readUInt16(),i.marketRequiredLevel=o.readUInt16();break;case Ee.ThingAttrUsable:i.usable=!0,i.usableActionId=o.readUInt16();break;case Ee.ThingAttrWrapable:i.wrapable=!0;break;case Ee.ThingAttrUnwrapable:i.unwrapable=!0;break;case Ee.ThingAttrTopEffect:i.topEffect=!0;break;case Ee.ThingAttrOpacity:break;case Ee.ThingAttrNotPreWalkable:break;case Ee.ThingAttrFloorChange:break;case Ee.ThingAttrNoMoveAnimation:i.noMoveAnimation=!0;break;case Ee.ThingAttrChargeable:i.chargeable=!0;break;default:throw new Error(`Unknown flag 0x${c.toString(16)} at offset ${o.index}`)}}}function cm(o,n,i){const l=i?o.readUInt8():0,c=o.readUInt8(),u=o.readUInt8();(c>1||u>1)&&o.readUInt8();const m=o.readUInt8(),h=o.readUInt8(),p=o.readUInt8(),x=n>=755?o.readUInt8():1,w=o.readUInt8();let y=0,S=0,b=0;const _=[];if(w>1&&n>=1050){y=o.readUInt8(),S=o.readUInt32(),b=o.readInt8();for(let F=0;F<w;F++)_.push(o.readAnimationLength())}const O=c*u*m*h*p*x*w,I=[];for(let F=0;F<O;F++)I.push(n>=960?o.readUInt32():o.readUInt16());return{type:l,width:c,height:u,layers:m,patternX:h,patternY:p,patternZ:x,animationLength:w,asynchronous:y,nLoop:S,start:b,animationLengths:_,sprites:I}}function um(o){const n=of(o);let i,l;if(n){if(n.fileType!==Ro.OBJECT_DEFS)throw new Error(`Expected object definitions (0x02), got 0x${n.fileType.toString(16)}`);i=n.contentVersion,l=qr}else{const S=new DataView(o).getUint32(0,!0).toString(16).toUpperCase();if(!(S in Fd))throw new Error("Unknown object definition file format.");i=Fd[S],l=4}const c=new xs(o.slice(l)),u=c.readUInt16(),m=c.readUInt16(),h=c.readUInt16(),p=c.readUInt16(),x=u+m+h+p,w=new Map;for(let y=100;y<=x;y++){const S=c.index,b=am(c,i),_=y>u&&y<=u+m,O=i>=1050&&_,I=O?c.readUInt8():1,F=[];for(let Z=0;Z<I;Z++)F.push(cm(c,i,O));const D=c.index,L=c.buffer.slice(S,D);let A;y<=u?A="item":y<=u+m?A="outfit":y<=u+m+h?A="effect":A="distance",w.set(y,{id:y,category:A,flags:b,frameGroups:F,rawBytes:L})}return console.log(`[OB] Parsed ${w.size} things: items=${u} outfits=${m} effects=${h} distances=${p}`),{version:i,itemCount:u,outfitCount:m,effectCount:h,distanceCount:p,things:w,originalBuffer:o}}const Ld={"57BBD603":1098};function dm(o){const n=of(o);let i,l;if(n){if(n.fileType!==Ro.SPRITE_DATA)throw new Error(`Expected sprite data (0x01), got 0x${n.fileType.toString(16)}`);i=n.contentVersion,l=qr}else{const x=new DataView(o).getUint32(0,!0).toString(16).toUpperCase();if(!(x in Ld))throw new Error("Unknown sprite file format.");i=Ld[x],l=4}const c=new Uint8Array(o.slice(l)),u=new xs(c),m=i>760?u.readUInt32():u.readUInt16(),h=new Map;for(let p=1;p<=m;p++){const x=u.readUInt32();x!==0&&h.set(p,x-l)}return console.log(`[OB] Parsed sprite index: ${m} sprites, ${h.size} non-empty`),{version:i,spriteCount:m,addresses:h,buffer:c,originalBuffer:o}}function Hn(o,n){const i=o.addresses.get(n);if(i===void 0)return null;const l=o.buffer,c=l[i+3]+(l[i+4]<<8),u=new xs(l.slice(i,i+5+c));u.readRGB(),u.skip(2);const m=new Uint32Array(1024);let h=0;for(;u.readable();){const x=u.readUInt16(),w=u.readUInt16();h+=x;for(let y=h;y<h+w;y++){const S=u.readUInt8(),b=u.readUInt8(),_=u.readUInt8(),O=u.readUInt8();m[y]=O<<24|_<<16|b<<8|S}h+=w}const p=new ImageData(32,32);return new Uint32Array(p.data.buffer).set(m),p}const Lo=new Map,Oo=document.createElement("canvas");Oo.width=32;Oo.height=32;const Pd=Oo.getContext("2d");function Uo(o,n,i){if(n===0)return null;const l=Lo.get(n);if(l)return l;const c=(i==null?void 0:i.get(n))??Hn(o,n);if(!c)return null;Pd.clearRect(0,0,32,32),Pd.putImageData(c,0,0);const u=Oo.toDataURL();return Lo.set(n,u),u}function nr(){Lo.clear()}function Na(o){Lo.delete(o)}const fm=["FLAG_BLOCK_SOLID","FLAG_BLOCK_PROJECTILE","FLAG_BLOCK_PATHFIND","FLAG_HAS_HEIGHT","FLAG_USEABLE","FLAG_PICKUPABLE","FLAG_MOVEABLE","FLAG_STACKABLE","FLAG_FLOORCHANGEDOWN","FLAG_FLOORCHANGENORTH","FLAG_FLOORCHANGEEAST","FLAG_FLOORCHANGESOUTH","FLAG_FLOORCHANGEWEST","FLAG_ALWAYSONTOP","FLAG_READABLE","FLAG_ROTATABLE","FLAG_HANGABLE","FLAG_VERTICAL","FLAG_HORIZONTAL","FLAG_CANNOTDECAY","FLAG_ALLOWDISTREAD","FLAG_UNUSED","FLAG_CLIENTCHARGES","FLAG_LOOKTHROUGH","FLAG_ANIMATION","FLAG_FULLTILE","FLAG_FORCEUSE"];function hm(o){let n=0;return o.notWalkable&&(n|=1),o.blockProjectile&&(n|=2),o.notPathable&&(n|=4),o.hasElevation&&(n|=8),(o.forceUse||o.multiUse)&&(n|=16),o.pickupable&&(n|=32),o.notMoveable||(n|=64),o.stackable&&(n|=128),o.onTop&&(n|=8192),(o.writable||o.writableOnce)&&(n|=16384),o.rotateable&&(n|=32768),o.hangable&&(n|=65536),o.hookSouth&&(n|=1<<17),o.hookEast&&(n|=1<<18),o.chargeable&&(n|=1<<22),o.translucent&&(n|=1<<23),o.animateAlways&&(n|=1<<24),o.forceUse&&(n|=1<<26),n}function Ta(o,n){return o&-96985344|hm(n)}function Ba(o){return o.ground||o.groundBorder?1:o.container?2:o.splash?11:o.fluidContainer?12:0}function pm(o,n,i,l){for(let u=i;u>=n;u--){const m=o.things.get(u);m&&(m.id=u+1,o.things.set(u+1,m),o.things.delete(u))}const c=new Set;for(const u of l)c.add(u>=n?u+1:u);return c}function mm(o,n,i,l){for(let u=n+1;u<=i;u++){const m=o.things.get(u);m&&(m.id=u-1,o.things.set(u-1,m),o.things.delete(u))}const c=new Set;for(const u of l)u!==n&&c.add(u>n?u-1:u);return c}function Md(o,n,i){const l=o.itemCount+o.outfitCount+o.effectCount+o.distanceCount;let c,u;switch(n){case"item":o.itemCount++,c=o.itemCount,u=c;break;case"outfit":o.outfitCount++,c=o.itemCount+o.outfitCount,u=c;break;case"effect":o.effectCount++,c=o.itemCount+o.outfitCount+o.effectCount,u=c;break;case"distance":o.distanceCount++,c=o.itemCount+o.outfitCount+o.effectCount+o.distanceCount,u=c+1;break}const m=u<=l?pm(o,u,l,i):new Set(i);return m.add(c),{insertId:c,dirtyIds:m}}const H=nm((o,n)=>({objectData:null,spriteData:null,loaded:!1,loading:!1,error:null,dirty:!1,dirtyIds:new Set,undoStack:[],redoStack:[],spriteOverrides:new Map,dirtySpriteIds:new Set,itemDefinitions:new Map,clientToServerIds:new Map,definitionsLoaded:!1,spriteMapEntries:[],spriteMapLoaded:!1,sourceDir:null,sourceNames:{},sourceHandles:{},centerTab:"texture",activeCategory:"item",selectedThingId:null,selectedThingIds:new Set,searchQuery:"",filterGroup:-1,editVersion:0,focusSpriteId:null,importTileSize:1,copiedThing:null,loadFiles:async(i,l)=>{o({loading:!0,error:null});try{const c=um(i),u=await sm(l),m=dm(u);nr(),o({objectData:c,spriteData:m,loaded:!0,loading:!1,selectedThingId:100,selectedThingIds:new Set,activeCategory:"item",dirty:!1,dirtyIds:new Set,undoStack:[],redoStack:[],spriteOverrides:new Map,dirtySpriteIds:new Set,editVersion:0,focusSpriteId:null,copiedThing:null,...n().definitionsLoaded?{}:{itemDefinitions:new Map,clientToServerIds:new Map,definitionsLoaded:!1},...n().spriteMapLoaded?{}:{spriteMapEntries:[],spriteMapLoaded:!1}})}catch(c){o({error:c instanceof Error?c.message:String(c),loading:!1})}},loadDefinitions:i=>{const l=new Map,c=new Map;for(const[m,h]of Object.entries(i)){const p=parseInt(m,10);if(isNaN(p))continue;const x=h.id??p;l.set(p,{serverId:p,id:x,flags:h.flags??0,group:h.group??0,properties:h.properties?{...h.properties}:null}),(!c.has(x)||p===x)&&c.set(x,p)}o({itemDefinitions:l,clientToServerIds:c,definitionsLoaded:!0}),console.log(`[OB] Loaded ${l.size} definitions (by serverId), ${c.size} clientserver mappings`);const u=n().objectData;if(u){let m=0;for(const h of l.values()){const p=h.id??0;(p>u.itemCount||p<100)&&m++}m>0&&console.warn(`[OB]  ${m} definitions reference clientIds outside the .eobj range (100${u.itemCount}). These items will be invisible in-game.`)}},setSourceDir:(i,l)=>{o({sourceDir:i,sourceNames:{...n().sourceNames,...l}})},setSourceHandles:i=>{o({sourceHandles:{...n().sourceHandles,...i}})},setCenterTab:i=>o({centerTab:i}),setActiveCategory:i=>{const l=n().getCategoryRange(i);o({activeCategory:i,selectedThingId:l?l.start:null,selectedThingIds:new Set,searchQuery:"",filterGroup:-1})},setSelectedThingId:i=>o({selectedThingId:i,selectedThingIds:new Set}),toggleThingSelection:(i,l)=>{const c=n().selectedThingIds,u=new Set(c);if(l)for(const m of l)u.add(m);else u.has(i)?u.delete(i):u.add(i);o({selectedThingIds:u,selectedThingId:i})},clearThingSelection:()=>o({selectedThingIds:new Set}),setSearchQuery:i=>o({searchQuery:i}),setFilterGroup:i=>o({filterGroup:i}),reset:()=>{nr(),o({objectData:null,spriteData:null,loaded:!1,loading:!1,error:null,activeCategory:"item",selectedThingId:null,searchQuery:"",filterGroup:-1,dirty:!1,dirtyIds:new Set,undoStack:[],redoStack:[],spriteOverrides:new Map,dirtySpriteIds:new Set,editVersion:0,focusSpriteId:null,copiedThing:null,itemDefinitions:new Map,clientToServerIds:new Map,definitionsLoaded:!1,spriteMapEntries:[],spriteMapLoaded:!1,sourceHandles:{}})},updateItemDefinition:(i,l)=>{const{itemDefinitions:c,clientToServerIds:u,editVersion:m}=n(),h=u.get(i)??i,p=c.get(h),x={serverId:h,id:l.id??(p==null?void 0:p.id)??i,flags:l.flags??(p==null?void 0:p.flags)??0,group:l.group??(p==null?void 0:p.group)??0,properties:l.properties!==void 0?l.properties?{...(p==null?void 0:p.properties)??{},...l.properties}:null:p!=null&&p.properties?{...p.properties}:null},w=new Map(c);w.set(h,x);const y=new Map(u);y.has(i)||y.set(i,h),o({itemDefinitions:w,clientToServerIds:y,dirty:!0,editVersion:m+1})},updateThingFlags:(i,l)=>{const{objectData:c,undoStack:u,dirtyIds:m,editVersion:h,itemDefinitions:p}=n();if(!c)return;const x=c.things.get(i);if(!x)return;const w={...x.flags};x.flags=l,x.rawBytes=void 0;const y=new Set(m);if(y.add(i),x.category==="item"){const{clientToServerIds:S}=n(),b=S.get(i)??i,_=p.get(b),O=(_==null?void 0:_.flags)??0,I=Ta(O,l),F=Ba(l),D=_!=null&&_.properties?{..._.properties}:{};l.ground&&l.groundSpeed!=null&&l.groundSpeed!==100?D.friction=l.groundSpeed:delete D.friction;const L={serverId:b,id:(_==null?void 0:_.id)??i,flags:I,group:F,properties:Object.keys(D).length>0?D:null},A=new Map(p);A.set(b,L),o({dirty:!0,dirtyIds:y,undoStack:[...u,{thingId:i,oldFlags:w,newFlags:{...l}}],redoStack:[],editVersion:h+1,itemDefinitions:A})}else o({dirty:!0,dirtyIds:y,undoStack:[...u,{thingId:i,oldFlags:w,newFlags:{...l}}],redoStack:[],editVersion:h+1})},undo:()=>{const{objectData:i,undoStack:l,redoStack:c,editVersion:u,itemDefinitions:m}=n();if(!i||l.length===0)return;const h=l[l.length-1],p=i.things.get(h.thingId);if(p&&(p.flags={...h.oldFlags},p.category==="item")){const{clientToServerIds:x}=n(),w=x.get(h.thingId)??h.thingId,y=m.get(w),S=new Map(m);S.set(w,{serverId:w,id:(y==null?void 0:y.id)??h.thingId,flags:Ta((y==null?void 0:y.flags)??0,h.oldFlags),group:Ba(h.oldFlags),properties:y!=null&&y.properties?{...y.properties}:null}),o({undoStack:l.slice(0,-1),redoStack:[...c,h],editVersion:u+1,itemDefinitions:S});return}o({undoStack:l.slice(0,-1),redoStack:[...c,h],editVersion:u+1})},redo:()=>{const{objectData:i,undoStack:l,redoStack:c,editVersion:u,itemDefinitions:m}=n();if(!i||c.length===0)return;const h=c[c.length-1],p=i.things.get(h.thingId);if(p&&(p.flags={...h.newFlags},p.category==="item")){const{clientToServerIds:x}=n(),w=x.get(h.thingId)??h.thingId,y=m.get(w),S=new Map(m);S.set(w,{serverId:w,id:(y==null?void 0:y.id)??h.thingId,flags:Ta((y==null?void 0:y.flags)??0,h.newFlags),group:Ba(h.newFlags),properties:y!=null&&y.properties?{...y.properties}:null}),o({undoStack:[...l,h],redoStack:c.slice(0,-1),editVersion:u+1,itemDefinitions:S});return}o({undoStack:[...l,h],redoStack:c.slice(0,-1),editVersion:u+1})},replaceSprite:(i,l)=>{const{spriteOverrides:c,dirtySpriteIds:u,editVersion:m}=n(),h=new Map(c);h.set(i,l);const p=new Set(u);p.add(i),Na(i),o({dirty:!0,spriteOverrides:h,dirtySpriteIds:p,editVersion:m+1})},addSprite:i=>{const{spriteData:l,spriteOverrides:c,dirtySpriteIds:u,editVersion:m}=n();if(!l)return null;l.spriteCount++;const h=l.spriteCount,p=new Map(c);p.set(h,i);const x=new Set(u);return x.add(h),o({dirty:!0,spriteOverrides:p,dirtySpriteIds:x,editVersion:m+1}),h},deleteSprite:i=>{const{spriteOverrides:l,dirtySpriteIds:c,editVersion:u}=n();if(i<=0)return;const m=new ImageData(32,32),h=new Map(l);h.set(i,m);const p=new Set(c);p.add(i),Na(i),o({dirty:!0,spriteOverrides:h,dirtySpriteIds:p,editVersion:u+1})},deleteSprites:i=>{const{spriteOverrides:l,dirtySpriteIds:c,editVersion:u}=n();if(i.length===0)return;const m=new ImageData(32,32),h=new Map(l),p=new Set(c);for(const x of i)x<=0||(h.set(x,m),p.add(x),Na(x));o({dirty:!0,spriteOverrides:h,dirtySpriteIds:p,editVersion:u+1})},addThing:i=>{const{objectData:l,editVersion:c}=n();if(!l)return null;const{insertId:u,dirtyIds:m}=Md(l,i,n().dirtyIds),x={id:u,category:i,flags:{ground:!1,groundBorder:!1,onBottom:!1,onTop:!1,container:!1,stackable:!1,forceUse:!1,multiUse:!1,writable:!1,writableOnce:!1,fluidContainer:!1,splash:!1,notWalkable:!1,notMoveable:!1,blockProjectile:!1,notPathable:!1,pickupable:!1,hangable:!1,hookSouth:!1,hookEast:!1,rotateable:!1,hasLight:!1,dontHide:!1,translucent:!1,hasDisplacement:!1,hasElevation:!1,lyingCorpse:!1,animateAlways:!1,hasMinimapColor:!1,fullGround:!1,look:!1,cloth:!1,hasMarket:!1,usable:!1,wrapable:!1,unwrapable:!1,topEffect:!1,noMoveAnimation:!1,chargeable:!1},frameGroups:[{type:0,width:1,height:1,layers:1,patternX:1,patternY:1,patternZ:1,animationLength:1,asynchronous:0,nLoop:0,start:0,animationLengths:[{min:0,max:0}],sprites:[0]}]};l.things.set(u,x),m.add(u);const w={dirty:!0,dirtyIds:m,selectedThingId:u,editVersion:c+1};if(i==="item"&&n().definitionsLoaded){const{itemDefinitions:y,clientToServerIds:S}=n(),b=S.get(u);let _=0;for(const L of y.keys())L>_&&(_=L);const O=_+1,I={serverId:O,id:u,flags:0,group:0,properties:null},F=new Map(y);F.set(O,I);const D=new Map(S);D.set(u,O),w.itemDefinitions=F,w.clientToServerIds=D,b!=null?console.log(`[OB] Auto-created definition: serverId=${O} clientId=${u} (overriding stale mapping to serverId=${b})`):console.log(`[OB] Auto-created definition: serverId=${O} clientId=${u}`)}return o(w),u},removeThing:i=>{const{objectData:l,editVersion:c,activeCategory:u}=n();if(!l||!l.things.get(i))return;const h=n().getCategoryRange(u);if(!h)return;const p=h.end;if(i!==p)return;const x=l.itemCount+l.outfitCount+l.effectCount+l.distanceCount;switch(l.things.delete(i),u){case"item":l.itemCount--;break;case"outfit":l.outfitCount--;break;case"effect":l.effectCount--;break;case"distance":l.distanceCount--;break}const w=mm(l,i,x,n().dirtyIds),y=i>h.start?i-1:h.start;o({dirty:!0,dirtyIds:w,selectedThingId:l.things.has(y)?y:null,editVersion:c+1})},importThing:(i,l,c,u)=>{const{objectData:m,spriteData:h,editVersion:p,spriteOverrides:x,dirtySpriteIds:w}=n();if(!m||!h)return null;const{insertId:y,dirtyIds:S}=Md(m,i,n().dirtyIds),b=new Map(x),_=new Set(w),O=new Map;for(const[D,L]of u){if(D===0||O.has(D))continue;h.spriteCount++;const A=h.spriteCount;O.set(D,A),b.set(A,L),_.add(A)}const I=c.map((D,L)=>({...D,type:L,sprites:D.sprites.map(A=>A===0?0:O.get(A)??A),animationLengths:D.animationLengths.map(A=>({...A}))})),F={id:y,category:i,flags:{...l},frameGroups:I};return m.things.set(y,F),nr(),o({dirty:!0,dirtyIds:S,spriteOverrides:b,dirtySpriteIds:_,selectedThingId:y,activeCategory:i,editVersion:p+1}),y},replaceThing:(i,l,c,u)=>{const{objectData:m,spriteData:h,editVersion:p,spriteOverrides:x,dirtySpriteIds:w}=n();if(!m||!h)return!1;const y=m.things.get(i);if(!y)return!1;const S=new Map(x),b=new Set(w),_=new Map;for(const[D,L]of u){if(D===0||_.has(D))continue;h.spriteCount++;const A=h.spriteCount;_.set(D,A),S.set(A,L),b.add(A)}const O=c.map((D,L)=>({...D,type:L,sprites:D.sprites.map(A=>A===0?0:_.get(A)??A),animationLengths:D.animationLengths.map(A=>({...A}))})),I={id:i,category:y.category,flags:{...l},frameGroups:O};m.things.set(i,I);const F=new Set(n().dirtyIds);return F.add(i),nr(),o({dirty:!0,dirtyIds:F,spriteOverrides:S,dirtySpriteIds:b,editVersion:p+1}),!0},loadSpriteMap:i=>{const l=Array.isArray(i.items)?i.items:[];o({spriteMapEntries:l,spriteMapLoaded:!0}),console.log(`[OB] Loaded sprite map: ${l.length} entries`)},updateSpriteMapEntry:(i,l)=>{const c=[...n().spriteMapEntries];c[i]=l,o({spriteMapEntries:c,dirty:!0,editVersion:n().editVersion+1})},addSpriteMapEntry:i=>{const l=[i,...n().spriteMapEntries];o({spriteMapEntries:l,dirty:!0,editVersion:n().editVersion+1})},removeSpriteMapEntry:i=>{const l=n().spriteMapEntries.filter((c,u)=>u!==i);o({spriteMapEntries:l,dirty:!0,editVersion:n().editVersion+1})},exportSpriteMapJson:()=>JSON.stringify({items:n().spriteMapEntries},null,2),compactSpriteAtlas:()=>{const{objectData:i,spriteData:l,spriteOverrides:c,dirtySpriteIds:u,editVersion:m}=n();if(!i||!l)return null;const h=l.spriteCount,p=new Set;for(const L of i.things.values())for(const A of L.frameGroups)for(const Z of A.sprites)Z>0&&p.add(Z);const x=new Set;for(let L=1;L<=h;L++){if(p.has(L)){x.add(L);continue}const A=l.addresses.has(L),Z=c.get(L);if(Z){let P=!1;for(let Q=3;Q<Z.data.length;Q+=4)if(Z.data[Q]>0){P=!0;break}P&&x.add(L)}else A&&x.add(L)}const w=h-x.size;if(w===0)return{removed:0,oldCount:h,newCount:h};const y=new Map;let S=1;for(let L=1;L<=h;L++)x.has(L)&&(y.set(L,S),S++);const b=S-1,_=new Set;for(const L of i.things.values()){let A=!1;for(const Z of L.frameGroups)for(let P=0;P<Z.sprites.length;P++){const Q=Z.sprites[P];if(Q===0)continue;const J=y.get(Q);J!=null&&J!==Q?(Z.sprites[P]=J,A=!0):J==null&&(Z.sprites[P]=0,A=!0)}A&&(L.rawBytes=void 0,_.add(L.id))}const O=new Map;for(const[L,A]of c){const Z=y.get(L);Z!=null&&O.set(Z,A)}const I=new Set;for(const L of u){const A=y.get(L);A!=null&&I.add(A)}for(let L=1;L<=b;L++)I.add(L);const F=new Map;for(const[L,A]of l.addresses){const Z=y.get(L);Z!=null&&F.set(Z,A)}l.addresses=F,l.spriteCount=b;const D=new Set(n().dirtyIds);for(const L of _)D.add(L);return nr(),o({dirty:!0,dirtyIds:D,spriteOverrides:O,dirtySpriteIds:I,editVersion:m+1}),console.log(`[OB] Compacted sprite atlas: ${h}  ${b} (removed ${w} blank/unreferenced sprites)`),{removed:w,oldCount:h,newCount:b}},markClean:()=>{const i=n().objectData;if(i)for(const l of i.things.values())l.rawBytes=void 0;o({dirty:!1,dirtyIds:new Set,dirtySpriteIds:new Set,spriteOverrides:new Map})},getCategoryRange:i=>{const l=n().objectData;if(!l)return null;switch(i){case"item":return{start:100,end:l.itemCount};case"outfit":return{start:l.itemCount+1,end:l.itemCount+l.outfitCount};case"effect":return{start:l.itemCount+l.outfitCount+1,end:l.itemCount+l.outfitCount+l.effectCount};case"distance":return{start:l.itemCount+l.outfitCount+l.effectCount+1,end:l.itemCount+l.outfitCount+l.effectCount+l.distanceCount}}}}));function rr(o,n){return n<=o.itemCount?n:n<=o.itemCount+o.outfitCount?n-o.itemCount:n<=o.itemCount+o.outfitCount+o.effectCount?n-o.itemCount-o.outfitCount:n-o.itemCount-o.outfitCount-o.effectCount}function gm(o,n,i,l,c,u,m){var w;if(!o)return[];const h=c(n);if(!h)return[];const p=i.trim().toLowerCase(),x=[];for(let y=h.start;y<=h.end;y++){const S=o.things.get(y);if(S){if(l>=0&&m&&u){const b=m.get(y),_=b!=null?u.get(b):void 0;if(!_||_.group!==l)continue}if(p){let O=rr(o,y).toString().includes(p);if(!O&&m&&u){const I=m.get(y);if(I!=null){I.toString().includes(p)&&(O=!0);const F=u.get(I);!O&&((w=F==null?void 0:F.properties)!=null&&w.name)&&(O=F.properties.name.toLowerCase().includes(p))}}if(!O)continue}x.push(S)}}return x}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lf=(...o)=>o.filter((n,i,l)=>!!n&&n.trim()!==""&&l.indexOf(n)===i).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ym={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=V.forwardRef(({color:o="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:m,...h},p)=>V.createElement("svg",{ref:p,...ym,width:n,height:n,stroke:o,strokeWidth:l?Number(i)*24/Number(n):i,className:lf("lucide",c),...h},[...m.map(([x,w])=>V.createElement(x,w)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=(o,n)=>{const i=V.forwardRef(({className:l,...c},u)=>V.createElement(vm,{ref:u,iconNode:n,className:lf(`lucide-${xm(o)}`,l),...c}));return i.displayName=`${o}`,i};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=Ue("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=Ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=Ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=Ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=Ue("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=Ue("ClipboardPaste",[["path",{d:"M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z",key:"1pp7kr"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10",key:"2ik1ml"}],["path",{d:"m17 10 4 4-4 4",key:"vp2hj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=Ue("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=Ue("Crop",[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=Ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=Ue("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=Ue("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=Ue("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=Ue("Grid2x2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=Ue("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=Ue("ImageDown",[["path",{d:"M10.3 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10l-3.1-3.1a2 2 0 0 0-2.814.014L6 21",key:"9csbqa"}],["path",{d:"m14 19 3 3v-5.5",key:"9ldu5r"}],["path",{d:"m17 22 3-3",key:"1nkfve"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=Ue("ImageUp",[["path",{d:"M10.3 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10l-3.1-3.1a2 2 0 0 0-2.814.014L6 21",key:"9csbqa"}],["path",{d:"m14 19.5 3-3 3 3",key:"9vmjn0"}],["path",{d:"M17 22v-5.5",key:"1aa6fl"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=Ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=Ue("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=Ue("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=Ue("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=Ue("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=Ue("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=Ue("PinOff",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=Ue("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=Ue("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=Ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Um=Ue("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=Ue("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=Ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=Ue("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=Ue("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=Ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=Ue("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=Ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=Ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=Ue("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=Ue("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Ym="emperia-ob",Xm=2,Ni="dir-handles",Ti="file-handles",ff="last-source-dir",hf="last-session";function Ho(){return new Promise((o,n)=>{const i=indexedDB.open(Ym,Xm);i.onupgradeneeded=()=>{const l=i.result;l.objectStoreNames.contains(Ni)||l.createObjectStore(Ni),l.objectStoreNames.contains(Ti)||l.createObjectStore(Ti)},i.onsuccess=()=>o(i.result),i.onerror=()=>n(i.error)})}async function Km(o){try{const n=await Ho(),i=n.transaction(Ni,"readwrite");i.objectStore(Ni).put(o,ff),await new Promise((l,c)=>{i.oncomplete=()=>l(),i.onerror=()=>c(i.error)}),n.close()}catch(n){console.warn("[OB] Failed to save dir handle:",n)}}async function Qm(){try{const o=await Ho(),i=o.transaction(Ni,"readonly").objectStore(Ni).get(ff),l=await new Promise((c,u)=>{i.onsuccess=()=>c(i.result??null),i.onerror=()=>u(i.error)});return o.close(),l}catch(o){return console.warn("[OB] Failed to load dir handle:",o),null}}async function Zm(o){try{const n=await Ho(),i=n.transaction(Ti,"readwrite");i.objectStore(Ti).put(o,hf),await new Promise((l,c)=>{i.oncomplete=()=>l(),i.onerror=()=>c(i.error)}),n.close(),console.log("[OB] Saved session handles")}catch(n){console.warn("[OB] Failed to save session handles:",n)}}async function Od(){try{const o=await Ho(),i=o.transaction(Ti,"readonly").objectStore(Ti).get(hf),l=await new Promise((c,u)=>{i.onsuccess=()=>c(i.result??null),i.onerror=()=>u(i.error)});return o.close(),l}catch(o){return console.warn("[OB] Failed to load session handles:",o),null}}async function qm(o,n="readwrite"){const i={mode:n};return await o.queryPermission(i)==="granted"||await o.requestPermission(i)==="granted"}function Jm(){const o=H(N=>N.loadFiles),n=H(N=>N.loading),i=H(N=>N.error),[l,c]=V.useState(!1),u=H(N=>N.loadDefinitions),m=H(N=>N.loadSpriteMap),h=H(N=>N.setSourceDir),p=H(N=>N.setSourceHandles),x=V.useRef(null),w=V.useRef(null),[y,S]=V.useState(null),[b,_]=V.useState(null),[O,I]=V.useState(null),[F,D]=V.useState(null),L=V.useRef(null),A=V.useRef(null),Z=V.useRef(null),P=V.useRef({}),[Q,J]=V.useState(!1),[Se,Ce]=V.useState(null);V.useEffect(()=>{Qm().then(N=>{N&&(Z.current=N)}),Od().then(N=>{N&&(N.obj||N.spr)&&J(!0)})},[]);const fe=V.useCallback(N=>{Zm(N)},[]),me=V.useCallback(()=>{if(!(!x.current||!w.current)){if(L.current){try{const N=new TextDecoder().decode(L.current),ie=JSON.parse(N);u(ie)}catch(N){console.error("Failed to parse definitions JSON:",N)}L.current=null}if(A.current){try{const N=new TextDecoder().decode(A.current),ie=JSON.parse(N);m(ie)}catch(N){console.error("Failed to parse item-to-sprite JSON:",N)}A.current=null}o(x.current,w.current),(P.current.obj||P.current.spr)&&(fe(P.current),p(P.current))}},[o,u,m,fe,p]),K=V.useCallback(N=>{var C;const ie=(C=N.name.split(".").pop())==null?void 0:C.toLowerCase(),Y=new FileReader;Y.onload=W=>{var he;const oe=(he=W.target)==null?void 0:he.result;if(ie==="dat"||ie==="eobj")x.current=oe,S(N.name);else if(ie==="spr"||ie==="espr")w.current=oe,_(N.name);else if(ie==="json"){const xe=N.name.toLowerCase();xe.includes("item-to-sprite")||xe.includes("sprite-map")||xe.includes("spritemap")?(A.current=oe,D(N.name)):(L.current=oe,I(N.name))}me()},Y.readAsArrayBuffer(N)},[me]),ne=V.useCallback(async()=>{var N;if(typeof window.showDirectoryPicker=="function")try{const ie={mode:"readwrite"};Z.current&&(ie.startIn=Z.current);const Y=await window.showDirectoryPicker(ie),C={},W={dir:Y};for await(const[oe,he]of Y.entries()){if(he.kind!=="file")continue;const xe=(N=oe.split(".").pop())==null?void 0:N.toLowerCase();if((xe==="eobj"||xe==="dat")&&!C.obj){C.obj=oe,W.obj=he;const re=await he.getFile();x.current=await re.arrayBuffer(),S(oe)}else if((xe==="espr"||xe==="spr")&&!C.spr){C.spr=oe,W.spr=he;const re=await he.getFile();w.current=await re.arrayBuffer(),_(oe)}else if(xe==="json"&&oe.toLowerCase().includes("definition")&&!C.def){C.def=oe,W.def=he;const re=await he.getFile();L.current=await re.arrayBuffer(),I(oe)}else if(xe==="json"&&(oe.toLowerCase().includes("item-to-sprite")||oe.toLowerCase().includes("sprite-map"))&&!C.spriteMap){C.spriteMap=oe,W.spriteMap=he;const re=await he.getFile();A.current=await re.arrayBuffer(),D(oe)}}P.current=W,h(Y,C),Z.current=Y,Km(Y),console.log("[OB] Opened folder:",Y.name,C),me()}catch{}},[me,h]),ge=V.useCallback(async()=>{var xe,re,ve,Ie;Ce(null);const N=await Od();if(!N){Ce("No saved session found.");return}const ie=[];async function Y(z,ue){if(!z)return null;try{return await qm(z,"readwrite")?(await z.getFile()).arrayBuffer():(ie.push(ue),null)}catch(Ne){return console.warn(`[OB] Failed to read ${ue}:`,Ne),ie.push(ue),null}}const C=await Y(N.obj,"Objects"),W=await Y(N.spr,"Sprites"),oe=await Y(N.def,"Definitions"),he=await Y(N.spriteMap,"Sprite Map");if(!(ie.length>0&&(Ce(`Permission denied for: ${ie.join(", ")}. Click to retry.`),!C||!W))){if(!C||!W){Ce("Required files (objects + sprites) not found in saved session.");return}if(oe)try{const z=new TextDecoder().decode(oe);u(JSON.parse(z))}catch(z){console.error("Failed to parse definitions:",z)}if(he)try{const z=new TextDecoder().decode(he);m(JSON.parse(z))}catch(z){console.error("Failed to parse sprite map:",z)}if(p({obj:N.obj,spr:N.spr,def:N.def,spriteMap:N.spriteMap}),N.dir){const z={};N.obj&&(z.obj=N.obj.name),N.spr&&(z.spr=N.spr.name),N.def&&(z.def=N.def.name),N.spriteMap&&(z.spriteMap=N.spriteMap.name),h(N.dir,z)}S(((xe=N.obj)==null?void 0:xe.name)??null),_(((re=N.spr)==null?void 0:re.name)??null),I(((ve=N.def)==null?void 0:ve.name)??null),D(((Ie=N.spriteMap)==null?void 0:Ie.name)??null),o(C,W)}},[o,u,m,p,h]),ae=V.useCallback(N=>{N.preventDefault(),c(!1),Array.from(N.dataTransfer.files).forEach(K)},[K]),ce=V.useCallback(N=>{Array.from(N.target.files||[]).forEach(ie=>K(ie))},[K]);return f.jsx("div",{className:"h-full flex items-center justify-center bg-emperia-bg p-8",children:f.jsxs("div",{className:"max-w-lg w-full",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-emperia-text mb-2",children:"Emperia Object Builder"}),f.jsx("p",{className:"text-emperia-muted text-sm",children:"v1.0.0  Web Edition"})]}),f.jsxs("div",{onDragOver:N=>{N.preventDefault(),c(!0)},onDragLeave:()=>c(!1),onDrop:ae,className:`
            border-2 border-dashed rounded-xl p-12 text-center cursor-pointer
            transition-all duration-200
            ${l?"border-emperia-accent bg-emperia-accent/10":"border-emperia-border hover:border-emperia-muted bg-emperia-surface"}
          `,onClick:()=>{var N;return(N=document.getElementById("file-input"))==null?void 0:N.click()},children:[f.jsx("input",{id:"file-input",type:"file",multiple:!0,accept:".dat,.spr,.eobj,.espr,.json",className:"hidden",onChange:ce}),n?f.jsxs("div",{className:"flex flex-col items-center gap-3",children:[f.jsx(jm,{className:"w-12 h-12 text-emperia-accent animate-spin"}),f.jsx("p",{className:"text-emperia-text",children:"Loading files"})]}):f.jsxs("div",{className:"flex flex-col items-center gap-3",children:[f.jsx(df,{className:"w-12 h-12 text-emperia-muted"}),f.jsx("p",{className:"text-emperia-text font-medium",children:"Drop your files here"}),f.jsxs("p",{className:"text-emperia-muted text-sm",children:["Drag & drop ",f.jsx("code",{className:"text-emperia-accent",children:".eobj"})," + ",f.jsx("code",{className:"text-emperia-accent",children:".espr"})," files",f.jsx("br",{}),"or legacy ",f.jsx("code",{className:"text-emperia-accent",children:".dat"})," + ",f.jsx("code",{className:"text-emperia-accent",children:".spr"}),f.jsx("br",{}),f.jsxs("span",{className:"text-emperia-muted/60",children:["+ optional ",f.jsx("code",{className:"text-emperia-accent",children:"definitions.json"})," & ",f.jsx("code",{className:"text-emperia-accent",children:"item-to-sprite.json"})]})]})]})]}),typeof window.showDirectoryPicker=="function"&&f.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2",children:[f.jsxs("div",{className:"flex items-center gap-3 text-emperia-muted/40 text-xs w-full",children:[f.jsx("div",{className:"flex-1 h-px bg-emperia-border/40"}),f.jsx("span",{children:"or"}),f.jsx("div",{className:"flex-1 h-px bg-emperia-border/40"})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("button",{onClick:ne,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-emperia-accent/10 border border-emperia-accent/30 text-emperia-accent hover:bg-emperia-accent/20 transition-colors text-sm font-medium",children:[f.jsx(uf,{className:"w-4 h-4"}),"Open Folder"]}),Q&&f.jsxs("button",{onClick:ge,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-green-500/10 border border-green-500/30 text-green-400 hover:bg-green-500/20 transition-colors text-sm font-medium",children:[f.jsx(zm,{className:"w-4 h-4"}),"Reload Last Session"]})]}),f.jsxs("p",{className:"text-emperia-muted/50 text-[10px] text-center",children:["Auto-detects files & saves directly back on compile",Q&&f.jsx("span",{className:"text-green-400/50",children:"  Previous session available"})]}),Se&&f.jsx("p",{className:"text-red-400 text-[10px] text-center",children:Se})]}),f.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 justify-center text-xs",children:[f.jsxs("div",{className:`flex items-center gap-1.5 ${y?"text-green-400":"text-emperia-muted"}`,children:[f.jsx("div",{className:`w-2 h-2 rounded-full ${y?"bg-green-400":"bg-emperia-border"}`}),y||"Objects (.eobj / .dat)"]}),f.jsxs("div",{className:`flex items-center gap-1.5 ${b?"text-green-400":"text-emperia-muted"}`,children:[f.jsx("div",{className:`w-2 h-2 rounded-full ${b?"bg-green-400":"bg-emperia-border"}`}),b||"Sprites (.espr / .spr)"]}),f.jsxs("div",{className:`flex items-center gap-1.5 ${O?"text-green-400":"text-emperia-muted/50"}`,children:[f.jsx("div",{className:`w-2 h-2 rounded-full ${O?"bg-green-400":"bg-emperia-border/50"}`}),O||"Definitions (.json)  optional"]}),f.jsxs("div",{className:`flex items-center gap-1.5 ${F?"text-green-400":"text-emperia-muted/50"}`,children:[f.jsx("div",{className:`w-2 h-2 rounded-full ${F?"bg-green-400":"bg-emperia-border/50"}`}),F||"Sprite Map (.json)  optional"]})]}),i&&f.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-red-500/10 border border-red-500/30 flex items-start gap-2",children:[f.jsx(Dm,{className:"w-4 h-4 text-red-400 mt-0.5 shrink-0"}),f.jsx("p",{className:"text-red-300 text-sm",children:i})]})]})})}class pf{constructor(n=4096){$(this,"chunks",[]);$(this,"current");$(this,"pos",0);this.current=new Uint8Array(n)}ensure(n){if(this.pos+n<=this.current.length)return;this.chunks.push(this.current.slice(0,this.pos));const i=Math.max(this.current.length*2,n+1024);this.current=new Uint8Array(i),this.pos=0}writeUInt8(n){this.ensure(1),this.current[this.pos++]=n&255}writeInt8(n){this.ensure(1),this.current[this.pos++]=n&255}writeUInt16(n){this.ensure(2),this.current[this.pos++]=n&255,this.current[this.pos++]=n>>8&255}writeUInt32(n){this.ensure(4),this.current[this.pos++]=n&255,this.current[this.pos++]=n>>8&255,this.current[this.pos++]=n>>16&255,this.current[this.pos++]=n>>24&255}writeBytes(n){this.ensure(n.length),this.current.set(n,this.pos),this.pos+=n.length}writeString(n){const i=new TextEncoder().encode(n);this.writeUInt16(i.length),this.ensure(i.length),this.current.set(i,this.pos),this.pos+=i.length}toArrayBuffer(){this.chunks.push(this.current.slice(0,this.pos));const n=this.chunks.reduce((c,u)=>c+u.length,0),i=new Uint8Array(n);let l=0;for(const c of this.chunks)i.set(c,l),l+=c.length;return this.chunks=[],this.current=new Uint8Array(4096),this.pos=0,i.buffer}}const Pe={ThingAttrGround:0,ThingAttrGroundBorder:1,ThingAttrOnBottom:2,ThingAttrOnTop:3,ThingAttrContainer:4,ThingAttrStackable:5,ThingAttrForceUse:6,ThingAttrMultiUse:7,ThingAttrWritable:8,ThingAttrWritableOnce:9,ThingAttrFluidContainer:10,ThingAttrSplash:11,ThingAttrNotWalkable:12,ThingAttrNotMoveable:13,ThingAttrBlockProjectile:14,ThingAttrNotPathable:15,ThingAttrPickupable:16,ThingAttrHangable:17,ThingAttrHookSouth:18,ThingAttrHookEast:19,ThingAttrRotateable:20,ThingAttrLight:21,ThingAttrDontHide:22,ThingAttrTranslucent:23,ThingAttrDisplacement:24,ThingAttrElevation:25,ThingAttrLyingCorpse:26,ThingAttrAnimateAlways:27,ThingAttrMinimapColor:28,ThingAttrLensHelp:29,ThingAttrFullGround:30,ThingAttrLook:31,ThingAttrCloth:32,ThingAttrMarket:33,ThingAttrUsable:34,ThingAttrWrapable:35,ThingAttrUnwrapable:36,ThingAttrTopEffect:37,ThingAttrNoMoveAnimation:253,ThingAttrChargeable:254,ThingAttrLast:255};function e0(o,n,i){const l=c=>{if(i>=1e3){if(c===Pe.ThingAttrNoMoveAnimation){o.writeUInt8(16);return}if(c===Pe.ThingAttrChargeable){o.writeUInt8(Pe.ThingAttrChargeable+1);return}if(c>=16){o.writeUInt8(c+1);return}}o.writeUInt8(c)};n.ground&&(l(Pe.ThingAttrGround),o.writeUInt16(n.groundSpeed??0)),n.groundBorder&&l(Pe.ThingAttrGroundBorder),n.onBottom&&l(Pe.ThingAttrOnBottom),n.onTop&&l(Pe.ThingAttrOnTop),n.container&&l(Pe.ThingAttrContainer),n.stackable&&l(Pe.ThingAttrStackable),n.forceUse&&l(Pe.ThingAttrForceUse),n.multiUse&&l(Pe.ThingAttrMultiUse),n.writable&&(l(Pe.ThingAttrWritable),o.writeUInt16(n.writableMaxLen??0)),n.writableOnce&&(l(Pe.ThingAttrWritableOnce),o.writeUInt16(n.writableOnceMaxLen??0)),n.fluidContainer&&l(Pe.ThingAttrFluidContainer),n.splash&&l(Pe.ThingAttrSplash),n.notWalkable&&l(Pe.ThingAttrNotWalkable),n.notMoveable&&l(Pe.ThingAttrNotMoveable),n.blockProjectile&&l(Pe.ThingAttrBlockProjectile),n.notPathable&&l(Pe.ThingAttrNotPathable),n.pickupable&&l(Pe.ThingAttrPickupable),n.hangable&&l(Pe.ThingAttrHangable),n.hookSouth&&l(Pe.ThingAttrHookSouth),n.hookEast&&l(Pe.ThingAttrHookEast),n.rotateable&&l(Pe.ThingAttrRotateable),n.hasLight&&(l(Pe.ThingAttrLight),o.writeUInt16(n.lightLevel??0),o.writeUInt16(n.lightColor??0)),n.dontHide&&l(Pe.ThingAttrDontHide),n.translucent&&l(Pe.ThingAttrTranslucent),n.hasDisplacement&&(l(Pe.ThingAttrDisplacement),i>=755&&(o.writeUInt16((n.displacementX??0)&65535),o.writeUInt16((n.displacementY??0)&65535))),n.hasElevation&&(l(Pe.ThingAttrElevation),o.writeUInt16(n.elevation??0)),n.lyingCorpse&&l(Pe.ThingAttrLyingCorpse),n.animateAlways&&l(Pe.ThingAttrAnimateAlways),n.hasMinimapColor&&(l(Pe.ThingAttrMinimapColor),o.writeUInt16(n.minimapColor??0)),n.lensHelp!=null&&(l(Pe.ThingAttrLensHelp),o.writeUInt16(n.lensHelp)),n.fullGround&&l(Pe.ThingAttrFullGround),n.look&&l(Pe.ThingAttrLook),n.cloth&&(l(Pe.ThingAttrCloth),o.writeUInt16(n.clothSlot??0)),n.hasMarket&&(l(Pe.ThingAttrMarket),o.writeUInt16(n.marketCategory??0),o.writeUInt16(n.marketTradeAs??0),o.writeUInt16(n.marketShowAs??0),o.writeString(n.marketName??""),o.writeUInt16(n.marketRestrictVocation??0),o.writeUInt16(n.marketRequiredLevel??0)),n.usable&&(l(Pe.ThingAttrUsable),o.writeUInt16(n.usableActionId??0)),n.wrapable&&l(Pe.ThingAttrWrapable),n.unwrapable&&l(Pe.ThingAttrUnwrapable),n.topEffect&&l(Pe.ThingAttrTopEffect),n.noMoveAnimation&&l(Pe.ThingAttrNoMoveAnimation),n.chargeable&&l(Pe.ThingAttrChargeable),o.writeUInt8(Pe.ThingAttrLast)}function t0(o,n,i,l){if(l&&o.writeUInt8(n.type),o.writeUInt8(n.width),o.writeUInt8(n.height),(n.width>1||n.height>1)&&o.writeUInt8(Math.max(n.width,n.height)),o.writeUInt8(n.layers),o.writeUInt8(n.patternX),o.writeUInt8(n.patternY),i>=755&&o.writeUInt8(n.patternZ),o.writeUInt8(n.animationLength),n.animationLength>1&&i>=1050){o.writeUInt8(n.asynchronous),o.writeUInt32(n.nLoop),o.writeUInt8(n.start&255);for(let c=0;c<n.animationLength;c++){const u=n.animationLengths[c]??{min:100,max:100};o.writeUInt32(u.min),o.writeUInt32(u.max)}}for(const c of n.sprites)i>=960?o.writeUInt32(c):o.writeUInt16(c)}function n0(o,n){if(!n||n.size===0){console.log("[OB] Compile: no edits, returning original buffer");const w=o.originalBuffer.slice(0),y=new Uint8Array(w);if(y.length>=qr&&Ya(y)){const S=o.version>=960,b=o.version>=960,_=o.version>=1050,O=o.version>=1050;let I=0;S&&(I|=1),b&&(I|=2),_&&(I|=4),O&&(I|=8),y[15]=I}return w}console.log(`[OB] Compile: rebuilding with ${n.size} edited thing(s)`);const i=new pf(1024*1024),l=new Uint8Array(o.originalBuffer.slice(0,qr)),c=o.version>=960,u=o.version>=960,m=o.version>=1050,h=o.version>=1050;let p=0;c&&(p|=1),u&&(p|=2),m&&(p|=4),h&&(p|=8),l[15]=p,i.writeBytes(l),i.writeUInt16(o.itemCount),i.writeUInt16(o.outfitCount),i.writeUInt16(o.effectCount),i.writeUInt16(o.distanceCount);const x=o.itemCount+o.outfitCount+o.effectCount+o.distanceCount;for(let w=100;w<=x;w++){const y=o.things.get(w);if(!y){i.writeUInt8(Pe.ThingAttrLast),i.writeUInt8(1),i.writeUInt8(1),i.writeUInt8(1),i.writeUInt8(1),i.writeUInt8(1),o.version>=755&&i.writeUInt8(1),i.writeUInt8(1),o.version>=960?i.writeUInt32(0):i.writeUInt16(0);continue}if(y.rawBytes&&!n.has(w)){i.writeBytes(y.rawBytes);continue}y.category==="outfit"&&y.flags.hasDisplacement&&console.log(`[OB] Writing outfit #${w} displacement: x=${y.flags.displacementX}, y=${y.flags.displacementY}`),e0(i,y.flags,o.version);const S=y.category==="outfit",b=o.version>=1050&&S;b&&i.writeUInt8(y.frameGroups.length);for(const _ of y.frameGroups)t0(i,_,o.version,b)}return i.toArrayBuffer()}const Ud=32,Eo=Ud*Ud;function r0(o){const n=new Uint32Array(o.data.buffer),i=[];let l=0;for(;l<Eo;){let h=0;for(;l+h<Eo&&!((n[l+h]>>24&255)>0);)h++;let p=l+h,x=0;for(;p+x<Eo&&(n[p+x]>>24&255)!==0;)x++;if(h>0&&x===0&&l+h>=Eo)break;const w=new Uint8Array(4+x*4),y=new DataView(w.buffer);y.setUint16(0,h,!0),y.setUint16(2,x,!0);for(let S=0;S<x;S++){const b=n[p+S];w[4+S*4+0]=b&255,w[4+S*4+1]=b>>8&255,w[4+S*4+2]=b>>16&255,w[4+S*4+3]=b>>24&255}i.push(w),l=p+x}const c=i.reduce((h,p)=>h+p.length,0),u=new Uint8Array(5+c);u[0]=255,u[1]=0,u[2]=255,u[3]=c&255,u[4]=c>>8&255;let m=5;for(const h of i)u.set(h,m),m+=h.length;return u}function mf(o){let n=0;return o>=960&&(n|=1),o>=960&&(n|=2),o>=1050&&(n|=4),o>=1050&&(n|=8),n}function i0(o,n){const i=new Uint8Array(o);if(i.length>=qr&&Ya(i)){const l=mf(n);if(i[15]!==l){const c=o.slice(0);return new Uint8Array(c)[15]=l,c}}return o.slice(0)}function s0(o,n){if(!n||n.size===0)return console.log("[OB] Sprite compile: no edits, returning original buffer"),i0(o.originalBuffer,o.version);console.log(`[OB] Sprite compile: rebuilding with ${n.size} modified sprite(s)`);const i=new Map;for(const[S,b]of n)i.set(S,r0(b));const l=new Map;for(let S=1;S<=o.spriteCount;S++){const b=i.get(S);if(b)l.set(S,b);else{const _=o.addresses.get(S);if(_!==void 0){const O=o.buffer,I=O[_+3]+(O[_+4]<<8);l.set(S,O.slice(_,_+5+I))}}}const c=qr,u=o.version>760?4:2,m=o.spriteCount*4,h=c+u+m,p=new Map;let x=h;for(let S=1;S<=o.spriteCount;S++){const b=l.get(S);b&&(p.set(S,x),x+=b.length)}const w=new pf(x+1024),y=mf(o.version);for(let S=0;S<Fo.length;S++)w.writeUInt8(Fo[S]);w.writeUInt8(Ro.SPRITE_DATA),w.writeUInt16(1),w.writeUInt32(o.version),w.writeUInt8(y),w.writeUInt32(0),o.version>760?w.writeUInt32(o.spriteCount):w.writeUInt16(o.spriteCount);for(let S=1;S<=o.spriteCount;S++)w.writeUInt32(p.get(S)??0);for(let S=1;S<=o.spriteCount;S++){const b=l.get(S);b&&w.writeBytes(b)}return w.toArrayBuffer()}function o0(){const o=H(x=>x.objectData);H(x=>x.spriteData);const n=H(x=>x.reset),i=H(x=>x.dirty),l=H(x=>x.undo),c=H(x=>x.redo),u=H(x=>x.undoStack),m=H(x=>x.redoStack),h=H(x=>x.markClean);H(x=>x.dirtyIds),V.useEffect(()=>{const x=w=>{i&&w.preventDefault()};return window.addEventListener("beforeunload",x),()=>window.removeEventListener("beforeunload",x)},[i]);const p=async()=>{const{objectData:x,spriteData:w,dirtyIds:y,spriteOverrides:S,itemDefinitions:b,sourceDir:_,sourceNames:O,sourceHandles:I}=H.getState();if(!x||!w)return;async function F(Q,J,Se,Ce){if(J)try{const fe=await J.createWritable();await fe.write(Q),await fe.close();return}catch(fe){console.warn(`[OB] Failed to write via file handle (${J.name}), trying folder fallback:`,fe)}if(_&&Se)try{const me=await(await _.getFileHandle(Se,{create:!0})).createWritable();await me.write(Q),await me.close();return}catch(fe){console.warn(`[OB] Failed to write ${Se} to folder, falling back to download:`,fe)}zd(Q,Ce)}console.log(`[OB] Compiling: ${y.size} dirty thing(s), ${S.size} sprite override(s)`);const D=new Set;for(let Q=100;Q<=x.itemCount+x.outfitCount+x.effectCount+x.distanceCount;Q++)D.add(Q);const L=n0(x,D);await F(L,I.obj,O.obj,"emperia.eobj"),x.originalBuffer=L;const A=s0(w,S),Z=await im(A);await F(Z,I.spr,O.spr,"emperia.espr"),w.originalBuffer=A;{const Q=Array.from(b.keys()).sort((Ce,fe)=>Ce-fe),J={};for(const Ce of Q){const fe=b.get(Ce);let me=null;if(fe.properties){me={};for(const[ae,ce]of Object.entries(fe.properties))ce!=null&&ce!==""&&(me[ae]=ce);Object.keys(me).length===0&&(me=null)}const K=fe.id??Ce,ne=x.things.get(K);if((ne==null?void 0:ne.category)==="item"&&ne.flags.ground){const ae=ne.flags.groundSpeed??100;ae!==100?(me=me??{},me.friction=ae):me&&(delete me.friction,Object.keys(me).length===0&&(me=null))}const ge={};fe.id!=null&&(ge.id=fe.id),ge.flags=fe.flags,ge.group=fe.group,ge.properties=me,J[String(Ce)]=ge}const Se=JSON.stringify(J,null,4);await F(new TextEncoder().encode(Se).buffer,I.def,O.def,"definitions.json")}{const{spriteMapLoaded:Q,exportSpriteMapJson:J}=H.getState();if(Q){const Se=J();await F(new TextEncoder().encode(Se).buffer,I.spriteMap,O.spriteMap,"item-to-sprite.json")}}const P=JSON.stringify({version:1,features:{spriteDataSize:4096,transparency:!0,spriteSize:32,frameDurations:!0,extended:!0,frameGroups:!0},contentVersion:x.version,format:"emperia-asset-manifest",files:{sprites:"emperia.espr",objects:"emperia.eobj"}},null,2);zd(new TextEncoder().encode(P).buffer,"emperia.easset"),h(),_&&console.log("[OB] Saved to source folder:",_.name)};return V.useEffect(()=>{const x=w=>{(w.ctrlKey||w.metaKey)&&w.key==="z"&&!w.shiftKey&&(w.preventDefault(),l()),(w.ctrlKey||w.metaKey)&&(w.key==="y"||w.key==="z"&&w.shiftKey)&&(w.preventDefault(),c()),(w.ctrlKey||w.metaKey)&&w.key==="s"&&(w.preventDefault(),p())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)}),f.jsxs("div",{className:"h-10 flex items-center px-3 gap-2 bg-emperia-surface border-b border-emperia-border shrink-0",children:[f.jsx("span",{className:"text-sm font-bold text-emperia-text tracking-wide",children:"Emperia Object Builder"}),f.jsx("span",{className:"text-xs text-emperia-muted",children:"v1.0.0"}),i&&f.jsx("span",{title:"Unsaved changes",children:f.jsx(Sm,{className:"w-2 h-2 fill-amber-400 text-amber-400"})}),f.jsx("div",{className:"flex-1"}),o&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center gap-3 text-xs text-emperia-muted mr-2",children:[f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx(Im,{className:"w-3 h-3"}),"v",o.version]}),f.jsxs("span",{children:[o.things.size," objects"]})]}),f.jsx("button",{onClick:l,disabled:u.length===0,className:`p-1.5 rounded text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover
                       disabled:opacity-30 disabled:cursor-default transition-colors`,title:"Undo (Ctrl+Z)",children:f.jsx($m,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:c,disabled:m.length===0,className:`p-1.5 rounded text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover
                       disabled:opacity-30 disabled:cursor-default transition-colors`,title:"Redo (Ctrl+Y)",children:f.jsx(Um,{className:"w-3.5 h-3.5"})}),f.jsx("div",{className:"w-px h-5 bg-emperia-border mx-1"}),f.jsxs("button",{onClick:p,className:`flex items-center gap-1.5 px-2.5 py-1 rounded text-xs font-medium
                       bg-emperia-accent/20 text-emperia-accent hover:bg-emperia-accent/30
                       transition-colors`,title:"Compile and download .eobj + .espr",children:[f.jsx(Xa,{className:"w-3.5 h-3.5"}),"Compile"]})]}),f.jsxs("button",{onClick:n,className:`flex items-center gap-1.5 px-2 py-1 rounded text-xs
                   text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover
                   transition-colors`,children:[f.jsx(uf,{className:"w-3.5 h-3.5"}),"Open"]})]})}const ja=[];let Fa=null;function gf(){if(ja.length===0){Fa=null;return}const{buffer:o,filename:n}=ja.shift(),i=new Blob([o],{type:"application/octet-stream"}),l=URL.createObjectURL(i),c=document.createElement("a");c.href=l,c.download=n,c.click(),setTimeout(()=>URL.revokeObjectURL(l),1e3),Fa=window.setTimeout(gf,150)}function zd(o,n){ja.push({buffer:o,filename:n}),Fa==null&&gf()}function l0(o){let n=4294967295;for(let i=0;i<o.length;i++){n^=o[i];for(let l=0;l<8;l++)n=n>>>1^(n&1?3988292384:0)}return(n^4294967295)>>>0}function a0(o){const n=new TextEncoder,i=[],l=[];let c=0;for(const S of o){const b=n.encode(S.name),_=l0(S.data),O=S.data.length,I=new Uint8Array(30+b.length),F=new DataView(I.buffer);F.setUint32(0,67324752,!0),F.setUint16(4,20,!0),F.setUint16(6,0,!0),F.setUint16(8,0,!0),F.setUint16(10,0,!0),F.setUint16(12,0,!0),F.setUint32(14,_,!0),F.setUint32(18,O,!0),F.setUint32(22,O,!0),F.setUint16(26,b.length,!0),F.setUint16(28,0,!0),I.set(b,30),i.push(I),i.push(S.data);const D=new Uint8Array(46+b.length),L=new DataView(D.buffer);L.setUint32(0,33639248,!0),L.setUint16(4,20,!0),L.setUint16(6,20,!0),L.setUint16(8,0,!0),L.setUint16(10,0,!0),L.setUint16(12,0,!0),L.setUint16(14,0,!0),L.setUint32(16,_,!0),L.setUint32(20,O,!0),L.setUint32(24,O,!0),L.setUint16(28,b.length,!0),L.setUint16(30,0,!0),L.setUint16(32,0,!0),L.setUint16(34,0,!0),L.setUint16(36,0,!0),L.setUint32(38,32,!0),L.setUint32(42,c,!0),D.set(b,46),l.push(D),c+=I.length+S.data.length}const u=c;for(const S of l)i.push(S),c+=S.length;const m=c-u,h=new Uint8Array(22),p=new DataView(h.buffer);p.setUint32(0,101010256,!0),p.setUint16(4,0,!0),p.setUint16(6,0,!0),p.setUint16(8,o.length,!0),p.setUint16(10,o.length,!0),p.setUint32(12,m,!0),p.setUint32(16,u,!0),p.setUint16(20,0,!0),i.push(h);const x=i.reduce((S,b)=>S+b.length,0),w=new Uint8Array(x);let y=0;for(const S of i)w.set(S,y),y+=S.length;return w}const Go=document.createElement("canvas");Go.width=32;Go.height=32;const Hd=Go.getContext("2d");function c0(o){return Hd.clearRect(0,0,32,32),Hd.putImageData(o,0,0),new Promise(n=>{Go.toBlob(i=>{i.arrayBuffer().then(l=>n(new Uint8Array(l)))},"image/png")})}function u0(o){return o.replace(/[^a-zA-Z0-9_\-]/g,"_")}async function d0(o,n){var l;if(o.length===0)return;const i=[];for(const c of o){const u=n.objectData.things.get(c);if(!u)continue;const m=[];for(const y of u.frameGroups)for(const S of y.sprites)S!==0&&!m.includes(S)&&m.push(S);if(m.length===0)continue;const h=n.clientToServerIds.get(c),p=h!=null?n.itemDefinitions.get(h):void 0,x=(l=p==null?void 0:p.properties)==null?void 0:l.name,w=x?`${c}_${u0(x)}`:`${c}`;for(const y of m){const b=n.spriteOverrides.get(y)??Hn(n.spriteData,y);if(!b)continue;const _=await c0(b),O=m.length===1?`${w}.png`:`${w}_spr${y}.png`;i.push({name:O,data:_})}}if(i.length!==0)if(i.length===1)Gd(i[0].data,i[0].name,"image/png");else{const c=a0(i);Gd(c,"sprites_export.zip","application/zip")}}function Gd(o,n,i){const l=new Blob([o.buffer],{type:i}),c=URL.createObjectURL(l),u=document.createElement("a");u.href=c,u.download=n,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(c)}const f0={0:"None",1:"Ground",2:"Container",3:"Weapon",4:"Ammunition",5:"Armor",6:"Charges",7:"Teleport",9:"Write",10:"Write Once",11:"Fluid",12:"Splash"},h0=[{key:"item",label:"Items",icon:Pm},{key:"outfit",label:"Outfits",icon:Hm},{key:"effect",label:"Effects",icon:Gm},{key:"distance",label:"Distance",icon:wm}];function p0(){const o=H(A=>A.activeCategory),n=H(A=>A.setActiveCategory),i=H(A=>A.objectData),l=H(A=>A.searchQuery),c=H(A=>A.setSearchQuery),u=H(A=>A.selectedThingId),m=H(A=>A.addThing),h=H(A=>A.removeThing),p=H(A=>A.getCategoryRange),x=H(A=>A.filterGroup),w=H(A=>A.setFilterGroup),y=H(A=>A.definitionsLoaded),S=H(A=>A.selectedThingIds),b=H(A=>A.spriteData),_=H(A=>A.spriteOverrides),O=H(A=>A.itemDefinitions),I=H(A=>A.clientToServerIds);H(A=>A.editVersion);const F=S.size,D=async()=>{if(!i||!b)return;const A=F>0?Array.from(S):u!=null?[u]:[];A.length!==0&&await d0(A,{objectData:i,spriteData:b,spriteOverrides:_,itemDefinitions:O,clientToServerIds:I})},L=A=>{if(!i)return 0;switch(A){case"item":return i.itemCount-99;case"outfit":return i.outfitCount;case"effect":return i.effectCount;case"distance":return i.distanceCount}};return f.jsxs("div",{className:"shrink-0",children:[f.jsx("div",{className:"flex border-b border-emperia-border",children:h0.map(({key:A,label:Z,icon:P})=>f.jsxs("button",{onClick:()=>n(A),className:`
              flex-1 flex flex-col items-center gap-0.5 py-2 text-xs transition-colors
              ${o===A?"text-emperia-accent border-b-2 border-emperia-accent bg-emperia-accent/5":"text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover"}
            `,children:[f.jsx(P,{className:"w-4 h-4"}),f.jsx("span",{children:Z}),f.jsx("span",{className:"text-[10px] opacity-60",children:L(A)})]},A))}),f.jsxs("div",{className:"px-2 py-1.5 border-b border-emperia-border flex items-center gap-1",children:[f.jsxs("div",{className:"flex items-center gap-1.5 bg-emperia-surface rounded px-2 py-1 flex-1",children:[f.jsx(zo,{className:"w-3.5 h-3.5 text-emperia-muted shrink-0"}),f.jsx("input",{type:"text",placeholder:y?"Search by ID or name":"Search by ID",value:l,onChange:A=>c(A.target.value),className:"bg-transparent text-xs text-emperia-text placeholder-emperia-muted/50 outline-none w-full"}),F>0&&f.jsxs("span",{className:"text-[10px] text-emperia-accent font-medium shrink-0",children:[F," sel"]})]}),y&&o==="item"&&f.jsxs("select",{value:x,onChange:A=>w(parseInt(A.target.value,10)),className:"text-[10px] bg-emperia-surface border border-emperia-border rounded px-1 py-1 text-emperia-text outline-none cursor-pointer max-w-[80px]",title:"Filter by group",children:[f.jsx("option",{value:-1,children:"All"}),Object.entries(f0).map(([A,Z])=>f.jsx("option",{value:A,children:Z},A))]}),f.jsx("button",{onClick:D,disabled:!i||!b||F===0&&u==null,className:"p-1 rounded bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-blue-400 hover:border-blue-400/50 disabled:opacity-30 transition-colors",title:F>0?`Export ${F} selected sprites`:"Export selected sprite",children:f.jsx(Xa,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:()=>m(o),disabled:!i,className:"p-1 rounded bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-green-400 hover:border-green-400/50 disabled:opacity-30 transition-colors",title:`Add new ${o}`,children:f.jsx(Ka,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:()=>{if(!u||!i)return;const A=p(o);if(!A||u!==A.end)return;const Z=i?rr(i,u):u;confirm(`Remove ${o} #${Z}? Only the last entry can be removed.`)&&h(u)},disabled:!i||!u||(()=>{const A=p(o);return!A||u!==A.end})(),className:"p-1 rounded bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-red-400 hover:border-red-400/50 disabled:opacity-30 transition-colors",title:`Remove last ${o}`,children:f.jsx(Lm,{className:"w-3.5 h-3.5"})})]})]})}const Jn=40,$d=20;function m0(){const o=H(K=>K.objectData),n=H(K=>K.activeCategory),i=H(K=>K.searchQuery),l=H(K=>K.getCategoryRange),c=H(K=>K.selectedThingId),u=H(K=>K.setSelectedThingId),m=H(K=>K.selectedThingIds),h=H(K=>K.toggleThingSelection),p=H(K=>K.spriteData),x=H(K=>K.spriteOverrides),w=H(K=>K.editVersion),y=H(K=>K.filterGroup),S=H(K=>K.itemDefinitions),b=H(K=>K.clientToServerIds),_=V.useMemo(()=>gm(o,n,i,y,l,S,b),[o,n,i,y,l,S,b,w]),O=V.useRef(null),[I,F]=V.useState(0),[D,L]=V.useState(0),A=6,Z=Math.ceil(_.length/A),P=Z*Jn,Q=Math.max(0,Math.floor(I/Jn)-$d),J=Math.min(Z,Math.ceil((I+D)/Jn)+$d),Se=Q*A,Ce=Math.min(_.length,J*A),fe=_.slice(Se,Ce),me=V.useCallback(()=>{O.current&&F(O.current.scrollTop)},[]);return V.useEffect(()=>{const K=O.current;if(!K)return;const ne=new ResizeObserver(()=>L(K.clientHeight));return ne.observe(K),L(K.clientHeight),()=>ne.disconnect()},[]),V.useEffect(()=>{const K=ne=>{var N;if(!_.length||c==null)return;const ge=(N=ne.target)==null?void 0:N.tagName;if(ge==="INPUT"||ge==="TEXTAREA"||ge==="SELECT")return;const ae=_.findIndex(ie=>ie.id===c);if(ae<0)return;let ce=ae;switch(ne.key){case"ArrowRight":ce=Math.min(_.length-1,ae+1);break;case"ArrowLeft":ce=Math.max(0,ae-1);break;case"ArrowDown":ce=Math.min(_.length-1,ae+A);break;case"ArrowUp":ce=Math.max(0,ae-A);break;default:return}ce!==ae&&(ne.preventDefault(),u(_[ce].id))};return window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)},[_,c,u]),V.useEffect(()=>{if(c==null||!O.current)return;const K=_.findIndex(ce=>ce.id===c);if(K<0)return;const ge=Math.floor(K/A)*Jn,ae=O.current;(ge<ae.scrollTop||ge+Jn>ae.scrollTop+ae.clientHeight)&&(ae.scrollTop=Math.max(0,ge-ae.clientHeight/2+Jn/2))},[c,_]),f.jsx("div",{ref:O,onScroll:me,className:"flex-1 overflow-y-auto",children:f.jsx("div",{style:{height:P,position:"relative"},children:f.jsx("div",{style:{position:"absolute",top:Q*Jn,left:0,right:0,display:"grid",gridTemplateColumns:`repeat(${A}, 1fr)`},children:fe.map(K=>{var oe,he;const ne=((oe=K.frameGroups[0])==null?void 0:oe.sprites.find(xe=>xe>0))??0,ge=p?Uo(p,ne,x):null,ae=K.id===c,ce=o?rr(o,K.id):K.id,N=b==null?void 0:b.get(K.id),ie=N!=null?S==null?void 0:S.get(N):void 0,Y=(he=ie==null?void 0:ie.properties)==null?void 0:he.name,C=Y?`#${ce}  ${Y}`:`#${ce}`,W=m.has(K.id);return f.jsxs("button",{onClick:xe=>{if(xe.ctrlKey||xe.metaKey)h(K.id);else if(xe.shiftKey&&c!=null){const re=_.findIndex(Ie=>Ie.id===c),ve=_.findIndex(Ie=>Ie.id===K.id);if(re>=0&&ve>=0){const Ie=Math.min(re,ve),z=Math.max(re,ve),ue=_.slice(Ie,z+1).map(Ne=>Ne.id);h(K.id,ue)}}else u(K.id)},className:`
                  relative flex items-center justify-center
                  border transition-colors
                  ${ae?"bg-emperia-accent/20 border-emperia-accent":W?"bg-emperia-accent/10 border-emperia-accent/50":"border-transparent hover:bg-emperia-hover"}
                `,style:{width:Jn,height:Jn},title:C,children:[ge?f.jsx("img",{src:ge,alt:"",className:"w-8 h-8 pixelated",style:{imageRendering:"pixelated"}}):f.jsx("div",{className:"w-8 h-8 bg-emperia-border/30 rounded-sm"}),f.jsx("span",{className:"absolute bottom-0 right-0.5 text-[8px] text-emperia-muted/60 leading-none",children:ce})]},K.id)})})})})}const Qr=[16777215,12571903,12577279,12582911,12582889,12582868,12582847,13959103,15335359,16777151,16771519,16766143,16760767,16760788,16760809,16760831,15319039,13942783,12566527,14342874,9412543,9416639,9420735,9420719,9420703,9420687,10469263,11517839,12566415,12562319,12558223,12554127,12554143,12554159,12554175,11505599,10457023,9408447,11974326,6258623,9416639,6275007,6274975,6274943,6274911,8372063,10469215,12566367,12558175,12549983,12541791,12541823,12541855,12541887,10444735,8347583,6250431,9539985,4156095,4166847,4177855,4177812,4177770,4177727,6995775,9748287,12566335,12555327,12544575,12533567,12533610,12533652,12533695,9715647,6963135,4145087,7171437,22015,43775,65535,65450,65364,65280,5570304,11206400,16776960,16754944,16733440,16711680,16711765,16711849,16711934,11141375,5570815,255,4737096,16319,32703,49087,49023,48959,48896,4177664,8371968,12566272,12549888,12533504,12517376,12517439,12517503,12517567,8323263,4128959,191,2368548,10879,21887,32639,32597,32554,32512,2785024,5603072,8355584,8344576,8333824,8323072,8323114,8323156,8323199,5570687,2752639,127],Di=Qr.length,g0=4278255615,x0=4278190335,y0=4278255360,v0=4294901760;function La(o,n,i){const l=Qr[Math.max(0,Math.min(Di-1,i.head))],c=Qr[Math.max(0,Math.min(Di-1,i.body))],u=Qr[Math.max(0,Math.min(Di-1,i.legs))],m=Qr[Math.max(0,Math.min(Di-1,i.feet))],h=new Uint32Array(n.data.buffer),p=o.data;for(let x=0;x<h.length;x++){const w=4*x;let y;switch(h[x]){case g0:y=l;break;case x0:y=c;break;case y0:y=u;break;case v0:y=m;break;default:continue}p[w+0]=p[w+0]*(y>>0&255)/255,p[w+1]=p[w+1]*(y>>8&255)/255,p[w+2]=p[w+2]*(y>>16&255)/255}}function Wd(o){const n=Qr[Math.max(0,Math.min(Di-1,o))],i=n>>0&255,l=n>>8&255,c=n>>16&255;return`#${i.toString(16).padStart(2,"0")}${l.toString(16).padStart(2,"0")}${c.toString(16).padStart(2,"0")}`}function nn({label:o,value:n,onChange:i,min:l,max:c,readOnly:u,labelClassName:m}){return f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("span",{className:m??"text-[10px] text-emperia-muted",children:[o,":"]}),u?f.jsx("span",{className:"text-[10px] text-emperia-text font-mono w-14 text-right",children:n}):f.jsxs("div",{className:"flex items-center gap-0.5",children:[f.jsx("button",{onClick:()=>i==null?void 0:i(Math.max(l??0,n-1)),className:"w-4 h-4 flex items-center justify-center rounded bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-emperia-text text-[10px]",children:"-"}),f.jsx("input",{type:"number",value:n,min:l,max:c,onChange:h=>{const p=parseInt(h.target.value,10);isNaN(p)||i==null||i(Math.max(l??0,Math.min(c??9999,p)))},className:"w-10 px-1 py-0 bg-emperia-surface border border-emperia-border rounded text-[10px] text-emperia-text font-mono text-center outline-none focus:border-emperia-accent"}),f.jsx("button",{onClick:()=>i==null?void 0:i(Math.min(c??9999,n+1)),className:"w-4 h-4 flex items-center justify-center rounded bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-emperia-text text-[10px]",children:"+"})]})]})}function wn({onClick:o,disabled:n,children:i}){return f.jsx("button",{onClick:o,disabled:n,className:"w-5 h-5 flex items-center justify-center rounded bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-emperia-text text-[10px] disabled:opacity-30",children:i})}function er(o,n,i,l,c,u,m,h){return(((((n*o.patternZ+c)*o.patternY+l)*o.patternX+i)*o.layers+u)*o.height+h)*o.width+m}const In=4294967296,Vd=2147483647,Yd=-2147483648,Ci=268435455,w0=4294967295,xf=1073741823,Xd=192,Do=12,k0=114,S0=768,b0=4096,_0=2,Ia=[4294967295,-In],Ei=[0,0],C0=[1,0],Ao=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],Je=D0(),Ar=A0();function Me(o,n=0){const i=[];if(i[o-1]=void 0,n!==0)for(let l=0;l<o;l++)i[l]=n;return i}function yf(o,n,i,l,c){if(!(n<0||l<0||c<0||n+c>o.length||l+c>i.length))if(o===i&&n<l&&l<n+c)for(let u=c-1;u>=0;u--)i[l+u]=o[n+u];else for(let u=0;u<c;u++)i[l+u]=o[n+u]}function Gn(o,n){return Je[((o-n^-n)&2047)>>>2]}function gs(o,n){let i,l;for(n%=18446744073709552e3,o%=18446744073709552e3,i=n%In,l=Math.floor(o/In)*In,n=n-i+l,o=o-l+i;o<0;)o+=In,n-=In;for(;o>4294967295;)o-=In,n+=In;for(n=n%18446744073709552e3;n>9223372032559809e3;)n-=18446744073709552e3;for(;n<-9223372036854776e3;)n+=18446744073709552e3;return[o,n]}function $n(o,n){return gs(o[0]+n[0],o[1]+n[1])}function vf(o,n){return gs(o[0]-n[0],o[1]-n[1])}function ir(o,n){if(o[0]==n[0]&&o[1]==n[1])return 0;const i=o[1]<0,l=n[1]<0;return i&&!l?-1:!i&&l?1:vf(o,n)[1]<0?-1:1}function Yt(o){return o[0]>=2147483648?~~Math.max(Math.min(o[0]-In,Vd),Yd):~~Math.max(Math.min(o[0],Vd),Yd)}function Zr(o){return o>=0?[o,0]:[o+In,-In]}function E0(o,n){if(n&=63,n<=30){const l=1<<n;return gs(Math.floor(o[0]/l),o[1]/l)}const i=(1<<30)*(1<<n-30);return gs(Math.floor(o[0]/i),o[1]/i)}function ze(o){for(let n=o.length-1;n>=0;--n)o[n]=1024}function Po(o){return o-=2,o<4?o:3}function Dr(o){return o<4?0:o<10?o-3:o-6}function zt(o){return{numBitLevels:o,models:Me(1<<o)}}function D0(){const o=[];for(let n=8;n>=0;--n){let i=1<<9-n-1,l=1<<9-n;for(let c=i;c<l;++c)o[c]=(n<<6)+(l-c<<6>>>9-n-1)}return o}function A0(){const o=[0,1];let n=2;for(let i=2;i<22;++i){let l=1<<(i>>1)-1;for(let c=0;c<l;++c,++n)o[n]=i}return o}class N0{constructor(n){$(this,"encoder",null);$(this,"decoder",null);$(this,"alive",0);$(this,"inBytesProcessed",[0,0]);$(this,"lzma");this.lzma=n}processChunk(){if(!this.alive)throw new Error("bad state");if(!this.encoder)throw new Error("No decoding");return this.lzma.codeOneBlock(),this.inBytesProcessed=this.encoder.processedInSize[0],this.encoder.finished[0]&&(this.lzma.releaseStreams(),this.alive=0),this.alive}}class Kd{constructor(n){$(this,"encoder",null);$(this,"decoder");$(this,"alive",0);$(this,"inBytesProcessed",[0,0]);this.decoder=n}processChunk(){if(!this.alive)throw new Error("Bad state");if(this.encoder)throw new Error("No encoding");const n=this.decoder.codeOneChunk();if(n===-1)throw new Error("Corrupted input");this.inBytesProcessed=this.decoder.nowPos64;const i=ir(this.decoder.outSize,Ei)>=0&&ir(this.decoder.nowPos64,this.decoder.outSize)>=0;return(n||i)&&(this.decoder.flush(),this.decoder.cleanup(),this.alive=0),this.alive}}class T0{constructor(n=null,i=4096){$(this,"buffer",null);$(this,"pos",0);$(this,"streamPos",0);$(this,"stream",null);$(this,"windowSize",0);$(this,"w",null);$(this,"buf",[]);this.w=n,this.stream=n,this.windowSize=i,this.buf=new Array(i),this.buffer=this.buf,this.pos=0,this.streamPos=0}copyBlock(n,i){if(this.buffer)for(let l=0;l<i;l++){let c=this.pos-n-1;c<0&&(c+=this.windowSize);const u=this.buffer[c];this.putByte(u)}}putByte(n){this.buffer&&(this.buffer[this.pos]=n,this.pos++,this.streamPos++,this.pos>=this.windowSize&&this.flush())}getByte(n){if(!this.buffer)return 0;let i=this.pos+n;return i<0?i+=this.windowSize:i>=this.windowSize&&(i-=this.windowSize),this.buffer[i]}flush(){if(this.w&&this.buffer&&this.pos>0){const n=this.buffer.slice(0,this.pos);this.w.write(n),this.pos=0}}isEmpty(){return this.streamPos===0}reset(){this.pos=0,this.streamPos=0,this.buffer&&this.buffer.fill(0)}}class B0{constructor(){$(this,"stream",null);$(this,"code",0);$(this,"rrange",0)}setStream(n){this.stream=n}init(){this.code=0,this.rrange=-1;for(let n=0;n<5;++n)this.code=this.code<<8|this.readFromStream()}decodeBit(n,i){let l,c=n[i];return l=(this.rrange>>>11)*c,(this.code^-2147483648)<(l^-2147483648)?(this.rrange=l,n[i]=c+(2048-c>>>5)<<16>>16,this.rrange&-16777216||(this.code=this.code<<8|this.readFromStream(),this.rrange<<=8),0):(this.rrange-=l,this.code-=l,n[i]=c-(c>>>5)<<16>>16,this.rrange&-16777216||(this.code=this.code<<8|this.readFromStream(),this.rrange<<=8),1)}decodeDirectBits(n){let i=0;for(let l=n;l!=0;l-=1){this.rrange>>>=1;let c=this.code-this.rrange>>>31;this.code-=this.rrange&c-1,i=i<<1|1-c,this.rrange&-16777216||(this.code=this.code<<8|this.readFromStream(),this.rrange<<=8)}return i}get currentCode(){return this.code}get currentRange(){return this.rrange}readFromStream(){if(!this.stream)return 0;if(this.stream.pos>=this.stream.count)return-1;let n;return this.stream.buf instanceof ArrayBuffer?n=new Uint8Array(this.stream.buf)[this.stream.pos++]:this.stream.buf instanceof Uint8Array?n=this.stream.buf[this.stream.pos++]:n=this.stream.buf[this.stream.pos++],n&255}}class I0{constructor(){$(this,"rangeDecoder");$(this,"outWindow");$(this,"state",0);$(this,"rep0",0);$(this,"rep1",0);$(this,"rep2",0);$(this,"rep3",0);$(this,"prevByte",0);$(this,"nowPos64",[0,0]);$(this,"outSize",[0,0]);$(this,"posStateMask",0);$(this,"dictSizeCheck",0);$(this,"matchDecoders",[]);$(this,"rep0LongDecoders",[]);$(this,"repDecoders",[]);$(this,"repG0Decoders",[]);$(this,"repG1Decoders",[]);$(this,"repG2Decoders",[]);$(this,"posDecoders",[]);$(this,"literalDecoder");$(this,"posSlotDecoders",[]);$(this,"lenDecoder");$(this,"repLenDecoder");$(this,"posAlignDecoder");$(this,"decoder");$(this,"encoder",null);$(this,"alive",0);$(this,"inBytesProcessed",[0,0]);this.rangeDecoder=new B0,this.outWindow=new T0(null,b0),this.matchDecoders=Me(Xd),this.rep0LongDecoders=Me(Xd),this.repDecoders=Me(Do),this.repG0Decoders=Me(Do),this.repG1Decoders=Me(Do),this.repG2Decoders=Me(Do),this.posDecoders=Me(k0),this.literalDecoder={coders:[],numPrevBits:0,numPosBits:0,posMask:0,init:()=>this.initLiteralDecoder()};for(let n=0;n<4;n++)this.posSlotDecoders[n]=zt(6);this.lenDecoder=this.createLenDecoder(),this.repLenDecoder=this.createLenDecoder(),this.posAlignDecoder=zt(4),this.decoder=this}get literalCoder(){return this.literalDecoder}createLenDecoder(){return{choice:Me(_0),lowCoder:[],midCoder:[],highCoder:zt(8),numPosStates:0}}setDecoderProperties(n){if(n.length<5)return!1;const i=n[0]%9,l=Math.floor(n[0]/9),c=l%5,u=Math.floor(l/5);if(u>4)return!1;this.literalDecoder.numPrevBits=i,this.literalDecoder.numPosBits=c,this.literalDecoder.posMask=(1<<c)-1,this.posStateMask=(1<<u)-1;let m=0;for(let p=0;p<4;p++){const x=n[1+p]&255;m+=x<<p*8}this.dictSizeCheck=Math.max(m,1),m>0&&(this.outWindow.windowSize=Math.max(m,4096),this.outWindow.buffer=Me(this.outWindow.windowSize));const h=1<<this.literalDecoder.numPrevBits+this.literalDecoder.numPosBits;this.literalDecoder.coders=[];for(let p=0;p<h;p++)this.literalDecoder.coders[p]={decoders:Me(S0)};this.lenDecoder.numPosStates=1<<u,this.repLenDecoder.numPosStates=1<<u,this.lenDecoder.lowCoder=[],this.lenDecoder.midCoder=[],this.repLenDecoder.lowCoder=[],this.repLenDecoder.midCoder=[];for(let p=0;p<1<<u;p++)this.lenDecoder.lowCoder[p]=zt(3),this.lenDecoder.midCoder[p]=zt(3),this.repLenDecoder.lowCoder[p]=zt(3),this.repLenDecoder.midCoder[p]=zt(3);return!0}copyBlock(n){const i=this.outWindow,l=this.rep0;let c=i.pos-l-1;for(c<0&&(c+=i.windowSize);n!=0;n-=1)c>=i.windowSize&&(c=0),i.buffer[i.pos]=i.buffer[c],i.pos+=1,c+=1,i.pos>=i.windowSize&&this.flush()}putByte(n){this.outWindow.buffer[this.outWindow.pos]=n,this.outWindow.pos+=1,this.outWindow.pos>=this.outWindow.windowSize&&this.flush()}getByte(n){const i=this.outWindow;let l=i.pos-n-1;return l<0&&(l+=i.windowSize),i.buffer[l]}getDecoder(n,i){const l=n&this.literalDecoder.posMask,c=(i&255)>>>8-this.literalDecoder.numPrevBits,u=(l<<this.literalDecoder.numPrevBits)+c;return this.literalDecoder.coders[u]}initLiteralDecoder(){let n=1<<this.literalDecoder.numPrevBits+this.literalDecoder.numPosBits;for(let i=0;i<n;++i)for(let l=0;l<this.literalDecoder.coders[i].decoders.length;l++)this.literalDecoder.coders[i].decoders[l]=1024}init(){this.outWindow.streamPos=0,this.outWindow.pos=0,ze(this.matchDecoders),ze(this.rep0LongDecoders),ze(this.repDecoders),ze(this.repG0Decoders),ze(this.repG1Decoders),ze(this.repG2Decoders),ze(this.posDecoders),this.initLiteralDecoder();for(let n=0;n<4;++n)ze(this.posSlotDecoders[n].models);this.initLenDecoder(this.lenDecoder),this.initLenDecoder(this.repLenDecoder),ze(this.posAlignDecoder.models),this.initRangeDecoder()}initLenDecoder(n){ze(n.choice);for(let i=0;i<n.numPosStates;++i)ze(n.lowCoder[i].models),ze(n.midCoder[i].models);ze(n.highCoder.models)}outWindowReleaseStream(){this.flush(),this.outWindow.stream=null}decodeBit(n,i){return this.rangeDecoder.decodeBit(n,i)}decodeDirectBits(n){return this.rangeDecoder.decodeDirectBits(n)}initRangeDecoder(){this.rangeDecoder.init()}rangeBitTreeDecoder(n){let i,l=1;for(i=n.numBitLevels;i!=0;i-=1)l=(l<<1)+this.decodeBit(n.models,l);return l-(1<<n.numBitLevels)}reverseDecode(n,i,l){let c=0;for(let u=0,m=1,h;u<l;++u)h=this.decodeBit(n,i+m),m<<=1,m+=h,c|=h<<u;return c}reverseDecodeAlignDecoder(){let n=0;for(let i=1,l=0,c;l<this.posAlignDecoder.numBitLevels;++l)c=this.decodeBit(this.posAlignDecoder.models,i),i<<=1,i+=c,n|=c<<l;return n}decodeNormalWithRangeDecoder(n){let i=1;do i=i<<1|this.decodeBit(n.decoders,i);while(i<256);return i<<24>>24}decodeWithMatchByteWithRangeDecoder(n,i){let l,c,u=1;do if(c=i>>7&1,i<<=1,l=this.decodeBit(n.decoders,(1+c<<8)+u),u=u<<1|l,c!=l){for(;u<256;)u=u<<1|this.decodeBit(n.decoders,u);break}while(u<256);return u<<24>>24}decodeLenWithRangeDecoder(n,i){if(!this.decodeBit(n.choice,0))return this.rangeBitTreeDecoder(n.lowCoder[i]);let l=8;return this.decodeBit(n.choice,1)?l+=8+this.rangeBitTreeDecoder(n.highCoder):l+=this.rangeBitTreeDecoder(n.midCoder[i]),l}codeOneChunk(){let n,i,l,c,u,m=Yt(this.nowPos64)&this.posStateMask;if(!this.decodeBit(this.matchDecoders,(this.state<<4)+m))n=this.getDecoder(Yt(this.nowPos64),this.prevByte),this.state<7?this.prevByte=this.decodeNormalWithRangeDecoder(n):this.prevByte=this.decodeWithMatchByteWithRangeDecoder(n,this.getByte(this.rep0)),this.putByte(this.prevByte),this.state=Dr(this.state),this.nowPos64=$n(this.nowPos64,[1,0]);else{if(this.decodeBit(this.repDecoders,this.state))l=0,this.decodeBit(this.repG0Decoders,this.state)?(this.decodeBit(this.repG1Decoders,this.state)?(this.decodeBit(this.repG2Decoders,this.state)?(i=this.rep3,this.rep3=this.rep2):i=this.rep2,this.rep2=this.rep1):i=this.rep1,this.rep1=this.rep0,this.rep0=i):this.decodeBit(this.rep0LongDecoders,(this.state<<4)+m)||(this.state=this.state<7?9:11,l=1),l||(l=this.decodeLenWithRangeDecoder(this.repLenDecoder,m)+2,this.state=this.state<7?8:11);else if(this.rep3=this.rep2,this.rep2=this.rep1,this.rep1=this.rep0,l=2+this.decodeLenWithRangeDecoder(this.lenDecoder,m),this.state=this.state<7?7:10,u=this.rangeBitTreeDecoder(this.posSlotDecoders[Po(l)]),u>=4){if(c=(u>>1)-1,this.rep0=(2|u&1)<<c,u<14)this.rep0+=this.reverseDecode(this.posDecoders,this.rep0-u-1,c);else if(this.rep0+=this.decodeDirectBits(c-4)<<4,this.rep0+=this.reverseDecodeAlignDecoder(),this.rep0<0)return this.rep0==-1?1:-1}else this.rep0=u;if(ir([this.rep0,0],this.nowPos64)>=0||this.rep0>=this.dictSizeCheck)return-1;this.copyBlock(l),this.nowPos64=$n(this.nowPos64,[l,0]),this.prevByte=this.getByte(0)}return 0}setupForDecoding(n,i,l){this.rangeDecoder.setStream(n),this.outSize=i,this.outWindowReleaseStream(),this.outWindow.stream=l,this.init(),this.state=0,this.rep0=0,this.rep1=0,this.rep2=0,this.rep3=0,this.outSize=i,this.nowPos64=[0,0],this.prevByte=0,this.decoder=this,this.encoder=null,this.alive=1}processChunk(){if(!this.alive)throw new Error("Bad state");if(this.encoder)throw new Error("No encoding");const n=this.codeOneChunk();if(n===-1)throw new Error("Corrupted input");const i=ir(this.outSize,[0,0])>=0&&ir(this.nowPos64,this.outSize)>=0;return(n||i)&&(this.flush(),this.outWindowReleaseStream(),this.rangeDecoder.setStream(null),this.alive=0),this.alive}writeToOutput(n,i,l,c){const u=n.count+c;if(u>n.buf.length){const m=Math.max(n.buf.length*2,u),h=new Array(m);for(let p=0;p<n.count;p++)h[p]=n.buf[p];n.buf=h}for(let m=0;m<c;m++)n.buf[n.count+m]=i[l+m];n.count+=c}isBufferWithCount(n){const i=n;return!!i&&Array.isArray(i.buf)&&typeof i.count=="number"&&typeof i.write=="function"}flush(){const n=this.outWindow.pos-this.outWindow.streamPos;if(n){if(this.outWindow.stream&&this.outWindow.buffer){const i=this.outWindow.stream;if(this.isBufferWithCount(i))this.writeToOutput(i,this.outWindow.buffer,this.outWindow.streamPos,n);else if(typeof i.write=="function"){const l=this.outWindow.buffer.slice(this.outWindow.streamPos,this.outWindow.streamPos+n);i.write(l)}}this.outWindow.pos>=this.outWindow.windowSize&&(this.outWindow.pos=0),this.outWindow.streamPos=this.outWindow.pos}}cleanup(){this.outWindow.stream=null,this.rangeDecoder.stream=null}}class j0{constructor(){$(this,"choice",Me(2));$(this,"lowCoder",[]);$(this,"midCoder",[]);$(this,"highCoder",zt(8));$(this,"tableSize",0);$(this,"prices",[]);$(this,"counters",[]);for(let n=0;n<16;++n)this.lowCoder[n]=zt(3),this.midCoder[n]=zt(3)}init(n){ze(this.choice);for(let i=0;i<n;++i)ze(this.lowCoder[i].models),ze(this.midCoder[i].models);ze(this.highCoder.models)}encode(n,i,l){n<8?(l.encodeBit(this.choice,0,0),l.encodeBitTree(this.lowCoder[i],n)):(n-=8,l.encodeBit(this.choice,0,1),n<8?(l.encodeBit(this.choice,1,0),l.encodeBitTree(this.midCoder[i],n)):(l.encodeBit(this.choice,1,1),l.encodeBitTree(this.highCoder,n-8)))}encodeWithUpdate(n,i,l){this.encode(n,i,l),this.counters&&(this.counters[i]-=1)==0&&(this.counters[i]=this.tableSize)}getPrice(n,i){return this.prices[i*272+n]}initPriceTable(){this.prices=[],this.counters=[]}setTableSize(n){this.tableSize=n}setTableSizeAndInitCounters(n,i){if(this.tableSize=n,this.counters)for(let l=0;l<i;++l)this.counters[l]=n}getTableSize(){return this.tableSize}updateTables(n){(!this.prices||!this.counters)&&this.initPriceTable();for(let i=0;i<n;++i)this.setPrices(i,this.tableSize,this.prices,0),this.counters&&(this.counters[i]=this.tableSize)}getBitTreePrice(n,i){let l,c,u=1,m=0;for(c=n.numBitLevels;c!=0;)c-=1,l=i>>>c&1,m+=this.getBitPrice(n.models[u],l),u=(u<<1)+l;return m}getBitPrice(n,i){return Gn(n,i)}setPrices(n,i,l,c){const u=this.getBitPrice(this.choice[0],0),m=this.getBitPrice(this.choice[0],1),h=m+this.getBitPrice(this.choice[1],0),p=m+this.getBitPrice(this.choice[1],1);let x=0;const w=c+n*272;for(x=0;x<8;++x){if(x>=i)return;l[w+x]=u+this.getBitTreePrice(this.lowCoder[n],x)}for(;x<16;++x){if(x>=i)return;l[w+x]=h+this.getBitTreePrice(this.midCoder[n],x-8)}for(;x<i;++x)l[w+x]=p+this.getBitTreePrice(this.highCoder,x-8-8)}}class F0{constructor(){$(this,"coders");this.coders=Me(768,1024)}decodeNormal(n){let i=1;for(;i<256;){const l=n.decodeBit(this.coders,i);i=i<<1|l}return i&255}decodeWithMatchByte(n,i){let l=i,c=1;for(;c<256;){const u=l>>7&1;l<<=1;const m=n.decodeBit(this.coders,(1+u<<8)+c);if(c=c<<1|m,u!==m){for(;c<256;){const h=n.decodeBit(this.coders,c);c=c<<1|h}break}}return c&255}encode(n,i){let l=1;for(let c=7;c>=0;c--){const u=i>>c&1;n.encodeBit(this.coders,l,u),l=l<<1|u}}encodeMatched(n,i,l){let c=i,u=1,m=!0;for(let h=7;h>=0;h--){const p=l>>h&1;let x=u;if(m){const w=c>>h&1;x+=1+w<<8,m=w===p}n.encodeBit(this.coders,x,p),u=u<<1|p}}getPrice(n,i,l){let c=i,u=0,m=1,h=7;if(n)for(;h>=0;){const p=c>>h&1,x=l>>h&1;if(u+=Gn(this.coders[1+p<<8+m],x),m=m<<1|x,p!==x){h--;break}h--}for(;h>=0;){const p=l>>h&1;u+=Gn(this.coders[m],p),m=m<<1|p,h--}return u}reset(){this.coders.fill(1024)}get decoders(){return this.coders}}class L0{constructor(n,i){$(this,"_coders");$(this,"_numPrevBits");$(this,"_posMask");const l=1<<i+n;this._coders=[],this._numPrevBits=i,this._posMask=(1<<n)-1;for(let c=0;c<l;c++)this._coders[c]=new F0}getSubCoder(n,i){return this._coders[((n&this._posMask)<<this._numPrevBits)+(i>>8-this._numPrevBits)]}reset(){this._coders.forEach(n=>n.reset())}get numPrevBits(){return this._numPrevBits}get numPosBits(){return Math.log2(this._posMask+1)}get posMask(){return this._posMask}get coders(){return this._coders}}const No=new Map;function P0(o){return o<<6}function Pa(o,n){const i=`${o.numBitLevels}-${n}`;if(No.has(i))return No.get(i);let l=0,c=1;for(let u=o.numBitLevels;u>0;u--){const m=n>>>u-1&1;l+=Gn(o.models[c],m),c=(c<<1)+m}return No.size<1e4&&No.set(i,l),l}class M0{constructor(){$(this,"state",0);$(this,"previousByte",0);$(this,"position",[0,0]);$(this,"repDistances",[0,0,0,0]);$(this,"longestMatchLength",0);$(this,"longestMatchWasFound",!1);$(this,"additionalOffset",0);$(this,"isMatch",Me(192));$(this,"isRep",Me(12));$(this,"isRepG0",Me(12));$(this,"isRepG1",Me(12));$(this,"isRepG2",Me(12));$(this,"isRep0Long",Me(192))}initModels(){ze(this.isMatch),ze(this.isRep),ze(this.isRepG0),ze(this.isRepG1),ze(this.isRepG2),ze(this.isRep0Long)}updateRepDistances(n,i){if(i===0)this.repDistances[3]=this.repDistances[2],this.repDistances[2]=this.repDistances[1],this.repDistances[1]=this.repDistances[0],this.repDistances[0]=n;else{const l=this.repDistances[i];for(let c=i;c>0;c--)this.repDistances[c]=this.repDistances[c-1];this.repDistances[0]=l}}}class R0{constructor(){$(this,"posSlotEncoder",[]);$(this,"posEncoders",Me(114));$(this,"posAlignEncoder");for(let n=0;n<4;n++)this.posSlotEncoder[n]=zt(6);this.posAlignEncoder=zt(4)}init(){for(const n of this.posSlotEncoder)ze(n.models);ze(this.posEncoders),ze(this.posAlignEncoder.models)}encodePosition(n,i,l){const c=this.getPosSlot(n);if(l.encodeBitTree(this.posSlotEncoder[i],c),c>=4){const u=(c>>1)-1,m=(2|c&1)<<u,h=n-m;c<14?this.encodeReverseBits(h,u,l):(l.encodeDirectBits(h>>4,u-4),l.encodeBitTree(this.posAlignEncoder,h&15))}}getPositionPrice(n,i){const l=this.getPosSlot(n);let c=Pa(this.posSlotEncoder[i],l);if(l>=4){const u=(l>>1)-1,m=(2|l&1)<<u,h=n-m;l<14?c+=this.getReverseBitsPrice(h,u):(c+=P0(u-4),c+=Pa(this.posAlignEncoder,h&15))}return c}getPosSlot(n){return n<4?n:n<1<<20?Ar[n>>6]+12:Ar[n>>26]+52}encodeReverseBits(n,i,l){let c=1;for(let u=0;u<i;u++){const m=n&1;l.encodeBit(this.posEncoders,c,m),c=c<<1|m,n>>>=1}}getReverseBitsPrice(n,i){let l=0,c=1;for(let u=0;u<i;u++){const m=n&1;l+=Gn(this.posEncoders[c],m),c=c<<1|m,n>>>=1}return l}}class O0{constructor(){$(this,"encoderState",new M0);$(this,"positionEncoder",new R0);$(this,"_state",0);$(this,"_previousByte",0);$(this,"_distTableSize",0);$(this,"_longestMatchWasFound",0);$(this,"_optimumEndIndex",0);$(this,"_optimumCurrentIndex",0);$(this,"_additionalOffset",0);$(this,"_dictionarySize",0);$(this,"_matchFinder",null);$(this,"_dictionarySizePrev",0);$(this,"_numFastBytes",0);$(this,"_numLiteralContextBits",0);$(this,"_numLiteralPosStateBits",0);$(this,"_posStateBits",0);$(this,"_posStateMask",0);$(this,"_needReleaseMFStream",0);$(this,"_inStream",null);$(this,"_finished",0);$(this,"nowPos64",[0,0]);$(this,"_repDistances",Me(4));$(this,"_optimum",[]);$(this,"_rangeEncoder",{stream:{buf:[],count:0},rrange:0,cache:0,low:[0,0],cacheSize:0,position:[0,0],encodeBit:()=>{},encodeBitTree:()=>{},encodeDirectBits:()=>{}});$(this,"_isMatch",Me(192));$(this,"_isRep",Me(12));$(this,"_isRepG0",Me(12));$(this,"_isRepG1",Me(12));$(this,"_isRepG2",Me(12));$(this,"_isRep0Long",Me(192));$(this,"_posSlotEncoder",[]);$(this,"_posEncoders",Me(114));$(this,"_posAlignEncoder",null);$(this,"_lenEncoder",null);$(this,"_repMatchLenEncoder",null);$(this,"_literalEncoder",null);$(this,"_matchDistances",[]);$(this,"_posSlotPrices",[]);$(this,"_distancesPrices",[]);$(this,"_alignPrices",Me(16));$(this,"_matchPriceCount",0);$(this,"_alignPriceCount",0);$(this,"reps",Me(4));$(this,"repLens",Me(4));$(this,"processedInSize",[[0,0]]);$(this,"processedOutSize",[[0,0]]);$(this,"finished",[0]);$(this,"properties",Me(5));$(this,"tempPrices",Me(128));$(this,"_longestMatchLength",0);$(this,"_matchFinderType",1);$(this,"_numDistancePairs",0);$(this,"_numFastBytesPrev",-1);$(this,"backRes",0)}baseInit(){this._state=0,this._previousByte=0;for(let n=0;n<4;++n)this._repDistances[n]=0}getOptimum(){return this._optimum}getBackRes(){return this.backRes}setBackRes(n){this.backRes=n}init(){this.baseInit(),this.encoderState.initModels(),this.positionEncoder.init(),this._optimum=[];for(let n=0;n<4096;n++)this._optimum[n]={};this.initEncoderState(),ze(this._isMatch),ze(this._isRep0Long),ze(this._isRep),ze(this._isRepG0),ze(this._isRepG1),ze(this._isRepG2),ze(this._posEncoders),this.initLiteralEncoder();for(let n=0;n<4;++n)ze(this._posSlotEncoder[n].models);this._lenEncoder&&this._lenEncoder.init(1<<this._posStateBits),this._repMatchLenEncoder&&this._repMatchLenEncoder.init(1<<this._posStateBits),this._posAlignEncoder&&ze(this._posAlignEncoder.models),this._longestMatchWasFound=0,this._optimumEndIndex=0,this._optimumCurrentIndex=0,this._additionalOffset=0}initEncoderState(){this._rangeEncoder.low=[0,0],this._rangeEncoder.rrange=4294967295,this._rangeEncoder.cacheSize=1,this._rangeEncoder.cache=0,this._rangeEncoder.position=[0,0]}initLiteralEncoder(){const n=1<<this._literalEncoder.numPrevBits+this._literalEncoder.numPosBits;for(let i=0;i<n;++i)ze(this._literalEncoder.coders[i].decoders)}createOptimumStructures(){for(let n=0;n<4096;++n)this._optimum[n]={};for(let n=0;n<4;++n)this._posSlotEncoder[n]=zt(6)}createLenPriceTableEncoder(){const n=new j0;return n.initPriceTable(),n}createLiteralEncoderEncoder2(){return{decoders:Me(768)}}createLiteralEncoder(){this._literalEncoder!=null&&this._literalEncoder.numPrevBits==this._numLiteralContextBits&&this._literalEncoder.numPosBits==this._numLiteralPosStateBits||(this._literalEncoder=new L0(this._numLiteralPosStateBits,this._numLiteralContextBits))}initialize(){this._lenEncoder=this.createLenPriceTableEncoder(),this._repMatchLenEncoder=this.createLenPriceTableEncoder(),this._posAlignEncoder=zt(4),this._optimum=[],this.createOptimumStructures(),this.createLiteralEncoder(),this.init()}configure(n){this.setDictionarySize(1<<n.searchDepth),this._numFastBytes=n.filterStrength,this._matchFinderType=n.modeIndex,this._numLiteralContextBits=3,this._numLiteralPosStateBits=0,this._posStateBits=2,this._posStateMask=3}setDictionarySize(n){this._dictionarySize=n;let i=0;for(;n>1<<i;++i);this._distTableSize=i*2}encodeBit(n,i,l){const c=this._rangeEncoder;let u,m=n[i];u=(c.rrange>>>11)*m,l?(c.low=$n(c.low,this.and64(Zr(u),[4294967295,0])),c.rrange-=u,n[i]=m-(m>>>5)<<16>>16):(c.rrange=u,n[i]=m+(2048-m>>>5)<<16>>16),c.rrange&-16777216||(c.rrange<<=8,this.shiftLow())}encodeBitTree(n,i){let l,c,u=1;for(c=n.numBitLevels;c!=0;)c-=1,l=i>>>c&1,this.encodeBit(n.models,u,l),u=u<<1|l}encodeLiteral(n,i){let l,c=1;for(let u=7;u>=0;--u)l=i>>u&1,this.encodeBit(n.decoders,c,l),c=c<<1|l}encodeMatched(n,i,l){let c,u,m,h=!0,p=1;for(let x=7;x>=0;--x)c=l>>x&1,m=p,h&&(u=i>>x&1,m+=1+u<<8,h=u===c),this.encodeBit(n.decoders,m,c),p=p<<1|c}encodeLength(n,i,l){n.encode(i,l,this)}encodeDirectBits(n,i){const l=this._rangeEncoder;for(let c=i-1;c>=0;c-=1)l.rrange>>>=1,(n>>>c&1)==1&&(l.low=$n(l.low,Zr(l.rrange))),l.rrange&-16777216||(l.rrange<<=8,this.shiftLow())}reverseEncode(n){const i=this._posAlignEncoder;if(!i)return;let l,c=1;for(let u=0;u<i.numBitLevels;++u)l=n&1,this.encodeBit(i.models,c,l),c=c<<1|l,n>>=1}reverseEncodeRange(n,i,l){let c,u=1;for(let m=0;m<i;++m)c=l&1,this.encodeBit(this._posEncoders,n+u,c),u=u<<1|c,l>>=1}writeEndMarker(n){this.encodeBit(this._isMatch,(this._state<<4)+n,1),this.encodeBit(this._isRep,this._state,0),this._state=this._state<7?7:10,this.encodeLength(this._lenEncoder,0,n);const i=63,l=Po(2);this.encodeBitTree(this._posSlotEncoder[l],i),this.encodeDirectBits(67108863,26),this.reverseEncode(15)}encodeLengthWithPriceUpdate(n,i,l){n.encodeWithUpdate(i,l,this)}and64(n,i){const l=~~Math.max(Math.min(n[1]/4294967296,2147483647),-2147483648)&~~Math.max(Math.min(i[1]/4294967296,2147483647),-2147483648),c=Yt(n)&Yt(i);let u=l*4294967296,m=c;return c<0&&(m+=4294967296),[m,u]}shru64(n,i){i&=63;let l=this.pwrAsDouble(i),c=gs(Math.floor(n[0]/l),n[1]/l);return n[1]<0&&(c=$n(c,this.shl64([2,0],63-i))),c}shl64(n,i){let l,c,u,m;if(i&=63,n[0]==0&&n[1]==-9223372036854776e3)return i?[0,0]:n;if(n[1]<0)throw new Error("Neg");return m=this.pwrAsDouble(i),c=n[1]*m%18446744073709552e3,u=n[0]*m,l=u-u%4294967296,c+=l,u-=l,c>=9223372036854776e3&&(c-=18446744073709552e3),[u,c]}pwrAsDouble(n){return n<=30?1<<n:this.pwrAsDouble(30)*this.pwrAsDouble(n-30)}shiftLow(){const n=this._rangeEncoder,i=Yt(this.shru64(n.low,32));if(i!=0||ir(n.low,[4278190080,0])<0){n.position=$n(n.position,Zr(n.cacheSize));let l=n.cache;do this.writeToStream(n.stream,l+i),l=255;while((n.cacheSize-=1)!=0);n.cache=Yt(n.low)>>>24}n.cacheSize+=1,n.low=this.shl64(this.and64(n.low,[16777215,0]),8)}writeToStream(n,i){if(n){if(n.count>=n.buf.length){const l=Math.max(n.buf.length*2,n.count+1),c=new Array(l);for(let u=0;u<n.count;u++)c[u]=n.buf[u];n.buf=c}n.buf[n.count++]=i<<24>>24}}initRangeEncoder(){this._rangeEncoder.position=[0,0],this._rangeEncoder.low=[0,0],this._rangeEncoder.rrange=-1,this._rangeEncoder.cacheSize=1,this._rangeEncoder.cache=0}fillAlignPrices(){for(let n=0;n<16;++n)this._alignPrices[n]=this.reverseGetPrice(this._posAlignEncoder,n);this._alignPriceCount=0}fillDistancesPrices(){let n,i,l,c,u,m;for(let h=4;h<128;++h)c=this.getPosSlot(h),l=(c>>1)-1,n=(2|c&1)<<l,this.tempPrices[h]=this.reverseGetPriceArray(this._posEncoders,n-c-1,l,h-n);for(let h=0;h<4;++h){for(i=this._posSlotEncoder[h],u=h<<6,c=0;c<this._distTableSize;c+=1)this._posSlotPrices[u+c]=this.rangeCoder_Encoder_GetPrice_1(i,c);for(c=14;c<this._distTableSize;c+=1)this._posSlotPrices[u+c]+=(c>>1)-1-4<<6;m=h*128;for(let p=0;p<4;++p)this._distancesPrices[m+p]=this._posSlotPrices[u+p];for(let p=4;p<128;++p)this._distancesPrices[m+p]=this._posSlotPrices[u+this.getPosSlot(p)]+this.tempPrices[p]}this._matchPriceCount=0}getPosSlot(n){return n<2048?Ar[n]:n<2097152?Ar[n>>10]+20:Ar[n>>20]+40}reverseGetPrice(n,i){let l,c=1,u=0;for(let m=n.numBitLevels;m!=0;m-=1)l=i&1,i>>>=1,u+=this.getPrice(n.models[c],l),c=c<<1|l;return u}reverseGetPriceArray(n,i,l,c){let u,m=1,h=0;for(let p=l;p!=0;p-=1)u=c&1,c>>>=1,h+=Je[((n[i+m]-u^-u)&2047)>>>2],m=m<<1|u;return h}getPrice(n,i){return Gn(n,i)}rangeCoder_Encoder_GetPrice_1(n,i){return Pa(n,i)}createEncoderStructures(){this._optimum=[];for(let n=0;n<4096;n++)this._optimum[n]={};for(let n=0;n<4096;++n)this._optimum[n]={};this._posSlotEncoder=new Array(4);for(let n=0;n<4;++n)this._posSlotEncoder[n]=zt(6)}createMatchFinderAndStructures(){if(!this._matchFinder){const n={};let i=4;this._matchFinderType||(i=2),n.HASH_ARRAY=i>2,n.HASH_ARRAY?(n.kNumHashDirectBytes=0,n.kMinMatchCheck=4,n.kFixHashSize=66560):(n.kNumHashDirectBytes=2,n.kMinMatchCheck=3,n.kFixHashSize=0),n._cyclicBufferSize=0,n._cyclicBufferPos=0,n._streamPos=0,n._cutValue=255,n._matchMaxLen=0,n._streamEndWasReached=0,n._pos=0,n._posLimit=0,n._son=[],n._hash=[],n._bufferBase=[],n._blockSize=0,n._keepSizeAfter=0,n._keepSizeBefore=0,n._pointerToLastSafePosition=0,this._matchFinder=n}this.createLiteralEncoder(),!(this._dictionarySize==this._dictionarySizePrev&&this._numFastBytesPrev==this._numFastBytes)&&(this._dictionarySizePrev=this._dictionarySize,this._numFastBytesPrev=this._numFastBytes)}getSubCoderUtility(n,i){const c=(n&this._literalEncoder.posMask)<<this._literalEncoder.numPrevBits,u=8-this._literalEncoder.numPrevBits,m=(i&255)>>>u,h=c+m;return this._literalEncoder.coders[h]}}class U0{constructor(n){$(this,"matchFinder");this.matchFinder=n}getIndexByte(n){return this.matchFinder._bufferBase[this.matchFinder._bufferOffset+this.matchFinder._pos+n]}getMatchLen(n,i,l){this.matchFinder._streamEndWasReached&&this.matchFinder._pos+n+l>this.matchFinder._streamPos&&(l=this.matchFinder._streamPos-(this.matchFinder._pos+n)),++i;let c;const u=this.matchFinder._bufferOffset+this.matchFinder._pos+n;for(c=0;c<l&&this.matchFinder._bufferBase[u+c]==this.matchFinder._bufferBase[u+c-i];++c);return c}getNumAvailableBytes(){return this.matchFinder._streamPos-this.matchFinder._pos}moveBlock(){let n=this.matchFinder._bufferOffset+this.matchFinder._pos-this.matchFinder._keepSizeBefore;n>0&&--n;const i=this.matchFinder._bufferOffset+this.matchFinder._streamPos-n;for(let l=0;l<i;++l)this.matchFinder._bufferBase[l]=this.matchFinder._bufferBase[n+l];this.matchFinder._bufferOffset-=n}movePos(){this.matchFinder._pos+=1,this.matchFinder._pos>this.matchFinder._posLimit&&(this.matchFinder._bufferOffset+this.matchFinder._pos>this.matchFinder._pointerToLastSafePosition&&this.moveBlock(),this.readBlock())}readBlock(){if(!this.matchFinder._streamEndWasReached)for(;;){const n=-this.matchFinder._bufferOffset+this.matchFinder._blockSize-this.matchFinder._streamPos;if(!n)return;const i=this.readFromStream(this.matchFinder._bufferOffset+this.matchFinder._streamPos,n);if(i==-1){this.matchFinder._posLimit=this.matchFinder._streamPos,this.matchFinder._bufferOffset+this.matchFinder._posLimit>this.matchFinder._pointerToLastSafePosition&&(this.matchFinder._posLimit=this.matchFinder._pointerToLastSafePosition-this.matchFinder._bufferOffset),this.matchFinder._streamEndWasReached=1;return}this.matchFinder._streamPos+=i,this.matchFinder._streamPos>=this.matchFinder._pos+this.matchFinder._keepSizeAfter&&(this.matchFinder._posLimit=this.matchFinder._streamPos-this.matchFinder._keepSizeAfter)}}reduceOffsets(n){this.matchFinder._bufferOffset+=n,this.matchFinder._posLimit-=n,this.matchFinder._pos-=n,this.matchFinder._streamPos-=n}readFromStream(n,i){const l=this.matchFinder._stream,c=this.matchFinder._bufferBase;if(l.pos>=l.count)return-1;let u;return l.buf instanceof Uint8Array?u=Array.from(l.buf):l.buf instanceof ArrayBuffer?u=Array.from(new Uint8Array(l.buf)):u=l.buf,i=Math.min(i,l.count-l.pos),yf(u,l.pos,c,n,i),l.pos+=i,i}}function z0(o,n,i,l){return~~((o+n+i+l)/2)+256}function H0(o,n){const i=n+1;if(o._cyclicBufferSize!==i){const l=(o._cyclicBufferSize=i)*2;o._son=Me(l)}}function G0(o,n){let i=65536,l=0;return n&&(i=o-1,i|=i>>1,i|=i>>2,i|=i>>4,i|=i>>8,i>>=1,i|=65535,i>16777216&&(i>>=1),l=i,i+=1),{hashMask:l,hashSizeSum:i}}function $0(o){return 16+(o>>1)}function W0(o){return o<xf}const V0={1:{searchDepth:16,filterStrength:64,modeIndex:0},2:{searchDepth:20,filterStrength:64,modeIndex:0},3:{searchDepth:19,filterStrength:64,modeIndex:1},4:{searchDepth:20,filterStrength:64,modeIndex:1},5:{searchDepth:21,filterStrength:128,modeIndex:1},6:{searchDepth:22,filterStrength:128,modeIndex:1},7:{searchDepth:23,filterStrength:128,modeIndex:1},8:{searchDepth:24,filterStrength:255,modeIndex:1},9:{searchDepth:25,filterStrength:255,modeIndex:1}};var ye,pt,Ge,R,Bn,X,kf,Sf,Ma,To,bf,_f,Cf,Ef,Df,Af,Nf,Ra,Tf,Bf,If,jf,Ff,hs,Oa,Lf,Pf,Mf,Rf,Ua,Of,Uf,zf,Hf,Bo,Gf,za,Xr,$f,Ha,Io,Ga,Wf,Kr,ps,$a,Vf,Yf,Xf,Kf;class wf{constructor(){Vr(this,X);Vr(this,ye);Vr(this,pt);Vr(this,Ge,null);Vr(this,R);Vr(this,Bn);_i(this,ye,new O0),_i(this,pt,new I0),_i(this,R,de(this,X,kf).call(this)),_i(this,Bn,de(this,X,Sf).call(this))}writeHeaderProperties(){v(this,ye).properties[0]=(v(this,ye)._posStateBits*5+v(this,ye)._numLiteralPosStateBits)*9+v(this,ye)._numLiteralContextBits&255;for(let i=0;i<4;i++)v(this,ye).properties[1+i]=v(this,ye)._dictionarySize>>8*i&255;de(this,X,_f).call(this,v(this,R).output,v(this,ye).properties,0,5)}GetPosSlot2(n){return n<131072?Ar[n>>6]+12:n<134217728?Ar[n>>16]+32:Ar[n>>26]+52}ReverseEncode(n,i,l){let c,u=1;for(let m=0;m<i;++m)c=l&1,v(this,R).chunker.encoder.encodeBit(v(this,R).chunker.encoder._posEncoders,n+u,c),u=u<<1|c,l>>=1}encodeString(n){let i,l=[],c=0,u=n.length;de(this,X,Cf).call(this,n,0,u,l,0);for(let h=0;h<u;++h)i=l[h],i>=1&&i<=127?++c:!i||i>=128&&i<=2047?c+=2:c+=3;const m=[];c=0;for(let h=0;h<u;++h)i=l[h],i>=1&&i<=127?m[c++]=i<<24>>24:!i||i>=128&&i<=2047?(m[c++]=(192|i>>6&31)<<24>>24,m[c++]=(128|i&63)<<24>>24):(m[c++]=(224|i>>12&15)<<24>>24,m[c++]=(128|i>>6&63)<<24>>24,m[c++]=(128|i&63)<<24>>24);return m}compress(n,i=5){const l=V0[i];for(de(this,X,Af).call(this,n,l);v(this,R).chunker.processChunk(););const c=de(this,X,To).call(this,v(this,R).output);return new Int8Array(c)}compressString(n,i=5){const l=this.encodeString(n);return this.compress(new Uint8Array(l),i)}decompress(n){for(de(this,X,Ra).call(this,n);v(this,Bn).chunker.processChunk(););return de(this,X,To).call(this,v(this,Bn).output)}decompressString(n){for(de(this,X,Ra).call(this,n);v(this,Bn).chunker.processChunk(););const i=de(this,X,To).call(this,v(this,Bn).output),l=de(this,X,Kf).call(this,i);return typeof l=="string"?l:String.fromCharCode(...l)}codeOneBlock(){de(this,X,Of).call(this)}releaseStreams(){de(this,X,Wf).call(this)}}ye=new WeakMap,pt=new WeakMap,Ge=new WeakMap,R=new WeakMap,Bn=new WeakMap,X=new WeakSet,kf=function(){return{chunker:new N0(this),output:{buf:Me(32),count:0,write:()=>{}}}},Sf=function(){return{chunker:new Kd(v(this,pt)),output:{buf:Me(32),count:0,write:()=>{}}}},Ma=function(n){if(n.pos>=n.count)return-1;let i;return n.buf instanceof ArrayBuffer?i=new Uint8Array(n.buf)[n.pos++]:(n.buf instanceof Uint8Array,i=n.buf[n.pos++]),i&255},To=function(n){return n.buf.slice(0,n.count)},bf=function(n,i){if(n){if(n.count>=n.buf.length){const l=Math.max(n.buf.length*2,n.count+1),c=new Array(l);for(let u=0;u<n.count;u++)c[u]=n.buf[u];n.buf=c}n.buf[n.count++]=i<<24>>24}},_f=function(n,i,l,c){const u=n.count+c;if(u>n.buf.length){const m=Math.max(n.buf.length*2,u),h=new Array(m);for(let p=0;p<n.count;p++)h[p]=n.buf[p];n.buf=h}yf(i,l,n.buf,n.count,c),n.count+=c},Cf=function(n,i,l,c,u){for(let m=i;m<l;++m)c[u++]=n.charCodeAt(m)},Ef=function(n){v(this,ye).initialize(),v(this,ye).configure(n)},Df=function(n,i,l){if(ir(i,Ia)<0)throw new Error("invalid length "+i);v(this,R).length_0=i,de(this,X,zf).call(this),de(this,X,Ef).call(this,l),this.writeHeaderProperties();for(let c=0;c<64;c+=8)de(this,X,bf).call(this,v(this,R).output,Yt(E0(i,c))&255);v(this,ye)._needReleaseMFStream=0,v(this,ye)._inStream=n,v(this,ye)._finished=0,de(this,X,Uf).call(this),v(this,ye)._rangeEncoder.stream=v(this,R).output,v(this,ye).init(),v(this,ye).fillDistancesPrices(),v(this,ye).fillAlignPrices(),v(this,ye)._lenEncoder.setTableSize(v(this,ye)._numFastBytes+1-2),v(this,ye)._lenEncoder.updateTables(1<<v(this,ye)._posStateBits),v(this,ye)._repMatchLenEncoder.setTableSize(v(this,ye)._numFastBytes+1-2),v(this,ye)._repMatchLenEncoder.updateTables(1<<v(this,ye)._posStateBits),v(this,ye).nowPos64=Ei,v(this,R).chunker.encoder=v(this,ye),v(this,R).chunker.alive=1},Af=function(n,i){const l=n instanceof ArrayBuffer?n.byteLength:n.length,c=Math.max(32,Math.ceil(l*1.2));v(this,R).output={buf:Me(c),count:0,write:()=>{}};const u={pos:0,buf:n instanceof ArrayBuffer?new Uint8Array(n):n,count:n instanceof ArrayBuffer?new Uint8Array(n).length:n.length};de(this,X,Df).call(this,u,Zr(n instanceof ArrayBuffer?n.byteLength:n.length),i)},Nf=function(n){let i="",l=[],c,u;for(let h=0;h<5;++h){if(c=de(this,X,Ma).call(this,n),c==-1)throw new Error("truncated input");l[h]=c<<24>>24}if(v(this,pt).setDecoderProperties(l)?0:1)throw new Error("corrupted input");for(let h=0;h<64;h+=8){if(c=de(this,X,Ma).call(this,n),c==-1)throw new Error("truncated input");c=c.toString(16),c.length==1&&(c="0"+c),i=c+""+i}/^0+$|^f+$/i.test(i)?v(this,R).length_0=Ia:(u=parseInt(i,16),u>w0?v(this,R).length_0=Ia:v(this,R).length_0=Zr(u)),v(this,Bn).chunker=de(this,X,Mf).call(this,n,v(this,R).length_0)},Ra=function(n){const i=n instanceof ArrayBuffer?n.byteLength:n.length,l=32,c=i*2,u=Math.max(l,c);v(this,Bn).output={buf:Me(u),count:0,write:()=>{}};const m={buf:n,pos:0,count:n instanceof ArrayBuffer?n.byteLength:n.length};de(this,X,Nf).call(this,m)},Tf=function(n,i,l){let c;v(this,ye)._matchFinder._keepSizeBefore=n,v(this,ye)._matchFinder._keepSizeAfter=i,c=n+i+l,(v(this,ye)._matchFinder._bufferBase==null||v(this,ye)._matchFinder._blockSize!=c)&&(v(this,ye)._matchFinder._bufferBase=Me(c),v(this,ye)._matchFinder._blockSize=c),v(this,ye)._matchFinder._pointerToLastSafePosition=v(this,ye)._matchFinder._blockSize-i},Bf=function(){const n=v(this,R).chunker.encoder._matchFinder;let i;n._pos+=1,n._pos>n._posLimit&&(i=n._bufferOffset+n._pos,i>n._pointerToLastSafePosition&&v(this,Ge).moveBlock(),v(this,Ge).readBlock())},If=function(n,i){const l=v(this,ye)._dictionarySize,c=v(this,ye)._numFastBytes;if(W0(l)){v(this,ye)._matchFinder._cutValue=$0(c);const u=z0(l,n,c,i);de(this,X,Tf).call(this,l+n,c+i,u),v(this,ye)._matchFinder._matchMaxLen=c,H0(v(this,ye)._matchFinder,l);const{hashMask:m,hashSizeSum:h}=G0(l,v(this,ye)._matchFinder.HASH_ARRAY);if(v(this,ye)._matchFinder.HASH_ARRAY){v(this,ye)._matchFinder._hashMask=m;const p=h+v(this,ye)._matchFinder.kFixHashSize;p!==v(this,ye)._matchFinder._hashSizeSum&&(v(this,ye)._matchFinder._hashSizeSum=p,v(this,ye)._matchFinder._hash=Me(p))}else h!==v(this,ye)._matchFinder._hashSizeSum&&(v(this,ye)._matchFinder._hashSizeSum=h,v(this,ye)._matchFinder._hash=Me(h))}},jf=function(){let n,i,l,c,u,m,h,p,x,w,y,S,b,_,O,I,F,D,L,A,Z;const P=v(this,R).chunker.encoder._matchFinder,Q=v(this,R).chunker.encoder._matchDistances;if(P._pos+P._matchMaxLen<=P._streamPos)_=P._matchMaxLen;else if(_=P._streamPos-P._pos,_<P.kMinMatchCheck)return de(this,X,hs).call(this),0;for(F=0,O=P._pos>P._cyclicBufferSize?P._pos-P._cyclicBufferSize:0,i=P._bufferOffset+P._pos,I=1,p=0,x=0,P.HASH_ARRAY?(Z=Ao[P._bufferBase[i]&255]^P._bufferBase[i+1]&255,p=Z&1023,Z^=(P._bufferBase[i+2]&255)<<8,x=Z&65535,w=(Z^Ao[P._bufferBase[i+3]&255]<<5)&P._hashMask):w=P._bufferBase[i]&255^(P._bufferBase[i+1]&255)<<8,l=P._hash[P.kFixHashSize+w]||0,P.HASH_ARRAY&&(c=P._hash[p]||0,u=P._hash[1024+x]||0,P._hash[p]=P._pos,P._hash[1024+x]=P._pos,c>O&&P._bufferBase[P._bufferOffset+c]==P._bufferBase[i]&&(Q[F++]=I=2,Q[F++]=P._pos-c-1),u>O&&P._bufferBase[P._bufferOffset+u]==P._bufferBase[i]&&(u==c&&(F-=2),Q[F++]=I=3,Q[F++]=P._pos-u-1,c=u),F!=0&&c==l&&(F-=2,I=1)),P._hash[P.kFixHashSize+w]=P._pos,L=(P._cyclicBufferPos<<1)+1,A=P._cyclicBufferPos<<1,S=b=P.kNumHashDirectBytes,P.kNumHashDirectBytes!=0&&l>O&&P._bufferBase[P._bufferOffset+l+P.kNumHashDirectBytes]!=P._bufferBase[i+P.kNumHashDirectBytes]&&(Q[F++]=I=P.kNumHashDirectBytes,Q[F++]=P._pos-l-1),n=P._cutValue;;){if(l<=O||n==0){n-=1,P._son[L]=P._son[A]=0;break}if(h=P._pos-l,m=(h<=P._cyclicBufferPos?P._cyclicBufferPos-h:P._cyclicBufferPos-h+P._cyclicBufferSize)<<1,D=P._bufferOffset+l,y=S<b?S:b,P._bufferBase[D+y]==P._bufferBase[i+y]){for(;(y+=1)!=_&&P._bufferBase[D+y]==P._bufferBase[i+y];);if(I<y&&(Q[F++]=I=y,Q[F++]=h-1,y==_)){P._son[A]=P._son[m],P._son[L]=P._son[m+1];break}}(P._bufferBase[D+y]&255)<(P._bufferBase[i+y]&255)?(P._son[A]=l,A=m+1,l=P._son[A],b=y):(P._son[L]=l,L=m,l=P._son[L],S=y)}return de(this,X,hs).call(this),F},Ff=function(){v(this,R).chunker.encoder._matchFinder._bufferOffset=0,v(this,R).chunker.encoder._matchFinder._pos=0,v(this,R).chunker.encoder._matchFinder._streamPos=0,v(this,R).chunker.encoder._matchFinder._streamEndWasReached=0,v(this,Ge).readBlock(),v(this,R).chunker.encoder._matchFinder._cyclicBufferPos=0,v(this,Ge).reduceOffsets(-1)},hs=function(){let n;const i=v(this,R).chunker.encoder._matchFinder;(i._cyclicBufferPos+=1)>=i._cyclicBufferSize&&(i._cyclicBufferPos=0),de(this,X,Bf).call(this),i._pos==xf&&(n=i._pos-i._cyclicBufferSize,de(this,X,Oa).call(this,i._cyclicBufferSize*2,n),de(this,X,Oa).call(this,i._hashSizeSum,n),v(this,Ge).reduceOffsets(n))},Oa=function(n,i){const l=v(this,R).chunker.encoder._matchFinder._son;for(let c=0,u;c<n;++c)u=l[c]||0,u<=i?u=0:u-=i,l[c]=u},Lf=function(n,i){n.HASH_ARRAY=i>2,n.HASH_ARRAY?(n.kNumHashDirectBytes=0,n.kMinMatchCheck=4,n.kFixHashSize=66560):(n.kNumHashDirectBytes=2,n.kMinMatchCheck=3,n.kFixHashSize=0)},Pf=function(n){const i=v(this,R).chunker.encoder._matchFinder;let l,c,u,m,h,p,x,w,y,S,b,_,O,I,F,D,L;do{if(i._pos+i._matchMaxLen<=i._streamPos)_=i._matchMaxLen;else if(_=i._streamPos-i._pos,_<i.kMinMatchCheck){de(this,X,hs).call(this);continue}for(O=i._pos>i._cyclicBufferSize?i._pos-i._cyclicBufferSize:0,c=i._bufferOffset+i._pos,i.HASH_ARRAY?(L=Ao[i._bufferBase[c]&255]^i._bufferBase[c+1]&255,p=L&1023,i._hash[p]=i._pos,L^=(i._bufferBase[c+2]&255)<<8,x=L&65535,i._hash[1024+x]=i._pos,w=(L^Ao[i._bufferBase[c+3]&255]<<5)&i._hashMask):w=i._bufferBase[c]&255^(i._bufferBase[c+1]&255)<<8,u=i._hash[i.kFixHashSize+w],i._hash[i.kFixHashSize+w]=i._pos,F=(i._cyclicBufferPos<<1)+1,D=i._cyclicBufferPos<<1,S=b=i.kNumHashDirectBytes,l=i._cutValue;;){if(u<=O||l==0){l-=1,i._son[F]=i._son[D]=0;break}if(h=i._pos-u,m=(h<=i._cyclicBufferPos?i._cyclicBufferPos-h:i._cyclicBufferPos-h+i._cyclicBufferSize)<<1,I=i._bufferOffset+u,y=S<b?S:b,i._bufferBase[I+y]==i._bufferBase[c+y]){for(;(y+=1)!=_&&i._bufferBase[I+y]==i._bufferBase[c+y];);if(y==_){i._son[D]=i._son[m],i._son[F]=i._son[m+1];break}}(i._bufferBase[I+y]&255)<(i._bufferBase[c+y]&255)?(i._son[D]=u,D=m+1,u=i._son[D],b=y):(i._son[F]=u,F=m,u=i._son[F],S=y)}de(this,X,hs).call(this)}while((n-=1)!=0)},Mf=function(n,i){v(this,pt).rangeDecoder.stream=n,v(this,pt).flush(),v(this,pt).outWindow.stream=null,v(this,pt).outWindow.stream=v(this,Bn).output,de(this,X,Rf).call(this),v(this,pt).state=0,v(this,pt).rep0=0,v(this,pt).rep1=0,v(this,pt).rep2=0,v(this,pt).rep3=0,v(this,pt).outSize=i,v(this,pt).nowPos64=Ei,v(this,pt).prevByte=0;const l=new Kd(v(this,pt));return l.alive=1,l},Rf=function(){v(this,pt).init()},Ua=function(n){const i=v(this,R).chunker.encoder;let l,c,u,m;i._optimumEndIndex=n,u=i._optimum[n].posPrev,c=i._optimum[n].backPrev;do i._optimum[n].prev1IsChar&&(de(this,X,$a).call(this,i._optimum[u]),i._optimum[u].posPrev=u-1,i._optimum[n].prev2&&(i._optimum[u-1].prev1IsChar=0,i._optimum[u-1].posPrev=i._optimum[n].posPrev2,i._optimum[u-1].backPrev=i._optimum[n].backPrev2)),m=u,l=c,c=i._optimum[m].backPrev,u=i._optimum[m].posPrev,i._optimum[m].backPrev=l,i._optimum[m].posPrev=n,n=m;while(n>0);return i.backRes=i._optimum[0].backPrev,i._optimumCurrentIndex=i._optimum[0].posPrev,i._optimumCurrentIndex},Of=function(){let n,i,l,c,u,m,h,p,x,w,y,S,b,_;if(v(this,R).chunker.encoder.processedInSize[0]=Ei,v(this,R).chunker.encoder.processedOutSize[0]=Ei,v(this,R).chunker.encoder.finished[0]=1,b=v(this,R).chunker.encoder.nowPos64,v(this,R).chunker.encoder._inStream&&(v(this,R).chunker.encoder._matchFinder._stream=v(this,R).chunker.encoder._inStream,de(this,X,Ff).call(this),v(this,R).chunker.encoder._needReleaseMFStream=1,v(this,R).chunker.encoder._inStream=null),!v(this,R).chunker.encoder._finished){if(v(this,R).chunker.encoder._finished=1,ir(v(this,R).chunker.encoder.nowPos64,Ei)===0){if(!v(this,Ge).getNumAvailableBytes()){de(this,X,Bo).call(this,Yt(v(this,R).chunker.encoder.nowPos64));return}de(this,X,Io).call(this),S=Yt(v(this,R).chunker.encoder.nowPos64)&v(this,R).chunker.encoder._posStateMask,v(this,R).chunker.encoder.encodeBit(v(this,R).chunker.encoder._isMatch,(v(this,R).chunker.encoder._state<<4)+S,0),v(this,R).chunker.encoder._state=Dr(v(this,R).chunker.encoder._state),l=v(this,Ge).getIndexByte(-v(this,R).chunker.encoder._additionalOffset),v(this,R).chunker.encoder.encodeLiteral(de(this,X,Kr).call(this,Yt(v(this,R).chunker.encoder.nowPos64),v(this,R).chunker.encoder._previousByte),l),v(this,R).chunker.encoder._previousByte=l,v(this,R).chunker.encoder._additionalOffset-=1,v(this,R).chunker.encoder.nowPos64=$n(v(this,R).chunker.encoder.nowPos64,C0)}if(!v(this,Ge).getNumAvailableBytes()){de(this,X,Bo).call(this,Yt(v(this,R).chunker.encoder.nowPos64));return}for(;;){if(m=de(this,X,Gf).call(this,Yt(v(this,R).chunker.encoder.nowPos64)),x=v(this,R).chunker.encoder.backRes,S=Yt(v(this,R).chunker.encoder.nowPos64)&v(this,R).chunker.encoder._posStateMask,i=(v(this,R).chunker.encoder._state<<4)+S,m==1&&x==-1)v(this,R).chunker.encoder.encodeBit(v(this,R).chunker.encoder._isMatch,i,0),l=v(this,Ge).getIndexByte(-v(this,R).chunker.encoder._additionalOffset),_=de(this,X,Kr).call(this,Yt(v(this,R).chunker.encoder.nowPos64),v(this,R).chunker.encoder._previousByte),v(this,R).chunker.encoder._state<7?v(this,R).chunker.encoder.encodeLiteral(_,l):(p=v(this,Ge).getIndexByte(-v(this,R).chunker.encoder._repDistances[0]-1-v(this,R).chunker.encoder._additionalOffset),v(this,R).chunker.encoder.encodeMatched(_,p,l)),v(this,R).chunker.encoder._previousByte=l,v(this,R).chunker.encoder._state=Dr(v(this,R).chunker.encoder._state);else{if(v(this,R).chunker.encoder.encodeBit(v(this,R).chunker.encoder._isMatch,i,1),x<4){if(v(this,R).chunker.encoder.encodeBit(v(this,R).chunker.encoder._isRep,v(this,R).chunker.encoder._state,1),x?(v(this,R).chunker.encoder.encodeBit(v(this,R).chunker.encoder._isRepG0,v(this,R).chunker.encoder._state,1),x==1?v(this,R).chunker.encoder.encodeBit(v(this,R).chunker.encoder._isRepG1,v(this,R).chunker.encoder._state,0):(v(this,R).chunker.encoder.encodeBit(v(this,R).chunker.encoder._isRepG1,v(this,R).chunker.encoder._state,1),v(this,R).chunker.encoder.encodeBit(v(this,R).chunker.encoder._isRepG2,v(this,R).chunker.encoder._state,x-2))):(v(this,R).chunker.encoder.encodeBit(v(this,R).chunker.encoder._isRepG0,v(this,R).chunker.encoder._state,0),m==1?v(this,R).chunker.encoder.encodeBit(v(this,R).chunker.encoder._isRep0Long,i,0):v(this,R).chunker.encoder.encodeBit(v(this,R).chunker.encoder._isRep0Long,i,1)),m==1?v(this,R).chunker.encoder._state=v(this,R).chunker.encoder._state<7?9:11:(v(this,R).chunker.encoder.encodeLength(v(this,R).chunker.encoder._repMatchLenEncoder,m-2,S),v(this,R).chunker.encoder._state=v(this,R).chunker.encoder._state<7?8:11),c=v(this,R).chunker.encoder._repDistances[x],x!=0){const O=v(this,R).chunker.encoder;for(let I=x;I>=1;--I)O._repDistances[I]=O._repDistances[I-1];O._repDistances[0]=c}}else{v(this,R).chunker.encoder.encodeBit(v(this,R).chunker.encoder._isRep,v(this,R).chunker.encoder._state,0),v(this,R).chunker.encoder._state=v(this,R).chunker.encoder._state<7?7:10,v(this,R).chunker.encoder.encodeLength(v(this,R).chunker.encoder._lenEncoder,m-2,S),x-=4,y=v(this,R).chunker.encoder.getPosSlot(x),h=Po(m),v(this,R).chunker.encoder.encodeBitTree(v(this,R).chunker.encoder._posSlotEncoder[h],y),y>=4&&(u=(y>>1)-1,n=(2|y&1)<<u,w=x-n,y<14?v(this,R).chunker.encoder.reverseEncodeRange(n-y-1,u,w):(v(this,R).chunker.encoder.encodeDirectBits(w>>4,u-4),v(this,R).chunker.encoder.reverseEncode(w&15),v(this,R).chunker.encoder._alignPriceCount+=1)),c=x;const O=v(this,R).chunker.encoder;for(let I=3;I>=1;--I)O._repDistances[I]=O._repDistances[I-1];O._repDistances[0]=c,O._matchPriceCount+=1}v(this,R).chunker.encoder._previousByte=v(this,Ge).getIndexByte(m-1-v(this,R).chunker.encoder._additionalOffset)}if(v(this,R).chunker.encoder._additionalOffset-=m,v(this,R).chunker.encoder.nowPos64=$n(v(this,R).chunker.encoder.nowPos64,Zr(m)),!v(this,R).chunker.encoder._additionalOffset){if(v(this,R).chunker.encoder._matchPriceCount>=128&&v(this,R).chunker.encoder.fillDistancesPrices(),v(this,R).chunker.encoder._alignPriceCount>=16&&de(this,X,Hf).call(this,v(this,R).chunker.encoder),v(this,R).chunker.encoder.processedInSize[0]=v(this,R).chunker.encoder.nowPos64,v(this,R).chunker.encoder.processedOutSize[0]=de(this,X,Xf).call(this),!v(this,Ge).getNumAvailableBytes()){de(this,X,Bo).call(this,Yt(v(this,R).chunker.encoder.nowPos64));return}if(ir(vf(v(this,R).chunker.encoder.nowPos64,b),[4096,0])>=0){v(this,R).chunker.encoder._finished=0,v(this,R).chunker.encoder.finished[0]=0;return}}}}},Uf=function(){let n,i;v(this,ye)._matchFinder||(n={},i=4,v(this,ye)._matchFinderType||(i=2),de(this,X,Lf).call(this,n,i),v(this,ye)._matchFinder=n,_i(this,Ge,new U0(n))),v(this,ye).createLiteralEncoder(),!(v(this,ye)._dictionarySize==v(this,ye)._dictionarySizePrev&&v(this,ye)._numFastBytesPrev==v(this,ye)._numFastBytes)&&(de(this,X,If).call(this,4096,274),v(this,ye)._dictionarySizePrev=v(this,ye)._dictionarySize,v(this,ye)._numFastBytesPrev=v(this,ye)._numFastBytes)},zf=function(){for(let n=0;n<4096;++n)v(this,ye)._optimum[n]={};for(let n=0;n<4;++n)v(this,ye)._posSlotEncoder[n]=zt(6)},Hf=function(n){for(let i=0;i<16;++i)n._alignPrices[i]=de(this,X,Yf).call(this,n._posAlignEncoder,i);n._alignPriceCount=0},Bo=function(n){de(this,X,Ga).call(this),v(this,R).chunker.encoder.writeEndMarker(n&v(this,R).chunker.encoder._posStateMask);for(let i=0;i<5;++i)v(this,R).chunker.encoder.shiftLow()},Gf=function(n){let i,l,c,u,m,h,p,x,w,y,S,b,_,O,I,F,D,L,A,Z,P,Q,J,Se,Ce,fe,me,K,ne,ge,ae,ce,N,ie,Y,C,W,oe,he,xe,re,ve,Ie,z,ue,Ne,Re,He,mt;const B=v(this,R).chunker.encoder;if(B._optimumEndIndex!=B._optimumCurrentIndex)return mt=B._optimum[B._optimumCurrentIndex].posPrev-B._optimumCurrentIndex,B.backRes=B._optimum[B._optimumCurrentIndex].backPrev,B._optimumCurrentIndex=B._optimum[B._optimumCurrentIndex].posPrev,mt;if(B._optimumCurrentIndex=B._optimumEndIndex=0,B._longestMatchWasFound?(S=B._longestMatchLength,B._longestMatchWasFound=0):S=de(this,X,Io).call(this),Ce=B._numDistancePairs,J=v(this,Ge).getNumAvailableBytes()+1,J<2)return B.backRes=-1,1;J>273&&(J=273),oe=0;for(let j=0;j<4;++j)B.reps[j]=B._repDistances[j],B.repLens[j]=v(this,Ge).getMatchLen(-1,B.reps[j],273),B.repLens[j]>B.repLens[oe]&&(oe=j);if(B.repLens[oe]>=B._numFastBytes)return B.backRes=oe,mt=B.repLens[oe],de(this,X,Ha).call(this,mt-1),mt;if(S>=B._numFastBytes)return B.backRes=v(this,R).chunker.encoder._matchDistances[Ce-1]+4,de(this,X,Ha).call(this,S-1),S;if(p=v(this,Ge).getIndexByte(-1),I=v(this,Ge).getIndexByte(-B._repDistances[0]-1-1),S<2&&p!=I&&B.repLens[oe]<2)return B.backRes=-1,1;if(B._optimum[0].state=B._state,ce=n&B._posStateMask,B._optimum[1].price=Je[B._isMatch[(B._state<<4)+ce]>>>2]+de(this,X,ps).call(this,de(this,X,Kr).call(this,n,B._previousByte),B._state>=7,I,p),de(this,X,$a).call(this,B._optimum[1]),F=Je[2048-B._isMatch[(B._state<<4)+ce]>>>2],W=F+Je[2048-B._isRep[B._state]>>>2],I==p&&(he=W+de(this,X,$f).call(this,ce),he<B._optimum[1].price&&(B._optimum[1].price=he,de(this,X,Vf).call(this,B._optimum[1]))),y=S>=B.repLens[oe]?S:B.repLens[oe],y<2)return B.backRes=B._optimum[1].backPrev,1;B._optimum[1].posPrev=0,B._optimum[0].backs0=B.reps[0],B._optimum[0].backs1=B.reps[1],B._optimum[0].backs2=B.reps[2],B._optimum[0].backs3=B.reps[3],w=y;do B._optimum[w].price=Ci,w-=1;while(w>=2);for(let j=0;j<4;++j)if(C=B.repLens[j],!(C<2)){ie=W+de(this,X,Xr).call(this,j,B._state,ce);do u=ie+B._repMatchLenEncoder.getPrice(C-2,ce),ne=B._optimum[C],u<ne.price&&(ne.price=u,ne.posPrev=0,ne.backPrev=j,ne.prev1IsChar=0);while((C-=1)>=2)}if(Q=F+Je[B._isRep[B._state]>>>2],w=B.repLens[0]>=2?B.repLens[0]+1:2,w<=S){for(fe=0;w>B._matchDistances[fe];)fe+=2;for(;x=B._matchDistances[fe+1],u=Q+de(this,X,za).call(this,x,w,ce),ne=B._optimum[w],u<ne.price&&(ne.price=u,ne.posPrev=0,ne.backPrev=x+4,ne.prev1IsChar=0),!(w==B._matchDistances[fe]&&(fe+=2,fe==Ce));w+=1);}for(i=0;;){if(++i,i==y)return de(this,X,Ua).call(this,i);if(D=de(this,X,Io).call(this),Ce=B._numDistancePairs,D>=B._numFastBytes)return B._longestMatchLength=D,B._longestMatchWasFound=1,de(this,X,Ua).call(this,i);if(n+=1,ae=B._optimum[i].posPrev,B._optimum[i].prev1IsChar?(ae-=1,B._optimum[i].prev2?(re=B._optimum[B._optimum[i].posPrev2].state,B._optimum[i].backPrev2<4?re=re<7?8:11:re=re<7?7:10):re=B._optimum[ae].state,re=Dr(re)):re=B._optimum[ae].state,ae==i-1?B._optimum[i].backPrev?re=Dr(re):re=re<7?9:11:(B._optimum[i].prev1IsChar&&B._optimum[i].prev2?(ae=B._optimum[i].posPrev2,ge=B._optimum[i].backPrev2,re=re<7?8:11):(ge=B._optimum[i].backPrev,ge<4?re=re<7?8:11:re=re<7?7:10),K=B._optimum[ae],ge<4?ge?ge==1?(B.reps[0]=K.backs1,B.reps[1]=K.backs0,B.reps[2]=K.backs2,B.reps[3]=K.backs3):ge==2?(B.reps[0]=K.backs2,B.reps[1]=K.backs0,B.reps[2]=K.backs1,B.reps[3]=K.backs3):(B.reps[0]=K.backs3,B.reps[1]=K.backs0,B.reps[2]=K.backs1,B.reps[3]=K.backs2):(B.reps[0]=K.backs0,B.reps[1]=K.backs1,B.reps[2]=K.backs2,B.reps[3]=K.backs3):(B.reps[0]=ge-4,B.reps[1]=K.backs0,B.reps[2]=K.backs1,B.reps[3]=K.backs2)),B._optimum[i].state=re,B._optimum[i].backs0=B.reps[0],B._optimum[i].backs1=B.reps[1],B._optimum[i].backs2=B.reps[2],B._optimum[i].backs3=B.reps[3],h=B._optimum[i].price,p=v(this,Ge).getIndexByte(-1),I=v(this,Ge).getIndexByte(-B.reps[0]-1-1),ce=n&B._posStateMask,l=h+Je[B._isMatch[(re<<4)+ce]>>>2]+de(this,X,ps).call(this,de(this,X,Kr).call(this,n,v(this,Ge).getIndexByte(-2)),re>=7,I,p),Z=B._optimum[i+1],L=0,l<Z.price&&(Z.price=l,Z.posPrev=i,Z.backPrev=-1,Z.prev1IsChar=0,L=1),F=h+Je[2048-B._isMatch[(re<<4)+ce]>>>2],W=F+Je[2048-B._isRep[re]>>>2],I==p&&!(Z.posPrev<i&&!Z.backPrev)&&(he=W+(Je[B._isRepG0[re]>>>2]+Je[B._isRep0Long[(re<<4)+ce]>>>2]),he<=Z.price&&(Z.price=he,Z.posPrev=i,Z.backPrev=0,Z.prev1IsChar=0,L=1)),Se=v(this,Ge).getNumAvailableBytes()+1,Se=4095-i<Se?4095-i:Se,J=Se,!(J<2)){if(J>B._numFastBytes&&(J=B._numFastBytes),!L&&I!=p&&(Ie=Math.min(Se-1,B._numFastBytes),_=v(this,Ge).getMatchLen(0,B.reps[0],Ie),_>=2)){for(ve=Dr(re),N=n+1&B._posStateMask,P=l+Je[2048-B._isMatch[(ve<<4)+N]>>>2]+Je[2048-B._isRep[ve]>>>2],me=i+1+_;y<me;)B._optimum[y+=1].price=Ci;u=P+(z=B._repMatchLenEncoder.getPrice(_-2,N),z+de(this,X,Xr).call(this,0,ve,N)),ne=B._optimum[me],u<ne.price&&(ne.price=u,ne.posPrev=i+1,ne.backPrev=0,ne.prev1IsChar=1,ne.prev2=0)}for(xe=2,Y=0;Y<4;++Y)if(b=v(this,Ge).getMatchLen(-1,B.reps[Y],J),!(b<2)){O=b;do{for(;y<i+b;)B._optimum[y+=1].price=Ci;u=W+(ue=B._repMatchLenEncoder.getPrice(b-2,ce),ue+de(this,X,Xr).call(this,Y,re,ce)),ne=B._optimum[i+b],u<ne.price&&(ne.price=u,ne.posPrev=i,ne.backPrev=Y,ne.prev1IsChar=0)}while((b-=1)>=2);if(b=O,Y||(xe=b+1),b<Se&&(Ie=Math.min(Se-1-b,B._numFastBytes),_=v(this,Ge).getMatchLen(b,B.reps[Y],Ie),_>=2)){for(ve=re<7?8:11,N=n+b&B._posStateMask,c=W+(Ne=B._repMatchLenEncoder.getPrice(b-2,ce),Ne+de(this,X,Xr).call(this,Y,re,ce))+Je[B._isMatch[(ve<<4)+N]>>>2]+de(this,X,ps).call(this,de(this,X,Kr).call(this,n+b,v(this,Ge).getIndexByte(b-1-1)),!0,v(this,Ge).getIndexByte(b-1-(B.reps[Y]+1)),v(this,Ge).getIndexByte(b-1)),ve=Dr(ve),N=n+b+1&B._posStateMask,A=c+Je[2048-B._isMatch[(ve<<4)+N]>>>2],P=A+Je[2048-B._isRep[ve]>>>2],me=b+1+_;y<i+me;)B._optimum[y+=1].price=Ci;u=P+(Re=B._repMatchLenEncoder.getPrice(_-2,N),Re+de(this,X,Xr).call(this,0,ve,N)),ne=B._optimum[i+me],u<ne.price&&(ne.price=u,ne.posPrev=i+b+1,ne.backPrev=0,ne.prev1IsChar=1,ne.prev2=1,ne.posPrev2=i,ne.backPrev2=Y)}}if(D>J){for(D=J,Ce=0;D>B._matchDistances[Ce];Ce+=2);B._matchDistances[Ce]=D,Ce+=2}if(D>=xe){for(Q=F+Je[B._isRep[re]>>>2];y<i+D;)B._optimum[y+=1].price=Ci;for(fe=0;xe>B._matchDistances[fe];)fe+=2;for(b=xe;;b+=1)if(m=B._matchDistances[fe+1],u=Q+de(this,X,za).call(this,m,b,ce),ne=B._optimum[i+b],u<ne.price&&(ne.price=u,ne.posPrev=i,ne.backPrev=m+4,ne.prev1IsChar=0),b==B._matchDistances[fe]){if(b<Se&&(Ie=Math.min(Se-1-b,B._numFastBytes),_=v(this,Ge).getMatchLen(b,m,Ie),_>=2)){for(ve=re<7?7:10,N=n+b&B._posStateMask,c=u+Je[B._isMatch[(ve<<4)+N]>>>2]+de(this,X,ps).call(this,de(this,X,Kr).call(this,n+b,v(this,Ge).getIndexByte(b-1-1)),!0,v(this,Ge).getIndexByte(b-(m+1)-1),v(this,Ge).getIndexByte(b-1)),ve=Dr(ve),N=n+b+1&B._posStateMask,A=c+Je[2048-B._isMatch[(ve<<4)+N]>>>2],P=A+Je[2048-B._isRep[ve]>>>2],me=b+1+_;y<i+me;)B._optimum[y+=1].price=Ci;u=P+(He=B._repMatchLenEncoder.getPrice(_-2,N),He+de(this,X,Xr).call(this,0,ve,N)),ne=B._optimum[i+me],u<ne.price&&(ne.price=u,ne.posPrev=i+b+1,ne.backPrev=0,ne.prev1IsChar=1,ne.prev2=1,ne.posPrev2=i,ne.backPrev2=m+4)}if(fe+=2,fe==Ce)break}}}}return 1},za=function(n,i,l){const c=v(this,R).chunker.encoder;let u,m=Po(i);if(n<128)u=c._distancesPrices[m*128+n];else{const h=(m<<6)+this.GetPosSlot2(n);u=c._posSlotPrices[h]+c._alignPrices[n&15]}return u+c._lenEncoder.getPrice(i-2,l)},Xr=function(n,i,l){const c=v(this,R).chunker.encoder;let u;return n?(u=Je[2048-v(this,R).chunker.encoder._isRepG0[i]>>>2],n==1?u+=Je[v(this,R).chunker.encoder._isRepG1[i]>>>2]:(u+=Je[2048-v(this,R).chunker.encoder._isRepG1[i]>>>2],u+=Gn(v(this,R).chunker.encoder._isRepG2[i],n-2))):(u=Je[c._isRepG0[i]>>>2],u+=Je[2048-v(this,R).chunker.encoder._isRep0Long[(i<<4)+l]>>>2]),u},$f=function(n){const i=v(this,R).chunker.encoder,l=Je[i._isRepG0[i._state]>>>2],c=Je[i._isRep0Long[(i._state<<4)+n]>>>2];return l+c},Ha=function(n){n>0&&(de(this,X,Pf).call(this,n),v(this,R).chunker.encoder._additionalOffset+=n)},Io=function(){let n=0;const i=v(this,R).chunker.encoder;return i._numDistancePairs=de(this,X,jf).call(this),i._numDistancePairs>0&&(n=i._matchDistances[i._numDistancePairs-2],n==i._numFastBytes&&(n+=v(this,Ge).getMatchLen(n-1,i._matchDistances[i._numDistancePairs-1],273-n))),i._additionalOffset+=1,n},Ga=function(){const n=v(this,R).chunker.encoder;n._matchFinder&&n._needReleaseMFStream&&(n._matchFinder._stream=null,n._needReleaseMFStream=0)},Wf=function(){de(this,X,Ga).call(this),v(this,R).chunker.encoder._rangeEncoder.stream=null},Kr=function(n,i){return{decoders:v(this,R).chunker.encoder._literalEncoder.getSubCoder(n,i).decoders}},ps=function(n,i,l,c){let u,m=1,h=7,p,x=0;if(i){for(;h>=0;--h)if(p=l>>h&1,u=c>>h&1,x+=Gn(n.decoders[(1+p<<8)+m],u),m=m<<1|u,p!=u){--h;break}}for(;h>=0;--h)u=c>>h&1,x+=Gn(n.decoders[m],u),m=m<<1|u;return x},$a=function(n){n.backPrev=-1,n.prev1IsChar=0},Vf=function(n){n.backPrev=0,n.prev1IsChar=0},Yf=function(n,i){let l,c=1,u=0;for(let m=n.numBitLevels;m!=0;m-=1)l=i&1,i>>>=1,u+=Gn(n.models[c],l),c=c<<1|l;return u},Xf=function(){const n=$n(Zr(v(this,R).chunker.encoder._rangeEncoder.cacheSize),v(this,R).chunker.encoder._rangeEncoder.position);return $n(n,[4,0])},Kf=function(n){let i=0,l,c,u,m=n.length,h=[],p=[];for(let x=0;x<m;++x,++i){if(l=n[x]&255,l&128)if((l&224)==192){if(x+1>=m)return String.fromCharCode(...n);if(c=n[++x]&255,(c&192)!=128)return String.fromCharCode(...n);p[i]=(l&31)<<6|c&63}else if((l&240)==224){if(x+2>=m||(c=n[++x]&255,(c&192)!=128)||(u=n[++x]&255,(u&192)!=128))return n;p[i]=(l&15)<<12|(c&63)<<6|u&63}else return n;else{if(!l)return n;p[i]=l}i==16383&&(h.push(String.fromCharCode.apply(String,p)),i=-1)}return i>0&&(p.length=i,h.push(String.fromCharCode.apply(String,p))),h.join("")};/**
 * @license
 * Copyright Filip Seman
 * SPDX-License-Identifier: MIT
 */function Y0(o,n=5){const i=o instanceof ArrayBuffer?new Uint8Array(o):o,l=new wf().compress(i,n);return new Uint8Array(l)}function X0(o){const n=o instanceof ArrayBuffer?new Uint8Array(o):o,i=new wf().decompress(n);return new Uint8Array(i)}const K0=300,Qf=255,Mo=4096,Q0={item:1,outfit:2,effect:3,distance:4},Z0={1:"item",2:"outfit",3:"effect",4:"distance"},le={GROUND:0,GROUND_BORDER:1,ON_BOTTOM:2,ON_TOP:3,CONTAINER:4,STACKABLE:5,FORCE_USE:6,MULTI_USE:7,WRITABLE:8,WRITABLE_ONCE:9,FLUID_CONTAINER:10,FLUID:11,UNPASSABLE:12,UNMOVEABLE:13,BLOCK_MISSILE:14,BLOCK_PATHFIND:15,NO_MOVE_ANIMATION:16,PICKUPABLE:17,HANGABLE:18,HOOK_SOUTH:19,HOOK_EAST:20,ROTATABLE:21,HAS_LIGHT:22,DONT_HIDE:23,TRANSLUCENT:24,HAS_OFFSET:25,HAS_ELEVATION:26,LYING_OBJECT:27,ANIMATE_ALWAYS:28,MINI_MAP:29,LENS_HELP:30,FULL_GROUND:31,IGNORE_LOOK:32,CLOTH:33,MARKET_ITEM:34,DEFAULT_ACTION:35,WRAPPABLE:36,UNWRAPPABLE:37,TOP_EFFECT:38,HAS_CHARGES:252,FLOOR_CHANGE:253,USABLE:254};function q0(o){const n=new Uint8Array(o.length);for(let i=0;i<o.length;i+=4)n[i]=o[i+3],n[i+1]=o[i],n[i+2]=o[i+1],n[i+3]=o[i+2];return n}function J0(o){const n=new Uint8ClampedArray(o.length);for(let i=0;i<o.length;i+=4)n[i]=o[i+1],n[i+1]=o[i+2],n[i+2]=o[i+3],n[i+3]=o[i];return n}class e1{constructor(n=65536){$(this,"buf");$(this,"view");$(this,"pos",0);this.buf=new Uint8Array(n),this.view=new DataView(this.buf.buffer)}grow(n){for(;this.pos+n>this.buf.length;){const i=new Uint8Array(this.buf.length*2);i.set(this.buf),this.buf=i,this.view=new DataView(this.buf.buffer)}}u8(n){this.grow(1),this.view.setUint8(this.pos,n),this.pos+=1}u16(n){this.grow(2),this.view.setUint16(this.pos,n,!0),this.pos+=2}i16(n){this.grow(2),this.view.setInt16(this.pos,n,!0),this.pos+=2}u32(n){this.grow(4),this.view.setUint32(this.pos,n,!0),this.pos+=4}i32(n){this.grow(4),this.view.setInt32(this.pos,n,!0),this.pos+=4}bytes(n){this.grow(n.length),this.buf.set(n,this.pos),this.pos+=n.length}result(){return this.buf.slice(0,this.pos)}patchU32(n,i){this.view.setUint32(n,i,!0)}}class t1{constructor(n){$(this,"view");$(this,"pos",0);this.data=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength)}u8(){const n=this.view.getUint8(this.pos);return this.pos+=1,n}u16(){const n=this.view.getUint16(this.pos,!0);return this.pos+=2,n}i16(){const n=this.view.getInt16(this.pos,!0);return this.pos+=2,n}u32(){const n=this.view.getUint32(this.pos,!0);return this.pos+=4,n}i32(){const n=this.view.getInt32(this.pos,!0);return this.pos+=4,n}bytes(n){const i=this.data.slice(this.pos,this.pos+n);return this.pos+=n,i}str(n){return new TextDecoder("latin1").decode(this.bytes(n))}}function n1(o,n){if(n.ground?(o.u8(le.GROUND),o.u16(n.groundSpeed??0)):n.groundBorder?o.u8(le.GROUND_BORDER):n.onBottom?o.u8(le.ON_BOTTOM):n.onTop&&o.u8(le.ON_TOP),n.container&&o.u8(le.CONTAINER),n.stackable&&o.u8(le.STACKABLE),n.forceUse&&o.u8(le.FORCE_USE),n.multiUse&&o.u8(le.MULTI_USE),n.writable&&(o.u8(le.WRITABLE),o.u16(n.writableMaxLen??0)),n.writableOnce&&(o.u8(le.WRITABLE_ONCE),o.u16(n.writableOnceMaxLen??0)),n.fluidContainer&&o.u8(le.FLUID_CONTAINER),n.splash&&o.u8(le.FLUID),n.notWalkable&&o.u8(le.UNPASSABLE),n.notMoveable&&o.u8(le.UNMOVEABLE),n.blockProjectile&&o.u8(le.BLOCK_MISSILE),n.notPathable&&o.u8(le.BLOCK_PATHFIND),n.noMoveAnimation&&o.u8(le.NO_MOVE_ANIMATION),n.pickupable&&o.u8(le.PICKUPABLE),n.hangable&&o.u8(le.HANGABLE),n.hookSouth&&o.u8(le.HOOK_SOUTH),n.hookEast&&o.u8(le.HOOK_EAST),n.rotateable&&o.u8(le.ROTATABLE),n.hasLight&&(o.u8(le.HAS_LIGHT),o.u16(n.lightLevel??0),o.u16(n.lightColor??0)),n.dontHide&&o.u8(le.DONT_HIDE),n.translucent&&o.u8(le.TRANSLUCENT),n.hasDisplacement&&(o.u8(le.HAS_OFFSET),o.i16(n.displacementX??0),o.i16(n.displacementY??0)),n.hasElevation&&(o.u8(le.HAS_ELEVATION),o.u16(n.elevation??0)),n.lyingCorpse&&o.u8(le.LYING_OBJECT),n.animateAlways&&o.u8(le.ANIMATE_ALWAYS),n.hasMinimapColor&&(o.u8(le.MINI_MAP),o.u16(n.minimapColor??0)),n.lensHelp!=null&&(o.u8(le.LENS_HELP),o.u16(n.lensHelp)),n.fullGround&&o.u8(le.FULL_GROUND),n.look&&o.u8(le.IGNORE_LOOK),n.cloth&&(o.u8(le.CLOTH),o.u16(n.clothSlot??0)),n.hasMarket){o.u8(le.MARKET_ITEM),o.u16(n.marketCategory??0),o.u16(n.marketTradeAs??0),o.u16(n.marketShowAs??0);const i=n.marketName??"";o.u16(i.length);for(let l=0;l<i.length;l++)o.u8(i.charCodeAt(l)&255);o.u16(n.marketRestrictVocation??0),o.u16(n.marketRequiredLevel??0)}n.usable&&(o.u8(le.DEFAULT_ACTION),o.u16(n.usableActionId??0)),n.wrapable&&o.u8(le.WRAPPABLE),n.unwrapable&&o.u8(le.UNWRAPPABLE),n.topEffect&&o.u8(le.TOP_EFFECT),n.chargeable&&o.u8(le.HAS_CHARGES),o.u8(Qf)}function r1(o){const n={ground:!1,groundBorder:!1,onBottom:!1,onTop:!1,container:!1,stackable:!1,forceUse:!1,multiUse:!1,writable:!1,writableOnce:!1,fluidContainer:!1,splash:!1,notWalkable:!1,notMoveable:!1,blockProjectile:!1,notPathable:!1,pickupable:!1,hangable:!1,hookSouth:!1,hookEast:!1,rotateable:!1,hasLight:!1,dontHide:!1,translucent:!1,hasDisplacement:!1,hasElevation:!1,lyingCorpse:!1,animateAlways:!1,hasMinimapColor:!1,fullGround:!1,look:!1,cloth:!1,hasMarket:!1,usable:!1,wrapable:!1,unwrapable:!1,topEffect:!1,noMoveAnimation:!1,chargeable:!1};for(;;){const i=o.u8();if(i===Qf)break;switch(i){case le.GROUND:n.ground=!0,n.groundSpeed=o.u16();break;case le.GROUND_BORDER:n.groundBorder=!0;break;case le.ON_BOTTOM:n.onBottom=!0;break;case le.ON_TOP:n.onTop=!0;break;case le.CONTAINER:n.container=!0;break;case le.STACKABLE:n.stackable=!0;break;case le.FORCE_USE:n.forceUse=!0;break;case le.MULTI_USE:n.multiUse=!0;break;case le.WRITABLE:n.writable=!0,n.writableMaxLen=o.u16();break;case le.WRITABLE_ONCE:n.writableOnce=!0,n.writableOnceMaxLen=o.u16();break;case le.FLUID_CONTAINER:n.fluidContainer=!0;break;case le.FLUID:n.splash=!0;break;case le.UNPASSABLE:n.notWalkable=!0;break;case le.UNMOVEABLE:n.notMoveable=!0;break;case le.BLOCK_MISSILE:n.blockProjectile=!0;break;case le.BLOCK_PATHFIND:n.notPathable=!0;break;case le.NO_MOVE_ANIMATION:n.noMoveAnimation=!0;break;case le.PICKUPABLE:n.pickupable=!0;break;case le.HANGABLE:n.hangable=!0;break;case le.HOOK_SOUTH:n.hookSouth=!0;break;case le.HOOK_EAST:n.hookEast=!0;break;case le.ROTATABLE:n.rotateable=!0;break;case le.HAS_LIGHT:n.hasLight=!0,n.lightLevel=o.u16(),n.lightColor=o.u16();break;case le.DONT_HIDE:n.dontHide=!0;break;case le.TRANSLUCENT:n.translucent=!0;break;case le.HAS_OFFSET:n.hasDisplacement=!0,n.displacementX=o.i16(),n.displacementY=o.i16();break;case le.HAS_ELEVATION:n.hasElevation=!0,n.elevation=o.u16();break;case le.LYING_OBJECT:n.lyingCorpse=!0;break;case le.ANIMATE_ALWAYS:n.animateAlways=!0;break;case le.MINI_MAP:n.hasMinimapColor=!0,n.minimapColor=o.u16();break;case le.LENS_HELP:n.lensHelp=o.u16();break;case le.FULL_GROUND:n.fullGround=!0;break;case le.IGNORE_LOOK:n.look=!0;break;case le.CLOTH:n.cloth=!0,n.clothSlot=o.u16();break;case le.MARKET_ITEM:{n.hasMarket=!0,n.marketCategory=o.u16(),n.marketTradeAs=o.u16(),n.marketShowAs=o.u16();const l=o.u16();n.marketName=o.str(l),n.marketRestrictVocation=o.u16(),n.marketRequiredLevel=o.u16();break}case le.DEFAULT_ACTION:n.usable=!0,n.usableActionId=o.u16();break;case le.HAS_CHARGES:n.chargeable=!0;break;case le.FLOOR_CHANGE:break;case le.WRAPPABLE:n.wrapable=!0;break;case le.UNWRAPPABLE:n.unwrapable=!0;break;case le.TOP_EFFECT:n.topEffect=!0;break;case le.USABLE:n.usable=!0;break;default:throw new Error(`Unknown OBD flag 0x${i.toString(16)}`)}}return n}function i1(o){const{thing:n,clientVersion:i,spriteData:l,spriteOverrides:c}=o,u=new e1;u.u16(K0),u.u16(i),u.u8(Q0[n.category]??1);const m=u.pos;u.u32(0),n1(u,n.flags),u.patchU32(m,u.pos);const h=n.category==="outfit",p=n.frameGroups.length;h&&u.u8(p);for(let x=0;x<p;x++){h&&u.u8(p<2?1:x);const w=n.frameGroups[x];if(u.u8(w.width),u.u8(w.height),(w.width>1||w.height>1)&&u.u8(32),u.u8(w.layers),u.u8(w.patternX),u.u8(w.patternY),u.u8(w.patternZ||1),u.u8(w.animationLength),w.animationLength>1){u.u8(w.asynchronous),u.i32(w.nLoop),u.u8(w.start);for(let y=0;y<w.animationLength;y++){const S=w.animationLengths[y]??{min:100,max:100};u.u32(S.min),u.u32(S.max)}}for(let y=0;y<w.sprites.length;y++){const S=w.sprites[y];u.u32(S);let b;if(S===0)b=new Uint8Array(Mo);else{const O=c.get(S)??Hn(l,S);O?b=q0(new Uint8Array(O.data.buffer,O.data.byteOffset,O.data.byteLength)):b=new Uint8Array(Mo)}u.u32(b.length),u.bytes(b)}}return Y0(u.result(),5)}function s1(o){let n;try{n=X0(o)}catch(I){throw new Error(`Failed to decompress OBD file. Ensure this is a valid .obd file.
${I instanceof Error?I.message:I}`)}if(n.length<9)throw new Error("OBD file too small.");const i=new t1(n),l=i.u16();let c,u;if(l===300)c=3,u=i.u16();else if(l===200)c=2,u=i.u16();else throw l>=710?new Error(`This is an OBD Version 1 file (client ${l}). V1 is not supported  please re-export from the Object Builder as V2 or V3.`):new Error(`Unrecognised OBD header: 0x${l.toString(16)} (${l}). Not a valid .obd file.`);const m=i.u8(),h=Z0[m];if(!h)throw new Error(`Invalid category byte: ${m}`);i.u32();const p=r1(i),x=h==="outfit";let w=1;x&&c===3&&(w=i.u8());const y=[],S=new Map;let b=2130706432;for(let I=0;I<w;I++){x&&c===3&&i.u8();const F=i.u8(),D=i.u8();(F>1||D>1)&&i.u8();const L=i.u8(),A=i.u8(),Z=i.u8(),P=i.u8()||1,Q=i.u8();let J=0,Se=0,Ce=0;const fe=[];if(Q>1){J=i.u8(),Se=i.i32(),Ce=i.u8();for(let ne=0;ne<Q;ne++)fe.push({min:i.u32(),max:i.u32()})}else fe.push({min:0,max:0});const me=F*D*L*A*Z*P*Q,K=[];for(let ne=0;ne<me;ne++){const ge=i.u32();let ae;if(c===3){const Y=i.u32();ae=i.bytes(Y)}else ae=i.bytes(Mo);if(ge===0||ae.length!==Mo){K.push(0);continue}b++;const ce=b;K.push(ce);const N=J0(ae),ie=new ImageData(N,32,32);S.set(ce,ie)}y.push({type:I,width:F,height:D,layers:L,patternX:A,patternY:Z,patternZ:P,animationLength:Q,asynchronous:J,nLoop:Se,start:Ce,animationLengths:fe,sprites:K})}if(h==="outfit"&&y.length>=2){const I=y[0];for(let F=1;F<y.length;F++){const D=y[F];if(D.layers>=I.layers)continue;const L=D.width*D.height,A=D.patternX*D.patternY*D.patternZ,Z=D.layers*L,P=I.layers*L,Q=A*P,J=D.sprites.slice(0,A*Z),Se=new Array(Q).fill(0);for(let fe=0;fe<A;fe++){for(let me=0;me<L;me++)Se[fe*P+me]=J[fe*Z+me];for(let me=1;me<I.layers;me++)for(let K=0;K<L;K++)Se[fe*P+me*L+K]=I.sprites[fe*P+me*L+K]}const Ce=I.sprites.slice(0,Q);for(D.layers=I.layers,D.sprites=[...Se,...Ce],D.animationLength=2;D.animationLengths.length>2;)D.animationLengths.pop();for(;D.animationLengths.length<2;)D.animationLengths.push({min:100,max:100})}}const _=I=>{if(!I)return"EMPTY";let F=0;for(let D=0;D<I.data.length;D+=4)I.data[D+3]>0&&(F=F*31+I.data[D]+I.data[D+1]*256+I.data[D+2]*65536|0);return F.toString(16).padStart(8,"0")};console.group("[OBD DIAGNOSTIC]"),console.log("OBD version:",c,"| Client:",u,"| Category:",h),console.log("Frame groups:",y.length);const O=new Map;if(h==="outfit"&&y.length>=1){const I=y[0],F=I.width*I.height;console.log(`  Idle (Group 0): w=${I.width} h=${I.height} layers=${I.layers} pX=${I.patternX} frames=${I.animationLength} sprites=${I.sprites.length}`);for(let D=0;D<I.sprites.length;D++){const L=_(S.get(I.sprites[D])),A=Math.floor(D/(I.layers*F)),Z=Math.floor(D%(I.layers*F)/F),P=D%F,Q=`idle[${D}] dir=${A} L=${Z} tile=${P}`;O.set(L+"_"+D,Q),console.log(`    [${D}] hash=${L}  ${Q}`)}}for(let I=1;I<y.length;I++){const F=y[I],D=F.width*F.height,L=F.layers*F.patternX*F.patternY*F.patternZ*D;console.log(`  Walking (Group ${I}): w=${F.width} h=${F.height} layers=${F.layers} pX=${F.patternX} frames=${F.animationLength} sprites=${F.sprites.length} spritesPerFrame=${L}`);for(let A=0;A<F.sprites.length;A++){const Z=_(S.get(F.sprites[A])),P=Math.floor(A/L),Q=A%L,J=Math.floor(Q/(F.layers*D)),Se=Math.floor(Q%(F.layers*D)/D),Ce=Q%D;let fe="";for(const[me,K]of O)if(me.startsWith(Z+"_")){fe=`  MATCHES ${K}`;break}console.log(`    [${A}] hash=${Z} f=${P} dir=${J} L=${Se} tile=${Ce}${fe}`)}}return console.groupEnd(),{category:h,clientVersion:u,flags:p,frameGroups:y,spritePixels:S}}function o1({thing:o,group:n,objectData:i,spriteData:l,spriteOverrides:c,category:u,zoom:m,setZoom:h,showGrid:p,setShowGrid:x,showCropSize:w,setShowCropSize:y,previewMode:S,setPreviewMode:b,playing:_,setPlaying:O,currentFrame:I,setCurrentFrame:F,canvasRef:D,handleImageFiles:L,copyMenuOpen:A,setCopyMenuOpen:Z,copyMenuRef:P,baseOutfitId:Q,setBaseOutfitId:J}){const Se=V.useRef(null),Ce=V.useRef(null),fe=n?n.animationLength>1:!1,me=()=>{const ge=D.current;if(!ge)return;const ae=ge.toDataURL("image/png"),ce=document.createElement("a");ce.href=ae,ce.download=`sprite_${o.id}_frame${I}.png`,ce.click()},K=()=>{if(l)try{const ge=i1({thing:o,clientVersion:1098,spriteData:l,spriteOverrides:c}),ae=new Blob([new Uint8Array(ge)],{type:"application/octet-stream"}),ce=URL.createObjectURL(ae),N=document.createElement("a");N.href=ce;const ie=i?rr(i,o.id):o.id;N.download=`${u}_${ie}.obd`,N.click(),URL.revokeObjectURL(ce)}catch(ge){alert(`Export failed: ${ge instanceof Error?ge.message:ge}`)}},ne=ge=>{var N;const ae=(N=ge.target.files)==null?void 0:N[0];if(!ae)return;const ce=new FileReader;ce.onload=()=>{var ie;try{const Y=new Uint8Array(ce.result),C=s1(Y),W=H.getState(),oe=W.selectedThingId,he=oe!=null?(ie=W.objectData)==null?void 0:ie.things.get(oe):null;if(oe!=null&&he&&he.category===C.category)if(W.replaceThing(oe,C.flags,C.frameGroups,C.spritePixels)){const re=H.getState().objectData,ve=re?rr(re,oe):oe;alert(`Replaced ${C.category} #${ve} with ${C.spritePixels.size} sprites.`)}else alert("Replace failed  could not overwrite selected thing.");else{const xe=W.importThing(C.category,C.flags,C.frameGroups,C.spritePixels);if(xe!=null){const re=H.getState().objectData,ve=re?rr(re,xe):xe;alert(`Imported ${C.category} #${ve} with ${C.spritePixels.size} sprites.`)}}}catch(Y){alert(`Import failed: ${Y instanceof Error?Y.message:Y}`)}},ce.readAsArrayBuffer(ae),ge.target.value=""};return f.jsxs("div",{className:"flex items-center px-3 py-1.5 gap-1 border-t border-emperia-border flex-wrap",children:[f.jsx("button",{onClick:()=>h(Math.max(1,m-1)),className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Zoom out",children:f.jsx(Vm,{className:"w-3.5 h-3.5"})}),f.jsxs("span",{className:"text-[10px] text-emperia-muted w-6 text-center",children:[m,"x"]}),f.jsx("button",{onClick:()=>h(Math.min(8,m+1)),className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Zoom in",children:f.jsx(Wm,{className:"w-3.5 h-3.5"})}),f.jsx("div",{className:"w-px h-4 bg-emperia-border mx-0.5"}),f.jsx("button",{onClick:()=>x(!p),className:`p-1 rounded transition-colors ${p?"bg-emperia-accent/20 text-emperia-accent":"text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover"}`,title:"Toggle Grid",children:f.jsx(Nm,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:()=>y(!w),className:`p-1 rounded transition-colors ${w?"bg-emperia-accent/20 text-emperia-accent":"text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover"}`,title:"Toggle Crop Outline",children:f.jsx(Cm,{className:"w-3.5 h-3.5"})}),n&&(n.patternX>1||n.patternY>1)&&f.jsx("button",{onClick:()=>b(!S),className:`p-1 rounded transition-colors ${S?"bg-emperia-accent/20 text-emperia-accent":"text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover"}`,title:"Toggle Preview Mode",children:f.jsx(Em,{className:"w-3.5 h-3.5"})}),f.jsx("div",{className:"w-px h-4 bg-emperia-border mx-0.5"}),f.jsx("input",{ref:Se,type:"file",accept:"image/png,image/gif,image/bmp",className:"hidden",onChange:ge=>ge.target.files&&L(ge.target.files)}),f.jsx("button",{onClick:()=>{var ge;return(ge=Se.current)==null?void 0:ge.click()},className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Import PNG",children:f.jsx(Bm,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:me,className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Export PNG",children:f.jsx(Tm,{className:"w-3.5 h-3.5"})}),f.jsx("div",{className:"w-px h-4 bg-emperia-border mx-0.5"}),f.jsx("input",{ref:Ce,type:"file",accept:".obd",className:"hidden",onChange:ne}),f.jsx("button",{onClick:()=>{var ge;return(ge=Ce.current)==null?void 0:ge.click()},className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Import OBD",children:f.jsx(df,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:K,className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Export OBD",children:f.jsx(Xa,{className:"w-3.5 h-3.5"})}),f.jsx("div",{className:"w-px h-4 bg-emperia-border mx-0.5"}),f.jsx(l1,{thing:o,copyMenuOpen:A,setCopyMenuOpen:Z,copyMenuRef:P}),fe&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-px h-4 bg-emperia-border mx-0.5"}),f.jsx("button",{onClick:()=>{F((I-1+((n==null?void 0:n.animationLength)??1))%((n==null?void 0:n.animationLength)??1)),O(!1)},className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Previous frame",children:f.jsx(km,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:()=>O(!_),className:`p-1 rounded transition-colors ${_?"bg-emperia-accent/20 text-emperia-accent":"text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover"}`,title:_?"Pause":"Play",children:_?f.jsx(Mm,{className:"w-3.5 h-3.5"}):f.jsx(Om,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:()=>{F((I+1)%((n==null?void 0:n.animationLength)??1)),O(!1)},className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Next frame",children:f.jsx(cf,{className:"w-3.5 h-3.5"})}),f.jsxs("span",{className:"text-[10px] text-emperia-muted",children:[I+1,"/",n==null?void 0:n.animationLength]})]}),u==="outfit"&&i&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"flex-1"}),f.jsxs("div",{className:"flex items-center gap-0.5",children:[Q!=null&&Q!==o.id&&f.jsxs("span",{className:"text-[9px] text-amber-400/70 mr-0.5",children:["Base: #",rr(i,Q)]}),(()=>{const ge=i.itemCount+134,ae=Q===ge;return f.jsxs("button",{onClick:()=>J(ae?null:ge),className:`p-1 rounded transition-colors ${ae?"bg-sky-500/20 text-sky-400":"text-emperia-muted hover:text-sky-400 hover:bg-sky-500/10"}`,title:ae?"Unpin character base (#134)":"Pin outfit #134 as base",children:[f.jsx(Rd,{className:"w-3.5 h-3.5"}),f.jsx("span",{className:"sr-only",children:"134"})]})})(),f.jsx("button",{onClick:()=>J(Q===o.id?null:o.id),className:`p-1 rounded transition-colors ${Q===o.id?"bg-amber-500/20 text-amber-400":Q!=null?"bg-amber-500/10 text-amber-400/60 hover:text-amber-400 hover:bg-amber-500/20":"text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover"}`,title:Q===o.id?"Unpin base outfit":Q!=null?"Replace pinned base with this outfit":"Pin current as base outfit",children:Q===o.id?f.jsx(Rm,{className:"w-3.5 h-3.5"}):f.jsx(Rd,{className:"w-3.5 h-3.5"})})]})]})]})}function l1({thing:o,copyMenuOpen:n,setCopyMenuOpen:i,copyMenuRef:l}){var c;return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"relative",ref:l,children:[f.jsx("button",{onClick:()=>i(!n),className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Copy properties",children:f.jsx(_m,{className:"w-3.5 h-3.5"})}),n&&f.jsx("div",{className:"absolute bottom-full mb-1 left-0 bg-emperia-surface border border-emperia-border rounded shadow-lg py-1 z-50 min-w-[160px]",onClick:()=>i(!1),children:[{label:"Everything",key:"all"},{label:"Flags Only",key:"flags"},{label:"Server Properties",key:"server"},{label:"Sprites Only",key:"sprites"}].map(({label:u,key:m})=>f.jsx("button",{className:"w-full text-left px-3 py-1.5 text-[11px] text-emperia-text hover:bg-emperia-hover transition-colors",onClick:()=>{const{clientToServerIds:h,itemDefinitions:p}=H.getState(),x=h.get(o.id),w=x!=null?p.get(x)??null:null,y={label:u};(m==="all"||m==="flags")&&(y.flags={...o.flags}),(m==="all"||m==="sprites")&&(y.frameGroups=o.frameGroups.map(S=>({...S,sprites:[...S.sprites],animationLengths:S.animationLengths.map(b=>({...b}))}))),(m==="all"||m==="server")&&(y.serverDef=w?{...w,properties:w.properties?{...w.properties}:null}:null),H.setState({copiedThing:y})},children:u},m))})]}),f.jsx("button",{onClick:()=>{const{copiedThing:u}=H.getState();if(!u)return;const m=H.getState(),h=new Set(m.dirtyIds);if(h.add(o.id),u.frameGroups&&(o.frameGroups=u.frameGroups.map(p=>({...p,sprites:[...p.sprites],animationLengths:p.animationLengths.map(x=>({...x}))}))),o.rawBytes=void 0,nr(),u.serverDef&&o.category==="item"){const{clientToServerIds:p,itemDefinitions:x}=m,w=p.get(o.id);if(w!=null){const y=new Map(x);y.set(w,{...u.serverDef,serverId:w,id:o.id}),H.setState({dirty:!0,dirtyIds:h,editVersion:m.editVersion+1,itemDefinitions:y})}}u.flags?m.updateThingFlags(o.id,{...u.flags}):H.setState({dirty:!0,dirtyIds:h,editVersion:m.editVersion+1})},disabled:!H.getState().copiedThing,className:`p-1 rounded transition-colors ${H.getState().copiedThing?"hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text":"text-emperia-muted/30 cursor-not-allowed"}`,title:(c=H.getState().copiedThing)!=null&&c.label?`Paste: ${H.getState().copiedThing.label}`:"Paste properties",children:f.jsx(bm,{className:"w-3.5 h-3.5"})})]})}function a1({thing:o,group:n,isOutfit:i,isDistance:l,previewMode:c,activeDirection:u,setActiveDirection:m,activePatternY:h,setActivePatternY:p,activeZ:x,setActiveZ:w,activeLayer:y,setActiveLayer:S,blendLayers:b,setBlendLayers:_,currentFrame:O,setCurrentFrame:I,playing:F,setPlaying:D,outfitColors:L,setOutfitColors:A,showColorPicker:Z,setShowColorPicker:P,updateFrameGroupProp:Q}){return f.jsxs("div",{className:"border-t border-emperia-border text-[10px]",children:[f.jsx(Ai,{label:"Patterns"}),f.jsxs("div",{className:"px-4 py-1.5 space-y-1.5",children:[f.jsxs("div",{className:"grid grid-cols-3 gap-x-3 gap-y-1 bg-emperia-surface/40 rounded px-2 py-1.5",children:[f.jsx(nn,{label:"Width",value:n.width,onChange:J=>Q("width",J),min:1,max:4}),f.jsx(nn,{label:"Height",value:n.height,onChange:J=>Q("height",J),min:1,max:4}),f.jsx(nn,{label:"Crop Size",value:32,readOnly:!0})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-x-3 gap-y-1 bg-blue-950/20 border border-blue-500/10 rounded px-2 py-1.5",children:[f.jsx(nn,{label:"Pattern X",value:n.patternX,onChange:J=>Q("patternX",J),min:1,max:8,labelClassName:"text-[10px] text-blue-400/80"}),f.jsx(nn,{label:"Pattern Y",value:n.patternY,onChange:J=>Q("patternY",J),min:1,max:8,labelClassName:"text-[10px] text-blue-400/80"}),f.jsx(nn,{label:"Pattern Z",value:n.patternZ,onChange:J=>Q("patternZ",J),min:1,max:8,labelClassName:"text-[10px] text-blue-400/80"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-x-2",children:[f.jsx("div",{className:"bg-purple-950/20 border border-purple-500/10 rounded px-2 py-1.5",children:f.jsx(nn,{label:"Layers",value:n.layers,onChange:J=>Q("layers",J),min:1,max:255,labelClassName:"text-[10px] text-purple-400/80"})}),f.jsx("div",{className:"bg-emerald-950/20 border border-emerald-500/10 rounded px-2 py-1.5",children:f.jsx(nn,{label:"Animations",value:n.animationLength,onChange:J=>Q("animationLength",J),min:1,max:999,labelClassName:"text-[10px] text-emerald-400/80"})})]})]}),f.jsx(c1,{group:n,isOutfit:i,isDistance:l,previewMode:c,activeDirection:u,setActiveDirection:m,activePatternY:h,setActivePatternY:p,activeZ:x,setActiveZ:w}),n.layers>1&&f.jsxs(f.Fragment,{children:[f.jsx(Ai,{label:"Layer",colorClass:"bg-purple-950/30 text-purple-400"}),f.jsxs("div",{className:"px-4 py-1.5 flex items-center gap-1",children:[f.jsx("span",{className:"text-emperia-muted shrink-0",children:"Layer:"}),f.jsx(wn,{onClick:()=>S(Math.max(0,y-1)),disabled:b,children:""}),f.jsx("span",{className:`font-mono w-8 text-center text-[9px] ${b?"text-emperia-muted":"text-emperia-text"}`,children:b?"All":`${y+1}/${n.layers}`}),f.jsx(wn,{onClick:()=>S(Math.min(n.layers-1,y+1)),disabled:b,children:""}),f.jsxs("label",{className:"flex items-center gap-0.5 cursor-pointer ml-1",children:[f.jsx("input",{type:"checkbox",checked:b,onChange:()=>_(!b),className:"w-2.5 h-2.5 accent-emperia-accent"}),f.jsx("span",{className:"text-emperia-muted text-[9px]",children:"Blend"})]})]})]}),f.jsx(u1,{thing:o,group:n,currentFrame:O,setCurrentFrame:I,playing:F,setPlaying:D,updateFrameGroupProp:Q}),(i||o.flags.hasDisplacement)&&f.jsxs(f.Fragment,{children:[f.jsx(Ai,{label:"Offset"}),f.jsxs("div",{className:"px-4 py-1.5 grid grid-cols-3 gap-x-3 gap-y-1",children:[f.jsx(nn,{label:"Offset X",value:o.flags.displacementX??0,min:-512,max:512,onChange:J=>{H.getState().updateThingFlags(o.id,{...o.flags,hasDisplacement:!0,displacementX:J})}}),f.jsx(nn,{label:"Offset Y",value:o.flags.displacementY??0,min:-512,max:512,onChange:J=>{H.getState().updateThingFlags(o.id,{...o.flags,hasDisplacement:!0,displacementY:J})}}),f.jsx("div",{})]})]}),i&&b&&n.layers>=2&&f.jsx(d1,{outfitColors:L,setOutfitColors:A,showColorPicker:Z,setShowColorPicker:P})]})}function Ai({label:o,colorClass:n}){return f.jsx("div",{className:`px-4 py-1 border-y border-emperia-border/40 ${n??"bg-emperia-surface/60"}`,children:f.jsx("span",{className:`text-[9px] font-semibold uppercase tracking-wider ${n?"text-inherit opacity-80":"text-emperia-muted"}`,children:o})})}function c1({group:o,isOutfit:n,isDistance:i,previewMode:l,activeDirection:c,setActiveDirection:u,activePatternY:m,setActivePatternY:h,activeZ:p,setActiveZ:x}){const w=o.patternX>4&&!i,y=o.patternY>1&&!i,S=o.patternZ>1;return!l||!(w||y||S)?null:f.jsxs(f.Fragment,{children:[f.jsx(Ai,{label:"Preview"}),f.jsxs("div",{className:"px-4 py-1.5 flex flex-wrap items-center gap-x-3 gap-y-1",children:[w&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-emperia-muted shrink-0",children:"Direction:"}),f.jsx(wn,{onClick:()=>u(Math.max(0,c-1)),children:""}),f.jsxs("span",{className:"text-emperia-text font-mono w-10 text-center",children:[c+1,"/",o.patternX]}),f.jsx(wn,{onClick:()=>u(Math.min(o.patternX-1,c+1)),children:""})]}),y&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-emperia-muted shrink-0",children:n?"Addon:":"Pat Y:"}),f.jsx(wn,{onClick:()=>h(Math.max(0,m-1)),children:""}),f.jsx("span",{className:"text-emperia-text font-mono w-8 text-center text-[9px]",children:n?m===0?"None":`#${m}`:`${m+1}/${o.patternY}`}),f.jsx(wn,{onClick:()=>h(Math.min(o.patternY-1,m+1)),children:""})]}),S&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-emperia-muted shrink-0",children:n?"Mount:":"Pat Z:"}),f.jsx(wn,{onClick:()=>x(Math.max(0,p-1)),children:""}),f.jsxs("span",{className:"text-emperia-text font-mono w-8 text-center text-[9px]",children:[p+1,"/",o.patternZ]}),f.jsx(wn,{onClick:()=>x(Math.min(o.patternZ-1,p+1)),children:""})]})]})]})}function u1({thing:o,group:n,currentFrame:i,setCurrentFrame:l,playing:c,setPlaying:u,updateFrameGroupProp:m}){return n.animationLength<=1?null:f.jsxs(f.Fragment,{children:[f.jsx(Ai,{label:"Animation",colorClass:"bg-emerald-950/30 text-emerald-400"}),f.jsxs("div",{className:"px-4 py-1.5",children:[f.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[f.jsx("span",{className:"text-emperia-muted shrink-0",children:"Frame:"}),f.jsx(wn,{onClick:()=>{l((i-1+n.animationLength)%n.animationLength),u(!1)},children:""}),f.jsxs("span",{className:"text-emperia-text font-mono w-10 text-center text-[9px]",children:[i+1,"/",n.animationLength]}),f.jsx(wn,{onClick:()=>{l((i+1)%n.animationLength),u(!1)},children:""}),f.jsx("button",{onClick:()=>u(!c),className:`ml-1 px-1.5 py-0.5 rounded text-[9px] transition-colors ${c?"bg-emperia-accent text-white":"bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-emperia-text"}`,children:c?"Stop":"Play"})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-x-3 gap-y-1",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-emperia-muted shrink-0",children:"Mode:"}),f.jsxs("select",{value:n.asynchronous,onChange:h=>m("asynchronous",Number(h.target.value)),className:"flex-1 px-1 py-0 bg-emperia-surface border border-emperia-border rounded text-[9px] text-emperia-text outline-none focus:border-emperia-accent",children:[f.jsx("option",{value:0,children:"Sync"}),f.jsx("option",{value:1,children:"Async"})]})]}),f.jsx(nn,{label:"Loop count",value:n.nLoop,min:0,max:255,onChange:h=>m("nLoop",h)}),f.jsx(nn,{label:"Start frame",value:n.start,min:0,max:n.animationLength-1,onChange:h=>m("start",h)})]}),n.animationLengths[i]&&f.jsxs("div",{className:"grid grid-cols-3 gap-x-3 gap-y-1 mt-1 pt-1 border-t border-emperia-border/20",children:[f.jsxs("div",{className:"col-span-3 text-[8px] text-emperia-muted",children:["Frame ",i+1," duration (ms)"]}),f.jsx(nn,{label:"Min",value:n.animationLengths[i].min,min:0,max:65535,onChange:h=>{n.animationLengths[i].min=h,o.rawBytes=void 0;const p=H.getState(),x=new Set(p.dirtyIds);x.add(o.id),H.setState({dirty:!0,dirtyIds:x,editVersion:p.editVersion+1})}}),f.jsx(nn,{label:"Max",value:n.animationLengths[i].max,min:0,max:65535,onChange:h=>{n.animationLengths[i].max=h,o.rawBytes=void 0;const p=H.getState(),x=new Set(p.dirtyIds);x.add(o.id),H.setState({dirty:!0,dirtyIds:x,editVersion:p.editVersion+1})}}),f.jsx("div",{})]})]})]})}function d1({outfitColors:o,setOutfitColors:n,showColorPicker:i,setShowColorPicker:l}){return f.jsxs(f.Fragment,{children:[f.jsx(Ai,{label:"Colors"}),f.jsxs("div",{className:"px-4 py-1.5",children:[f.jsx("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1",children:["head","body","legs","feet"].map(c=>f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:()=>l(i===c?null:c),className:"w-4 h-4 rounded border border-emperia-border shrink-0",style:{backgroundColor:Wd(o[c])},title:`${c}: ${o[c]}`}),f.jsx("span",{className:"text-emperia-muted capitalize text-[9px]",children:c}),f.jsx(wn,{onClick:()=>n({...o,[c]:Math.max(0,o[c]-1)}),children:""}),f.jsx("span",{className:"text-emperia-text font-mono w-5 text-center text-[9px]",children:o[c]}),f.jsx(wn,{onClick:()=>n({...o,[c]:Math.min(Di-1,o[c]+1)}),children:""})]},c))}),i&&f.jsx("div",{className:"mt-1 p-1 bg-emperia-surface border border-emperia-border rounded grid gap-px",style:{gridTemplateColumns:"repeat(19, 14px)"},children:Qr.map((c,u)=>f.jsx("button",{onClick:()=>{n({...o,[i]:u}),l(null)},className:`w-3.5 h-3.5 rounded-sm border ${o[i]===u?"border-white":"border-transparent"}`,style:{backgroundColor:Wd(u)},title:`${u}`},u))})]})]})}function f1(){const o=H(be=>be.selectedThingId),n=H(be=>be.objectData),i=H(be=>be.spriteData),l=H(be=>be.spriteOverrides),c=H(be=>be.replaceSprite),u=H(be=>be.addSprite),m=H(be=>be.editVersion),h=o!=null?(n==null?void 0:n.things.get(o))??null:null,[p,x]=V.useState(0),[w,y]=V.useState(0),[S,b]=V.useState(!1),[_,O]=V.useState(4),[I,F]=V.useState(!1),[D,L]=V.useState(!1),[A,Z]=V.useState(!1),[P,Q]=V.useState(null),[J,Se]=V.useState(0),[Ce,fe]=V.useState(0),[me,K]=V.useState(!1),[ne,ge]=V.useState({head:0,body:0,legs:0,feet:0}),[ae,ce]=V.useState(!1),[N,ie]=V.useState(2),[Y,C]=V.useState(0),[W,oe]=V.useState(null),[he,xe]=V.useState(!1),re=V.useRef(null),[ve,Ie]=V.useState(null),z=V.useRef(null),ue=V.useRef(0),Ne=V.useRef(""),Re=H(be=>be.activeCategory),He=Re==="outfit",mt=Re==="effect",B=Re==="distance";V.useEffect(()=>{x(0),y(0),b(!1),Se(0),fe(0),ie(2),C(0),ce(He||mt||B),K(He)},[o,He,mt,B]),V.useEffect(()=>{if(!he)return;const be=je=>{re.current&&!re.current.contains(je.target)&&xe(!1)};return document.addEventListener("mousedown",be),()=>document.removeEventListener("mousedown",be)},[he]);const j=(h==null?void 0:h.frameGroups[p])??null,Ht=V.useCallback((be,je,Ke,Ze,$e,Xe,et,It,Ae,Le,We=0,qe=0)=>{if(!i)return;const xt=Ae?[0]:[0];for(const jt of xt)for(let Ft=0;Ft<$e.length;Ft++){const _t=$e[Ft];for(let ln=0;ln<Ze.length;ln++){const an=Ze[ln],Lt=ln*Xe,Pt=Ft*et;for(let ct=0;ct<je.height;ct++)for(let ut=0;ut<je.width;ut++){const Ct=er(je,Ke,an,_t,0,jt,ut,ct);if(Ct>=je.sprites.length)continue;const $t=je.sprites[Ct];if($t<=0)continue;const Kt=l.get($t)??Hn(i,$t);if(!Kt)continue;const jn=new ImageData(new Uint8ClampedArray(Kt.data),32,32);if(Ae){const Et=er(je,Ke,an,_t,0,1,ut,ct);if(Et<je.sprites.length){const Fn=je.sprites[Et];if(Fn>0){const Br=l.get(Fn)??Hn(i,Fn);Br&&La(jn,Br,Le)}}}const Tr=We+Lt+(je.width-1-ut)*32,ei=qe+Pt+(je.height-1-ct)*32;if(It||Ae){const Et=document.createElement("canvas");Et.width=32,Et.height=32,Et.getContext("2d").putImageData(jn,0,0),be.drawImage(Et,Tr,ei)}else be.putImageData(jn,Tr,ei)}}}},[i,l]),Nr=`${m}:${p}:${o}`;Ne.current=Nr;const sr=V.useRef(!1),Nt=V.useCallback(be=>{const je=z.current;if(!je||!j||!i||Ne.current!==Nr)return;if(He&&p>0&&!sr.current){sr.current=!0,console.group("[RENDER DIAG] Walking group post-remap"),console.log(`layers=${j.layers} frames=${j.animationLength} sprites=${j.sprites.length} pX=${j.patternX}`);const Pt=["N","E","S","W"];for(let ct=0;ct<j.animationLength;ct++)for(let ut=0;ut<j.patternX;ut++)for(let Ct=0;Ct<j.layers;Ct++){const $t=er(j,ct,ut,0,0,Ct,0,0),Kt=$t<j.sprites.length?j.sprites[$t]:-1,jn=Kt>0&&(l.has(Kt)||!!Hn(i,Kt));console.log(`  f=${ct} ${Pt[ut]} L${Ct}: idx=${$t} sid=${Kt} hasPixels=${jn}`)}console.groupEnd()}const Ke=j.width*32,Ze=j.height*32,$e=ae?[N<j.patternX?N:0]:Array.from({length:j.patternX},(Pt,ct)=>ct),Xe=ae?[Y<j.patternY?Y:0]:Array.from({length:j.patternY},(Pt,ct)=>ct),et=$e.length,It=Xe.length,Ae=ve!=null&&ve!==o,Le=Ae&&(h!=null&&h.flags.hasDisplacement)?h.flags.displacementX??0:0,We=Ae&&(h!=null&&h.flags.hasDisplacement)?h.flags.displacementY??0:0,qe=Ae&&(Le!==0||We!==0),xt=Math.abs(Le),jt=Math.abs(We),Ft=Ke+xt,_t=Ze+jt,ln=et*Ft,an=It*_t;je.width=ln,je.height=an;const Lt=je.getContext("2d");Lt.clearRect(0,0,ln,an);for(let Pt=0;Pt<Xe.length;Pt++){const ct=Xe[Pt];for(let ut=0;ut<$e.length;ut++){const Ct=$e[ut],$t=ut*Ft,Kt=Pt*_t,jn=$t+Math.max(0,Le),Tr=Kt+Math.max(0,We),ei=$t+Math.max(0,-Le),Et=Kt+Math.max(0,-We);if(Ae&&n){const Sn=n.things.get(ve),ft=Sn==null?void 0:Sn.frameGroups[0];if(ft){const Ln=Ct<ft.patternX?Ct:0,Ir=ct<ft.patternY?ct:0,lr=ft.layers>=2;Ht(Lt,ft,0,[Ln],[Ir],ft.width*32,ft.height*32,!1,lr,ne,jn,Tr)}}const Fn=He&&me&&j.layers>=2,Br=Fn?[0]:me?Array.from({length:j.layers},(Sn,ft)=>ft):[J];for(const Sn of Br)for(let ft=0;ft<j.height;ft++)for(let Ln=0;Ln<j.width;Ln++){const Ir=er(j,be,Ct,ct,Ce,Sn,Ln,ft);if(Ir>=j.sprites.length)continue;const lr=j.sprites[Ir];if(lr<=0)continue;const ys=l.get(lr)??Hn(i,lr);if(!ys)continue;const Bi=new ImageData(new Uint8ClampedArray(ys.data),32,32);if(Fn){const bn=er(j,be,Ct,ct,Ce,1,Ln,ft);if(bn<j.sprites.length){const ti=j.sprites[bn];if(ti>0){const jr=l.get(ti)??Hn(i,ti);jr&&La(Bi,jr,ne)}}}const it=ei+(j.width-1-Ln)*32,vs=Et+(j.height-1-ft)*32;if(Ae||Fn||me&&Sn>0){const bn=document.createElement("canvas");bn.width=32,bn.height=32,bn.getContext("2d").putImageData(Bi,0,0),Lt.drawImage(bn,it,vs)}else Lt.putImageData(Bi,it,vs)}if(qe){Lt.save(),Lt.strokeStyle="rgba(250, 204, 21, 0.7)",Lt.lineWidth=1,Lt.setLineDash([4,3]);const Sn=jn+Ke-32,ft=Tr+Ze-32;Lt.strokeRect(Sn+.5,ft+.5,31,31),Lt.restore()}}}},[j,i,l,J,Ce,me,ae,N,Y,He,ne,ve,o,n,Ht,h,m]);V.useEffect(()=>{Nt(w)},[w,Nt]),V.useEffect(()=>{var Ze;if(!S||!j||j.animationLength<=1)return;let be=w;const je=()=>{var Xe;be=(be+1)%j.animationLength,y(be),Nt(be);const $e=((Xe=j.animationLengths[be])==null?void 0:Xe.min)??200;ue.current=window.setTimeout(je,$e)},Ke=((Ze=j.animationLengths[be])==null?void 0:Ze.min)??200;return ue.current=window.setTimeout(je,Ke),()=>{clearTimeout(ue.current)}},[S,j,Nt]);const gt=j?ae?1:j.patternX:1,rn=j?ae?1:j.patternY:1,wt=ve!=null&&ve!==o,Tt=wt&&(h!=null&&h.flags.hasDisplacement)?Math.abs(h.flags.displacementX??0):0,Xt=wt&&(h!=null&&h.flags.hasDisplacement)?Math.abs(h.flags.displacementY??0):0,Gt=j?gt*(j.width*32+Tt):32,sn=j?rn*(j.height*32+Xt):32,Bt=V.useCallback((be,je)=>{if(!j||!z.current)return 0;const Ke=z.current.getBoundingClientRect(),Ze=(be-Ke.left)/_,$e=(je-Ke.top)/_,Xe=Math.floor(Ze/32),et=Math.floor($e/32),It=gt*j.width,Ae=rn*j.height;if(Xe<0||Xe>=It||et<0||et>=Ae)return 0;const Le=Math.floor(Xe/j.width),We=Math.floor(et/j.height),qe=ae?N<j.patternX?N:0:Le,xt=ae?Y<j.patternY?Y:0:We,jt=j.width-1-Xe%j.width,Ft=j.height-1-et%j.height,_t=er(j,w,qe,xt,Ce,J,jt,Ft);return _t<j.sprites.length?j.sprites[_t]:0},[j,_,w,J,Ce,ae,N,Y,gt,rn]),or=V.useCallback((be,je)=>{if(!j||!z.current)return-1;const Ke=z.current.getBoundingClientRect(),Ze=(be-Ke.left)/_,$e=(je-Ke.top)/_,Xe=Math.floor(Ze/32),et=Math.floor($e/32),It=gt*j.width,Ae=rn*j.height;if(Xe<0||Xe>=It||et<0||et>=Ae)return-1;const Le=Math.floor(Xe/j.width),We=Math.floor(et/j.height),qe=ae?N<j.patternX?N:0:Le,xt=ae?Y<j.patternY?Y:0:We,jt=j.width-1-Xe%j.width,Ft=j.height-1-et%j.height,_t=er(j,w,qe,xt,Ce,J,jt,Ft);return _t<j.sprites.length?_t:-1},[j,_,w,J,Ce,ae,N,Y,gt,rn]),on=V.useCallback((be,je,Ke)=>{if(!j||!i)return;const Ze=be[0];if(!Ze||!Ze.type.startsWith("image/"))return;const $e=new Image;$e.onload=()=>{const Xe=document.createElement("canvas");Xe.width=32,Xe.height=32;const et=Xe.getContext("2d"),It=(Ae,Le)=>{const We=j.sprites[Ae];if(We>0)c(We,Le);else{const qe=u(Le);if(qe!=null&&(j.sprites[Ae]=qe,h)){const xt=new Set(H.getState().dirtyIds);xt.add(h.id),H.setState({dirty:!0,dirtyIds:xt})}}};if($e.width<=32&&$e.height<=32){et.clearRect(0,0,32,32),et.drawImage($e,0,0,32,32);const Ae=et.getImageData(0,0,32,32);let Le=-1;if(je!=null&&Ke!=null){const We=Bt(je,Ke);We>0&&(Le=j.sprites.indexOf(We))}Le<0&&(Le=er(j,w,0,0,0,0,0,0)),Le>=0&&Le<j.sprites.length&&It(Le,Ae)}else{const Ae=j.patternX*j.width,Le=j.patternY*j.height;for(let We=0;We<Le&&We*32<$e.height;We++)for(let qe=0;qe<Ae&&qe*32<$e.width;qe++){const xt=Math.floor(qe/j.width),jt=Math.floor(We/j.height),Ft=j.width-1-qe%j.width,_t=j.height-1-We%j.height,ln=er(j,w,xt,jt,0,0,Ft,_t);if(ln>=j.sprites.length)continue;et.clearRect(0,0,32,32),et.drawImage($e,qe*32,We*32,32,32,0,0,32,32);const an=et.getImageData(0,0,32,32);It(ln,an)}}},$e.src=URL.createObjectURL(Ze)},[j,h,i,w,c,u,Bt]),kn=V.useCallback(be=>{be.preventDefault(),Z(!1),Q(null);const je=be.dataTransfer.getData("application/x-sprite-id");if(je&&h&&j){const Ke=parseInt(je,10);if(!isNaN(Ke)&&Ke>0){const Ze=or(be.clientX,be.clientY);if(Ze>=0){j.sprites[Ze]=Ke,h.rawBytes=void 0,nr();const $e=H.getState(),Xe=new Set($e.dirtyIds);Xe.add(h.id),H.setState({dirty:!0,dirtyIds:Xe,editVersion:$e.editVersion+1})}return}}be.dataTransfer.files.length>0&&on(be.dataTransfer.files,be.clientX,be.clientY)},[on,h,j,or]),Jr=V.useCallback((be,je)=>{if(!h||!j)return;j[be]=je;const Ke=j.width*j.height*j.layers*j.patternX*j.patternY*j.patternZ*j.animationLength;if(j.sprites.length<Ke)for(;j.sprites.length<Ke;)j.sprites.push(0);else j.sprites.length>Ke&&(j.sprites.length=Ke);for(;j.animationLengths.length<j.animationLength;)j.animationLengths.push({min:100,max:100});j.animationLengths.length>j.animationLength&&(j.animationLengths.length=j.animationLength),h.rawBytes=void 0,nr();const Ze=H.getState(),$e=new Set(Ze.dirtyIds);$e.add(h.id),H.setState({dirty:!0,dirtyIds:$e,editVersion:Ze.editVersion+1})},[h,j]);return h?(j&&j.animationLength>1,f.jsxs("div",{className:"flex flex-col h-full",children:[f.jsxs("div",{className:"flex items-center px-4 py-2 border-b border-emperia-border gap-3",children:[f.jsx("span",{className:"text-[10px] text-emperia-muted",children:"Zoom:"}),f.jsx("input",{type:"range",min:1,max:8,value:_,onChange:be=>O(Number(be.target.value)),className:"flex-1 h-1 accent-emperia-accent"}),f.jsxs("span",{className:"text-[10px] text-emperia-muted w-6 text-right",children:[_,"x"]})]}),f.jsx("div",{className:"flex-1 flex items-center justify-center overflow-auto min-h-0",children:(()=>{const be=(j==null?void 0:j.patternX)??0,je=(j==null?void 0:j.patternY)??0,Ke=B&&be>=3&&je>=3,Ze=(He||mt)&&be>1&&be<=4,$e=ae&&j&&(Ke||Ze),Xe=$e?Ke?[{px:0,py:0,label:"NW",arrow:""},{px:1,py:0,label:"N",arrow:""},{px:2,py:0,label:"NE",arrow:""},{px:0,py:1,label:"W",arrow:""},"canvas",{px:2,py:1,label:"E",arrow:""},{px:0,py:2,label:"SW",arrow:""},{px:1,py:2,label:"S",arrow:""},{px:2,py:2,label:"SE",arrow:""}]:[null,{px:0,py:0,label:"N",arrow:""},null,{px:3,py:0,label:"W",arrow:""},"canvas",{px:1,py:0,label:"E",arrow:""},null,{px:2,py:0,label:"S",arrow:""},null]:[],et=(Ae,Le)=>f.jsx("button",{onClick:()=>{ie(Ae.px),C(Ae.py)},className:`w-9 h-9 flex items-center justify-center rounded-lg text-sm font-bold transition-colors ${N===Ae.px&&Y===Ae.py?"bg-emperia-accent text-white shadow-lg shadow-emperia-accent/30":"bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover"}`,title:Ae.label,children:Ae.arrow},`dir-${Le}`),It=f.jsxs("div",{className:`checkerboard rounded-lg border relative transition-colors
                ${A?"border-emperia-accent border-2":"border-emperia-border"}`,style:{padding:8},onDragOver:Ae=>{if(Ae.preventDefault(),Z(!0),z.current&&j){const Le=z.current.getBoundingClientRect(),We=Math.floor((Ae.clientX-Le.left)/(32*_)),qe=Math.floor((Ae.clientY-Le.top)/(32*_)),xt=gt*j.width,jt=rn*j.height;We>=0&&We<xt&&qe>=0&&qe<jt?Q({col:We,row:qe}):Q(null)}},onDragLeave:()=>{Z(!1),Q(null)},onDrop:Ae=>{Q(null),kn(Ae)},children:[f.jsx("canvas",{ref:z,className:"cursor-pointer",onClick:Ae=>{const Le=Bt(Ae.clientX,Ae.clientY);Le>0&&H.setState({focusSpriteId:Le})},style:{width:Gt*_,height:sn*_,imageRendering:"pixelated"}}),I&&j&&f.jsx("div",{className:"absolute inset-2 pointer-events-none",style:{backgroundImage:`
                      repeating-linear-gradient(0deg, rgba(255,255,255,0.15), rgba(255,255,255,0.15) 1px, transparent 1px, transparent ${32*_}px),
                      repeating-linear-gradient(90deg, rgba(255,255,255,0.15), rgba(255,255,255,0.15) 1px, transparent 1px, transparent ${32*_}px)
                    `,backgroundSize:`${32*_}px ${32*_}px`}}),D&&j&&f.jsx("div",{className:"absolute pointer-events-none border border-yellow-400/60",style:{bottom:8,left:8,width:j.width*32*_,height:j.height*32*_}}),A&&!P&&f.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-emperia-accent/10 rounded-lg pointer-events-none",children:f.jsx("span",{className:"text-emperia-accent text-xs font-medium",children:"Drop PNG to replace"})}),P&&f.jsx("div",{className:"absolute pointer-events-none border-2 border-emperia-accent bg-emperia-accent/15 rounded-sm",style:{left:8+P.col*32*_,top:8+P.row*32*_,width:32*_,height:32*_}})]});return $e?f.jsx("div",{className:"grid gap-1",style:{gridTemplateColumns:"auto auto auto",gridTemplateRows:"auto auto auto",justifyItems:"center",alignItems:"center"},children:Xe.map((Ae,Le)=>Ae==="canvas"?f.jsx("div",{children:It},"canvas"):Ae!=null?et(Ae,Le):f.jsx("div",{className:"w-9 h-9"},`empty-${Le}`))}):f.jsxs("div",{className:`checkerboard rounded-lg border relative transition-colors
            ${A?"border-emperia-accent border-2":"border-emperia-border"}`,style:{padding:8},onDragOver:Ae=>{if(Ae.preventDefault(),Z(!0),z.current&&j){const Le=z.current.getBoundingClientRect(),We=Math.floor((Ae.clientX-Le.left)/(32*_)),qe=Math.floor((Ae.clientY-Le.top)/(32*_)),xt=gt*j.width,jt=rn*j.height;We>=0&&We<xt&&qe>=0&&qe<jt?Q({col:We,row:qe}):Q(null)}},onDragLeave:()=>{Z(!1),Q(null)},onDrop:Ae=>{Q(null),kn(Ae)},children:[f.jsx("canvas",{ref:z,className:"cursor-pointer",onClick:Ae=>{const Le=Bt(Ae.clientX,Ae.clientY);Le>0&&H.setState({focusSpriteId:Le})},style:{width:Gt*_,height:sn*_,imageRendering:"pixelated"}}),I&&j&&f.jsx("div",{className:"absolute inset-2 pointer-events-none",style:{backgroundImage:`
                  repeating-linear-gradient(0deg, rgba(255,255,255,0.15), rgba(255,255,255,0.15) 1px, transparent 1px, transparent ${32*_}px),
                  repeating-linear-gradient(90deg, rgba(255,255,255,0.15), rgba(255,255,255,0.15) 1px, transparent 1px, transparent ${32*_}px)
                `,backgroundSize:`${32*_}px ${32*_}px`}}),D&&j&&f.jsx("div",{className:"absolute pointer-events-none border border-yellow-400/60",style:{bottom:8,left:8,width:j.width*32*_,height:j.height*32*_}}),A&&!P&&f.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-emperia-accent/10 rounded-lg pointer-events-none",children:f.jsx("span",{className:"text-emperia-accent text-xs font-medium",children:"Drop PNG to replace"})}),P&&f.jsx("div",{className:"absolute pointer-events-none border-2 border-emperia-accent bg-emperia-accent/15 rounded-sm",style:{left:8+P.col*32*_,top:8+P.row*32*_,width:32*_,height:32*_}})]})})()}),f.jsx(o1,{thing:h,group:j,objectData:n,spriteData:i,spriteOverrides:l,category:Re,zoom:_,setZoom:O,showGrid:I,setShowGrid:F,showCropSize:D,setShowCropSize:L,previewMode:ae,setPreviewMode:ce,playing:S,setPlaying:b,currentFrame:w,setCurrentFrame:y,canvasRef:z,handleImageFiles:on,copyMenuOpen:he,setCopyMenuOpen:xe,copyMenuRef:re,baseOutfitId:ve,setBaseOutfitId:Ie}),(h.frameGroups.length>1||He)&&f.jsxs("div",{className:"flex items-center justify-center px-4 py-1.5 gap-1 border-t border-emperia-border",children:[h.frameGroups.map((be,je)=>f.jsx("button",{onClick:()=>{x(je),y(0),b(!1),Se(0),fe(0)},className:`px-3 py-1 rounded text-[11px] font-medium transition-colors
                ${p===je?"bg-emperia-accent text-white":"bg-emperia-surface text-emperia-muted hover:bg-emperia-hover border border-emperia-border"}
              `,children:je===0?"Idle":je===1?"Moving":`Group ${je}`},je)),f.jsxs("span",{className:"text-[9px] text-emperia-muted/50 ml-1",children:[h.frameGroups.length," grp"]}),j&&j.layers>1&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-px h-4 bg-emperia-border mx-1"}),Array.from({length:j.layers},(be,je)=>f.jsxs("button",{onClick:()=>{Se(je),K(!1)},className:`px-2 py-0.5 rounded text-[10px] font-medium transition-colors
                    ${!me&&J===je?"bg-purple-600 text-white":"bg-emperia-surface text-emperia-muted hover:bg-emperia-hover border border-emperia-border"}
                  `,children:["L",je]},je)),f.jsx("button",{onClick:()=>K(!0),className:`px-2 py-0.5 rounded text-[10px] font-medium transition-colors
                  ${me?"bg-purple-600 text-white":"bg-emperia-surface text-emperia-muted hover:bg-emperia-hover border border-emperia-border"}
                `,children:"Blend"})]})]}),j&&f.jsx(a1,{thing:h,group:j,isOutfit:He,isDistance:B,previewMode:ae,activeDirection:N,setActiveDirection:ie,activePatternY:Y,setActivePatternY:C,activeZ:Ce,setActiveZ:fe,activeLayer:J,setActiveLayer:Se,blendLayers:me,setBlendLayers:K,currentFrame:w,setCurrentFrame:y,playing:S,setPlaying:b,outfitColors:ne,setOutfitColors:ge,showColorPicker:W,setShowColorPicker:oe,updateFrameGroupProp:Jr})]})):f.jsx("div",{className:"flex items-center justify-center h-full text-emperia-muted text-sm",children:"Select an object to preview"})}const Zf=[{title:"Ground & Stacking",wide:!0,flags:[{key:"ground",label:"Ground",numericProps:[{key:"groundSpeed",label:"Speed",min:0,max:65535}]},{key:"groundBorder",label:"Ground Border"},{key:"onBottom",label:"On Bottom"},{key:"onTop",label:"On Top"},{key:"fullGround",label:"Full Ground"},{key:"topEffect",label:"Top Effect"}]},{title:"Blocking",flags:[{key:"notWalkable",label:"Not Walkable"},{key:"notMoveable",label:"Not Moveable"},{key:"blockProjectile",label:"Block Projectile"},{key:"notPathable",label:"Not Pathable"}]},{title:"Fluids",flags:[{key:"fluidContainer",label:"Fluid Container"},{key:"splash",label:"Splash"}]},{title:"Interaction",flags:[{key:"pickupable",label:"Pickupable"},{key:"stackable",label:"Stackable"},{key:"container",label:"Container"},{key:"forceUse",label:"Force Use"},{key:"multiUse",label:"Multi Use"},{key:"usable",label:"Usable"},{key:"rotateable",label:"Rotateable"},{key:"wrapable",label:"Wrapable"},{key:"unwrapable",label:"Unwrapable"}]},{title:"Hooks & Hanging",flags:[{key:"hangable",label:"Hangable"},{key:"hookSouth",label:"Hook South"},{key:"hookEast",label:"Hook East"}]},{title:"Writing",wide:!0,flags:[{key:"writable",label:"Writable",numericProps:[{key:"writableMaxLen",label:"Max Length",min:0,max:65535}]},{key:"writableOnce",label:"Writable Once",numericProps:[{key:"writableOnceMaxLen",label:"Max Length",min:0,max:65535}]}]},{title:"Visual",wide:!0,flags:[{key:"hasLight",label:"Light",numericProps:[{key:"lightLevel",label:"Level",min:0,max:65535},{key:"lightColor",label:"Color",min:0,max:65535}]},{key:"hasDisplacement",label:"Displacement",numericProps:[{key:"displacementX",label:"X",min:-512,max:512},{key:"displacementY",label:"Y",min:-512,max:512}]},{key:"hasElevation",label:"Elevation",numericProps:[{key:"elevation",label:"Height",min:0,max:65535}]},{key:"hasMinimapColor",label:"Minimap Color",numericProps:[{key:"minimapColor",label:"Color",min:0,max:65535}]},{key:"translucent",label:"Translucent"},{key:"dontHide",label:"Don't Hide"},{key:"animateAlways",label:"Animate Always"},{key:"noMoveAnimation",label:"No Move Animation"}]},{title:"Equipment & Market",wide:!0,flags:[{key:"cloth",label:"Cloth",numericProps:[{key:"clothSlot",label:"Slot",min:0,max:65535}]},{key:"hasMarket",label:"Market"},{key:"chargeable",label:"Chargeable"}]},{title:"Miscellaneous",flags:[{key:"lyingCorpse",label:"Lying Corpse"},{key:"look",label:"Look"}]}],Qd=Zf.flatMap(o=>o.flags);function Zd({showAttributesOnly:o}={}){const n=H(h=>h.selectedThingId),i=H(h=>h.objectData),l=H(h=>h.updateThingFlags);H(h=>h.editVersion);const c=n!=null?(i==null?void 0:i.things.get(n))??null:null,u=V.useCallback(h=>{if(!c)return;const p={...c.flags};p[h]=!p[h],p[h]||(h==="ground"&&(p.groundSpeed=void 0),h==="hasLight"&&(p.lightLevel=void 0,p.lightColor=void 0),h==="hasDisplacement"&&(p.displacementX=void 0,p.displacementY=void 0),h==="hasElevation"&&(p.elevation=void 0),h==="hasMinimapColor"&&(p.minimapColor=void 0),h==="cloth"&&(p.clothSlot=void 0)),p[h]&&(h==="ground"&&p.groundSpeed==null&&(p.groundSpeed=100),h==="hasLight"&&(p.lightLevel==null&&(p.lightLevel=7),p.lightColor==null&&(p.lightColor=215)),h==="hasDisplacement"&&(p.displacementX==null&&(p.displacementX=8),p.displacementY==null&&(p.displacementY=8)),h==="hasElevation"&&p.elevation==null&&(p.elevation=8),h==="hasMinimapColor"&&p.minimapColor==null&&(p.minimapColor=0),h==="cloth"&&p.clothSlot==null&&(p.clothSlot=0)),l(c.id,p)},[c,l]),m=V.useCallback((h,p)=>{if(!c)return;const x={...c.flags,[h]:p};l(c.id,x)},[c,l]);return c?o?f.jsxs("div",{className:"p-3 text-xs space-y-4",children:[c.frameGroups.map((h,p)=>f.jsxs(qd,{title:`Frame Group ${p}${c.category==="outfit"?p===0?" (Idle)":" (Moving)":""}`,children:[f.jsx(zn,{label:"Size",value:`${h.width}x${h.height}`}),f.jsx(zn,{label:"Layers",value:h.layers}),f.jsx(zn,{label:"Pattern X",value:h.patternX}),f.jsx(zn,{label:"Pattern Y",value:h.patternY}),f.jsx(zn,{label:"Pattern Z",value:h.patternZ}),f.jsx(zn,{label:"Animations",value:h.animationLength}),f.jsx(zn,{label:"Sprites",value:h.sprites.length}),h.animationLength>1&&f.jsxs(f.Fragment,{children:[f.jsx(zn,{label:"Async",value:h.asynchronous?"Yes":"No"}),f.jsx(zn,{label:"Loop Count",value:h.nLoop===0?"Infinite":h.nLoop}),f.jsx(zn,{label:"Start Frame",value:h.start})]})]},p)),f.jsx(qd,{title:"Active Flags",children:f.jsxs("div",{className:"space-y-0.5",children:[Qd.filter(({key:h})=>!!c.flags[h]).map(({key:h,label:p})=>f.jsx("div",{className:"text-emperia-text text-xs",children:p},h)),Qd.every(({key:h})=>!c.flags[h])&&f.jsx("span",{className:"text-emperia-muted italic",children:"None"})]})})]}):f.jsx("div",{className:"p-3 text-xs space-y-1",children:f.jsx("div",{className:"grid grid-cols-4 gap-1",children:Zf.map(h=>{const p=h.flags.filter(w=>!!c.flags[w.key]).length,x=h.wide?"col-span-2":"";return f.jsx("div",{className:x,children:f.jsx(h1,{title:h.title,activeCount:p,flags:h.flags,thingFlags:c.flags,onToggle:u,onNumericChange:m})},h.title)})})}):f.jsx("div",{className:"p-4 text-emperia-muted text-sm",children:"No object selected"})}function qd({title:o,children:n}){return f.jsxs("div",{children:[f.jsx("h3",{className:"text-emperia-accent font-semibold text-[11px] uppercase tracking-wider mb-1.5 pb-1 border-b border-emperia-border",children:o}),f.jsx("div",{className:"space-y-0.5",children:n})]})}function zn({label:o,value:n}){return f.jsxs("div",{className:"flex justify-between py-0.5",children:[f.jsx("span",{className:"text-emperia-muted",children:o}),f.jsx("span",{className:"text-emperia-text font-mono",children:String(n)})]})}function h1({title:o,activeCount:n,flags:i,thingFlags:l,onToggle:c,onNumericChange:u}){const[m,h]=V.useState(!0);return f.jsxs("div",{className:"border border-emperia-border/50 rounded overflow-hidden",children:[f.jsxs("button",{onClick:()=>h(!m),className:"w-full flex items-center gap-1.5 px-2 py-1.5 bg-emperia-surface/60 hover:bg-emperia-surface transition-colors text-left",children:[m?f.jsx(af,{className:"w-3 h-3 text-emperia-muted shrink-0"}):f.jsx(cf,{className:"w-3 h-3 text-emperia-muted shrink-0"}),f.jsx("span",{className:"text-[10px] font-semibold text-emperia-text uppercase tracking-wider flex-1",children:o}),n>0&&f.jsx("span",{className:"text-[9px] font-medium text-emperia-accent bg-emperia-accent/15 px-1.5 py-0.5 rounded-full",children:n})]}),m&&f.jsx("div",{className:"px-1 py-0.5",children:i.map(({key:p,label:x,numericProps:w})=>{const y=!!l[p];return f.jsxs("div",{children:[f.jsxs("label",{className:"flex items-center gap-2 py-[3px] px-1 rounded hover:bg-emperia-hover cursor-pointer select-none",children:[f.jsx("input",{type:"checkbox",checked:y,onChange:()=>c(p),className:"w-3 h-3 rounded border-emperia-border bg-emperia-surface accent-emperia-accent cursor-pointer"}),f.jsx("span",{className:y?"text-emperia-text":"text-emperia-muted",children:x})]}),y&&w&&w.length>0&&f.jsx("div",{className:"ml-7 mb-1 flex flex-wrap gap-x-3 gap-y-0.5",children:w.map(S=>f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("span",{className:"text-emperia-muted text-[10px]",children:S.label}),f.jsx("input",{type:"number",value:l[S.key]??0,min:S.min,max:S.max,onChange:b=>{const _=parseInt(b.target.value,10);isNaN(_)||u(S.key,Math.max(S.min??0,Math.min(S.max??65535,_)))},className:`w-16 px-1 py-0.5 rounded bg-emperia-surface border border-emperia-border
                                     text-emperia-text font-mono text-right text-[10px] outline-none
                                     focus:border-emperia-accent transition-colors`})]},S.key))})]},p)})})]})}const Jd=40;function p1({thing:o,spriteData:n,spriteOverrides:i,slots:l,selectedSlot:c,setSelectedSlot:u,dropTarget:m,onSlotDragOver:h,onSlotDragLeave:p,onSlotDrop:x}){return f.jsxs("div",{className:"shrink-0 border-b border-emperia-border",children:[f.jsxs("div",{className:"px-2 py-1.5 flex items-center justify-between",children:[f.jsx("span",{className:"text-[10px] font-medium text-emperia-text uppercase tracking-wider",children:"Object Sprites"}),f.jsx("span",{className:"text-[10px] text-emperia-muted",children:l.length})]}),f.jsx("div",{className:"overflow-y-auto max-h-40 px-1.5 pb-1.5",children:f.jsx("div",{className:"grid grid-cols-6 gap-0.5",children:l.map(({spriteId:w,group:y,index:S},b)=>{const _=w>0?Uo(n,w,i):null,O=(c==null?void 0:c.group)===y&&(c==null?void 0:c.index)===S,I=i.has(w),F=(m==null?void 0:m.group)===y&&(m==null?void 0:m.index)===S;return f.jsxs("button",{onClick:()=>u(O?null:{group:y,index:S}),onDragOver:D=>h(D,y,S),onDragLeave:p,onDrop:D=>x(D,y,S),className:`relative flex items-center justify-center rounded border transition-colors
                  ${F?"border-green-400 bg-green-400/20":O?"border-emperia-accent bg-emperia-accent/20":I?"border-amber-500/50 bg-amber-500/10":"border-emperia-border/40 hover:border-emperia-muted"}
                `,style:{width:Jd,height:Jd},title:`Slot ${b}  Sprite #${w}${O?" (selected  click atlas sprite to assign)":`
Drag a sprite here or click to select`}`,children:[_?f.jsx("img",{src:_,alt:"",className:"w-8 h-8",style:{imageRendering:"pixelated"}}):f.jsx("div",{className:"w-8 h-8 bg-emperia-border/20 rounded-sm"}),f.jsx("span",{className:"absolute bottom-0 right-0.5 text-[6px] text-emperia-muted/50 leading-none",children:w})]},`${y}-${S}`)})})}),c&&f.jsx("div",{className:"px-2 pb-1.5 text-[10px] text-emperia-accent",children:"Click a sprite below to assign it to the selected slot"})]})}const ef=40;function m1({spriteId:o,spriteData:n,spriteOverrides:i,isHighlighted:l,isAtlasSelected:c,hasSelectedSlot:u,onClick:m,onContextMenu:h,onDragStart:p,onDelete:x}){const w=Uo(n,o,i);return f.jsxs("div",{draggable:!0,onDragStart:p,className:`group relative flex items-center justify-center border transition-colors cursor-grab active:cursor-grabbing
        ${c?"border-emperia-accent bg-emperia-accent/20":l?"border-green-400 bg-green-400/20":u?"border-transparent hover:bg-emperia-accent/10 hover:border-emperia-accent/30 cursor-pointer":"border-transparent hover:bg-emperia-hover"}
      `,style:{width:ef,height:ef},title:`#${o}${c?" (selected)":""}  Ctrl+click to multi-select, Shift+click for range`,onClick:m,onContextMenu:h,children:[w?f.jsx("img",{src:w,alt:"",draggable:!1,className:"w-8 h-8 pointer-events-none",style:{imageRendering:"pixelated"}}):f.jsx("div",{className:"w-6 h-6"}),f.jsx("span",{className:"absolute bottom-0 right-0.5 text-[6px] text-emperia-muted/40 leading-none",children:o}),!c&&f.jsx("button",{className:"absolute top-0 right-0 p-0.5 rounded-bl bg-red-500/80 text-white opacity-0 group-hover:opacity-100 transition-opacity",onClick:y=>{y.stopPropagation(),x()},title:`Delete sprite #${o}`,children:f.jsx(ms,{className:"w-2.5 h-2.5"})})]})}const tf=[{value:1,label:"11",desc:"no padding"},{value:2,label:"22",desc:"4 tiles/group"},{value:4,label:"44",desc:"16 tiles/group"}],Yr=40,tr=6;function g1(){var Ie;const o=H(z=>z.selectedThingId),n=H(z=>z.objectData),i=H(z=>z.spriteData),l=H(z=>z.spriteOverrides),c=H(z=>z.focusSpriteId),u=H(z=>z.importTileSize),[m,h]=V.useState(null),[p,x]=V.useState(""),[w,y]=V.useState(0),[S,b]=V.useState(0),[_,O]=V.useState(null),[I,F]=V.useState(null),[D,L]=V.useState(new Set),[A,Z]=V.useState(null),P=V.useRef(null),Q=V.useRef(null),J=o!=null?(n==null?void 0:n.things.get(o))??null:null,Se=V.useCallback(z=>{const ue=H.getState().addSprite,Ne=u;Array.from(z).forEach(Re=>{const He=new Image;He.onload=()=>{const mt=document.createElement("canvas"),B=mt.getContext("2d");mt.width=32,mt.height=32;const j=Math.max(1,Math.floor(He.width/32)),Ht=Math.max(1,Math.floor(He.height/32)),Nr=Ne>1?Math.max(1,Math.floor(j/Ne)):j,sr=Ne>1?Math.max(1,Math.floor(Ht/Ne)):Ht,Nt=[];((i==null?void 0:i.spriteCount)??0)+1;let gt=0;const rn=()=>{const wt=gt%tr;if(wt===0)return;const Tt=tr-wt,Xt=new ImageData(32,32);for(let Gt=0;Gt<Tt;Gt++)ue(Xt),gt++};if(Ne<=1)for(let wt=0;wt<Ht;wt++)for(let Tt=0;Tt<j;Tt++){B.clearRect(0,0,32,32),B.drawImage(He,Tt*32,wt*32,32,32,0,0,32,32);const Xt=B.getImageData(0,0,32,32);let Gt=!1;for(let Bt=3;Bt<Xt.data.length;Bt+=4)if(Xt.data[Bt]>0){Gt=!0;break}if(!Gt)continue;const sn=ue(Xt);sn!=null&&(Nt.push(sn),gt++)}else for(let wt=0;wt<sr;wt++)for(let Tt=0;Tt<Nr;Tt++){const Xt=[];for(let Gt=0;Gt<Ne;Gt++)for(let sn=0;sn<Ne;sn++){const Bt=Tt*Ne+sn,or=wt*Ne+Gt;if(Bt>=j||or>=Ht)continue;B.clearRect(0,0,32,32),B.drawImage(He,Bt*32,or*32,32,32,0,0,32,32);const on=B.getImageData(0,0,32,32);let kn=!1;for(let be=3;be<on.data.length;be+=4)if(on.data[be]>0){kn=!0;break}const Jr=ue(kn?on:new ImageData(32,32));Jr!=null&&(Xt.push(Jr),gt++)}Xt.length>0&&Nt.push(...Xt),rn()}if(Nt.length>0&&(x(""),O(Nt[0]),setTimeout(()=>O(null),2e3),P.current&&i)){const wt=Nt[0]-1,Tt=Math.floor(wt/tr);P.current.scrollTop=Tt*Yr}},He.src=URL.createObjectURL(Re)})},[i,u]),Ce=V.useCallback(z=>{z<=0||confirm(`Delete sprite #${z}? It will be replaced with a blank sprite.`)&&H.getState().deleteSprite(z)},[]);V.useEffect(()=>{h(null)},[o]),V.useEffect(()=>{if(c!=null&&c>0&&P.current&&i){x("");const z=c-1,ue=Math.floor(z/tr);P.current.scrollTop=ue*Yr,O(c),H.setState({focusSpriteId:null}),setTimeout(()=>O(null),2e3)}},[c,i]);const fe=H(z=>z.editVersion),me=V.useMemo(()=>{if(!J)return[];const z=[];return J.frameGroups.forEach((ue,Ne)=>{ue.sprites.forEach((Re,He)=>{z.push({spriteId:Re,group:Ne,index:He})})}),z},[J,fe]),K=V.useMemo(()=>{if(!i)return[];if(p){const ue=parseInt(p,10);if(!isNaN(ue)){const Ne=[];for(let Re=Math.max(1,ue-50);Re<=Math.min(i.spriteCount,ue+200);Re++)Ne.push(Re);return Ne}}const z=[];for(let ue=1;ue<=i.spriteCount;ue++)z.push(ue);return z},[i,p,fe]),ne=Math.ceil(K.length/tr),ge=ne*Yr,ae=V.useCallback(()=>{P.current&&(y(P.current.scrollTop),b(P.current.clientHeight))},[]);V.useEffect(()=>{ae();const z=P.current;if(z){const ue=new ResizeObserver(ae);return ue.observe(z),()=>ue.disconnect()}},[ae]),V.useEffect(()=>{if(p&&P.current){const z=parseInt(p,10);if(!isNaN(z)){const ue=K.indexOf(z);if(ue>=0){const Ne=Math.floor(ue/tr);P.current.scrollTop=Ne*Yr}}}},[p,K]);const ce=Math.max(0,Math.floor(w/Yr)-2),N=Math.min(ne,Math.ceil((w+S)/Yr)+2),ie=K.slice(ce*tr,N*tr),Y=V.useCallback((z,ue)=>{if(!J)return;const Ne=J.frameGroups[z.group];if(!Ne)return;Ne.sprites[z.index]=ue,J.rawBytes=void 0,nr();const Re=H.getState(),He=new Set(Re.dirtyIds);He.add(J.id),H.setState({dirty:!0,dirtyIds:He,editVersion:Re.editVersion+1})},[J]),C=V.useMemo(()=>{const z=new Set;if(!n)return z;for(const ue of n.things.values())for(const Ne of ue.frameGroups)for(const Re of Ne.sprites)Re>0&&z.add(Re);return z},[n,fe]),W=V.useCallback(()=>{if(D.size===0)return;const z=Array.from(D).filter(Re=>Re>0);if(z.length===0)return;const ue=z.filter(Re=>C.has(Re));let Ne=`Delete ${z.length} selected sprite(s)? They will be replaced with blank sprites.`;ue.length>0&&(Ne+=`

WARNING: ${ue.length} of these sprites are referenced by objects and will appear blank in-game!`),confirm(Ne)&&(H.getState().deleteSprites(z),L(new Set))},[D,C]),oe=V.useCallback((z,ue)=>{if(m&&J){Y(m,ue);return}if(z.ctrlKey||z.metaKey)L(Ne=>{const Re=new Set(Ne);return Re.has(ue)?Re.delete(ue):Re.add(ue),Re}),Z(ue);else if(z.shiftKey&&A!=null){const Ne=K.indexOf(A),Re=K.indexOf(ue);if(Ne>=0&&Re>=0){const He=Math.min(Ne,Re),mt=Math.max(Ne,Re);L(B=>{const j=new Set(B);for(let Ht=He;Ht<=mt;Ht++)j.add(K[Ht]);return j})}}else L(Ne=>Ne.size===1&&Ne.has(ue)?new Set:new Set([ue])),Z(ue)},[m,J,Y,A,K]),he=V.useCallback((z,ue)=>{z.dataTransfer.setData("application/x-sprite-id",String(ue)),z.dataTransfer.effectAllowed="copy"},[]),xe=V.useCallback((z,ue,Ne)=>{z.dataTransfer.types.includes("application/x-sprite-id")&&(z.preventDefault(),z.dataTransfer.dropEffect="copy",F({group:ue,index:Ne}))},[]),re=V.useCallback(()=>{F(null)},[]),ve=V.useCallback((z,ue,Ne)=>{z.preventDefault(),F(null);const Re=z.dataTransfer.getData("application/x-sprite-id"),He=parseInt(Re,10);!isNaN(He)&&He>0&&Y({group:ue,index:Ne},He)},[Y]);return i?f.jsxs("div",{className:"flex flex-col h-full",children:[J&&f.jsx(p1,{thing:J,spriteData:i,spriteOverrides:l,slots:me,selectedSlot:m,setSelectedSlot:h,dropTarget:I,onSlotDragOver:xe,onSlotDragLeave:re,onSlotDrop:ve}),f.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[f.jsxs("div",{className:"px-2 py-1.5 border-b border-emperia-border flex items-center gap-1.5",children:[f.jsx("span",{className:"text-[10px] font-medium text-emperia-text uppercase tracking-wider shrink-0",children:"Sprite Atlas"}),f.jsxs("div",{className:"flex-1 relative",children:[f.jsx(zo,{className:"absolute left-1.5 top-1/2 -translate-y-1/2 w-3 h-3 text-emperia-muted"}),f.jsx("input",{type:"text",value:p,onChange:z=>x(z.target.value),placeholder:"Go to ID...",className:"w-full pl-6 pr-2 py-0.5 bg-emperia-bg border border-emperia-border rounded text-[10px] text-emperia-text placeholder:text-emperia-muted/50 focus:outline-none focus:border-emperia-accent"})]}),f.jsx("input",{ref:Q,type:"file",accept:"image/png,image/gif,image/bmp",multiple:!0,className:"hidden",onChange:z=>{z.target.files&&Se(z.target.files),z.target.value=""}}),f.jsxs("div",{className:"flex items-center gap-0.5 shrink-0",children:[f.jsx("button",{onClick:()=>{var z;return(z=Q.current)==null?void 0:z.click()},className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-green-400 transition-colors",title:`Add new sprites from PNG (3232 tiles${u>1?`, grouped ${u}${u} with row padding`:""})`,children:f.jsx(Ka,{className:"w-3.5 h-3.5"})}),f.jsxs("div",{className:"relative group",children:[f.jsxs("button",{className:"flex items-center gap-0.5 px-1 py-0.5 rounded text-[9px] font-medium text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover transition-colors border border-emperia-border",title:"Import grouping  pads atlas rows between NxN tile groups for visual clarity",children:[f.jsx(Am,{className:"w-3 h-3"}),(Ie=tf.find(z=>z.value===u))==null?void 0:Ie.label]}),f.jsx("div",{className:"absolute right-0 top-full mt-0.5 z-50 hidden group-hover:block bg-emperia-panel border border-emperia-border rounded shadow-lg py-0.5 min-w-[90px]",children:tf.map(z=>f.jsxs("button",{onClick:()=>H.setState({importTileSize:z.value}),className:`w-full text-left px-2 py-0.5 text-[10px] transition-colors ${u===z.value?"text-emperia-accent bg-emperia-accent/10":"text-emperia-text hover:bg-emperia-hover"}`,children:[z.label," ",f.jsxs("span",{className:"text-emperia-muted",children:["(",z.desc,")"]})]},z.value))})]})]}),f.jsx("button",{onClick:()=>{const z=H.getState().compactSpriteAtlas();z&&(z.removed===0?alert("Atlas is already compact  no blank or unreferenced sprites found."):(L(new Set),alert(`Compacted atlas: removed ${z.removed} blank/unreferenced sprites.
${z.oldCount}  ${z.newCount} sprites.

All references have been remapped.`)))},className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-amber-400 transition-colors shrink-0",title:"Compact atlas  remove blank/unreferenced sprites and remap all references",children:f.jsx(Fm,{className:"w-3.5 h-3.5"})})]}),D.size>0&&f.jsxs("div",{className:"px-2 py-1 border-b border-emperia-border bg-emperia-accent/5 flex items-center gap-2",children:[f.jsxs("span",{className:"text-[10px] text-emperia-accent font-medium",children:[D.size," selected"]}),f.jsxs("button",{onClick:W,className:"flex items-center gap-0.5 px-1.5 py-0.5 rounded text-[10px] bg-red-500/10 text-red-400 hover:bg-red-500/20 transition-colors",title:"Delete selected sprites (replaces with blank)",children:[f.jsx(ms,{className:"w-3 h-3"}),"Delete"]}),f.jsxs("button",{onClick:()=>L(new Set),className:"flex items-center gap-0.5 px-1.5 py-0.5 rounded text-[10px] text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover transition-colors ml-auto",title:"Clear selection",children:[f.jsx(Qa,{className:"w-3 h-3"}),"Clear"]})]}),f.jsx("div",{ref:P,onScroll:ae,className:"flex-1 overflow-y-auto",children:f.jsx("div",{style:{height:ge,position:"relative"},children:f.jsx("div",{style:{position:"absolute",top:ce*Yr,left:0,right:0,display:"grid",gridTemplateColumns:`repeat(${tr}, 1fr)`},children:ie.map(z=>f.jsx(m1,{spriteId:z,spriteData:i,spriteOverrides:l,isHighlighted:z===_,isAtlasSelected:D.has(z),hasSelectedSlot:!!m,onClick:ue=>oe(ue,z),onContextMenu:ue=>{ue.preventDefault(),D.size>1&&D.has(z)?W():Ce(z)},onDragStart:ue=>he(ue,z),onDelete:()=>Ce(z)},z))})})})]})]}):f.jsx("div",{className:"p-3 text-emperia-muted text-xs",children:"Load files to browse sprites"})}const x1=[{key:"name",label:"Name",type:"string"},{key:"article",label:"Article",type:"string",placeholder:"a / an"},{key:"description",label:"Description",type:"string"},{key:"type",label:"Type",type:"select",options:["","bed","container","corpse","depot","door","fluidContainer","key","magicfield","mailbox","readable","rune","splash","teleport","trashholder","window"]}],y1=[{key:"weaponType",label:"Weapon Type",type:"select",options:["","sword","axe","club","distance","shield","wand","orb","magical"]},{key:"slotType",label:"Slot Type",type:"select",options:["","hand","two-handed","head","body","legs","feet","ring","necklace","backpack","ammo"]},{key:"ammoType",label:"Ammo Type",type:"string"},{key:"shootType",label:"Shoot Type",type:"string"},{key:"damageElement",label:"Damage Element",type:"select",options:["","fire","ice","energy","earth","death","holy","arcane","wind"]}],v1=[{key:"physicalAttack",label:"Physical Attack",type:"number"},{key:"magicalAttack",label:"Magical Attack",type:"number"},{key:"physicalDefense",label:"Physical Defense",type:"number"},{key:"magicalDefense",label:"Magical Defense",type:"number"},{key:"armor",label:"Armor",type:"number"},{key:"extradef",label:"Extra Def",type:"number"},{key:"hitChance",label:"Hit Chance",type:"number"},{key:"maxHitChance",label:"Max Hit Chance",type:"number"},{key:"range",label:"Range",type:"number"}],w1=[{key:"weight",label:"Weight",type:"number"},{key:"speed",label:"Speed",type:"number"},{key:"friction",label:"Friction",type:"number"},{key:"floorchange",label:"Floor Change",type:"select",options:["","down","north","south","east","west"]}],k1=[{key:"level",label:"Level",type:"number"},{key:"expertise",label:"Expertise",type:"number"}],S1=[{key:"containerSize",label:"Container Size",type:"number"},{key:"containerSizePotions",label:"Container Size (Potions)",type:"number"},{key:"weightReduction",label:"Weight Reduction",type:"number"}],b1=[{key:"charges",label:"Charges",type:"number"},{key:"duration",label:"Duration",type:"number"},{key:"decayTo",label:"Decay To (Item ID)",type:"number"},{key:"destroyTo",label:"Destroy To (Item ID)",type:"number"},{key:"rotateTo",label:"Rotate To (Item ID)",type:"number"},{key:"transformEquipTo",label:"Transform Equip To",type:"number"},{key:"transformDeEquipTo",label:"Transform DeEquip To",type:"number"}],_1=[{key:"fluidSource",label:"Fluid Source",type:"string"},{key:"field",label:"Field",type:"string"},{key:"readable",label:"Readable",type:"boolean"},{key:"writeable",label:"Writeable",type:"boolean"},{key:"maxTextLen",label:"Max Text Length",type:"number"}],C1=[{key:"healthGain",label:"Health Gain",type:"number"},{key:"healthTicks",label:"Health Ticks",type:"number"},{key:"manaGain",label:"Mana Gain",type:"number"},{key:"manaTicks",label:"Mana Ticks",type:"number"}],E1=[{key:"skillSword",label:"Skill Sword",type:"number"},{key:"skillAxe",label:"Skill Axe",type:"number"},{key:"skillClub",label:"Skill Club",type:"number"},{key:"skillDist",label:"Skill Distance",type:"number"},{key:"skillShield",label:"Skill Shield",type:"number"},{key:"skillFist",label:"Skill Fist",type:"number"},{key:"magiclevelpoints",label:"Magic Level Points",type:"number"}],D1=[{key:"absorbPercentPhysical",label:"Absorb Physical %",type:"number"},{key:"absorbPercentFire",label:"Absorb Fire %",type:"number"},{key:"absorbPercentIce",label:"Absorb Ice %",type:"number"},{key:"absorbPercentEnergy",label:"Absorb Energy %",type:"number"},{key:"absorbPercentEarth",label:"Absorb Earth %",type:"number"},{key:"absorbPercentDeath",label:"Absorb Death %",type:"number"},{key:"absorbPercentHoly",label:"Absorb Holy %",type:"number"}],A1=[{key:"bonusStrength",label:"Strength",type:"number"},{key:"bonusDexterity",label:"Dexterity",type:"number"},{key:"bonusEndurance",label:"Endurance",type:"number"},{key:"bonusAgility",label:"Agility",type:"number"},{key:"bonusIntelligence",label:"Intelligence",type:"number"},{key:"bonusWisdom",label:"Wisdom",type:"number"},{key:"bonusFocus",label:"Focus",type:"number"},{key:"bonusSpirit",label:"Spirit",type:"number"}],N1=[{key:"bonusCritChance",label:"Crit Chance",type:"number"},{key:"bonusCritDamage",label:"Crit Damage",type:"number"},{key:"bonusDodge",label:"Dodge",type:"number"},{key:"bonusCDR",label:"CDR",type:"number"},{key:"bonusHealingPower",label:"Healing Power",type:"number"},{key:"bonusAttackSpeed",label:"Attack Speed",type:"number"},{key:"bonusPhysicalHit",label:"Physical Hit",type:"number"},{key:"bonusSpellHit",label:"Spell Hit",type:"number"},{key:"bonusMaxHealth",label:"Max Health",type:"number"},{key:"bonusMaxMana",label:"Max Mana",type:"number"},{key:"bonusCapacity",label:"Capacity",type:"number"},{key:"bonusHealthRegen",label:"Health Regen",type:"number"},{key:"bonusManaRegen",label:"Mana Regen",type:"number"},{key:"bonusMaxStamina",label:"Max Stamina",type:"number"},{key:"bonusStaminaRegen",label:"Stamina Regen",type:"number"},{key:"bonusStatusResist",label:"Status Resist",type:"number"}],T1=[{value:0,label:"0  Normal"},{value:1,label:"1  Ground"},{value:2,label:"2  Container"},{value:3,label:"3  Weapon"},{value:4,label:"4  Ammunition"},{value:5,label:"5  Armor"},{value:6,label:"6  Charges"},{value:7,label:"7  Teleport"},{value:9,label:"9  Write"},{value:10,label:"10  Write Once"},{value:11,label:"11  Fluid (Splash)"},{value:12,label:"12  Fluid Container"}];function B1(){const o=H(_=>_.selectedThingId),n=H(_=>_.objectData),i=H(_=>_.activeCategory),l=H(_=>_.itemDefinitions),c=H(_=>_.clientToServerIds),u=H(_=>_.updateItemDefinition);H(_=>_.editVersion);const m=o!=null?(n==null?void 0:n.things.get(o))??null:null,h=o!=null?c.get(o):void 0,p=h!=null?l.get(h)??null:null,x=V.useMemo(()=>(p==null?void 0:p.properties)??{},[p]),w=V.useCallback((_,O)=>{if(o==null)return;const I=c.get(o),F=I!=null?l.get(I):void 0,D=F!=null&&F.properties?{...F.properties}:{};O===void 0||O===""||O===!1?delete D[_]:D[_]=O,u(o,{properties:Object.keys(D).length>0?D:null})},[o,l,u]);if(i!=="item")return f.jsx("div",{className:"flex items-center justify-center h-full text-emperia-muted text-sm p-4",children:"Server properties are only available for items."});if(!m)return f.jsx("div",{className:"flex items-center justify-center h-full text-emperia-muted text-sm p-4",children:"No item selected"});const y=(p==null?void 0:p.flags)??0,S=(p==null?void 0:p.group)??0;p==null||p.serverId;const b=fm.filter((_,O)=>(y&1<<O)!==0).map(_=>_.replace("FLAG_",""));return f.jsxs("div",{className:"p-3 text-xs space-y-3 overflow-y-auto",children:[f.jsx(qf,{title:"OTB Flags & Group",children:f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-16 text-emperia-muted shrink-0",children:"Group"}),f.jsx("select",{value:S,onChange:_=>{const O=parseInt(_.target.value,10);o!=null&&u(o,{group:O})},className:"flex-1 bg-emperia-bg border border-emperia-border rounded px-2 py-0.5 text-emperia-text text-xs",children:T1.map(_=>f.jsx("option",{value:_.value,children:_.label},_.value))})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-16 text-emperia-muted shrink-0",children:"Flags"}),f.jsx("span",{className:"text-emperia-text font-mono text-[10px]",children:y})]}),f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx("span",{className:"w-16 text-emperia-muted shrink-0",children:"Active"}),f.jsx("span",{className:"text-emperia-text font-mono text-[10px] leading-relaxed",children:b.length>0?b.join(", "):f.jsx("span",{className:"text-emperia-muted/50",children:"none"})})]}),f.jsx("p",{className:"text-[9px] text-emperia-muted/50 mt-1",children:"Groups 1 (Ground), 2 (Container), 11 (Splash), 12 (Fluid) are used by the server for gameplay logic."})]})}),f.jsx(hn,{title:"Identity",fields:x1,props:x,setProperty:w}),f.jsx(hn,{title:"Equipment",fields:y1,props:x,setProperty:w}),f.jsx(hn,{title:"Combat Stats",fields:v1,props:x,setProperty:w}),f.jsx(hn,{title:"Weight / Speed",fields:w1,props:x,setProperty:w}),f.jsx(hn,{title:"Requirements",fields:k1,props:x,setProperty:w}),f.jsx(hn,{title:"Container",fields:S1,props:x,setProperty:w}),f.jsx(hn,{title:"Decay / Transform",fields:b1,props:x,setProperty:w}),f.jsx(hn,{title:"Special",fields:_1,props:x,setProperty:w}),f.jsx(hn,{title:"Regeneration",fields:C1,props:x,setProperty:w}),f.jsx(hn,{title:"Skill Bonuses",fields:E1,props:x,setProperty:w}),f.jsx(hn,{title:"Absorb %",fields:D1,props:x,setProperty:w}),f.jsx(hn,{title:"Stat Bonuses",fields:A1,props:x,setProperty:w}),f.jsx(hn,{title:"Combat Bonuses",fields:N1,props:x,setProperty:w})]})}function qf({title:o,children:n}){return f.jsxs("div",{children:[f.jsx("h3",{className:"text-[10px] font-semibold text-emperia-muted uppercase tracking-wider mb-1",children:o}),n]})}function hn({title:o,fields:n,props:i,setProperty:l}){return!n.some(m=>i[m.key]!==void 0&&i[m.key]!=="")&&!(o==="Identity")?f.jsxs("details",{children:[f.jsx("summary",{className:"text-[10px] font-semibold text-emperia-muted uppercase tracking-wider cursor-pointer hover:text-emperia-text select-none",children:o}),f.jsx("div",{className:"mt-1 space-y-1",children:n.map(m=>f.jsx(nf,{field:m,value:i[m.key],onChange:h=>l(m.key,h)},m.key))})]}):f.jsx(qf,{title:o,children:f.jsx("div",{className:"space-y-1",children:n.map(m=>f.jsx(nf,{field:m,value:i[m.key],onChange:h=>l(m.key,h)},m.key))})})}function nf({field:o,value:n,onChange:i}){const{label:l,type:c,options:u,placeholder:m}=o;return c==="boolean"?f.jsxs("label",{className:"flex items-center gap-2 py-[2px] px-1 rounded hover:bg-emperia-hover cursor-pointer select-none",children:[f.jsx("input",{type:"checkbox",checked:!!n,onChange:()=>i(!n),className:"accent-emperia-accent"}),f.jsx("span",{className:"text-emperia-text",children:l})]}):c==="select"?f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-28 text-emperia-muted shrink-0",children:l}),f.jsx("select",{value:n!=null?String(n):"",onChange:h=>i(h.target.value||void 0),className:"flex-1 bg-emperia-bg border border-emperia-border rounded px-2 py-0.5 text-emperia-text text-xs",children:u.map(h=>f.jsx("option",{value:h,children:h||""},h))})]}):c==="number"?f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-28 text-emperia-muted shrink-0",children:l}),f.jsx("input",{type:"number",value:n!=null?String(n):"",placeholder:m,onChange:h=>{const p=h.target.value;if(p===""){i(void 0);return}const x=parseFloat(p);isNaN(x)||i(x)},className:"flex-1 bg-emperia-bg border border-emperia-border rounded px-2 py-0.5 text-emperia-text text-xs w-0"})]}):f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-28 text-emperia-muted shrink-0",children:l}),f.jsx("input",{type:"text",value:n!=null?String(n):"",placeholder:m,onChange:h=>i(h.target.value||void 0),className:"flex-1 bg-emperia-bg border border-emperia-border rounded px-2 py-0.5 text-emperia-text text-xs w-0"})]})}const I1=[{value:"all",label:"All"},{value:"head",label:"Head"},{value:"body",label:"Body"},{value:"legs",label:"Legs"},{value:"feet",label:"Feet"},{value:"left-hand",label:"Left Hand"},{value:"right-hand",label:"Right Hand"},{value:"backpack",label:"Backpack"},{value:"belt",label:"Belt"}];function j1(o,n){const i=o.name.toLowerCase();return i.includes("left-hand")||i.includes("lefthand")||i.includes("left hand")?"left-hand":i.includes("right-hand")||i.includes("righthand")||i.includes("right hand")?"right-hand":n==="head"||i.includes("helmet")||i.includes("hat")||i.includes("crown helmet")?"head":n==="body"||i.includes("armor")||i.includes("armour")?"body":n==="legs"||i.includes(" legs")||i.includes(" leg")?"legs":n==="feet"||i.includes("boots")||i.includes("boot")||i.includes("shoes")?"feet":n==="backpack"||i.includes("backpack")||i.includes("cape")?"backpack":i.includes("belt")?"belt":i.includes("shield")||i.includes("orb")?"right-hand":i.includes("bow")||i.includes("crossbow")||i.includes("sword")||i.includes("axe")||i.includes("club")||i.includes("wand")?"left-hand":null}function rf(o,n,i,l,c,u,m,h){return(((((n*o.patternZ+c)*o.patternY+l)*o.patternX+i)*o.layers+u)*o.height+h)*o.width+m}const Wa=new Map;function F1(){Wa.clear()}function Jf(o,n,i,l,c=2){const u=`${l}:${c}`,m=Wa.get(u);if(m)return m;const h=o.things.get(l);if(!h)return null;const p=h.frameGroups[0];if(!p||p.sprites.length===0)return null;const x=p.width*32,w=p.height*32,y=document.createElement("canvas");y.width=x,y.height=w;const S=y.getContext("2d");S.clearRect(0,0,x,w);const b=Math.min(c,p.patternX-1),_=p.layers>=2,O={head:0,body:0,legs:0,feet:0};for(let F=0;F<p.height;F++)for(let D=0;D<p.width;D++){const L=rf(p,0,b,0,0,0,D,F);if(L>=p.sprites.length)continue;const A=p.sprites[L];if(A<=0)continue;const Z=i.get(A)??Hn(n,A);if(!Z)continue;const P=new ImageData(new Uint8ClampedArray(Z.data),32,32);if(_){const Se=rf(p,0,b,0,0,1,D,F);if(Se<p.sprites.length){const Ce=p.sprites[Se];if(Ce>0){const fe=i.get(Ce)??Hn(n,Ce);fe&&La(P,fe,O)}}}const Q=(p.width-1-D)*32,J=(p.height-1-F)*32;if(_){const Se=document.createElement("canvas");Se.width=32,Se.height=32,Se.getContext("2d").putImageData(P,0,0),S.drawImage(Se,Q,J)}else S.putImageData(P,Q,J)}const I=y.toDataURL();return Wa.set(u,I),I}function L1(o,n){return o.itemCount+n}function Za({onSelect:o,onClose:n}){const i=H(b=>b.objectData),l=H(b=>b.spriteData),c=H(b=>b.spriteOverrides),u=H(b=>b.getCategoryRange),[m,h]=V.useState(""),[p,x]=V.useState(2),w=V.useRef(null),y=u("outfit"),S=V.useMemo(()=>{if(!i||!y)return[];const b=m.trim().toLowerCase(),_=[];for(let O=y.start;O<=y.end;O++){if(!i.things.get(O))continue;const F=rr(i,O);b&&!F.toString().includes(b)||_.push({id:O,displayId:F})}return _},[i,y,m]);return V.useEffect(()=>{const b=_=>{w.current&&!w.current.contains(_.target)&&n()};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[n]),f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:f.jsxs("div",{ref:w,className:"bg-emperia-surface border border-emperia-border rounded-lg shadow-2xl w-[520px] max-h-[80vh] flex flex-col",children:[f.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-emperia-border shrink-0",children:[f.jsx("h3",{className:"text-sm font-semibold text-emperia-text flex-1",children:"Select Outfit Sprite"}),f.jsx("div",{className:"flex items-center gap-1 text-[10px] text-emperia-muted",children:["N","E","S","W"].map((b,_)=>f.jsx("button",{onClick:()=>x(_),className:`px-1.5 py-0.5 rounded ${p===_?"bg-emperia-accent/30 text-emperia-accent":"hover:bg-emperia-hover"}`,children:b},b))}),f.jsx("button",{onClick:n,className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",children:f.jsx(Qa,{className:"w-4 h-4"})})]}),f.jsx("div",{className:"px-3 py-1.5 border-b border-emperia-border shrink-0",children:f.jsxs("div",{className:"relative",children:[f.jsx(zo,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 text-emperia-muted"}),f.jsx("input",{type:"text",value:m,onChange:b=>h(b.target.value),placeholder:"Search outfit ID...",className:"w-full pl-7 pr-2 py-1 bg-emperia-bg border border-emperia-border rounded text-xs text-emperia-text",autoFocus:!0})]})}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[f.jsx("div",{className:"grid grid-cols-8 gap-1",children:S.map(({id:b,displayId:_})=>{if(!i||!l)return null;const O=Jf(i,l,c,b,p);return f.jsxs("button",{onClick:()=>o(_),className:"flex flex-col items-center gap-0.5 p-1 rounded hover:bg-emperia-hover border border-transparent hover:border-emperia-accent/40 transition-colors",title:`Outfit #${_}`,children:[f.jsx("div",{className:"w-10 h-10 checkerboard rounded flex items-center justify-center overflow-hidden",children:O?f.jsx("img",{src:O,alt:"",className:"pixelated max-w-full max-h-full",style:{imageRendering:"pixelated"},draggable:!1}):f.jsx("div",{className:"w-10 h-10 bg-emperia-bg/50 rounded"})}),f.jsx("span",{className:"text-[9px] text-emperia-muted",children:_})]},b)})}),S.length===0&&f.jsx("p",{className:"text-center text-emperia-muted text-xs py-8",children:"No outfits found."})]})]})})}function jo({outfitDisplayId:o,size:n=32,direction:i=2}){const l=H(x=>x.objectData),c=H(x=>x.spriteData),u=H(x=>x.spriteOverrides),m=H(x=>x.editVersion);if(V.useEffect(()=>{F1()},[m]),!l||!c||o<=0)return f.jsx("div",{className:"checkerboard rounded border border-emperia-border/50 flex items-center justify-center text-emperia-muted/30 text-[9px]",style:{width:n,height:n},children:""});const h=L1(l,o),p=Jf(l,c,u,h,i);return f.jsx("div",{className:"checkerboard rounded border border-emperia-border/50 overflow-hidden flex items-center justify-center",style:{width:n,height:n},children:p?f.jsx("img",{src:p,alt:`outfit#${o}`,className:"pixelated max-w-full max-h-full",style:{imageRendering:"pixelated"},draggable:!1}):f.jsx("div",{className:"flex items-center justify-center text-emperia-muted/30 text-[9px]",style:{width:n,height:n},children:"?"})})}function eh({itemId:o,size:n=28}){var S;const i=H(b=>b.objectData),l=H(b=>b.spriteData),c=H(b=>b.spriteOverrides),u=H(b=>b.itemDefinitions);if(H(b=>b.editVersion),!i||!l||o<=0)return f.jsx("div",{className:"checkerboard rounded border border-emperia-border/50 flex items-center justify-center text-emperia-muted/30 text-[9px]",style:{width:n,height:n},children:""});const m=u.get(o),h=(m==null?void 0:m.id)??o,p=i.things.get(h),x=((S=p==null?void 0:p.frameGroups[0])==null?void 0:S.sprites[0])??0,w=x>0?Uo(l,x,c):null,y=()=>{if(!p)return;const{setCenterTab:b,setSelectedThingId:_}=H.getState();H.getState().activeCategory!=="item"&&H.setState({activeCategory:"item",searchQuery:"",filterGroup:-1}),_(h),b("texture")};return f.jsx("button",{onClick:y,className:"checkerboard rounded border border-emperia-border/50 overflow-hidden flex items-center justify-center hover:border-emperia-accent/60 transition-colors cursor-pointer shrink-0",style:{width:n,height:n},title:`Go to item #${h}`,children:w?f.jsx("img",{src:w,alt:`item#${o}`,className:"pixelated",style:{width:n,height:n,imageRendering:"pixelated"},draggable:!1}):f.jsx("div",{className:"flex items-center justify-center text-emperia-muted/30 text-[9px]",style:{width:n,height:n},children:"?"})})}function P1({onAdd:o,onCancel:n}){const[i,l]=V.useState(""),[c,u]=V.useState(""),[m,h]=V.useState(""),[p,x]=V.useState(!1),w=()=>{const y=parseInt(c,10),S=parseInt(m,10);!i.trim()||isNaN(y)||isNaN(S)||o({name:i.trim(),id:y,sprite_id:S})};return f.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-emperia-accent/5 border-t border-emperia-border",children:[f.jsx("input",{type:"text",value:i,onChange:y=>l(y.target.value),placeholder:"Name (e.g. Left-Hand (katana))",className:"flex-1 bg-emperia-bg border border-emperia-border rounded px-2 py-1 text-xs text-emperia-text min-w-0"}),f.jsx("input",{type:"number",value:c,onChange:y=>u(y.target.value),placeholder:"Item ID",className:"w-20 bg-emperia-bg border border-emperia-border rounded px-2 py-1 text-xs text-emperia-text"}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("input",{type:"number",value:m,onChange:y=>h(y.target.value),placeholder:"Sprite ID",className:"w-20 bg-emperia-bg border border-emperia-border rounded px-2 py-1 text-xs text-emperia-text"}),f.jsx("button",{onClick:()=>x(!0),className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-accent text-[10px] border border-emperia-border",title:"Pick from outfit sprites",children:"Pick"})]}),f.jsx("button",{onClick:w,className:"px-2 py-1 rounded bg-emperia-accent/20 text-emperia-accent text-xs font-medium hover:bg-emperia-accent/30",children:"Add"}),f.jsx("button",{onClick:n,className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted",children:f.jsx(Qa,{className:"w-3.5 h-3.5"})}),p&&f.jsx(Za,{onSelect:y=>{h(y.toString()),x(!1)},onClose:()=>x(!1)})]})}function M1({entry:o,index:n,onUpdate:i,onRemove:l}){var I;const[c,u]=V.useState(!1),[m,h]=V.useState(!1),[p,x]=V.useState(o.name),w=H(F=>F.itemDefinitions),S=H(F=>F.clientToServerIds).get(o.id),b=S!=null?w.get(S):void 0,_=(I=b==null?void 0:b.properties)==null?void 0:I.name,O=()=>{h(!1),p.trim()!==o.name&&i(n,{...o,name:p.trim()})};return f.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 hover:bg-emperia-hover/50 group border-b border-emperia-border/30",children:[f.jsx(eh,{itemId:o.id,size:40}),f.jsx(jo,{outfitDisplayId:o.sprite_id,size:40}),f.jsxs("div",{className:"flex-1 min-w-0",children:[m?f.jsx("input",{type:"text",value:p,onChange:F=>x(F.target.value),onBlur:O,onKeyDown:F=>{F.key==="Enter"&&O()},className:"w-full bg-emperia-bg border border-emperia-border rounded px-1.5 py-0.5 text-xs text-emperia-text",autoFocus:!0}):f.jsx("button",{onClick:()=>{h(!0),x(o.name)},className:"text-xs text-emperia-text truncate block text-left w-full hover:underline",title:o.name,children:o.name}),_&&f.jsx("span",{className:"text-[9px] text-emperia-muted/60 truncate block",children:_})]}),f.jsx("span",{className:"text-[10px] text-amber-400 font-mono w-12 text-right shrink-0",title:"Client Item ID",children:o.id}),f.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[f.jsx("span",{className:"text-[10px] text-cyan-400 font-mono w-12 text-right",title:"Outfit Sprite ID",children:o.sprite_id}),f.jsx("button",{onClick:()=>u(!0),className:"px-1.5 py-0.5 rounded text-[10px] bg-emperia-accent/10 text-emperia-accent hover:bg-emperia-accent/20 opacity-0 group-hover:opacity-100 transition-opacity",children:"Change"})]}),f.jsx("button",{onClick:()=>l(n),className:"p-0.5 rounded text-red-400/40 hover:text-red-400 hover:bg-red-400/10 opacity-0 group-hover:opacity-100 transition-opacity",title:"Remove entry",children:f.jsx(ms,{className:"w-3 h-3"})}),c&&f.jsx(Za,{onSelect:F=>{i(n,{...o,sprite_id:F}),u(!1)},onClose:()=>u(!1)})]})}function R1({group:o,onUpdate:n,onRemove:i}){var w;const[l,c]=V.useState(null),u=H(y=>y.itemDefinitions),h=H(y=>y.clientToServerIds).get(o.itemId),p=h!=null?u.get(h):void 0,x=(w=p==null?void 0:p.properties)==null?void 0:w.name;return f.jsxs("div",{className:"px-3 py-2 hover:bg-emperia-hover/50 border-b border-emperia-border/30 group",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[f.jsx(eh,{itemId:o.itemId,size:32}),f.jsx("span",{className:"text-xs text-emperia-text font-medium truncate flex-1",children:o.baseName}),x&&f.jsx("span",{className:"text-[9px] text-emperia-muted/60",children:x}),f.jsx("span",{className:"text-[10px] text-amber-400 font-mono",title:"Item ID",children:o.itemId})]}),f.jsxs("div",{className:"flex items-center gap-4 pl-2",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("span",{className:"text-[9px] text-emperia-muted w-8",children:"Left"}),o.leftEntry?f.jsxs(f.Fragment,{children:[f.jsx(jo,{outfitDisplayId:o.leftEntry.entry.sprite_id,size:36}),f.jsx("span",{className:"text-[10px] text-cyan-400 font-mono",children:o.leftEntry.entry.sprite_id}),f.jsx("button",{onClick:()=>c("left"),className:"px-1 py-0.5 rounded text-[9px] bg-emperia-accent/10 text-emperia-accent hover:bg-emperia-accent/20 opacity-0 group-hover:opacity-100 transition-opacity",children:"Change"}),f.jsx("button",{onClick:()=>i(o.leftEntry.index),className:"p-0.5 rounded text-red-400/40 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",children:f.jsx(ms,{className:"w-2.5 h-2.5"})})]}):f.jsx("button",{onClick:()=>c("left"),className:"text-[9px] text-emperia-muted/50 hover:text-emperia-accent underline",children:"Assign"})]}),f.jsx("div",{className:"w-px h-6 bg-emperia-border/40"}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("span",{className:"text-[9px] text-emperia-muted w-8",children:"Right"}),o.rightEntry?f.jsxs(f.Fragment,{children:[f.jsx(jo,{outfitDisplayId:o.rightEntry.entry.sprite_id,size:36}),f.jsx("span",{className:"text-[10px] text-cyan-400 font-mono",children:o.rightEntry.entry.sprite_id}),f.jsx("button",{onClick:()=>c("right"),className:"px-1 py-0.5 rounded text-[9px] bg-emperia-accent/10 text-emperia-accent hover:bg-emperia-accent/20 opacity-0 group-hover:opacity-100 transition-opacity",children:"Change"}),f.jsx("button",{onClick:()=>i(o.rightEntry.index),className:"p-0.5 rounded text-red-400/40 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",children:f.jsx(ms,{className:"w-2.5 h-2.5"})})]}):f.jsx("button",{onClick:()=>c("right"),className:"text-[9px] text-emperia-muted/50 hover:text-emperia-accent underline",children:"Assign"})]})]}),o.otherEntries.map(({entry:y,index:S})=>f.jsxs("div",{className:"flex items-center gap-2 pl-2 mt-1",children:[f.jsx("span",{className:"text-[9px] text-emperia-muted w-8 truncate",children:y.name}),f.jsx(jo,{outfitDisplayId:y.sprite_id,size:32}),f.jsx("span",{className:"text-[10px] text-cyan-400 font-mono",children:y.sprite_id})]},S)),l&&f.jsx(Za,{onSelect:y=>{const S=H.getState().addSpriteMapEntry,b=H.getState().updateSpriteMapEntry,_=l==="left"?"Left-Hand":"Right-Hand";l==="left"&&o.leftEntry?b(o.leftEntry.index,{...o.leftEntry.entry,sprite_id:y}):l==="right"&&o.rightEntry?b(o.rightEntry.index,{...o.rightEntry.entry,sprite_id:y}):S({name:`${_} (${o.baseName})`,id:o.itemId,sprite_id:y}),c(null)},onClose:()=>c(null)})]})}function O1(){const o=H(D=>D.spriteMapEntries),n=H(D=>D.spriteMapLoaded),i=H(D=>D.itemDefinitions),l=H(D=>D.clientToServerIds),c=H(D=>D.updateSpriteMapEntry),u=H(D=>D.addSpriteMapEntry),m=H(D=>D.removeSpriteMapEntry);H(D=>D.editVersion);const[h,p]=V.useState("all"),[x,w]=V.useState(""),[y,S]=V.useState(!1),[b,_]=V.useState("list"),O=V.useCallback(D=>{var Z;const L=l.get(D),A=L!=null?i.get(L):void 0;return(Z=A==null?void 0:A.properties)==null?void 0:Z.slotType},[l,i]),I=V.useMemo(()=>{const D=x.trim().toLowerCase();return o.map((L,A)=>({entry:L,index:A})).filter(({entry:L})=>{if(h!=="all"&&j1(L,O(L.id))!==h)return!1;if(D){const A=L.name.toLowerCase().includes(D),Z=L.id.toString().includes(D),P=L.sprite_id.toString().includes(D);if(!A&&!Z&&!P)return!1}return!0})},[o,h,x,O]),F=V.useMemo(()=>{if(b!=="weapons")return[];const D=new Map;for(const{entry:L,index:A}of I){const Z=L.name.toLowerCase(),P=Z.includes("left-hand")||Z.includes("lefthand")||Z.includes("left hand"),Q=Z.includes("right-hand")||Z.includes("righthand")||Z.includes("right hand");if(!P&&!Q)continue;if(!D.has(L.id)){let Se=L.name.replace(/left-hand|lefthand|left hand|right-hand|righthand|right hand/gi,"").replace(/\(|\)/g,"").trim();Se||(Se=`Item ${L.id}`),D.set(L.id,{itemId:L.id,baseName:Se,leftEntry:null,rightEntry:null,otherEntries:[]})}const J=D.get(L.id);P&&!J.leftEntry?J.leftEntry={entry:L,index:A}:Q&&!J.rightEntry?J.rightEntry={entry:L,index:A}:J.otherEntries.push({entry:L,index:A})}return Array.from(D.values())},[I,b]);return n?f.jsxs("div",{className:"flex flex-col h-full",children:[f.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 border-b border-emperia-border shrink-0",children:[f.jsxs("div",{className:"relative",children:[f.jsx("select",{value:h,onChange:D=>p(D.target.value),className:"appearance-none bg-emperia-bg border border-emperia-border rounded pl-2 pr-6 py-1 text-xs text-emperia-text cursor-pointer",children:I1.map(D=>f.jsx("option",{value:D.value,children:D.label},D.value))}),f.jsx(af,{className:"absolute right-1.5 top-1/2 -translate-y-1/2 w-3 h-3 text-emperia-muted pointer-events-none"})]}),f.jsxs("div",{className:"relative flex-1",children:[f.jsx(zo,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 text-emperia-muted"}),f.jsx("input",{type:"text",value:x,onChange:D=>w(D.target.value),placeholder:"Search by name, item ID, or sprite ID...",className:"w-full pl-7 pr-2 py-1 bg-emperia-bg border border-emperia-border rounded text-xs text-emperia-text"})]}),f.jsxs("div",{className:"flex items-center gap-0.5 border border-emperia-border rounded overflow-hidden",children:[f.jsx("button",{onClick:()=>_("list"),className:`px-2 py-1 text-[10px] ${b==="list"?"bg-emperia-accent/20 text-emperia-accent":"text-emperia-muted hover:text-emperia-text"}`,children:"List"}),f.jsx("button",{onClick:()=>_("weapons"),className:`px-2 py-1 text-[10px] ${b==="weapons"?"bg-emperia-accent/20 text-emperia-accent":"text-emperia-muted hover:text-emperia-text"}`,children:"Weapons"})]}),f.jsxs("button",{onClick:()=>S(!y),className:"flex items-center gap-1 px-2 py-1 rounded text-xs bg-emperia-accent/10 text-emperia-accent hover:bg-emperia-accent/20",children:[f.jsx(Ka,{className:"w-3 h-3"}),"Add"]}),f.jsxs("span",{className:"text-[10px] text-emperia-muted shrink-0",children:[I.length," / ",o.length]})]}),y&&f.jsx(P1,{onAdd:D=>{u(D),S(!1)},onCancel:()=>S(!1)}),f.jsx("div",{className:"flex-1 overflow-y-auto",children:b==="list"?I.length===0?f.jsx("p",{className:"text-center text-emperia-muted text-xs py-8",children:"No entries match the current filter."}):I.map(({entry:D,index:L})=>f.jsx(M1,{entry:D,index:L,onUpdate:c,onRemove:m},`${L}-${D.id}-${D.sprite_id}`)):F.length===0?f.jsx("p",{className:"text-center text-emperia-muted text-xs py-8",children:"No weapon entries with left/right hand variants found."}):F.map(D=>f.jsx(R1,{group:D,onUpdate:c,onRemove:m},D.itemId))})]}):f.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-emperia-muted text-sm p-8 gap-3",children:[f.jsx("p",{children:"No equipment sprite map loaded."}),f.jsxs("p",{className:"text-[10px] text-emperia-muted/50",children:["Drop an ",f.jsx("code",{className:"text-emperia-accent",children:"item-to-sprite.json"})," file or open a folder containing one."]})]})}const U1={texture:"Texture",properties:"Properties",attributes:"Attributes",server:"Server",equipment:"Equipment"};function z1(){const o=H(m=>m.selectedThingId),n=H(m=>m.objectData),i=H(m=>m.clientToServerIds);H(m=>m.editVersion);const l=o!=null?(n==null?void 0:n.things.get(o))??null:null;if(!l||!n)return null;const c=rr(n,l.id),u=i.get(l.id);return f.jsxs("div",{className:"flex items-center gap-3 text-[11px] font-mono",children:[f.jsxs("span",{className:"flex items-center gap-1.5",children:[f.jsx("span",{className:"text-emperia-muted",children:"Client"}),f.jsx("span",{className:"text-cyan-400 font-semibold",children:c})]}),u!=null&&f.jsxs("span",{className:"flex items-center gap-1.5",children:[f.jsx("span",{className:"text-emperia-muted",children:"Server"}),f.jsx("span",{className:"text-amber-400 font-semibold",children:u})]}),f.jsx("span",{className:"text-emperia-muted/60 capitalize text-[10px]",children:l.category})]})}function H1(){const o=H(l=>l.loaded),n=H(l=>l.centerTab),i=H(l=>l.setCenterTab);return o?f.jsxs("div",{className:"h-full flex flex-col",children:[f.jsx(o0,{}),f.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f.jsxs("div",{className:"w-64 flex flex-col border-r border-emperia-border bg-emperia-bg",children:[f.jsx(p0,{}),f.jsx(m0,{})]}),f.jsxs("div",{className:"flex-1 flex flex-col bg-emperia-bg overflow-hidden",children:[f.jsxs("div",{className:"flex items-center border-b border-emperia-border shrink-0",children:[["texture","properties","attributes","server","equipment"].map(l=>f.jsx("button",{onClick:()=>i(l),className:`px-4 py-2 text-xs font-medium transition-colors
                  ${n===l?"text-emperia-accent border-b-2 border-emperia-accent":"text-emperia-muted hover:text-emperia-text"}
                `,children:U1[l]},l)),f.jsx("div",{className:"flex-1"}),f.jsx("div",{className:"pr-3",children:f.jsx(z1,{})})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[n==="texture"&&f.jsx(f1,{}),n==="properties"&&f.jsx(Zd,{}),n==="attributes"&&f.jsx(Zd,{showAttributesOnly:!0}),n==="server"&&f.jsx(B1,{}),n==="equipment"&&f.jsx(O1,{})]})]}),f.jsx("div",{className:"w-72 border-l border-emperia-border bg-emperia-bg overflow-hidden flex flex-col",children:f.jsx(g1,{})})]})]}):f.jsx(Jm,{})}qp.createRoot(document.getElementById("root")).render(f.jsx(fs.StrictMode,{children:f.jsx(H1,{})}));
