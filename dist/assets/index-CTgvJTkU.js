var zp=Object.defineProperty;var Sd=o=>{throw TypeError(o)};var Hp=(o,n,i)=>n in o?zp(o,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[n]=i;var $=(o,n,i)=>Hp(o,typeof n!="symbol"?n+"":n,i),ba=(o,n,i)=>n.has(o)||Sd("Cannot "+i);var v=(o,n,i)=>(ba(o,n,"read from private field"),i?i.call(o):n.get(o)),Vr=(o,n,i)=>n.has(o)?Sd("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(o):n.set(o,i),bi=(o,n,i,l)=>(ba(o,n,"write to private field"),l?l.call(o,i):n.set(o,i),i),de=(o,n,i)=>(ba(o,n,"access private method"),i);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const m of u.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function i(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(c){if(c.ep)return;c.ep=!0;const u=i(c);fetch(c.href,u)}})();function sf(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var _a={exports:{}},us={},Ca={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bd;function Gp(){if(bd)return Pe;bd=1;var o=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),m=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),x=Symbol.iterator;function b(C){return C===null||typeof C!="object"?null:(C=x&&C[x]||C["@@iterator"],typeof C=="function"?C:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,M={};function I(C,E,W){this.props=C,this.context=E,this.refs=M,this.updater=W||S}I.prototype.isReactComponent={},I.prototype.setState=function(C,E){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,E,"setState")},I.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function P(){}P.prototype=I.prototype;function T(C,E,W){this.props=C,this.context=E,this.refs=M,this.updater=W||S}var L=T.prototype=new P;L.constructor=T,_(L,I.prototype),L.isPureReactComponent=!0;var A=Array.isArray,X=Object.prototype.hasOwnProperty,H={current:null},Z={key:!0,ref:!0,__self:!0,__source:!0};function ie(C,E,W){var q,oe={},ee=null,me=null;if(E!=null)for(q in E.ref!==void 0&&(me=E.ref),E.key!==void 0&&(ee=""+E.key),E)X.call(E,q)&&!Z.hasOwnProperty(q)&&(oe[q]=E[q]);var De=arguments.length-2;if(De===1)oe.children=W;else if(1<De){for(var ye=Array(De),Oe=0;Oe<De;Oe++)ye[Oe]=arguments[Oe+2];oe.children=ye}if(C&&C.defaultProps)for(q in De=C.defaultProps,De)oe[q]===void 0&&(oe[q]=De[q]);return{$$typeof:o,type:C,key:ee,ref:me,props:oe,_owner:H.current}}function he(C,E){return{$$typeof:o,type:C.type,key:E,ref:C.ref,props:C.props,_owner:C._owner}}function be(C){return typeof C=="object"&&C!==null&&C.$$typeof===o}function pe(C){var E={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(W){return E[W]})}var fe=/\/+/g;function Q(C,E){return typeof C=="object"&&C!==null&&C.key!=null?pe(""+C.key):E.toString(36)}function re(C,E,W,q,oe){var ee=typeof C;(ee==="undefined"||ee==="boolean")&&(C=null);var me=!1;if(C===null)me=!0;else switch(ee){case"string":case"number":me=!0;break;case"object":switch(C.$$typeof){case o:case n:me=!0}}if(me)return me=C,oe=oe(me),C=q===""?"."+Q(me,0):q,A(oe)?(W="",C!=null&&(W=C.replace(fe,"$&/")+"/"),re(oe,E,W,"",function(Oe){return Oe})):oe!=null&&(be(oe)&&(oe=he(oe,W+(!oe.key||me&&me.key===oe.key?"":(""+oe.key).replace(fe,"$&/")+"/")+C)),E.push(oe)),1;if(me=0,q=q===""?".":q+":",A(C))for(var De=0;De<C.length;De++){ee=C[De];var ye=q+Q(ee,De);me+=re(ee,E,W,ye,oe)}else if(ye=b(C),typeof ye=="function")for(C=ye.call(C),De=0;!(ee=C.next()).done;)ee=ee.value,ye=q+Q(ee,De++),me+=re(ee,E,W,ye,oe);else if(ee==="object")throw E=String(C),Error("Objects are not valid as a React child (found: "+(E==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":E)+"). If you meant to render a collection of children, use an array instead.");return me}function xe(C,E,W){if(C==null)return C;var q=[],oe=0;return re(C,q,"","",function(ee){return E.call(W,ee,oe++)}),q}function ce(C){if(C._status===-1){var E=C._result;E=E(),E.then(function(W){(C._status===0||C._status===-1)&&(C._status=1,C._result=W)},function(W){(C._status===0||C._status===-1)&&(C._status=2,C._result=W)}),C._status===-1&&(C._status=0,C._result=E)}if(C._status===1)return C._result.default;throw C._result}var ue={current:null},N={transition:null},se={ReactCurrentDispatcher:ue,ReactCurrentBatchConfig:N,ReactCurrentOwner:H};function K(){throw Error("act(...) is not supported in production builds of React.")}return Pe.Children={map:xe,forEach:function(C,E,W){xe(C,function(){E.apply(this,arguments)},W)},count:function(C){var E=0;return xe(C,function(){E++}),E},toArray:function(C){return xe(C,function(E){return E})||[]},only:function(C){if(!be(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Pe.Component=I,Pe.Fragment=i,Pe.Profiler=c,Pe.PureComponent=T,Pe.StrictMode=l,Pe.Suspense=p,Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,Pe.act=K,Pe.cloneElement=function(C,E,W){if(C==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+C+".");var q=_({},C.props),oe=C.key,ee=C.ref,me=C._owner;if(E!=null){if(E.ref!==void 0&&(ee=E.ref,me=H.current),E.key!==void 0&&(oe=""+E.key),C.type&&C.type.defaultProps)var De=C.type.defaultProps;for(ye in E)X.call(E,ye)&&!Z.hasOwnProperty(ye)&&(q[ye]=E[ye]===void 0&&De!==void 0?De[ye]:E[ye])}var ye=arguments.length-2;if(ye===1)q.children=W;else if(1<ye){De=Array(ye);for(var Oe=0;Oe<ye;Oe++)De[Oe]=arguments[Oe+2];q.children=De}return{$$typeof:o,type:C.type,key:oe,ref:ee,props:q,_owner:me}},Pe.createContext=function(C){return C={$$typeof:m,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},C.Provider={$$typeof:u,_context:C},C.Consumer=C},Pe.createElement=ie,Pe.createFactory=function(C){var E=ie.bind(null,C);return E.type=C,E},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(C){return{$$typeof:h,render:C}},Pe.isValidElement=be,Pe.lazy=function(C){return{$$typeof:w,_payload:{_status:-1,_result:C},_init:ce}},Pe.memo=function(C,E){return{$$typeof:y,type:C,compare:E===void 0?null:E}},Pe.startTransition=function(C){var E=N.transition;N.transition={};try{C()}finally{N.transition=E}},Pe.unstable_act=K,Pe.useCallback=function(C,E){return ue.current.useCallback(C,E)},Pe.useContext=function(C){return ue.current.useContext(C)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(C){return ue.current.useDeferredValue(C)},Pe.useEffect=function(C,E){return ue.current.useEffect(C,E)},Pe.useId=function(){return ue.current.useId()},Pe.useImperativeHandle=function(C,E,W){return ue.current.useImperativeHandle(C,E,W)},Pe.useInsertionEffect=function(C,E){return ue.current.useInsertionEffect(C,E)},Pe.useLayoutEffect=function(C,E){return ue.current.useLayoutEffect(C,E)},Pe.useMemo=function(C,E){return ue.current.useMemo(C,E)},Pe.useReducer=function(C,E,W){return ue.current.useReducer(C,E,W)},Pe.useRef=function(C){return ue.current.useRef(C)},Pe.useState=function(C){return ue.current.useState(C)},Pe.useSyncExternalStore=function(C,E,W){return ue.current.useSyncExternalStore(C,E,W)},Pe.useTransition=function(){return ue.current.useTransition()},Pe.version="18.3.1",Pe}var _d;function Va(){return _d||(_d=1,Ca.exports=Gp()),Ca.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cd;function $p(){if(Cd)return us;Cd=1;var o=Va(),n=Symbol.for("react.element"),i=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,c=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function m(h,p,y){var w,x={},b=null,S=null;y!==void 0&&(b=""+y),p.key!==void 0&&(b=""+p.key),p.ref!==void 0&&(S=p.ref);for(w in p)l.call(p,w)&&!u.hasOwnProperty(w)&&(x[w]=p[w]);if(h&&h.defaultProps)for(w in p=h.defaultProps,p)x[w]===void 0&&(x[w]=p[w]);return{$$typeof:n,type:h,key:b,ref:S,props:x,_owner:c.current}}return us.Fragment=i,us.jsx=m,us.jsxs=m,us}var Ed;function Wp(){return Ed||(Ed=1,_a.exports=$p()),_a.exports}var f=Wp(),V=Va();const ds=sf(V);var _o={},Ea={exports:{}},Zt={},Da={exports:{}},Aa={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dd;function Vp(){return Dd||(Dd=1,(function(o){function n(N,se){var K=N.length;N.push(se);e:for(;0<K;){var C=K-1>>>1,E=N[C];if(0<c(E,se))N[C]=se,N[K]=E,K=C;else break e}}function i(N){return N.length===0?null:N[0]}function l(N){if(N.length===0)return null;var se=N[0],K=N.pop();if(K!==se){N[0]=K;e:for(var C=0,E=N.length,W=E>>>1;C<W;){var q=2*(C+1)-1,oe=N[q],ee=q+1,me=N[ee];if(0>c(oe,K))ee<E&&0>c(me,oe)?(N[C]=me,N[ee]=K,C=ee):(N[C]=oe,N[q]=K,C=q);else if(ee<E&&0>c(me,K))N[C]=me,N[ee]=K,C=ee;else break e}}return se}function c(N,se){var K=N.sortIndex-se.sortIndex;return K!==0?K:N.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;o.unstable_now=function(){return u.now()}}else{var m=Date,h=m.now();o.unstable_now=function(){return m.now()-h}}var p=[],y=[],w=1,x=null,b=3,S=!1,_=!1,M=!1,I=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(N){for(var se=i(y);se!==null;){if(se.callback===null)l(y);else if(se.startTime<=N)l(y),se.sortIndex=se.expirationTime,n(p,se);else break;se=i(y)}}function A(N){if(M=!1,L(N),!_)if(i(p)!==null)_=!0,ce(X);else{var se=i(y);se!==null&&ue(A,se.startTime-N)}}function X(N,se){_=!1,M&&(M=!1,P(ie),ie=-1),S=!0;var K=b;try{for(L(se),x=i(p);x!==null&&(!(x.expirationTime>se)||N&&!pe());){var C=x.callback;if(typeof C=="function"){x.callback=null,b=x.priorityLevel;var E=C(x.expirationTime<=se);se=o.unstable_now(),typeof E=="function"?x.callback=E:x===i(p)&&l(p),L(se)}else l(p);x=i(p)}if(x!==null)var W=!0;else{var q=i(y);q!==null&&ue(A,q.startTime-se),W=!1}return W}finally{x=null,b=K,S=!1}}var H=!1,Z=null,ie=-1,he=5,be=-1;function pe(){return!(o.unstable_now()-be<he)}function fe(){if(Z!==null){var N=o.unstable_now();be=N;var se=!0;try{se=Z(!0,N)}finally{se?Q():(H=!1,Z=null)}}else H=!1}var Q;if(typeof T=="function")Q=function(){T(fe)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,xe=re.port2;re.port1.onmessage=fe,Q=function(){xe.postMessage(null)}}else Q=function(){I(fe,0)};function ce(N){Z=N,H||(H=!0,Q())}function ue(N,se){ie=I(function(){N(o.unstable_now())},se)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(N){N.callback=null},o.unstable_continueExecution=function(){_||S||(_=!0,ce(X))},o.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<N?Math.floor(1e3/N):5},o.unstable_getCurrentPriorityLevel=function(){return b},o.unstable_getFirstCallbackNode=function(){return i(p)},o.unstable_next=function(N){switch(b){case 1:case 2:case 3:var se=3;break;default:se=b}var K=b;b=se;try{return N()}finally{b=K}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(N,se){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var K=b;b=N;try{return se()}finally{b=K}},o.unstable_scheduleCallback=function(N,se,K){var C=o.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?C+K:C):K=C,N){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=K+E,N={id:w++,callback:se,priorityLevel:N,startTime:K,expirationTime:E,sortIndex:-1},K>C?(N.sortIndex=K,n(y,N),i(p)===null&&N===i(y)&&(M?(P(ie),ie=-1):M=!0,ue(A,K-C))):(N.sortIndex=E,n(p,N),_||S||(_=!0,ce(X))),N},o.unstable_shouldYield=pe,o.unstable_wrapCallback=function(N){var se=b;return function(){var K=b;b=se;try{return N.apply(this,arguments)}finally{b=K}}}})(Aa)),Aa}var Ad;function Yp(){return Ad||(Ad=1,Da.exports=Vp()),Da.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nd;function Kp(){if(Nd)return Zt;Nd=1;var o=Va(),n=Yp();function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,c={};function u(e,t){m(e,t),m(e+"Capture",t)}function m(e,t){for(c[e]=t,e=0;e<t.length;e++)l.add(t[e])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},x={};function b(e){return p.call(x,e)?!0:p.call(w,e)?!1:y.test(e)?x[e]=!0:(w[e]=!0,!1)}function S(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _(e,t,r,s){if(t===null||typeof t>"u"||S(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function M(e,t,r,s,a,d,g){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=g}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){I[e]=new M(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];I[t]=new M(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){I[e]=new M(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){I[e]=new M(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){I[e]=new M(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){I[e]=new M(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){I[e]=new M(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){I[e]=new M(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){I[e]=new M(e,5,!1,e.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function T(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(P,T);I[t]=new M(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(P,T);I[t]=new M(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(P,T);I[t]=new M(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){I[e]=new M(e,1,!1,e.toLowerCase(),null,!1,!1)}),I.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){I[e]=new M(e,1,!1,e.toLowerCase(),null,!0,!0)});function L(e,t,r,s){var a=I.hasOwnProperty(t)?I[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_(t,r,a,s)&&(r=null),s||a===null?b(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var A=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),H=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),be=Symbol.for("react.provider"),pe=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),xe=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),ue=Symbol.for("react.offscreen"),N=Symbol.iterator;function se(e){return e===null||typeof e!="object"?null:(e=N&&e[N]||e["@@iterator"],typeof e=="function"?e:null)}var K=Object.assign,C;function E(e){if(C===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);C=t&&t[1]||""}return`
`+C+e}var W=!1;function q(e,t){if(!e||W)return"";W=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(G){var s=G}Reflect.construct(e,[],t)}else{try{t.call()}catch(G){s=G}e.call(t.prototype)}else{try{throw Error()}catch(G){s=G}e()}}catch(G){if(G&&s&&typeof G.stack=="string"){for(var a=G.stack.split(`
`),d=s.stack.split(`
`),g=a.length-1,k=d.length-1;1<=g&&0<=k&&a[g]!==d[k];)k--;for(;1<=g&&0<=k;g--,k--)if(a[g]!==d[k]){if(g!==1||k!==1)do if(g--,k--,0>k||a[g]!==d[k]){var D=`
`+a[g].replace(" at new "," at ");return e.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",e.displayName)),D}while(1<=g&&0<=k);break}}}finally{W=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?E(e):""}function oe(e){switch(e.tag){case 5:return E(e.type);case 16:return E("Lazy");case 13:return E("Suspense");case 19:return E("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1),e;case 11:return e=q(e.type.render,!1),e;case 1:return e=q(e.type,!0),e;default:return""}}function ee(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Z:return"Fragment";case H:return"Portal";case he:return"Profiler";case ie:return"StrictMode";case Q:return"Suspense";case re:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case pe:return(e.displayName||"Context")+".Consumer";case be:return(e._context.displayName||"Context")+".Provider";case fe:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xe:return t=e.displayName||null,t!==null?t:ee(e.type)||"Memo";case ce:t=e._payload,e=e._init;try{return ee(e(t))}catch{}}return null}function me(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ee(t);case 8:return t===ie?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function De(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ye(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Oe(e){var t=ye(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,d=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(g){s=""+g,d.call(this,g)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(g){s=""+g},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xt(e){e._valueTracker||(e._valueTracker=Oe(e))}function an(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=ye(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function rt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function yt(e,t){var r=t.checked;return K({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function j(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=De(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function F(e,t){t=t.checked,t!=null&&L(e,"checked",t,!1)}function vt(e,t){F(e,t);var r=De(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$t(e,t.type,r):t.hasOwnProperty("defaultValue")&&$t(e,t.type,De(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Nt(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function $t(e,t,r){(t!=="number"||rt(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var bt=Array.isArray;function ot(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+De(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Jt(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(i(91));return K({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zn(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(i(92));if(bt(r)){if(1<r.length)throw Error(i(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:De(r)}}function Ar(e,t){var r=De(t.value),s=De(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function Nr(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Hn(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gn(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Hn(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var cn,$n=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(cn=cn||document.createElement("div"),cn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=cn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Wn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var sr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Go=["Webkit","ms","Moz","O"];Object.keys(sr).forEach(function(e){Go.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),sr[t]=sr[e]})});function Ee(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||sr.hasOwnProperty(e)&&sr[e]?(""+t).trim():t+"px"}function Be(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=Ee(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var Ve=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ke(e,t){if(t){if(Ve[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(i(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(i(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(t.style!=null&&typeof t.style!="object")throw Error(i(62))}}function ze(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var We=null;function Ze(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Tt=null,Ae=null,je=null;function He(e){if(e=Xi(e)){if(typeof Tt!="function")throw Error(i(280));var t=e.stateNode;t&&(t=Rs(t),Tt(e.stateNode,e.type,t))}}function Xe(e){Ae?je?je.push(e):je=[e]:Ae=e}function pt(){if(Ae){var e=Ae,t=je;if(je=Ae=null,He(e),t)for(e=0;e<t.length;e++)He(t[e])}}function Bt(e,t){return e(t)}function It(){}var _t=!1;function en(e,t,r){if(_t)return e(t,r);_t=!0;try{return Bt(e,t,r)}finally{_t=!1,(Ae!==null||je!==null)&&(It(),pt())}}function tn(e,t){var r=e.stateNode;if(r===null)return null;var s=Rs(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(i(231,t,typeof r));return r}var jt=!1;if(h)try{var Ft={};Object.defineProperty(Ft,"passive",{get:function(){jt=!0}}),window.addEventListener("test",Ft,Ft),window.removeEventListener("test",Ft,Ft)}catch{jt=!1}function at(e,t,r,s,a,d,g,k,D){var G=Array.prototype.slice.call(arguments,3);try{t.apply(r,G)}catch(te){this.onError(te)}}var ct=!1,Ct=null,Ut=!1,Wt=null,An={onError:function(e){ct=!0,Ct=e}};function Tr(e,t,r,s,a,d,g,k,D){ct=!1,Ct=null,at.apply(An,arguments)}function Jr(e,t,r,s,a,d,g,k,D){if(Tr.apply(this,arguments),ct){if(ct){var G=Ct;ct=!1,Ct=null}else throw Error(i(198));Ut||(Ut=!0,Wt=G)}}function Et(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Nn(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Br(e){if(Et(e)!==e)throw Error(i(188))}function xn(e){var t=e.alternate;if(!t){if(t=Et(e),t===null)throw Error(i(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var d=a.alternate;if(d===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===d.child){for(d=a.child;d;){if(d===r)return Br(a),e;if(d===s)return Br(a),t;d=d.sibling}throw Error(i(188))}if(r.return!==s.return)r=a,s=d;else{for(var g=!1,k=a.child;k;){if(k===r){g=!0,r=a,s=d;break}if(k===s){g=!0,s=a,r=d;break}k=k.sibling}if(!g){for(k=d.child;k;){if(k===r){g=!0,r=d,s=a;break}if(k===s){g=!0,s=d,r=a;break}k=k.sibling}if(!g)throw Error(i(189))}}if(r.alternate!==s)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?e:t}function dt(e){return e=xn(e),e!==null?Tn(e):null}function Tn(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Tn(e);if(t!==null)return t;e=e.sibling}return null}var Ir=n.unstable_scheduleCallback,or=n.unstable_cancelCallback,xs=n.unstable_shouldYield,Ti=n.unstable_requestPaint,tt=n.unstable_now,ys=n.unstable_getCurrentPriorityLevel,yn=n.unstable_ImmediatePriority,ei=n.unstable_UserBlockingPriority,jr=n.unstable_NormalPriority,th=n.unstable_LowPriority,qa=n.unstable_IdlePriority,vs=null,Bn=null;function nh(e){if(Bn&&typeof Bn.onCommitFiberRoot=="function")try{Bn.onCommitFiberRoot(vs,e,void 0,(e.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:sh,rh=Math.log,ih=Math.LN2;function sh(e){return e>>>=0,e===0?32:31-(rh(e)/ih|0)|0}var ws=64,ks=4194304;function Bi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ss(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,d=e.pingedLanes,g=r&268435455;if(g!==0){var k=g&~a;k!==0?s=Bi(k):(d&=g,d!==0&&(s=Bi(d)))}else g=r&~a,g!==0?s=Bi(g):d!==0&&(s=Bi(d));if(s===0)return 0;if(t!==0&&t!==s&&(t&a)===0&&(a=s&-s,d=t&-t,a>=d||a===16&&(d&4194240)!==0))return t;if((s&4)!==0&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-vn(t),a=1<<r,s|=e[r],t&=~a;return s}function oh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lh(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,d=e.pendingLanes;0<d;){var g=31-vn(d),k=1<<g,D=a[g];D===-1?((k&r)===0||(k&s)!==0)&&(a[g]=oh(k,t)):D<=t&&(e.expiredLanes|=k),d&=~k}}function $o(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ja(){var e=ws;return ws<<=1,(ws&4194240)===0&&(ws=64),e}function Wo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ii(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vn(t),e[t]=r}function ah(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-vn(r),d=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~d}}function Vo(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-vn(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var Ye=0;function ec(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var tc,Yo,nc,rc,ic,Ko=!1,bs=[],lr=null,ar=null,cr=null,ji=new Map,Fi=new Map,ur=[],ch="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sc(e,t){switch(e){case"focusin":case"focusout":lr=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":ji.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fi.delete(t.pointerId)}}function Li(e,t,r,s,a,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:d,targetContainers:[a]},t!==null&&(t=Xi(t),t!==null&&Yo(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function uh(e,t,r,s,a){switch(t){case"focusin":return lr=Li(lr,e,t,r,s,a),!0;case"dragenter":return ar=Li(ar,e,t,r,s,a),!0;case"mouseover":return cr=Li(cr,e,t,r,s,a),!0;case"pointerover":var d=a.pointerId;return ji.set(d,Li(ji.get(d)||null,e,t,r,s,a)),!0;case"gotpointercapture":return d=a.pointerId,Fi.set(d,Li(Fi.get(d)||null,e,t,r,s,a)),!0}return!1}function oc(e){var t=Fr(e.target);if(t!==null){var r=Et(t);if(r!==null){if(t=r.tag,t===13){if(t=Nn(r),t!==null){e.blockedOn=t,ic(e.priority,function(){nc(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _s(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Qo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);We=s,r.target.dispatchEvent(s),We=null}else return t=Xi(r),t!==null&&Yo(t),e.blockedOn=r,!1;t.shift()}return!0}function lc(e,t,r){_s(e)&&r.delete(t)}function dh(){Ko=!1,lr!==null&&_s(lr)&&(lr=null),ar!==null&&_s(ar)&&(ar=null),cr!==null&&_s(cr)&&(cr=null),ji.forEach(lc),Fi.forEach(lc)}function Pi(e,t){e.blockedOn===t&&(e.blockedOn=null,Ko||(Ko=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,dh)))}function Mi(e){function t(a){return Pi(a,e)}if(0<bs.length){Pi(bs[0],e);for(var r=1;r<bs.length;r++){var s=bs[r];s.blockedOn===e&&(s.blockedOn=null)}}for(lr!==null&&Pi(lr,e),ar!==null&&Pi(ar,e),cr!==null&&Pi(cr,e),ji.forEach(t),Fi.forEach(t),r=0;r<ur.length;r++)s=ur[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<ur.length&&(r=ur[0],r.blockedOn===null);)oc(r),r.blockedOn===null&&ur.shift()}var ti=A.ReactCurrentBatchConfig,Cs=!0;function fh(e,t,r,s){var a=Ye,d=ti.transition;ti.transition=null;try{Ye=1,Xo(e,t,r,s)}finally{Ye=a,ti.transition=d}}function hh(e,t,r,s){var a=Ye,d=ti.transition;ti.transition=null;try{Ye=4,Xo(e,t,r,s)}finally{Ye=a,ti.transition=d}}function Xo(e,t,r,s){if(Cs){var a=Qo(e,t,r,s);if(a===null)hl(e,t,s,Es,r),sc(e,s);else if(uh(a,e,t,r,s))s.stopPropagation();else if(sc(e,s),t&4&&-1<ch.indexOf(e)){for(;a!==null;){var d=Xi(a);if(d!==null&&tc(d),d=Qo(e,t,r,s),d===null&&hl(e,t,s,Es,r),d===a)break;a=d}a!==null&&s.stopPropagation()}else hl(e,t,s,null,r)}}var Es=null;function Qo(e,t,r,s){if(Es=null,e=Ze(s),e=Fr(e),e!==null)if(t=Et(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Nn(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Es=e,null}function ac(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ys()){case yn:return 1;case ei:return 4;case jr:case th:return 16;case qa:return 536870912;default:return 16}default:return 16}}var dr=null,Zo=null,Ds=null;function cc(){if(Ds)return Ds;var e,t=Zo,r=t.length,s,a="value"in dr?dr.value:dr.textContent,d=a.length;for(e=0;e<r&&t[e]===a[e];e++);var g=r-e;for(s=1;s<=g&&t[r-s]===a[d-s];s++);return Ds=a.slice(e,1<s?1-s:void 0)}function As(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ns(){return!0}function uc(){return!1}function nn(e){function t(r,s,a,d,g){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=d,this.target=g,this.currentTarget=null;for(var k in e)e.hasOwnProperty(k)&&(r=e[k],this[k]=r?r(d):d[k]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ns:uc,this.isPropagationStopped=uc,this}return K(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ns)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ns)},persist:function(){},isPersistent:Ns}),t}var ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qo=nn(ni),Ri=K({},ni,{view:0,detail:0}),ph=nn(Ri),Jo,el,Oi,Ts=K({},Ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Oi&&(Oi&&e.type==="mousemove"?(Jo=e.screenX-Oi.screenX,el=e.screenY-Oi.screenY):el=Jo=0,Oi=e),Jo)},movementY:function(e){return"movementY"in e?e.movementY:el}}),dc=nn(Ts),mh=K({},Ts,{dataTransfer:0}),gh=nn(mh),xh=K({},Ri,{relatedTarget:0}),tl=nn(xh),yh=K({},ni,{animationName:0,elapsedTime:0,pseudoElement:0}),vh=nn(yh),wh=K({},ni,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kh=nn(wh),Sh=K({},ni,{data:0}),fc=nn(Sh),bh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_h={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ch={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Ch[e])?!!t[e]:!1}function nl(){return Eh}var Dh=K({},Ri,{key:function(e){if(e.key){var t=bh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=As(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_h[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nl,charCode:function(e){return e.type==="keypress"?As(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?As(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ah=nn(Dh),Nh=K({},Ts,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hc=nn(Nh),Th=K({},Ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nl}),Bh=nn(Th),Ih=K({},ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),jh=nn(Ih),Fh=K({},Ts,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Lh=nn(Fh),Ph=[9,13,27,32],rl=h&&"CompositionEvent"in window,Ui=null;h&&"documentMode"in document&&(Ui=document.documentMode);var Mh=h&&"TextEvent"in window&&!Ui,pc=h&&(!rl||Ui&&8<Ui&&11>=Ui),mc=" ",gc=!1;function xc(e,t){switch(e){case"keyup":return Ph.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ri=!1;function Rh(e,t){switch(e){case"compositionend":return yc(t);case"keypress":return t.which!==32?null:(gc=!0,mc);case"textInput":return e=t.data,e===mc&&gc?null:e;default:return null}}function Oh(e,t){if(ri)return e==="compositionend"||!rl&&xc(e,t)?(e=cc(),Ds=Zo=dr=null,ri=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return pc&&t.locale!=="ko"?null:t.data;default:return null}}var Uh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Uh[e.type]:t==="textarea"}function wc(e,t,r,s){Xe(s),t=Ls(t,"onChange"),0<t.length&&(r=new qo("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var zi=null,Hi=null;function zh(e){Rc(e,0)}function Bs(e){var t=ai(e);if(an(t))return e}function Hh(e,t){if(e==="change")return t}var kc=!1;if(h){var il;if(h){var sl="oninput"in document;if(!sl){var Sc=document.createElement("div");Sc.setAttribute("oninput","return;"),sl=typeof Sc.oninput=="function"}il=sl}else il=!1;kc=il&&(!document.documentMode||9<document.documentMode)}function bc(){zi&&(zi.detachEvent("onpropertychange",_c),Hi=zi=null)}function _c(e){if(e.propertyName==="value"&&Bs(Hi)){var t=[];wc(t,Hi,e,Ze(e)),en(zh,t)}}function Gh(e,t,r){e==="focusin"?(bc(),zi=t,Hi=r,zi.attachEvent("onpropertychange",_c)):e==="focusout"&&bc()}function $h(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bs(Hi)}function Wh(e,t){if(e==="click")return Bs(t)}function Vh(e,t){if(e==="input"||e==="change")return Bs(t)}function Yh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wn=typeof Object.is=="function"?Object.is:Yh;function Gi(e,t){if(wn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!p.call(t,a)||!wn(e[a],t[a]))return!1}return!0}function Cc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ec(e,t){var r=Cc(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Cc(r)}}function Dc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Dc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ac(){for(var e=window,t=rt();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=rt(e.document)}return t}function ol(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Kh(e){var t=Ac(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Dc(r.ownerDocument.documentElement,r)){if(s!==null&&ol(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,d=Math.min(s.start,a);s=s.end===void 0?d:Math.min(s.end,a),!e.extend&&d>s&&(a=s,s=d,d=a),a=Ec(r,d);var g=Ec(r,s);a&&g&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==g.node||e.focusOffset!==g.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),d>s?(e.addRange(t),e.extend(g.node,g.offset)):(t.setEnd(g.node,g.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Xh=h&&"documentMode"in document&&11>=document.documentMode,ii=null,ll=null,$i=null,al=!1;function Nc(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;al||ii==null||ii!==rt(s)||(s=ii,"selectionStart"in s&&ol(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),$i&&Gi($i,s)||($i=s,s=Ls(ll,"onSelect"),0<s.length&&(t=new qo("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=ii)))}function Is(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var si={animationend:Is("Animation","AnimationEnd"),animationiteration:Is("Animation","AnimationIteration"),animationstart:Is("Animation","AnimationStart"),transitionend:Is("Transition","TransitionEnd")},cl={},Tc={};h&&(Tc=document.createElement("div").style,"AnimationEvent"in window||(delete si.animationend.animation,delete si.animationiteration.animation,delete si.animationstart.animation),"TransitionEvent"in window||delete si.transitionend.transition);function js(e){if(cl[e])return cl[e];if(!si[e])return e;var t=si[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Tc)return cl[e]=t[r];return e}var Bc=js("animationend"),Ic=js("animationiteration"),jc=js("animationstart"),Fc=js("transitionend"),Lc=new Map,Pc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fr(e,t){Lc.set(e,t),u(t,[e])}for(var ul=0;ul<Pc.length;ul++){var dl=Pc[ul],Qh=dl.toLowerCase(),Zh=dl[0].toUpperCase()+dl.slice(1);fr(Qh,"on"+Zh)}fr(Bc,"onAnimationEnd"),fr(Ic,"onAnimationIteration"),fr(jc,"onAnimationStart"),fr("dblclick","onDoubleClick"),fr("focusin","onFocus"),fr("focusout","onBlur"),fr(Fc,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wi));function Mc(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,Jr(s,t,void 0,e),e.currentTarget=null}function Rc(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var d=void 0;if(t)for(var g=s.length-1;0<=g;g--){var k=s[g],D=k.instance,G=k.currentTarget;if(k=k.listener,D!==d&&a.isPropagationStopped())break e;Mc(a,k,G),d=D}else for(g=0;g<s.length;g++){if(k=s[g],D=k.instance,G=k.currentTarget,k=k.listener,D!==d&&a.isPropagationStopped())break e;Mc(a,k,G),d=D}}}if(Ut)throw e=Wt,Ut=!1,Wt=null,e}function Je(e,t){var r=t[vl];r===void 0&&(r=t[vl]=new Set);var s=e+"__bubble";r.has(s)||(Oc(t,e,2,!1),r.add(s))}function fl(e,t,r){var s=0;t&&(s|=4),Oc(r,e,s,t)}var Fs="_reactListening"+Math.random().toString(36).slice(2);function Vi(e){if(!e[Fs]){e[Fs]=!0,l.forEach(function(r){r!=="selectionchange"&&(qh.has(r)||fl(r,!1,e),fl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fs]||(t[Fs]=!0,fl("selectionchange",!1,t))}}function Oc(e,t,r,s){switch(ac(t)){case 1:var a=fh;break;case 4:a=hh;break;default:a=Xo}r=a.bind(null,t,r,e),a=void 0,!jt||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function hl(e,t,r,s,a){var d=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var g=s.tag;if(g===3||g===4){var k=s.stateNode.containerInfo;if(k===a||k.nodeType===8&&k.parentNode===a)break;if(g===4)for(g=s.return;g!==null;){var D=g.tag;if((D===3||D===4)&&(D=g.stateNode.containerInfo,D===a||D.nodeType===8&&D.parentNode===a))return;g=g.return}for(;k!==null;){if(g=Fr(k),g===null)return;if(D=g.tag,D===5||D===6){s=d=g;continue e}k=k.parentNode}}s=s.return}en(function(){var G=d,te=Ze(r),ne=[];e:{var J=Lc.get(e);if(J!==void 0){var ge=qo,ke=e;switch(e){case"keypress":if(As(r)===0)break e;case"keydown":case"keyup":ge=Ah;break;case"focusin":ke="focus",ge=tl;break;case"focusout":ke="blur",ge=tl;break;case"beforeblur":case"afterblur":ge=tl;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=dc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=gh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=Bh;break;case Bc:case Ic:case jc:ge=vh;break;case Fc:ge=jh;break;case"scroll":ge=ph;break;case"wheel":ge=Lh;break;case"copy":case"cut":case"paste":ge=kh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=hc}var Se=(t&4)!==0,ut=!Se&&e==="scroll",R=Se?J!==null?J+"Capture":null:J;Se=[];for(var B=G,z;B!==null;){z=B;var le=z.stateNode;if(z.tag===5&&le!==null&&(z=le,R!==null&&(le=tn(B,R),le!=null&&Se.push(Yi(B,le,z)))),ut)break;B=B.return}0<Se.length&&(J=new ge(J,ke,null,r,te),ne.push({event:J,listeners:Se}))}}if((t&7)===0){e:{if(J=e==="mouseover"||e==="pointerover",ge=e==="mouseout"||e==="pointerout",J&&r!==We&&(ke=r.relatedTarget||r.fromElement)&&(Fr(ke)||ke[Vn]))break e;if((ge||J)&&(J=te.window===te?te:(J=te.ownerDocument)?J.defaultView||J.parentWindow:window,ge?(ke=r.relatedTarget||r.toElement,ge=G,ke=ke?Fr(ke):null,ke!==null&&(ut=Et(ke),ke!==ut||ke.tag!==5&&ke.tag!==6)&&(ke=null)):(ge=null,ke=G),ge!==ke)){if(Se=dc,le="onMouseLeave",R="onMouseEnter",B="mouse",(e==="pointerout"||e==="pointerover")&&(Se=hc,le="onPointerLeave",R="onPointerEnter",B="pointer"),ut=ge==null?J:ai(ge),z=ke==null?J:ai(ke),J=new Se(le,B+"leave",ge,r,te),J.target=ut,J.relatedTarget=z,le=null,Fr(te)===G&&(Se=new Se(R,B+"enter",ke,r,te),Se.target=z,Se.relatedTarget=ut,le=Se),ut=le,ge&&ke)t:{for(Se=ge,R=ke,B=0,z=Se;z;z=oi(z))B++;for(z=0,le=R;le;le=oi(le))z++;for(;0<B-z;)Se=oi(Se),B--;for(;0<z-B;)R=oi(R),z--;for(;B--;){if(Se===R||R!==null&&Se===R.alternate)break t;Se=oi(Se),R=oi(R)}Se=null}else Se=null;ge!==null&&Uc(ne,J,ge,Se,!1),ke!==null&&ut!==null&&Uc(ne,ut,ke,Se,!0)}}e:{if(J=G?ai(G):window,ge=J.nodeName&&J.nodeName.toLowerCase(),ge==="select"||ge==="input"&&J.type==="file")var Ce=Hh;else if(vc(J))if(kc)Ce=Vh;else{Ce=$h;var Ne=Gh}else(ge=J.nodeName)&&ge.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(Ce=Wh);if(Ce&&(Ce=Ce(e,G))){wc(ne,Ce,r,te);break e}Ne&&Ne(e,J,G),e==="focusout"&&(Ne=J._wrapperState)&&Ne.controlled&&J.type==="number"&&$t(J,"number",J.value)}switch(Ne=G?ai(G):window,e){case"focusin":(vc(Ne)||Ne.contentEditable==="true")&&(ii=Ne,ll=G,$i=null);break;case"focusout":$i=ll=ii=null;break;case"mousedown":al=!0;break;case"contextmenu":case"mouseup":case"dragend":al=!1,Nc(ne,r,te);break;case"selectionchange":if(Xh)break;case"keydown":case"keyup":Nc(ne,r,te)}var Te;if(rl)e:{switch(e){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else ri?xc(e,r)&&(Ie="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Ie="onCompositionStart");Ie&&(pc&&r.locale!=="ko"&&(ri||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&ri&&(Te=cc()):(dr=te,Zo="value"in dr?dr.value:dr.textContent,ri=!0)),Ne=Ls(G,Ie),0<Ne.length&&(Ie=new fc(Ie,e,null,r,te),ne.push({event:Ie,listeners:Ne}),Te?Ie.data=Te:(Te=yc(r),Te!==null&&(Ie.data=Te)))),(Te=Mh?Rh(e,r):Oh(e,r))&&(G=Ls(G,"onBeforeInput"),0<G.length&&(te=new fc("onBeforeInput","beforeinput",null,r,te),ne.push({event:te,listeners:G}),te.data=Te))}Rc(ne,t)})}function Yi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ls(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,d=a.stateNode;a.tag===5&&d!==null&&(a=d,d=tn(e,r),d!=null&&s.unshift(Yi(e,d,a)),d=tn(e,t),d!=null&&s.push(Yi(e,d,a))),e=e.return}return s}function oi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Uc(e,t,r,s,a){for(var d=t._reactName,g=[];r!==null&&r!==s;){var k=r,D=k.alternate,G=k.stateNode;if(D!==null&&D===s)break;k.tag===5&&G!==null&&(k=G,a?(D=tn(r,d),D!=null&&g.unshift(Yi(r,D,k))):a||(D=tn(r,d),D!=null&&g.push(Yi(r,D,k)))),r=r.return}g.length!==0&&e.push({event:t,listeners:g})}var Jh=/\r\n?/g,ep=/\u0000|\uFFFD/g;function zc(e){return(typeof e=="string"?e:""+e).replace(Jh,`
`).replace(ep,"")}function Ps(e,t,r){if(t=zc(t),zc(e)!==t&&r)throw Error(i(425))}function Ms(){}var pl=null,ml=null;function gl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xl=typeof setTimeout=="function"?setTimeout:void 0,tp=typeof clearTimeout=="function"?clearTimeout:void 0,Hc=typeof Promise=="function"?Promise:void 0,np=typeof queueMicrotask=="function"?queueMicrotask:typeof Hc<"u"?function(e){return Hc.resolve(null).then(e).catch(rp)}:xl;function rp(e){setTimeout(function(){throw e})}function yl(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),Mi(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);Mi(t)}function hr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Gc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var li=Math.random().toString(36).slice(2),In="__reactFiber$"+li,Ki="__reactProps$"+li,Vn="__reactContainer$"+li,vl="__reactEvents$"+li,ip="__reactListeners$"+li,sp="__reactHandles$"+li;function Fr(e){var t=e[In];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Vn]||r[In]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Gc(e);e!==null;){if(r=e[In])return r;e=Gc(e)}return t}e=r,r=e.parentNode}return null}function Xi(e){return e=e[In]||e[Vn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ai(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(i(33))}function Rs(e){return e[Ki]||null}var wl=[],ci=-1;function pr(e){return{current:e}}function et(e){0>ci||(e.current=wl[ci],wl[ci]=null,ci--)}function qe(e,t){ci++,wl[ci]=e.current,e.current=t}var mr={},Lt=pr(mr),Vt=pr(!1),Lr=mr;function ui(e,t){var r=e.type.contextTypes;if(!r)return mr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},d;for(d in r)a[d]=t[d];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Yt(e){return e=e.childContextTypes,e!=null}function Os(){et(Vt),et(Lt)}function $c(e,t,r){if(Lt.current!==mr)throw Error(i(168));qe(Lt,t),qe(Vt,r)}function Wc(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(i(108,me(e)||"Unknown",a));return K({},r,s)}function Us(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||mr,Lr=Lt.current,qe(Lt,e),qe(Vt,Vt.current),!0}function Vc(e,t,r){var s=e.stateNode;if(!s)throw Error(i(169));r?(e=Wc(e,t,Lr),s.__reactInternalMemoizedMergedChildContext=e,et(Vt),et(Lt),qe(Lt,e)):et(Vt),qe(Vt,r)}var Yn=null,zs=!1,kl=!1;function Yc(e){Yn===null?Yn=[e]:Yn.push(e)}function op(e){zs=!0,Yc(e)}function gr(){if(!kl&&Yn!==null){kl=!0;var e=0,t=Ye;try{var r=Yn;for(Ye=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Yn=null,zs=!1}catch(a){throw Yn!==null&&(Yn=Yn.slice(e+1)),Ir(yn,gr),a}finally{Ye=t,kl=!1}}return null}var di=[],fi=0,Hs=null,Gs=0,un=[],dn=0,Pr=null,Kn=1,Xn="";function Mr(e,t){di[fi++]=Gs,di[fi++]=Hs,Hs=e,Gs=t}function Kc(e,t,r){un[dn++]=Kn,un[dn++]=Xn,un[dn++]=Pr,Pr=e;var s=Kn;e=Xn;var a=32-vn(s)-1;s&=~(1<<a),r+=1;var d=32-vn(t)+a;if(30<d){var g=a-a%5;d=(s&(1<<g)-1).toString(32),s>>=g,a-=g,Kn=1<<32-vn(t)+a|r<<a|s,Xn=d+e}else Kn=1<<d|r<<a|s,Xn=e}function Sl(e){e.return!==null&&(Mr(e,1),Kc(e,1,0))}function bl(e){for(;e===Hs;)Hs=di[--fi],di[fi]=null,Gs=di[--fi],di[fi]=null;for(;e===Pr;)Pr=un[--dn],un[dn]=null,Xn=un[--dn],un[dn]=null,Kn=un[--dn],un[dn]=null}var rn=null,sn=null,nt=!1,kn=null;function Xc(e,t){var r=mn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Qc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,rn=e,sn=hr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,rn=e,sn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Pr!==null?{id:Kn,overflow:Xn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=mn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,rn=e,sn=null,!0):!1;default:return!1}}function _l(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Cl(e){if(nt){var t=sn;if(t){var r=t;if(!Qc(e,t)){if(_l(e))throw Error(i(418));t=hr(r.nextSibling);var s=rn;t&&Qc(e,t)?Xc(s,r):(e.flags=e.flags&-4097|2,nt=!1,rn=e)}}else{if(_l(e))throw Error(i(418));e.flags=e.flags&-4097|2,nt=!1,rn=e}}}function Zc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rn=e}function $s(e){if(e!==rn)return!1;if(!nt)return Zc(e),nt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!gl(e.type,e.memoizedProps)),t&&(t=sn)){if(_l(e))throw qc(),Error(i(418));for(;t;)Xc(e,t),t=hr(t.nextSibling)}if(Zc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){sn=hr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}sn=null}}else sn=rn?hr(e.stateNode.nextSibling):null;return!0}function qc(){for(var e=sn;e;)e=hr(e.nextSibling)}function hi(){sn=rn=null,nt=!1}function El(e){kn===null?kn=[e]:kn.push(e)}var lp=A.ReactCurrentBatchConfig;function Qi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(i(309));var s=r.stateNode}if(!s)throw Error(i(147,e));var a=s,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(g){var k=a.refs;g===null?delete k[d]:k[d]=g},t._stringRef=d,t)}if(typeof e!="string")throw Error(i(284));if(!r._owner)throw Error(i(290,e))}return e}function Ws(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Jc(e){var t=e._init;return t(e._payload)}function eu(e){function t(R,B){if(e){var z=R.deletions;z===null?(R.deletions=[B],R.flags|=16):z.push(B)}}function r(R,B){if(!e)return null;for(;B!==null;)t(R,B),B=B.sibling;return null}function s(R,B){for(R=new Map;B!==null;)B.key!==null?R.set(B.key,B):R.set(B.index,B),B=B.sibling;return R}function a(R,B){return R=_r(R,B),R.index=0,R.sibling=null,R}function d(R,B,z){return R.index=z,e?(z=R.alternate,z!==null?(z=z.index,z<B?(R.flags|=2,B):z):(R.flags|=2,B)):(R.flags|=1048576,B)}function g(R){return e&&R.alternate===null&&(R.flags|=2),R}function k(R,B,z,le){return B===null||B.tag!==6?(B=xa(z,R.mode,le),B.return=R,B):(B=a(B,z),B.return=R,B)}function D(R,B,z,le){var Ce=z.type;return Ce===Z?te(R,B,z.props.children,le,z.key):B!==null&&(B.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===ce&&Jc(Ce)===B.type)?(le=a(B,z.props),le.ref=Qi(R,B,z),le.return=R,le):(le=go(z.type,z.key,z.props,null,R.mode,le),le.ref=Qi(R,B,z),le.return=R,le)}function G(R,B,z,le){return B===null||B.tag!==4||B.stateNode.containerInfo!==z.containerInfo||B.stateNode.implementation!==z.implementation?(B=ya(z,R.mode,le),B.return=R,B):(B=a(B,z.children||[]),B.return=R,B)}function te(R,B,z,le,Ce){return B===null||B.tag!==7?(B=Wr(z,R.mode,le,Ce),B.return=R,B):(B=a(B,z),B.return=R,B)}function ne(R,B,z){if(typeof B=="string"&&B!==""||typeof B=="number")return B=xa(""+B,R.mode,z),B.return=R,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case X:return z=go(B.type,B.key,B.props,null,R.mode,z),z.ref=Qi(R,null,B),z.return=R,z;case H:return B=ya(B,R.mode,z),B.return=R,B;case ce:var le=B._init;return ne(R,le(B._payload),z)}if(bt(B)||se(B))return B=Wr(B,R.mode,z,null),B.return=R,B;Ws(R,B)}return null}function J(R,B,z,le){var Ce=B!==null?B.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return Ce!==null?null:k(R,B,""+z,le);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case X:return z.key===Ce?D(R,B,z,le):null;case H:return z.key===Ce?G(R,B,z,le):null;case ce:return Ce=z._init,J(R,B,Ce(z._payload),le)}if(bt(z)||se(z))return Ce!==null?null:te(R,B,z,le,null);Ws(R,z)}return null}function ge(R,B,z,le,Ce){if(typeof le=="string"&&le!==""||typeof le=="number")return R=R.get(z)||null,k(B,R,""+le,Ce);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case X:return R=R.get(le.key===null?z:le.key)||null,D(B,R,le,Ce);case H:return R=R.get(le.key===null?z:le.key)||null,G(B,R,le,Ce);case ce:var Ne=le._init;return ge(R,B,z,Ne(le._payload),Ce)}if(bt(le)||se(le))return R=R.get(z)||null,te(B,R,le,Ce,null);Ws(B,le)}return null}function ke(R,B,z,le){for(var Ce=null,Ne=null,Te=B,Ie=B=0,St=null;Te!==null&&Ie<z.length;Ie++){Te.index>Ie?(St=Te,Te=null):St=Te.sibling;var $e=J(R,Te,z[Ie],le);if($e===null){Te===null&&(Te=St);break}e&&Te&&$e.alternate===null&&t(R,Te),B=d($e,B,Ie),Ne===null?Ce=$e:Ne.sibling=$e,Ne=$e,Te=St}if(Ie===z.length)return r(R,Te),nt&&Mr(R,Ie),Ce;if(Te===null){for(;Ie<z.length;Ie++)Te=ne(R,z[Ie],le),Te!==null&&(B=d(Te,B,Ie),Ne===null?Ce=Te:Ne.sibling=Te,Ne=Te);return nt&&Mr(R,Ie),Ce}for(Te=s(R,Te);Ie<z.length;Ie++)St=ge(Te,R,Ie,z[Ie],le),St!==null&&(e&&St.alternate!==null&&Te.delete(St.key===null?Ie:St.key),B=d(St,B,Ie),Ne===null?Ce=St:Ne.sibling=St,Ne=St);return e&&Te.forEach(function(Cr){return t(R,Cr)}),nt&&Mr(R,Ie),Ce}function Se(R,B,z,le){var Ce=se(z);if(typeof Ce!="function")throw Error(i(150));if(z=Ce.call(z),z==null)throw Error(i(151));for(var Ne=Ce=null,Te=B,Ie=B=0,St=null,$e=z.next();Te!==null&&!$e.done;Ie++,$e=z.next()){Te.index>Ie?(St=Te,Te=null):St=Te.sibling;var Cr=J(R,Te,$e.value,le);if(Cr===null){Te===null&&(Te=St);break}e&&Te&&Cr.alternate===null&&t(R,Te),B=d(Cr,B,Ie),Ne===null?Ce=Cr:Ne.sibling=Cr,Ne=Cr,Te=St}if($e.done)return r(R,Te),nt&&Mr(R,Ie),Ce;if(Te===null){for(;!$e.done;Ie++,$e=z.next())$e=ne(R,$e.value,le),$e!==null&&(B=d($e,B,Ie),Ne===null?Ce=$e:Ne.sibling=$e,Ne=$e);return nt&&Mr(R,Ie),Ce}for(Te=s(R,Te);!$e.done;Ie++,$e=z.next())$e=ge(Te,R,Ie,$e.value,le),$e!==null&&(e&&$e.alternate!==null&&Te.delete($e.key===null?Ie:$e.key),B=d($e,B,Ie),Ne===null?Ce=$e:Ne.sibling=$e,Ne=$e);return e&&Te.forEach(function(Up){return t(R,Up)}),nt&&Mr(R,Ie),Ce}function ut(R,B,z,le){if(typeof z=="object"&&z!==null&&z.type===Z&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case X:e:{for(var Ce=z.key,Ne=B;Ne!==null;){if(Ne.key===Ce){if(Ce=z.type,Ce===Z){if(Ne.tag===7){r(R,Ne.sibling),B=a(Ne,z.props.children),B.return=R,R=B;break e}}else if(Ne.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===ce&&Jc(Ce)===Ne.type){r(R,Ne.sibling),B=a(Ne,z.props),B.ref=Qi(R,Ne,z),B.return=R,R=B;break e}r(R,Ne);break}else t(R,Ne);Ne=Ne.sibling}z.type===Z?(B=Wr(z.props.children,R.mode,le,z.key),B.return=R,R=B):(le=go(z.type,z.key,z.props,null,R.mode,le),le.ref=Qi(R,B,z),le.return=R,R=le)}return g(R);case H:e:{for(Ne=z.key;B!==null;){if(B.key===Ne)if(B.tag===4&&B.stateNode.containerInfo===z.containerInfo&&B.stateNode.implementation===z.implementation){r(R,B.sibling),B=a(B,z.children||[]),B.return=R,R=B;break e}else{r(R,B);break}else t(R,B);B=B.sibling}B=ya(z,R.mode,le),B.return=R,R=B}return g(R);case ce:return Ne=z._init,ut(R,B,Ne(z._payload),le)}if(bt(z))return ke(R,B,z,le);if(se(z))return Se(R,B,z,le);Ws(R,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,B!==null&&B.tag===6?(r(R,B.sibling),B=a(B,z),B.return=R,R=B):(r(R,B),B=xa(z,R.mode,le),B.return=R,R=B),g(R)):r(R,B)}return ut}var pi=eu(!0),tu=eu(!1),Vs=pr(null),Ys=null,mi=null,Dl=null;function Al(){Dl=mi=Ys=null}function Nl(e){var t=Vs.current;et(Vs),e._currentValue=t}function Tl(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function gi(e,t){Ys=e,Dl=mi=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Kt=!0),e.firstContext=null)}function fn(e){var t=e._currentValue;if(Dl!==e)if(e={context:e,memoizedValue:t,next:null},mi===null){if(Ys===null)throw Error(i(308));mi=e,Ys.dependencies={lanes:0,firstContext:e}}else mi=mi.next=e;return t}var Rr=null;function Bl(e){Rr===null?Rr=[e]:Rr.push(e)}function nu(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,Bl(t)):(r.next=a.next,a.next=r),t.interleaved=r,Qn(e,s)}function Qn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var xr=!1;function Il(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ru(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function yr(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Ge&2)!==0){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Qn(e,r)}return a=s.interleaved,a===null?(t.next=t,Bl(s)):(t.next=a.next,a.next=t),s.interleaved=t,Qn(e,r)}function Ks(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Vo(e,r)}}function iu(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var g={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};d===null?a=d=g:d=d.next=g,r=r.next}while(r!==null);d===null?a=d=t:d=d.next=t}else a=d=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:d,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Xs(e,t,r,s){var a=e.updateQueue;xr=!1;var d=a.firstBaseUpdate,g=a.lastBaseUpdate,k=a.shared.pending;if(k!==null){a.shared.pending=null;var D=k,G=D.next;D.next=null,g===null?d=G:g.next=G,g=D;var te=e.alternate;te!==null&&(te=te.updateQueue,k=te.lastBaseUpdate,k!==g&&(k===null?te.firstBaseUpdate=G:k.next=G,te.lastBaseUpdate=D))}if(d!==null){var ne=a.baseState;g=0,te=G=D=null,k=d;do{var J=k.lane,ge=k.eventTime;if((s&J)===J){te!==null&&(te=te.next={eventTime:ge,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var ke=e,Se=k;switch(J=t,ge=r,Se.tag){case 1:if(ke=Se.payload,typeof ke=="function"){ne=ke.call(ge,ne,J);break e}ne=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Se.payload,J=typeof ke=="function"?ke.call(ge,ne,J):ke,J==null)break e;ne=K({},ne,J);break e;case 2:xr=!0}}k.callback!==null&&k.lane!==0&&(e.flags|=64,J=a.effects,J===null?a.effects=[k]:J.push(k))}else ge={eventTime:ge,lane:J,tag:k.tag,payload:k.payload,callback:k.callback,next:null},te===null?(G=te=ge,D=ne):te=te.next=ge,g|=J;if(k=k.next,k===null){if(k=a.shared.pending,k===null)break;J=k,k=J.next,J.next=null,a.lastBaseUpdate=J,a.shared.pending=null}}while(!0);if(te===null&&(D=ne),a.baseState=D,a.firstBaseUpdate=G,a.lastBaseUpdate=te,t=a.shared.interleaved,t!==null){a=t;do g|=a.lane,a=a.next;while(a!==t)}else d===null&&(a.shared.lanes=0);zr|=g,e.lanes=g,e.memoizedState=ne}}function su(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(i(191,a));a.call(s)}}}var Zi={},jn=pr(Zi),qi=pr(Zi),Ji=pr(Zi);function Or(e){if(e===Zi)throw Error(i(174));return e}function jl(e,t){switch(qe(Ji,t),qe(qi,e),qe(jn,Zi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Gn(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Gn(t,e)}et(jn),qe(jn,t)}function xi(){et(jn),et(qi),et(Ji)}function ou(e){Or(Ji.current);var t=Or(jn.current),r=Gn(t,e.type);t!==r&&(qe(qi,e),qe(jn,r))}function Fl(e){qi.current===e&&(et(jn),et(qi))}var it=pr(0);function Qs(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ll=[];function Pl(){for(var e=0;e<Ll.length;e++)Ll[e]._workInProgressVersionPrimary=null;Ll.length=0}var Zs=A.ReactCurrentDispatcher,Ml=A.ReactCurrentBatchConfig,Ur=0,st=null,mt=null,wt=null,qs=!1,es=!1,ts=0,ap=0;function Pt(){throw Error(i(321))}function Rl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!wn(e[r],t[r]))return!1;return!0}function Ol(e,t,r,s,a,d){if(Ur=d,st=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zs.current=e===null||e.memoizedState===null?fp:hp,e=r(s,a),es){d=0;do{if(es=!1,ts=0,25<=d)throw Error(i(301));d+=1,wt=mt=null,t.updateQueue=null,Zs.current=pp,e=r(s,a)}while(es)}if(Zs.current=to,t=mt!==null&&mt.next!==null,Ur=0,wt=mt=st=null,qs=!1,t)throw Error(i(300));return e}function Ul(){var e=ts!==0;return ts=0,e}function Fn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?st.memoizedState=wt=e:wt=wt.next=e,wt}function hn(){if(mt===null){var e=st.alternate;e=e!==null?e.memoizedState:null}else e=mt.next;var t=wt===null?st.memoizedState:wt.next;if(t!==null)wt=t,mt=e;else{if(e===null)throw Error(i(310));mt=e,e={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},wt===null?st.memoizedState=wt=e:wt=wt.next=e}return wt}function ns(e,t){return typeof t=="function"?t(e):t}function zl(e){var t=hn(),r=t.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=e;var s=mt,a=s.baseQueue,d=r.pending;if(d!==null){if(a!==null){var g=a.next;a.next=d.next,d.next=g}s.baseQueue=a=d,r.pending=null}if(a!==null){d=a.next,s=s.baseState;var k=g=null,D=null,G=d;do{var te=G.lane;if((Ur&te)===te)D!==null&&(D=D.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),s=G.hasEagerState?G.eagerState:e(s,G.action);else{var ne={lane:te,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};D===null?(k=D=ne,g=s):D=D.next=ne,st.lanes|=te,zr|=te}G=G.next}while(G!==null&&G!==d);D===null?g=s:D.next=k,wn(s,t.memoizedState)||(Kt=!0),t.memoizedState=s,t.baseState=g,t.baseQueue=D,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do d=a.lane,st.lanes|=d,zr|=d,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Hl(e){var t=hn(),r=t.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,d=t.memoizedState;if(a!==null){r.pending=null;var g=a=a.next;do d=e(d,g.action),g=g.next;while(g!==a);wn(d,t.memoizedState)||(Kt=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),r.lastRenderedState=d}return[d,s]}function lu(){}function au(e,t){var r=st,s=hn(),a=t(),d=!wn(s.memoizedState,a);if(d&&(s.memoizedState=a,Kt=!0),s=s.queue,Gl(du.bind(null,r,s,e),[e]),s.getSnapshot!==t||d||wt!==null&&wt.memoizedState.tag&1){if(r.flags|=2048,rs(9,uu.bind(null,r,s,a,t),void 0,null),kt===null)throw Error(i(349));(Ur&30)!==0||cu(r,t,a)}return a}function cu(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=st.updateQueue,t===null?(t={lastEffect:null,stores:null},st.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function uu(e,t,r,s){t.value=r,t.getSnapshot=s,fu(t)&&hu(e)}function du(e,t,r){return r(function(){fu(t)&&hu(e)})}function fu(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!wn(e,r)}catch{return!0}}function hu(e){var t=Qn(e,1);t!==null&&Cn(t,e,1,-1)}function pu(e){var t=Fn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ns,lastRenderedState:e},t.queue=e,e=e.dispatch=dp.bind(null,st,e),[t.memoizedState,e]}function rs(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=st.updateQueue,t===null?(t={lastEffect:null,stores:null},st.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function mu(){return hn().memoizedState}function Js(e,t,r,s){var a=Fn();st.flags|=e,a.memoizedState=rs(1|t,r,void 0,s===void 0?null:s)}function eo(e,t,r,s){var a=hn();s=s===void 0?null:s;var d=void 0;if(mt!==null){var g=mt.memoizedState;if(d=g.destroy,s!==null&&Rl(s,g.deps)){a.memoizedState=rs(t,r,d,s);return}}st.flags|=e,a.memoizedState=rs(1|t,r,d,s)}function gu(e,t){return Js(8390656,8,e,t)}function Gl(e,t){return eo(2048,8,e,t)}function xu(e,t){return eo(4,2,e,t)}function yu(e,t){return eo(4,4,e,t)}function vu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wu(e,t,r){return r=r!=null?r.concat([e]):null,eo(4,4,vu.bind(null,t,e),r)}function $l(){}function ku(e,t){var r=hn();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Rl(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Su(e,t){var r=hn();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Rl(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function bu(e,t,r){return(Ur&21)===0?(e.baseState&&(e.baseState=!1,Kt=!0),e.memoizedState=r):(wn(r,t)||(r=Ja(),st.lanes|=r,zr|=r,e.baseState=!0),t)}function cp(e,t){var r=Ye;Ye=r!==0&&4>r?r:4,e(!0);var s=Ml.transition;Ml.transition={};try{e(!1),t()}finally{Ye=r,Ml.transition=s}}function _u(){return hn().memoizedState}function up(e,t,r){var s=Sr(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Cu(e))Eu(t,r);else if(r=nu(e,t,r,s),r!==null){var a=Ht();Cn(r,e,s,a),Du(r,t,s)}}function dp(e,t,r){var s=Sr(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Cu(e))Eu(t,a);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var g=t.lastRenderedState,k=d(g,r);if(a.hasEagerState=!0,a.eagerState=k,wn(k,g)){var D=t.interleaved;D===null?(a.next=a,Bl(t)):(a.next=D.next,D.next=a),t.interleaved=a;return}}catch{}finally{}r=nu(e,t,a,s),r!==null&&(a=Ht(),Cn(r,e,s,a),Du(r,t,s))}}function Cu(e){var t=e.alternate;return e===st||t!==null&&t===st}function Eu(e,t){es=qs=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Du(e,t,r){if((r&4194240)!==0){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,Vo(e,r)}}var to={readContext:fn,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useInsertionEffect:Pt,useLayoutEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useMutableSource:Pt,useSyncExternalStore:Pt,useId:Pt,unstable_isNewReconciler:!1},fp={readContext:fn,useCallback:function(e,t){return Fn().memoizedState=[e,t===void 0?null:t],e},useContext:fn,useEffect:gu,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Js(4194308,4,vu.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Js(4194308,4,e,t)},useInsertionEffect:function(e,t){return Js(4,2,e,t)},useMemo:function(e,t){var r=Fn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Fn();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=up.bind(null,st,e),[s.memoizedState,e]},useRef:function(e){var t=Fn();return e={current:e},t.memoizedState=e},useState:pu,useDebugValue:$l,useDeferredValue:function(e){return Fn().memoizedState=e},useTransition:function(){var e=pu(!1),t=e[0];return e=cp.bind(null,e[1]),Fn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=st,a=Fn();if(nt){if(r===void 0)throw Error(i(407));r=r()}else{if(r=t(),kt===null)throw Error(i(349));(Ur&30)!==0||cu(s,t,r)}a.memoizedState=r;var d={value:r,getSnapshot:t};return a.queue=d,gu(du.bind(null,s,d,e),[e]),s.flags|=2048,rs(9,uu.bind(null,s,d,r,t),void 0,null),r},useId:function(){var e=Fn(),t=kt.identifierPrefix;if(nt){var r=Xn,s=Kn;r=(s&~(1<<32-vn(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=ts++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ap++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},hp={readContext:fn,useCallback:ku,useContext:fn,useEffect:Gl,useImperativeHandle:wu,useInsertionEffect:xu,useLayoutEffect:yu,useMemo:Su,useReducer:zl,useRef:mu,useState:function(){return zl(ns)},useDebugValue:$l,useDeferredValue:function(e){var t=hn();return bu(t,mt.memoizedState,e)},useTransition:function(){var e=zl(ns)[0],t=hn().memoizedState;return[e,t]},useMutableSource:lu,useSyncExternalStore:au,useId:_u,unstable_isNewReconciler:!1},pp={readContext:fn,useCallback:ku,useContext:fn,useEffect:Gl,useImperativeHandle:wu,useInsertionEffect:xu,useLayoutEffect:yu,useMemo:Su,useReducer:Hl,useRef:mu,useState:function(){return Hl(ns)},useDebugValue:$l,useDeferredValue:function(e){var t=hn();return mt===null?t.memoizedState=e:bu(t,mt.memoizedState,e)},useTransition:function(){var e=Hl(ns)[0],t=hn().memoizedState;return[e,t]},useMutableSource:lu,useSyncExternalStore:au,useId:_u,unstable_isNewReconciler:!1};function Sn(e,t){if(e&&e.defaultProps){t=K({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Wl(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:K({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var no={isMounted:function(e){return(e=e._reactInternals)?Et(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Ht(),a=Sr(e),d=Zn(s,a);d.payload=t,r!=null&&(d.callback=r),t=yr(e,d,a),t!==null&&(Cn(t,e,a,s),Ks(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Ht(),a=Sr(e),d=Zn(s,a);d.tag=1,d.payload=t,r!=null&&(d.callback=r),t=yr(e,d,a),t!==null&&(Cn(t,e,a,s),Ks(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ht(),s=Sr(e),a=Zn(r,s);a.tag=2,t!=null&&(a.callback=t),t=yr(e,a,s),t!==null&&(Cn(t,e,s,r),Ks(t,e,s))}};function Au(e,t,r,s,a,d,g){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,d,g):t.prototype&&t.prototype.isPureReactComponent?!Gi(r,s)||!Gi(a,d):!0}function Nu(e,t,r){var s=!1,a=mr,d=t.contextType;return typeof d=="object"&&d!==null?d=fn(d):(a=Yt(t)?Lr:Lt.current,s=t.contextTypes,d=(s=s!=null)?ui(e,a):mr),t=new t(r,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=no,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=d),t}function Tu(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&no.enqueueReplaceState(t,t.state,null)}function Vl(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Il(e);var d=t.contextType;typeof d=="object"&&d!==null?a.context=fn(d):(d=Yt(t)?Lr:Lt.current,a.context=ui(e,d)),a.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(Wl(e,t,d,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&no.enqueueReplaceState(a,a.state,null),Xs(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function yi(e,t){try{var r="",s=t;do r+=oe(s),s=s.return;while(s);var a=r}catch(d){a=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:a,digest:null}}function Yl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Kl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var mp=typeof WeakMap=="function"?WeakMap:Map;function Bu(e,t,r){r=Zn(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){co||(co=!0,ca=s),Kl(e,t)},r}function Iu(e,t,r){r=Zn(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){Kl(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(r.callback=function(){Kl(e,t),typeof s!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var g=t.stack;this.componentDidCatch(t.value,{componentStack:g!==null?g:""})}),r}function ju(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new mp;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=Np.bind(null,e,t,r),t.then(e,e))}function Fu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Lu(e,t,r,s,a){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Zn(-1,1),t.tag=2,yr(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var gp=A.ReactCurrentOwner,Kt=!1;function zt(e,t,r,s){t.child=e===null?tu(t,null,r,s):pi(t,e.child,r,s)}function Pu(e,t,r,s,a){r=r.render;var d=t.ref;return gi(t,a),s=Ol(e,t,r,s,d,a),r=Ul(),e!==null&&!Kt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,qn(e,t,a)):(nt&&r&&Sl(t),t.flags|=1,zt(e,t,s,a),t.child)}function Mu(e,t,r,s,a){if(e===null){var d=r.type;return typeof d=="function"&&!ga(d)&&d.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=d,Ru(e,t,d,s,a)):(e=go(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,(e.lanes&a)===0){var g=d.memoizedProps;if(r=r.compare,r=r!==null?r:Gi,r(g,s)&&e.ref===t.ref)return qn(e,t,a)}return t.flags|=1,e=_r(d,s),e.ref=t.ref,e.return=t,t.child=e}function Ru(e,t,r,s,a){if(e!==null){var d=e.memoizedProps;if(Gi(d,s)&&e.ref===t.ref)if(Kt=!1,t.pendingProps=s=d,(e.lanes&a)!==0)(e.flags&131072)!==0&&(Kt=!0);else return t.lanes=e.lanes,qn(e,t,a)}return Xl(e,t,r,s,a)}function Ou(e,t,r){var s=t.pendingProps,a=s.children,d=e!==null?e.memoizedState:null;if(s.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(wi,on),on|=r;else{if((r&1073741824)===0)return e=d!==null?d.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,qe(wi,on),on|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=d!==null?d.baseLanes:r,qe(wi,on),on|=s}else d!==null?(s=d.baseLanes|r,t.memoizedState=null):s=r,qe(wi,on),on|=s;return zt(e,t,a,r),t.child}function Uu(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Xl(e,t,r,s,a){var d=Yt(r)?Lr:Lt.current;return d=ui(t,d),gi(t,a),r=Ol(e,t,r,s,d,a),s=Ul(),e!==null&&!Kt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,qn(e,t,a)):(nt&&s&&Sl(t),t.flags|=1,zt(e,t,r,a),t.child)}function zu(e,t,r,s,a){if(Yt(r)){var d=!0;Us(t)}else d=!1;if(gi(t,a),t.stateNode===null)io(e,t),Nu(t,r,s),Vl(t,r,s,a),s=!0;else if(e===null){var g=t.stateNode,k=t.memoizedProps;g.props=k;var D=g.context,G=r.contextType;typeof G=="object"&&G!==null?G=fn(G):(G=Yt(r)?Lr:Lt.current,G=ui(t,G));var te=r.getDerivedStateFromProps,ne=typeof te=="function"||typeof g.getSnapshotBeforeUpdate=="function";ne||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(k!==s||D!==G)&&Tu(t,g,s,G),xr=!1;var J=t.memoizedState;g.state=J,Xs(t,s,g,a),D=t.memoizedState,k!==s||J!==D||Vt.current||xr?(typeof te=="function"&&(Wl(t,r,te,s),D=t.memoizedState),(k=xr||Au(t,r,k,s,J,D,G))?(ne||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=D),g.props=s,g.state=D,g.context=G,s=k):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{g=t.stateNode,ru(e,t),k=t.memoizedProps,G=t.type===t.elementType?k:Sn(t.type,k),g.props=G,ne=t.pendingProps,J=g.context,D=r.contextType,typeof D=="object"&&D!==null?D=fn(D):(D=Yt(r)?Lr:Lt.current,D=ui(t,D));var ge=r.getDerivedStateFromProps;(te=typeof ge=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(k!==ne||J!==D)&&Tu(t,g,s,D),xr=!1,J=t.memoizedState,g.state=J,Xs(t,s,g,a);var ke=t.memoizedState;k!==ne||J!==ke||Vt.current||xr?(typeof ge=="function"&&(Wl(t,r,ge,s),ke=t.memoizedState),(G=xr||Au(t,r,G,s,J,ke,D)||!1)?(te||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(s,ke,D),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(s,ke,D)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||k===e.memoizedProps&&J===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||k===e.memoizedProps&&J===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=ke),g.props=s,g.state=ke,g.context=D,s=G):(typeof g.componentDidUpdate!="function"||k===e.memoizedProps&&J===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||k===e.memoizedProps&&J===e.memoizedState||(t.flags|=1024),s=!1)}return Ql(e,t,r,s,d,a)}function Ql(e,t,r,s,a,d){Uu(e,t);var g=(t.flags&128)!==0;if(!s&&!g)return a&&Vc(t,r,!1),qn(e,t,d);s=t.stateNode,gp.current=t;var k=g&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&g?(t.child=pi(t,e.child,null,d),t.child=pi(t,null,k,d)):zt(e,t,k,d),t.memoizedState=s.state,a&&Vc(t,r,!0),t.child}function Hu(e){var t=e.stateNode;t.pendingContext?$c(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$c(e,t.context,!1),jl(e,t.containerInfo)}function Gu(e,t,r,s,a){return hi(),El(a),t.flags|=256,zt(e,t,r,s),t.child}var Zl={dehydrated:null,treeContext:null,retryLane:0};function ql(e){return{baseLanes:e,cachePool:null,transitions:null}}function $u(e,t,r){var s=t.pendingProps,a=it.current,d=!1,g=(t.flags&128)!==0,k;if((k=g)||(k=e!==null&&e.memoizedState===null?!1:(a&2)!==0),k?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),qe(it,a&1),e===null)return Cl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(g=s.children,e=s.fallback,d?(s=t.mode,d=t.child,g={mode:"hidden",children:g},(s&1)===0&&d!==null?(d.childLanes=0,d.pendingProps=g):d=xo(g,s,0,null),e=Wr(e,s,r,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=ql(r),t.memoizedState=Zl,e):Jl(t,g));if(a=e.memoizedState,a!==null&&(k=a.dehydrated,k!==null))return xp(e,t,g,s,k,a,r);if(d){d=s.fallback,g=t.mode,a=e.child,k=a.sibling;var D={mode:"hidden",children:s.children};return(g&1)===0&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=D,t.deletions=null):(s=_r(a,D),s.subtreeFlags=a.subtreeFlags&14680064),k!==null?d=_r(k,d):(d=Wr(d,g,r,null),d.flags|=2),d.return=t,s.return=t,s.sibling=d,t.child=s,s=d,d=t.child,g=e.child.memoizedState,g=g===null?ql(r):{baseLanes:g.baseLanes|r,cachePool:null,transitions:g.transitions},d.memoizedState=g,d.childLanes=e.childLanes&~r,t.memoizedState=Zl,s}return d=e.child,e=d.sibling,s=_r(d,{mode:"visible",children:s.children}),(t.mode&1)===0&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Jl(e,t){return t=xo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ro(e,t,r,s){return s!==null&&El(s),pi(t,e.child,null,r),e=Jl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xp(e,t,r,s,a,d,g){if(r)return t.flags&256?(t.flags&=-257,s=Yl(Error(i(422))),ro(e,t,g,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=s.fallback,a=t.mode,s=xo({mode:"visible",children:s.children},a,0,null),d=Wr(d,a,g,null),d.flags|=2,s.return=t,d.return=t,s.sibling=d,t.child=s,(t.mode&1)!==0&&pi(t,e.child,null,g),t.child.memoizedState=ql(g),t.memoizedState=Zl,d);if((t.mode&1)===0)return ro(e,t,g,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var k=s.dgst;return s=k,d=Error(i(419)),s=Yl(d,s,void 0),ro(e,t,g,s)}if(k=(g&e.childLanes)!==0,Kt||k){if(s=kt,s!==null){switch(g&-g){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=(a&(s.suspendedLanes|g))!==0?0:a,a!==0&&a!==d.retryLane&&(d.retryLane=a,Qn(e,a),Cn(s,e,a,-1))}return ma(),s=Yl(Error(i(421))),ro(e,t,g,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Tp.bind(null,e),a._reactRetry=t,null):(e=d.treeContext,sn=hr(a.nextSibling),rn=t,nt=!0,kn=null,e!==null&&(un[dn++]=Kn,un[dn++]=Xn,un[dn++]=Pr,Kn=e.id,Xn=e.overflow,Pr=t),t=Jl(t,s.children),t.flags|=4096,t)}function Wu(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Tl(e.return,t,r)}function ea(e,t,r,s,a){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=s,d.tail=r,d.tailMode=a)}function Vu(e,t,r){var s=t.pendingProps,a=s.revealOrder,d=s.tail;if(zt(e,t,s.children,r),s=it.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Wu(e,r,t);else if(e.tag===19)Wu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(qe(it,s),(t.mode&1)===0)t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Qs(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),ea(t,!1,a,r,d);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Qs(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}ea(t,!0,r,null,d);break;case"together":ea(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function io(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),zr|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,r=_r(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=_r(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function yp(e,t,r){switch(t.tag){case 3:Hu(t),hi();break;case 5:ou(t);break;case 1:Yt(t.type)&&Us(t);break;case 4:jl(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;qe(Vs,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(qe(it,it.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?$u(e,t,r):(qe(it,it.current&1),e=qn(e,t,r),e!==null?e.sibling:null);qe(it,it.current&1);break;case 19:if(s=(r&t.childLanes)!==0,(e.flags&128)!==0){if(s)return Vu(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),qe(it,it.current),s)break;return null;case 22:case 23:return t.lanes=0,Ou(e,t,r)}return qn(e,t,r)}var Yu,ta,Ku,Xu;Yu=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},ta=function(){},Ku=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,Or(jn.current);var d=null;switch(r){case"input":a=yt(e,a),s=yt(e,s),d=[];break;case"select":a=K({},a,{value:void 0}),s=K({},s,{value:void 0}),d=[];break;case"textarea":a=Jt(e,a),s=Jt(e,s),d=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Ms)}Ke(r,s);var g;r=null;for(G in a)if(!s.hasOwnProperty(G)&&a.hasOwnProperty(G)&&a[G]!=null)if(G==="style"){var k=a[G];for(g in k)k.hasOwnProperty(g)&&(r||(r={}),r[g]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(c.hasOwnProperty(G)?d||(d=[]):(d=d||[]).push(G,null));for(G in s){var D=s[G];if(k=a!=null?a[G]:void 0,s.hasOwnProperty(G)&&D!==k&&(D!=null||k!=null))if(G==="style")if(k){for(g in k)!k.hasOwnProperty(g)||D&&D.hasOwnProperty(g)||(r||(r={}),r[g]="");for(g in D)D.hasOwnProperty(g)&&k[g]!==D[g]&&(r||(r={}),r[g]=D[g])}else r||(d||(d=[]),d.push(G,r)),r=D;else G==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,k=k?k.__html:void 0,D!=null&&k!==D&&(d=d||[]).push(G,D)):G==="children"?typeof D!="string"&&typeof D!="number"||(d=d||[]).push(G,""+D):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(c.hasOwnProperty(G)?(D!=null&&G==="onScroll"&&Je("scroll",e),d||k===D||(d=[])):(d=d||[]).push(G,D))}r&&(d=d||[]).push("style",r);var G=d;(t.updateQueue=G)&&(t.flags|=4)}},Xu=function(e,t,r,s){r!==s&&(t.flags|=4)};function is(e,t){if(!nt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Mt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function vp(e,t,r){var s=t.pendingProps;switch(bl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(t),null;case 1:return Yt(t.type)&&Os(),Mt(t),null;case 3:return s=t.stateNode,xi(),et(Vt),et(Lt),Pl(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&($s(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,kn!==null&&(fa(kn),kn=null))),ta(e,t),Mt(t),null;case 5:Fl(t);var a=Or(Ji.current);if(r=t.type,e!==null&&t.stateNode!=null)Ku(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(i(166));return Mt(t),null}if(e=Or(jn.current),$s(t)){s=t.stateNode,r=t.type;var d=t.memoizedProps;switch(s[In]=t,s[Ki]=d,e=(t.mode&1)!==0,r){case"dialog":Je("cancel",s),Je("close",s);break;case"iframe":case"object":case"embed":Je("load",s);break;case"video":case"audio":for(a=0;a<Wi.length;a++)Je(Wi[a],s);break;case"source":Je("error",s);break;case"img":case"image":case"link":Je("error",s),Je("load",s);break;case"details":Je("toggle",s);break;case"input":j(s,d),Je("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!d.multiple},Je("invalid",s);break;case"textarea":zn(s,d),Je("invalid",s)}Ke(r,d),a=null;for(var g in d)if(d.hasOwnProperty(g)){var k=d[g];g==="children"?typeof k=="string"?s.textContent!==k&&(d.suppressHydrationWarning!==!0&&Ps(s.textContent,k,e),a=["children",k]):typeof k=="number"&&s.textContent!==""+k&&(d.suppressHydrationWarning!==!0&&Ps(s.textContent,k,e),a=["children",""+k]):c.hasOwnProperty(g)&&k!=null&&g==="onScroll"&&Je("scroll",s)}switch(r){case"input":xt(s),Nt(s,d,!0);break;case"textarea":xt(s),Nr(s);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(s.onclick=Ms)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{g=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Hn(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=g.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=g.createElement(r,{is:s.is}):(e=g.createElement(r),r==="select"&&(g=e,s.multiple?g.multiple=!0:s.size&&(g.size=s.size))):e=g.createElementNS(e,r),e[In]=t,e[Ki]=s,Yu(e,t,!1,!1),t.stateNode=e;e:{switch(g=ze(r,s),r){case"dialog":Je("cancel",e),Je("close",e),a=s;break;case"iframe":case"object":case"embed":Je("load",e),a=s;break;case"video":case"audio":for(a=0;a<Wi.length;a++)Je(Wi[a],e);a=s;break;case"source":Je("error",e),a=s;break;case"img":case"image":case"link":Je("error",e),Je("load",e),a=s;break;case"details":Je("toggle",e),a=s;break;case"input":j(e,s),a=yt(e,s),Je("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=K({},s,{value:void 0}),Je("invalid",e);break;case"textarea":zn(e,s),a=Jt(e,s),Je("invalid",e);break;default:a=s}Ke(r,a),k=a;for(d in k)if(k.hasOwnProperty(d)){var D=k[d];d==="style"?Be(e,D):d==="dangerouslySetInnerHTML"?(D=D?D.__html:void 0,D!=null&&$n(e,D)):d==="children"?typeof D=="string"?(r!=="textarea"||D!=="")&&Wn(e,D):typeof D=="number"&&Wn(e,""+D):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(c.hasOwnProperty(d)?D!=null&&d==="onScroll"&&Je("scroll",e):D!=null&&L(e,d,D,g))}switch(r){case"input":xt(e),Nt(e,s,!1);break;case"textarea":xt(e),Nr(e);break;case"option":s.value!=null&&e.setAttribute("value",""+De(s.value));break;case"select":e.multiple=!!s.multiple,d=s.value,d!=null?ot(e,!!s.multiple,d,!1):s.defaultValue!=null&&ot(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ms)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Mt(t),null;case 6:if(e&&t.stateNode!=null)Xu(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(i(166));if(r=Or(Ji.current),Or(jn.current),$s(t)){if(s=t.stateNode,r=t.memoizedProps,s[In]=t,(d=s.nodeValue!==r)&&(e=rn,e!==null))switch(e.tag){case 3:Ps(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ps(s.nodeValue,r,(e.mode&1)!==0)}d&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[In]=t,t.stateNode=s}return Mt(t),null;case 13:if(et(it),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(nt&&sn!==null&&(t.mode&1)!==0&&(t.flags&128)===0)qc(),hi(),t.flags|=98560,d=!1;else if(d=$s(t),s!==null&&s.dehydrated!==null){if(e===null){if(!d)throw Error(i(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[In]=t}else hi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Mt(t),d=!1}else kn!==null&&(fa(kn),kn=null),d=!0;if(!d)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(it.current&1)!==0?gt===0&&(gt=3):ma())),t.updateQueue!==null&&(t.flags|=4),Mt(t),null);case 4:return xi(),ta(e,t),e===null&&Vi(t.stateNode.containerInfo),Mt(t),null;case 10:return Nl(t.type._context),Mt(t),null;case 17:return Yt(t.type)&&Os(),Mt(t),null;case 19:if(et(it),d=t.memoizedState,d===null)return Mt(t),null;if(s=(t.flags&128)!==0,g=d.rendering,g===null)if(s)is(d,!1);else{if(gt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=Qs(e),g!==null){for(t.flags|=128,is(d,!1),s=g.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)d=r,e=s,d.flags&=14680066,g=d.alternate,g===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=g.childLanes,d.lanes=g.lanes,d.child=g.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=g.memoizedProps,d.memoizedState=g.memoizedState,d.updateQueue=g.updateQueue,d.type=g.type,e=g.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return qe(it,it.current&1|2),t.child}e=e.sibling}d.tail!==null&&tt()>ki&&(t.flags|=128,s=!0,is(d,!1),t.lanes=4194304)}else{if(!s)if(e=Qs(g),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),is(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!nt)return Mt(t),null}else 2*tt()-d.renderingStartTime>ki&&r!==1073741824&&(t.flags|=128,s=!0,is(d,!1),t.lanes=4194304);d.isBackwards?(g.sibling=t.child,t.child=g):(r=d.last,r!==null?r.sibling=g:t.child=g,d.last=g)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=tt(),t.sibling=null,r=it.current,qe(it,s?r&1|2:r&1),t):(Mt(t),null);case 22:case 23:return pa(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&(t.mode&1)!==0?(on&1073741824)!==0&&(Mt(t),t.subtreeFlags&6&&(t.flags|=8192)):Mt(t),null;case 24:return null;case 25:return null}throw Error(i(156,t.tag))}function wp(e,t){switch(bl(t),t.tag){case 1:return Yt(t.type)&&Os(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xi(),et(Vt),et(Lt),Pl(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Fl(t),null;case 13:if(et(it),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));hi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return et(it),null;case 4:return xi(),null;case 10:return Nl(t.type._context),null;case 22:case 23:return pa(),null;case 24:return null;default:return null}}var so=!1,Rt=!1,kp=typeof WeakSet=="function"?WeakSet:Set,we=null;function vi(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){lt(e,t,s)}else r.current=null}function na(e,t,r){try{r()}catch(s){lt(e,t,s)}}var Qu=!1;function Sp(e,t){if(pl=Cs,e=Ac(),ol(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,d=s.focusNode;s=s.focusOffset;try{r.nodeType,d.nodeType}catch{r=null;break e}var g=0,k=-1,D=-1,G=0,te=0,ne=e,J=null;t:for(;;){for(var ge;ne!==r||a!==0&&ne.nodeType!==3||(k=g+a),ne!==d||s!==0&&ne.nodeType!==3||(D=g+s),ne.nodeType===3&&(g+=ne.nodeValue.length),(ge=ne.firstChild)!==null;)J=ne,ne=ge;for(;;){if(ne===e)break t;if(J===r&&++G===a&&(k=g),J===d&&++te===s&&(D=g),(ge=ne.nextSibling)!==null)break;ne=J,J=ne.parentNode}ne=ge}r=k===-1||D===-1?null:{start:k,end:D}}else r=null}r=r||{start:0,end:0}}else r=null;for(ml={focusedElem:e,selectionRange:r},Cs=!1,we=t;we!==null;)if(t=we,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,we=e;else for(;we!==null;){t=we;try{var ke=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(ke!==null){var Se=ke.memoizedProps,ut=ke.memoizedState,R=t.stateNode,B=R.getSnapshotBeforeUpdate(t.elementType===t.type?Se:Sn(t.type,Se),ut);R.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var z=t.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(le){lt(t,t.return,le)}if(e=t.sibling,e!==null){e.return=t.return,we=e;break}we=t.return}return ke=Qu,Qu=!1,ke}function ss(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var d=a.destroy;a.destroy=void 0,d!==void 0&&na(t,r,d)}a=a.next}while(a!==s)}}function oo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function ra(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Zu(e){var t=e.alternate;t!==null&&(e.alternate=null,Zu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[In],delete t[Ki],delete t[vl],delete t[ip],delete t[sp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qu(e){return e.tag===5||e.tag===3||e.tag===4}function Ju(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ia(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ms));else if(s!==4&&(e=e.child,e!==null))for(ia(e,t,r),e=e.sibling;e!==null;)ia(e,t,r),e=e.sibling}function sa(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(sa(e,t,r),e=e.sibling;e!==null;)sa(e,t,r),e=e.sibling}var Dt=null,bn=!1;function vr(e,t,r){for(r=r.child;r!==null;)ed(e,t,r),r=r.sibling}function ed(e,t,r){if(Bn&&typeof Bn.onCommitFiberUnmount=="function")try{Bn.onCommitFiberUnmount(vs,r)}catch{}switch(r.tag){case 5:Rt||vi(r,t);case 6:var s=Dt,a=bn;Dt=null,vr(e,t,r),Dt=s,bn=a,Dt!==null&&(bn?(e=Dt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Dt.removeChild(r.stateNode));break;case 18:Dt!==null&&(bn?(e=Dt,r=r.stateNode,e.nodeType===8?yl(e.parentNode,r):e.nodeType===1&&yl(e,r),Mi(e)):yl(Dt,r.stateNode));break;case 4:s=Dt,a=bn,Dt=r.stateNode.containerInfo,bn=!0,vr(e,t,r),Dt=s,bn=a;break;case 0:case 11:case 14:case 15:if(!Rt&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var d=a,g=d.destroy;d=d.tag,g!==void 0&&((d&2)!==0||(d&4)!==0)&&na(r,t,g),a=a.next}while(a!==s)}vr(e,t,r);break;case 1:if(!Rt&&(vi(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(k){lt(r,t,k)}vr(e,t,r);break;case 21:vr(e,t,r);break;case 22:r.mode&1?(Rt=(s=Rt)||r.memoizedState!==null,vr(e,t,r),Rt=s):vr(e,t,r);break;default:vr(e,t,r)}}function td(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new kp),t.forEach(function(s){var a=Bp.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function _n(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var d=e,g=t,k=g;e:for(;k!==null;){switch(k.tag){case 5:Dt=k.stateNode,bn=!1;break e;case 3:Dt=k.stateNode.containerInfo,bn=!0;break e;case 4:Dt=k.stateNode.containerInfo,bn=!0;break e}k=k.return}if(Dt===null)throw Error(i(160));ed(d,g,a),Dt=null,bn=!1;var D=a.alternate;D!==null&&(D.return=null),a.return=null}catch(G){lt(a,t,G)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)nd(t,e),t=t.sibling}function nd(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_n(t,e),Ln(e),s&4){try{ss(3,e,e.return),oo(3,e)}catch(Se){lt(e,e.return,Se)}try{ss(5,e,e.return)}catch(Se){lt(e,e.return,Se)}}break;case 1:_n(t,e),Ln(e),s&512&&r!==null&&vi(r,r.return);break;case 5:if(_n(t,e),Ln(e),s&512&&r!==null&&vi(r,r.return),e.flags&32){var a=e.stateNode;try{Wn(a,"")}catch(Se){lt(e,e.return,Se)}}if(s&4&&(a=e.stateNode,a!=null)){var d=e.memoizedProps,g=r!==null?r.memoizedProps:d,k=e.type,D=e.updateQueue;if(e.updateQueue=null,D!==null)try{k==="input"&&d.type==="radio"&&d.name!=null&&F(a,d),ze(k,g);var G=ze(k,d);for(g=0;g<D.length;g+=2){var te=D[g],ne=D[g+1];te==="style"?Be(a,ne):te==="dangerouslySetInnerHTML"?$n(a,ne):te==="children"?Wn(a,ne):L(a,te,ne,G)}switch(k){case"input":vt(a,d);break;case"textarea":Ar(a,d);break;case"select":var J=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!d.multiple;var ge=d.value;ge!=null?ot(a,!!d.multiple,ge,!1):J!==!!d.multiple&&(d.defaultValue!=null?ot(a,!!d.multiple,d.defaultValue,!0):ot(a,!!d.multiple,d.multiple?[]:"",!1))}a[Ki]=d}catch(Se){lt(e,e.return,Se)}}break;case 6:if(_n(t,e),Ln(e),s&4){if(e.stateNode===null)throw Error(i(162));a=e.stateNode,d=e.memoizedProps;try{a.nodeValue=d}catch(Se){lt(e,e.return,Se)}}break;case 3:if(_n(t,e),Ln(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Mi(t.containerInfo)}catch(Se){lt(e,e.return,Se)}break;case 4:_n(t,e),Ln(e);break;case 13:_n(t,e),Ln(e),a=e.child,a.flags&8192&&(d=a.memoizedState!==null,a.stateNode.isHidden=d,!d||a.alternate!==null&&a.alternate.memoizedState!==null||(aa=tt())),s&4&&td(e);break;case 22:if(te=r!==null&&r.memoizedState!==null,e.mode&1?(Rt=(G=Rt)||te,_n(t,e),Rt=G):_n(t,e),Ln(e),s&8192){if(G=e.memoizedState!==null,(e.stateNode.isHidden=G)&&!te&&(e.mode&1)!==0)for(we=e,te=e.child;te!==null;){for(ne=we=te;we!==null;){switch(J=we,ge=J.child,J.tag){case 0:case 11:case 14:case 15:ss(4,J,J.return);break;case 1:vi(J,J.return);var ke=J.stateNode;if(typeof ke.componentWillUnmount=="function"){s=J,r=J.return;try{t=s,ke.props=t.memoizedProps,ke.state=t.memoizedState,ke.componentWillUnmount()}catch(Se){lt(s,r,Se)}}break;case 5:vi(J,J.return);break;case 22:if(J.memoizedState!==null){sd(ne);continue}}ge!==null?(ge.return=J,we=ge):sd(ne)}te=te.sibling}e:for(te=null,ne=e;;){if(ne.tag===5){if(te===null){te=ne;try{a=ne.stateNode,G?(d=a.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(k=ne.stateNode,D=ne.memoizedProps.style,g=D!=null&&D.hasOwnProperty("display")?D.display:null,k.style.display=Ee("display",g))}catch(Se){lt(e,e.return,Se)}}}else if(ne.tag===6){if(te===null)try{ne.stateNode.nodeValue=G?"":ne.memoizedProps}catch(Se){lt(e,e.return,Se)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===e)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===e)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===e)break e;te===ne&&(te=null),ne=ne.return}te===ne&&(te=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:_n(t,e),Ln(e),s&4&&td(e);break;case 21:break;default:_n(t,e),Ln(e)}}function Ln(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(qu(r)){var s=r;break e}r=r.return}throw Error(i(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Wn(a,""),s.flags&=-33);var d=Ju(e);sa(e,d,a);break;case 3:case 4:var g=s.stateNode.containerInfo,k=Ju(e);ia(e,k,g);break;default:throw Error(i(161))}}catch(D){lt(e,e.return,D)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bp(e,t,r){we=e,rd(e)}function rd(e,t,r){for(var s=(e.mode&1)!==0;we!==null;){var a=we,d=a.child;if(a.tag===22&&s){var g=a.memoizedState!==null||so;if(!g){var k=a.alternate,D=k!==null&&k.memoizedState!==null||Rt;k=so;var G=Rt;if(so=g,(Rt=D)&&!G)for(we=a;we!==null;)g=we,D=g.child,g.tag===22&&g.memoizedState!==null?od(a):D!==null?(D.return=g,we=D):od(a);for(;d!==null;)we=d,rd(d),d=d.sibling;we=a,so=k,Rt=G}id(e)}else(a.subtreeFlags&8772)!==0&&d!==null?(d.return=a,we=d):id(e)}}function id(e){for(;we!==null;){var t=we;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Rt||oo(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Rt)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Sn(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&su(t,d,s);break;case 3:var g=t.updateQueue;if(g!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}su(t,g,r)}break;case 5:var k=t.stateNode;if(r===null&&t.flags&4){r=k;var D=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":D.autoFocus&&r.focus();break;case"img":D.src&&(r.src=D.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var G=t.alternate;if(G!==null){var te=G.memoizedState;if(te!==null){var ne=te.dehydrated;ne!==null&&Mi(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Rt||t.flags&512&&ra(t)}catch(J){lt(t,t.return,J)}}if(t===e){we=null;break}if(r=t.sibling,r!==null){r.return=t.return,we=r;break}we=t.return}}function sd(e){for(;we!==null;){var t=we;if(t===e){we=null;break}var r=t.sibling;if(r!==null){r.return=t.return,we=r;break}we=t.return}}function od(e){for(;we!==null;){var t=we;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{oo(4,t)}catch(D){lt(t,r,D)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(D){lt(t,a,D)}}var d=t.return;try{ra(t)}catch(D){lt(t,d,D)}break;case 5:var g=t.return;try{ra(t)}catch(D){lt(t,g,D)}}}catch(D){lt(t,t.return,D)}if(t===e){we=null;break}var k=t.sibling;if(k!==null){k.return=t.return,we=k;break}we=t.return}}var _p=Math.ceil,lo=A.ReactCurrentDispatcher,oa=A.ReactCurrentOwner,pn=A.ReactCurrentBatchConfig,Ge=0,kt=null,ft=null,At=0,on=0,wi=pr(0),gt=0,os=null,zr=0,ao=0,la=0,ls=null,Xt=null,aa=0,ki=1/0,Jn=null,co=!1,ca=null,wr=null,uo=!1,kr=null,fo=0,as=0,ua=null,ho=-1,po=0;function Ht(){return(Ge&6)!==0?tt():ho!==-1?ho:ho=tt()}function Sr(e){return(e.mode&1)===0?1:(Ge&2)!==0&&At!==0?At&-At:lp.transition!==null?(po===0&&(po=Ja()),po):(e=Ye,e!==0||(e=window.event,e=e===void 0?16:ac(e.type)),e)}function Cn(e,t,r,s){if(50<as)throw as=0,ua=null,Error(i(185));Ii(e,r,s),((Ge&2)===0||e!==kt)&&(e===kt&&((Ge&2)===0&&(ao|=r),gt===4&&br(e,At)),Qt(e,s),r===1&&Ge===0&&(t.mode&1)===0&&(ki=tt()+500,zs&&gr()))}function Qt(e,t){var r=e.callbackNode;lh(e,t);var s=Ss(e,e===kt?At:0);if(s===0)r!==null&&or(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&or(r),t===1)e.tag===0?op(ad.bind(null,e)):Yc(ad.bind(null,e)),np(function(){(Ge&6)===0&&gr()}),r=null;else{switch(ec(s)){case 1:r=yn;break;case 4:r=ei;break;case 16:r=jr;break;case 536870912:r=qa;break;default:r=jr}r=gd(r,ld.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ld(e,t){if(ho=-1,po=0,(Ge&6)!==0)throw Error(i(327));var r=e.callbackNode;if(Si()&&e.callbackNode!==r)return null;var s=Ss(e,e===kt?At:0);if(s===0)return null;if((s&30)!==0||(s&e.expiredLanes)!==0||t)t=mo(e,s);else{t=s;var a=Ge;Ge|=2;var d=ud();(kt!==e||At!==t)&&(Jn=null,ki=tt()+500,Gr(e,t));do try{Dp();break}catch(k){cd(e,k)}while(!0);Al(),lo.current=d,Ge=a,ft!==null?t=0:(kt=null,At=0,t=gt)}if(t!==0){if(t===2&&(a=$o(e),a!==0&&(s=a,t=da(e,a))),t===1)throw r=os,Gr(e,0),br(e,s),Qt(e,tt()),r;if(t===6)br(e,s);else{if(a=e.current.alternate,(s&30)===0&&!Cp(a)&&(t=mo(e,s),t===2&&(d=$o(e),d!==0&&(s=d,t=da(e,d))),t===1))throw r=os,Gr(e,0),br(e,s),Qt(e,tt()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(i(345));case 2:$r(e,Xt,Jn);break;case 3:if(br(e,s),(s&130023424)===s&&(t=aa+500-tt(),10<t)){if(Ss(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){Ht(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=xl($r.bind(null,e,Xt,Jn),t);break}$r(e,Xt,Jn);break;case 4:if(br(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var g=31-vn(s);d=1<<g,g=t[g],g>a&&(a=g),s&=~d}if(s=a,s=tt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*_p(s/1960))-s,10<s){e.timeoutHandle=xl($r.bind(null,e,Xt,Jn),s);break}$r(e,Xt,Jn);break;case 5:$r(e,Xt,Jn);break;default:throw Error(i(329))}}}return Qt(e,tt()),e.callbackNode===r?ld.bind(null,e):null}function da(e,t){var r=ls;return e.current.memoizedState.isDehydrated&&(Gr(e,t).flags|=256),e=mo(e,t),e!==2&&(t=Xt,Xt=r,t!==null&&fa(t)),e}function fa(e){Xt===null?Xt=e:Xt.push.apply(Xt,e)}function Cp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],d=a.getSnapshot;a=a.value;try{if(!wn(d(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function br(e,t){for(t&=~la,t&=~ao,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-vn(t),s=1<<r;e[r]=-1,t&=~s}}function ad(e){if((Ge&6)!==0)throw Error(i(327));Si();var t=Ss(e,0);if((t&1)===0)return Qt(e,tt()),null;var r=mo(e,t);if(e.tag!==0&&r===2){var s=$o(e);s!==0&&(t=s,r=da(e,s))}if(r===1)throw r=os,Gr(e,0),br(e,t),Qt(e,tt()),r;if(r===6)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$r(e,Xt,Jn),Qt(e,tt()),null}function ha(e,t){var r=Ge;Ge|=1;try{return e(t)}finally{Ge=r,Ge===0&&(ki=tt()+500,zs&&gr())}}function Hr(e){kr!==null&&kr.tag===0&&(Ge&6)===0&&Si();var t=Ge;Ge|=1;var r=pn.transition,s=Ye;try{if(pn.transition=null,Ye=1,e)return e()}finally{Ye=s,pn.transition=r,Ge=t,(Ge&6)===0&&gr()}}function pa(){on=wi.current,et(wi)}function Gr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,tp(r)),ft!==null)for(r=ft.return;r!==null;){var s=r;switch(bl(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Os();break;case 3:xi(),et(Vt),et(Lt),Pl();break;case 5:Fl(s);break;case 4:xi();break;case 13:et(it);break;case 19:et(it);break;case 10:Nl(s.type._context);break;case 22:case 23:pa()}r=r.return}if(kt=e,ft=e=_r(e.current,null),At=on=t,gt=0,os=null,la=ao=zr=0,Xt=ls=null,Rr!==null){for(t=0;t<Rr.length;t++)if(r=Rr[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,d=r.pending;if(d!==null){var g=d.next;d.next=a,s.next=g}r.pending=s}Rr=null}return e}function cd(e,t){do{var r=ft;try{if(Al(),Zs.current=to,qs){for(var s=st.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}qs=!1}if(Ur=0,wt=mt=st=null,es=!1,ts=0,oa.current=null,r===null||r.return===null){gt=1,os=t,ft=null;break}e:{var d=e,g=r.return,k=r,D=t;if(t=At,k.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var G=D,te=k,ne=te.tag;if((te.mode&1)===0&&(ne===0||ne===11||ne===15)){var J=te.alternate;J?(te.updateQueue=J.updateQueue,te.memoizedState=J.memoizedState,te.lanes=J.lanes):(te.updateQueue=null,te.memoizedState=null)}var ge=Fu(g);if(ge!==null){ge.flags&=-257,Lu(ge,g,k,d,t),ge.mode&1&&ju(d,G,t),t=ge,D=G;var ke=t.updateQueue;if(ke===null){var Se=new Set;Se.add(D),t.updateQueue=Se}else ke.add(D);break e}else{if((t&1)===0){ju(d,G,t),ma();break e}D=Error(i(426))}}else if(nt&&k.mode&1){var ut=Fu(g);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),Lu(ut,g,k,d,t),El(yi(D,k));break e}}d=D=yi(D,k),gt!==4&&(gt=2),ls===null?ls=[d]:ls.push(d),d=g;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var R=Bu(d,D,t);iu(d,R);break e;case 1:k=D;var B=d.type,z=d.stateNode;if((d.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(wr===null||!wr.has(z)))){d.flags|=65536,t&=-t,d.lanes|=t;var le=Iu(d,k,t);iu(d,le);break e}}d=d.return}while(d!==null)}fd(r)}catch(Ce){t=Ce,ft===r&&r!==null&&(ft=r=r.return);continue}break}while(!0)}function ud(){var e=lo.current;return lo.current=to,e===null?to:e}function ma(){(gt===0||gt===3||gt===2)&&(gt=4),kt===null||(zr&268435455)===0&&(ao&268435455)===0||br(kt,At)}function mo(e,t){var r=Ge;Ge|=2;var s=ud();(kt!==e||At!==t)&&(Jn=null,Gr(e,t));do try{Ep();break}catch(a){cd(e,a)}while(!0);if(Al(),Ge=r,lo.current=s,ft!==null)throw Error(i(261));return kt=null,At=0,gt}function Ep(){for(;ft!==null;)dd(ft)}function Dp(){for(;ft!==null&&!xs();)dd(ft)}function dd(e){var t=md(e.alternate,e,on);e.memoizedProps=e.pendingProps,t===null?fd(e):ft=t,oa.current=null}function fd(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=vp(r,t,on),r!==null){ft=r;return}}else{if(r=wp(r,t),r!==null){r.flags&=32767,ft=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{gt=6,ft=null;return}}if(t=t.sibling,t!==null){ft=t;return}ft=t=e}while(t!==null);gt===0&&(gt=5)}function $r(e,t,r){var s=Ye,a=pn.transition;try{pn.transition=null,Ye=1,Ap(e,t,r,s)}finally{pn.transition=a,Ye=s}return null}function Ap(e,t,r,s){do Si();while(kr!==null);if((Ge&6)!==0)throw Error(i(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var d=r.lanes|r.childLanes;if(ah(e,d),e===kt&&(ft=kt=null,At=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||uo||(uo=!0,gd(jr,function(){return Si(),null})),d=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||d){d=pn.transition,pn.transition=null;var g=Ye;Ye=1;var k=Ge;Ge|=4,oa.current=null,Sp(e,r),nd(r,e),Kh(ml),Cs=!!pl,ml=pl=null,e.current=r,bp(r),Ti(),Ge=k,Ye=g,pn.transition=d}else e.current=r;if(uo&&(uo=!1,kr=e,fo=a),d=e.pendingLanes,d===0&&(wr=null),nh(r.stateNode),Qt(e,tt()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(co)throw co=!1,e=ca,ca=null,e;return(fo&1)!==0&&e.tag!==0&&Si(),d=e.pendingLanes,(d&1)!==0?e===ua?as++:(as=0,ua=e):as=0,gr(),null}function Si(){if(kr!==null){var e=ec(fo),t=pn.transition,r=Ye;try{if(pn.transition=null,Ye=16>e?16:e,kr===null)var s=!1;else{if(e=kr,kr=null,fo=0,(Ge&6)!==0)throw Error(i(331));var a=Ge;for(Ge|=4,we=e.current;we!==null;){var d=we,g=d.child;if((we.flags&16)!==0){var k=d.deletions;if(k!==null){for(var D=0;D<k.length;D++){var G=k[D];for(we=G;we!==null;){var te=we;switch(te.tag){case 0:case 11:case 15:ss(8,te,d)}var ne=te.child;if(ne!==null)ne.return=te,we=ne;else for(;we!==null;){te=we;var J=te.sibling,ge=te.return;if(Zu(te),te===G){we=null;break}if(J!==null){J.return=ge,we=J;break}we=ge}}}var ke=d.alternate;if(ke!==null){var Se=ke.child;if(Se!==null){ke.child=null;do{var ut=Se.sibling;Se.sibling=null,Se=ut}while(Se!==null)}}we=d}}if((d.subtreeFlags&2064)!==0&&g!==null)g.return=d,we=g;else e:for(;we!==null;){if(d=we,(d.flags&2048)!==0)switch(d.tag){case 0:case 11:case 15:ss(9,d,d.return)}var R=d.sibling;if(R!==null){R.return=d.return,we=R;break e}we=d.return}}var B=e.current;for(we=B;we!==null;){g=we;var z=g.child;if((g.subtreeFlags&2064)!==0&&z!==null)z.return=g,we=z;else e:for(g=B;we!==null;){if(k=we,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:oo(9,k)}}catch(Ce){lt(k,k.return,Ce)}if(k===g){we=null;break e}var le=k.sibling;if(le!==null){le.return=k.return,we=le;break e}we=k.return}}if(Ge=a,gr(),Bn&&typeof Bn.onPostCommitFiberRoot=="function")try{Bn.onPostCommitFiberRoot(vs,e)}catch{}s=!0}return s}finally{Ye=r,pn.transition=t}}return!1}function hd(e,t,r){t=yi(r,t),t=Bu(e,t,1),e=yr(e,t,1),t=Ht(),e!==null&&(Ii(e,1,t),Qt(e,t))}function lt(e,t,r){if(e.tag===3)hd(e,e,r);else for(;t!==null;){if(t.tag===3){hd(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(wr===null||!wr.has(s))){e=yi(r,e),e=Iu(t,e,1),t=yr(t,e,1),e=Ht(),t!==null&&(Ii(t,1,e),Qt(t,e));break}}t=t.return}}function Np(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Ht(),e.pingedLanes|=e.suspendedLanes&r,kt===e&&(At&r)===r&&(gt===4||gt===3&&(At&130023424)===At&&500>tt()-aa?Gr(e,0):la|=r),Qt(e,t)}function pd(e,t){t===0&&((e.mode&1)===0?t=1:(t=ks,ks<<=1,(ks&130023424)===0&&(ks=4194304)));var r=Ht();e=Qn(e,t),e!==null&&(Ii(e,t,r),Qt(e,r))}function Tp(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),pd(e,r)}function Bp(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(i(314))}s!==null&&s.delete(t),pd(e,r)}var md;md=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vt.current)Kt=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return Kt=!1,yp(e,t,r);Kt=(e.flags&131072)!==0}else Kt=!1,nt&&(t.flags&1048576)!==0&&Kc(t,Gs,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;io(e,t),e=t.pendingProps;var a=ui(t,Lt.current);gi(t,r),a=Ol(null,t,s,e,a,r);var d=Ul();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Yt(s)?(d=!0,Us(t)):d=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Il(t),a.updater=no,t.stateNode=a,a._reactInternals=t,Vl(t,s,e,r),t=Ql(null,t,s,!0,d,r)):(t.tag=0,nt&&d&&Sl(t),zt(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(io(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=jp(s),e=Sn(s,e),a){case 0:t=Xl(null,t,s,e,r);break e;case 1:t=zu(null,t,s,e,r);break e;case 11:t=Pu(null,t,s,e,r);break e;case 14:t=Mu(null,t,s,Sn(s.type,e),r);break e}throw Error(i(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Sn(s,a),Xl(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Sn(s,a),zu(e,t,s,a,r);case 3:e:{if(Hu(t),e===null)throw Error(i(387));s=t.pendingProps,d=t.memoizedState,a=d.element,ru(e,t),Xs(t,s,null,r);var g=t.memoizedState;if(s=g.element,d.isDehydrated)if(d={element:s,isDehydrated:!1,cache:g.cache,pendingSuspenseBoundaries:g.pendingSuspenseBoundaries,transitions:g.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){a=yi(Error(i(423)),t),t=Gu(e,t,s,r,a);break e}else if(s!==a){a=yi(Error(i(424)),t),t=Gu(e,t,s,r,a);break e}else for(sn=hr(t.stateNode.containerInfo.firstChild),rn=t,nt=!0,kn=null,r=tu(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(hi(),s===a){t=qn(e,t,r);break e}zt(e,t,s,r)}t=t.child}return t;case 5:return ou(t),e===null&&Cl(t),s=t.type,a=t.pendingProps,d=e!==null?e.memoizedProps:null,g=a.children,gl(s,a)?g=null:d!==null&&gl(s,d)&&(t.flags|=32),Uu(e,t),zt(e,t,g,r),t.child;case 6:return e===null&&Cl(t),null;case 13:return $u(e,t,r);case 4:return jl(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=pi(t,null,s,r):zt(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Sn(s,a),Pu(e,t,s,a,r);case 7:return zt(e,t,t.pendingProps,r),t.child;case 8:return zt(e,t,t.pendingProps.children,r),t.child;case 12:return zt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,d=t.memoizedProps,g=a.value,qe(Vs,s._currentValue),s._currentValue=g,d!==null)if(wn(d.value,g)){if(d.children===a.children&&!Vt.current){t=qn(e,t,r);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var k=d.dependencies;if(k!==null){g=d.child;for(var D=k.firstContext;D!==null;){if(D.context===s){if(d.tag===1){D=Zn(-1,r&-r),D.tag=2;var G=d.updateQueue;if(G!==null){G=G.shared;var te=G.pending;te===null?D.next=D:(D.next=te.next,te.next=D),G.pending=D}}d.lanes|=r,D=d.alternate,D!==null&&(D.lanes|=r),Tl(d.return,r,t),k.lanes|=r;break}D=D.next}}else if(d.tag===10)g=d.type===t.type?null:d.child;else if(d.tag===18){if(g=d.return,g===null)throw Error(i(341));g.lanes|=r,k=g.alternate,k!==null&&(k.lanes|=r),Tl(g,r,t),g=d.sibling}else g=d.child;if(g!==null)g.return=d;else for(g=d;g!==null;){if(g===t){g=null;break}if(d=g.sibling,d!==null){d.return=g.return,g=d;break}g=g.return}d=g}zt(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,gi(t,r),a=fn(a),s=s(a),t.flags|=1,zt(e,t,s,r),t.child;case 14:return s=t.type,a=Sn(s,t.pendingProps),a=Sn(s.type,a),Mu(e,t,s,a,r);case 15:return Ru(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Sn(s,a),io(e,t),t.tag=1,Yt(s)?(e=!0,Us(t)):e=!1,gi(t,r),Nu(t,s,a),Vl(t,s,a,r),Ql(null,t,s,!0,e,r);case 19:return Vu(e,t,r);case 22:return Ou(e,t,r)}throw Error(i(156,t.tag))};function gd(e,t){return Ir(e,t)}function Ip(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(e,t,r,s){return new Ip(e,t,r,s)}function ga(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jp(e){if(typeof e=="function")return ga(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fe)return 11;if(e===xe)return 14}return 2}function _r(e,t){var r=e.alternate;return r===null?(r=mn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function go(e,t,r,s,a,d){var g=2;if(s=e,typeof e=="function")ga(e)&&(g=1);else if(typeof e=="string")g=5;else e:switch(e){case Z:return Wr(r.children,a,d,t);case ie:g=8,a|=8;break;case he:return e=mn(12,r,t,a|2),e.elementType=he,e.lanes=d,e;case Q:return e=mn(13,r,t,a),e.elementType=Q,e.lanes=d,e;case re:return e=mn(19,r,t,a),e.elementType=re,e.lanes=d,e;case ue:return xo(r,a,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case be:g=10;break e;case pe:g=9;break e;case fe:g=11;break e;case xe:g=14;break e;case ce:g=16,s=null;break e}throw Error(i(130,e==null?e:typeof e,""))}return t=mn(g,r,t,a),t.elementType=e,t.type=s,t.lanes=d,t}function Wr(e,t,r,s){return e=mn(7,e,s,t),e.lanes=r,e}function xo(e,t,r,s){return e=mn(22,e,s,t),e.elementType=ue,e.lanes=r,e.stateNode={isHidden:!1},e}function xa(e,t,r){return e=mn(6,e,null,t),e.lanes=r,e}function ya(e,t,r){return t=mn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fp(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wo(0),this.expirationTimes=Wo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wo(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function va(e,t,r,s,a,d,g,k,D){return e=new Fp(e,t,r,k,D),t===1?(t=1,d===!0&&(t|=8)):t=0,d=mn(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Il(d),e}function Lp(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function xd(e){if(!e)return mr;e=e._reactInternals;e:{if(Et(e)!==e||e.tag!==1)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Yt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(i(171))}if(e.tag===1){var r=e.type;if(Yt(r))return Wc(e,r,t)}return t}function yd(e,t,r,s,a,d,g,k,D){return e=va(r,s,!0,e,a,d,g,k,D),e.context=xd(null),r=e.current,s=Ht(),a=Sr(r),d=Zn(s,a),d.callback=t??null,yr(r,d,a),e.current.lanes=a,Ii(e,a,s),Qt(e,s),e}function yo(e,t,r,s){var a=t.current,d=Ht(),g=Sr(a);return r=xd(r),t.context===null?t.context=r:t.pendingContext=r,t=Zn(d,g),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=yr(a,t,g),e!==null&&(Cn(e,a,g,d),Ks(e,a,g)),g}function vo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function vd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function wa(e,t){vd(e,t),(e=e.alternate)&&vd(e,t)}function Pp(){return null}var wd=typeof reportError=="function"?reportError:function(e){console.error(e)};function ka(e){this._internalRoot=e}wo.prototype.render=ka.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));yo(e,t,null,null)},wo.prototype.unmount=ka.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hr(function(){yo(null,e,null,null)}),t[Vn]=null}};function wo(e){this._internalRoot=e}wo.prototype.unstable_scheduleHydration=function(e){if(e){var t=rc();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ur.length&&t!==0&&t<ur[r].priority;r++);ur.splice(r,0,e),r===0&&oc(e)}};function Sa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ko(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function kd(){}function Mp(e,t,r,s,a){if(a){if(typeof s=="function"){var d=s;s=function(){var G=vo(g);d.call(G)}}var g=yd(t,s,e,0,null,!1,!1,"",kd);return e._reactRootContainer=g,e[Vn]=g.current,Vi(e.nodeType===8?e.parentNode:e),Hr(),g}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var k=s;s=function(){var G=vo(D);k.call(G)}}var D=va(e,0,!1,null,null,!1,!1,"",kd);return e._reactRootContainer=D,e[Vn]=D.current,Vi(e.nodeType===8?e.parentNode:e),Hr(function(){yo(t,D,r,s)}),D}function So(e,t,r,s,a){var d=r._reactRootContainer;if(d){var g=d;if(typeof a=="function"){var k=a;a=function(){var D=vo(g);k.call(D)}}yo(t,g,e,a)}else g=Mp(r,t,e,a,s);return vo(g)}tc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Bi(t.pendingLanes);r!==0&&(Vo(t,r|1),Qt(t,tt()),(Ge&6)===0&&(ki=tt()+500,gr()))}break;case 13:Hr(function(){var s=Qn(e,1);if(s!==null){var a=Ht();Cn(s,e,1,a)}}),wa(e,1)}},Yo=function(e){if(e.tag===13){var t=Qn(e,134217728);if(t!==null){var r=Ht();Cn(t,e,134217728,r)}wa(e,134217728)}},nc=function(e){if(e.tag===13){var t=Sr(e),r=Qn(e,t);if(r!==null){var s=Ht();Cn(r,e,t,s)}wa(e,t)}},rc=function(){return Ye},ic=function(e,t){var r=Ye;try{return Ye=e,t()}finally{Ye=r}},Tt=function(e,t,r){switch(t){case"input":if(vt(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=Rs(s);if(!a)throw Error(i(90));an(s),vt(s,a)}}}break;case"textarea":Ar(e,r);break;case"select":t=r.value,t!=null&&ot(e,!!r.multiple,t,!1)}},Bt=ha,It=Hr;var Rp={usingClientEntryPoint:!1,Events:[Xi,ai,Rs,Xe,pt,ha]},cs={findFiberByHostInstance:Fr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Op={bundleType:cs.bundleType,version:cs.version,rendererPackageName:cs.rendererPackageName,rendererConfig:cs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=dt(e),e===null?null:e.stateNode},findFiberByHostInstance:cs.findFiberByHostInstance||Pp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bo.isDisabled&&bo.supportsFiber)try{vs=bo.inject(Op),Bn=bo}catch{}}return Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rp,Zt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sa(t))throw Error(i(200));return Lp(e,t,null,r)},Zt.createRoot=function(e,t){if(!Sa(e))throw Error(i(299));var r=!1,s="",a=wd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=va(e,1,!1,null,null,r,!1,s,a),e[Vn]=t.current,Vi(e.nodeType===8?e.parentNode:e),new ka(t)},Zt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=dt(t),e=e===null?null:e.stateNode,e},Zt.flushSync=function(e){return Hr(e)},Zt.hydrate=function(e,t,r){if(!ko(t))throw Error(i(200));return So(null,e,t,!0,r)},Zt.hydrateRoot=function(e,t,r){if(!Sa(e))throw Error(i(405));var s=r!=null&&r.hydratedSources||null,a=!1,d="",g=wd;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onRecoverableError!==void 0&&(g=r.onRecoverableError)),t=yd(t,null,e,1,r??null,a,!1,d,g),e[Vn]=t.current,Vi(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new wo(t)},Zt.render=function(e,t,r){if(!ko(t))throw Error(i(200));return So(null,e,t,!1,r)},Zt.unmountComponentAtNode=function(e){if(!ko(e))throw Error(i(40));return e._reactRootContainer?(Hr(function(){So(null,null,e,!1,function(){e._reactRootContainer=null,e[Vn]=null})}),!0):!1},Zt.unstable_batchedUpdates=ha,Zt.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!ko(r))throw Error(i(200));if(e==null||e._reactInternals===void 0)throw Error(i(38));return So(e,t,r,!1,s)},Zt.version="18.3.1-next-f1338f8080-20240426",Zt}var Td;function Xp(){if(Td)return Ea.exports;Td=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(n){console.error(n)}}return o(),Ea.exports=Kp(),Ea.exports}var Bd;function Qp(){if(Bd)return _o;Bd=1;var o=Xp();return _o.createRoot=o.createRoot,_o.hydrateRoot=o.hydrateRoot,_o}var Zp=Qp();const qp=sf(Zp),Id=o=>{let n;const i=new Set,l=(y,w)=>{const x=typeof y=="function"?y(n):y;if(!Object.is(x,n)){const b=n;n=w??(typeof x!="object"||x===null)?x:Object.assign({},n,x),i.forEach(S=>S(n,b))}},c=()=>n,h={setState:l,getState:c,getInitialState:()=>p,subscribe:y=>(i.add(y),()=>i.delete(y))},p=n=o(l,c,h);return h},Jp=(o=>o?Id(o):Id),em=o=>o;function tm(o,n=em){const i=ds.useSyncExternalStore(o.subscribe,ds.useCallback(()=>n(o.getState()),[o,n]),ds.useCallback(()=>n(o.getInitialState()),[o,n]));return ds.useDebugValue(i),i}const jd=o=>{const n=Jp(o),i=l=>tm(n,l);return Object.assign(i,n),i},nm=(o=>o?jd(o):jd);class gs{constructor(n){$(this,"buffer");$(this,"index",0);this.buffer=n instanceof Uint8Array?n:new Uint8Array(n)}slice(n,i){return new gs(this.buffer.slice(n,i))}readable(){return this.index<this.buffer.length}skip(n){this.index+=n}readUInt8(){return this.buffer[this.index++]}readInt8(){return this.buffer[this.index++]<<24>>24}readUInt16(){return this.buffer[this.index++]+(this.buffer[this.index++]<<8)}readUInt32(){return this.buffer[this.index++]+(this.buffer[this.index++]<<8)+(this.buffer[this.index++]<<16)+(this.buffer[this.index++]<<24)>>>0}readString(){const n=this.readUInt16();if(n===0)return"";const i=new TextDecoder("utf-8").decode(this.buffer.slice(this.index,this.index+n));return this.index+=n,i}readRGB(){return this.buffer[this.index++]+(this.buffer[this.index++]<<8)+(this.buffer[this.index++]<<16)}readLight(){return{level:this.readUInt16(),color:this.readUInt16()}}readAnimationLength(){return{min:this.readUInt32(),max:this.readUInt32()}}}const jo=new Uint8Array([69,77,80,69,82,73,65,0]),qr=20;var Mo=(o=>(o[o.SPRITE_DATA=1]="SPRITE_DATA",o[o.OBJECT_DEFS=2]="OBJECT_DEFS",o))(Mo||{});function Ya(o){const n=o instanceof Uint8Array?o:new Uint8Array(o);if(n.length<qr)return!1;for(let i=0;i<jo.length;i++)if(n[i]!==jo[i])return!1;return!0}function of(o){const n=o instanceof Uint8Array?o:new Uint8Array(o);if(!Ya(n))return null;const i=new DataView(n.buffer,n.byteOffset,n.byteLength);return{fileType:i.getUint8(8),formatVersion:i.getUint16(9,!0),contentVersion:i.getUint32(11,!0),flags:i.getUint8(15)}}function rm(o){const n=o instanceof Uint8Array?o:new Uint8Array(o);return n.length>=2&&n[0]===31&&n[1]===139}async function im(o){const n=new CompressionStream("gzip"),i=n.writable.getWriter();i.write(new Uint8Array(o)),i.close();const l=n.readable.getReader(),c=[];for(;;){const{done:p,value:y}=await l.read();if(p)break;c.push(y)}let u=0;for(const p of c)u+=p.byteLength;const m=new Uint8Array(u);let h=0;for(const p of c)m.set(p,h),h+=p.byteLength;return m.buffer}async function sm(o){if(!rm(o))return o;const n=new DecompressionStream("gzip"),i=n.writable.getWriter();i.write(new Uint8Array(o)),i.close();const l=n.readable.getReader(),c=[];for(;;){const{done:p,value:y}=await l.read();if(p)break;c.push(y)}let u=0;for(const p of c)u+=p.byteLength;const m=new Uint8Array(u);let h=0;for(const p of c)m.set(p,h),h+=p.byteLength;return m.buffer}const Fd={"41BF619C":740,"439D5A33":760,"42A3":1098},_e={ThingAttrGround:0,ThingAttrGroundBorder:1,ThingAttrOnBottom:2,ThingAttrOnTop:3,ThingAttrContainer:4,ThingAttrStackable:5,ThingAttrForceUse:6,ThingAttrMultiUse:7,ThingAttrWritable:8,ThingAttrWritableOnce:9,ThingAttrFluidContainer:10,ThingAttrSplash:11,ThingAttrNotWalkable:12,ThingAttrNotMoveable:13,ThingAttrBlockProjectile:14,ThingAttrNotPathable:15,ThingAttrPickupable:16,ThingAttrHangable:17,ThingAttrHookSouth:18,ThingAttrHookEast:19,ThingAttrRotateable:20,ThingAttrLight:21,ThingAttrDontHide:22,ThingAttrTranslucent:23,ThingAttrDisplacement:24,ThingAttrElevation:25,ThingAttrLyingCorpse:26,ThingAttrAnimateAlways:27,ThingAttrMinimapColor:28,ThingAttrLensHelp:29,ThingAttrFullGround:30,ThingAttrLook:31,ThingAttrCloth:32,ThingAttrMarket:33,ThingAttrUsable:34,ThingAttrWrapable:35,ThingAttrUnwrapable:36,ThingAttrTopEffect:37,ThingAttrOpacity:100,ThingAttrNotPreWalkable:101,ThingAttrFloorChange:252,ThingAttrNoMoveAnimation:253,ThingAttrChargeable:254,ThingAttrLast:255};function om(o,n){if(o===_e.ThingAttrLast)return o;if(n>=1e3){if(o===16)return _e.ThingAttrNoMoveAnimation;if(o>16)return o-1}else if(n>=755){if(o===23)return _e.ThingAttrFloorChange}else if(n>=740){if(o>0&&o<=15)return o===5?_e.ThingAttrMultiUse:o===6?_e.ThingAttrForceUse:o+1;switch(o){case 16:return _e.ThingAttrLight;case 17:return _e.ThingAttrFloorChange;case 18:return _e.ThingAttrFullGround;case 19:return _e.ThingAttrElevation;case 20:return _e.ThingAttrDisplacement;case 22:return _e.ThingAttrMinimapColor;case 23:return _e.ThingAttrRotateable;case 24:return _e.ThingAttrLyingCorpse;case 25:return _e.ThingAttrHangable;case 26:return _e.ThingAttrHookSouth;case 27:return _e.ThingAttrHookEast;case 28:return _e.ThingAttrAnimateAlways}}return o}function lm(){return{ground:!1,groundBorder:!1,onBottom:!1,onTop:!1,container:!1,stackable:!1,forceUse:!1,multiUse:!1,writable:!1,writableOnce:!1,fluidContainer:!1,splash:!1,notWalkable:!1,notMoveable:!1,blockProjectile:!1,notPathable:!1,pickupable:!1,hangable:!1,hookSouth:!1,hookEast:!1,rotateable:!1,hasLight:!1,dontHide:!1,translucent:!1,hasDisplacement:!1,hasElevation:!1,lyingCorpse:!1,animateAlways:!1,hasMinimapColor:!1,fullGround:!1,look:!1,cloth:!1,hasMarket:!1,usable:!1,wrapable:!1,unwrapable:!1,topEffect:!1,noMoveAnimation:!1,chargeable:!1}}function am(o,n){const i=lm();for(;;){const l=o.readUInt8(),c=om(l,n);switch(c){case _e.ThingAttrLast:return i;case _e.ThingAttrGround:i.ground=!0,i.groundSpeed=o.readUInt16();break;case _e.ThingAttrGroundBorder:i.groundBorder=!0;break;case _e.ThingAttrOnBottom:i.onBottom=!0;break;case _e.ThingAttrOnTop:i.onTop=!0;break;case _e.ThingAttrContainer:i.container=!0;break;case _e.ThingAttrStackable:i.stackable=!0;break;case _e.ThingAttrForceUse:i.forceUse=!0;break;case _e.ThingAttrMultiUse:i.multiUse=!0;break;case _e.ThingAttrWritable:i.writable=!0,i.writableMaxLen=o.readUInt16();break;case _e.ThingAttrWritableOnce:i.writableOnce=!0,i.writableOnceMaxLen=o.readUInt16();break;case _e.ThingAttrFluidContainer:i.fluidContainer=!0;break;case _e.ThingAttrSplash:i.splash=!0;break;case _e.ThingAttrNotWalkable:i.notWalkable=!0;break;case _e.ThingAttrNotMoveable:i.notMoveable=!0;break;case _e.ThingAttrBlockProjectile:i.blockProjectile=!0;break;case _e.ThingAttrNotPathable:i.notPathable=!0;break;case _e.ThingAttrPickupable:i.pickupable=!0;break;case _e.ThingAttrHangable:i.hangable=!0;break;case _e.ThingAttrHookSouth:i.hookSouth=!0;break;case _e.ThingAttrHookEast:i.hookEast=!0;break;case _e.ThingAttrRotateable:i.rotateable=!0;break;case _e.ThingAttrLight:{i.hasLight=!0;const u=o.readLight();i.lightLevel=u.level,i.lightColor=u.color;break}case _e.ThingAttrDontHide:i.dontHide=!0;break;case _e.ThingAttrTranslucent:i.translucent=!0;break;case _e.ThingAttrDisplacement:{if(i.hasDisplacement=!0,n>=755){const u=o.readLight();i.displacementX=u.level,i.displacementY=u.color}break}case _e.ThingAttrElevation:i.hasElevation=!0,i.elevation=o.readUInt16();break;case _e.ThingAttrLyingCorpse:i.lyingCorpse=!0;break;case _e.ThingAttrAnimateAlways:i.animateAlways=!0;break;case _e.ThingAttrMinimapColor:i.hasMinimapColor=!0,i.minimapColor=o.readUInt16();break;case _e.ThingAttrLensHelp:i.lensHelp=o.readUInt16();break;case _e.ThingAttrFullGround:i.fullGround=!0;break;case _e.ThingAttrLook:i.look=!0;break;case _e.ThingAttrCloth:i.cloth=!0,i.clothSlot=o.readUInt16();break;case _e.ThingAttrMarket:i.hasMarket=!0,i.marketCategory=o.readUInt16(),i.marketTradeAs=o.readUInt16(),i.marketShowAs=o.readUInt16(),i.marketName=o.readString(),i.marketRestrictVocation=o.readUInt16(),i.marketRequiredLevel=o.readUInt16();break;case _e.ThingAttrUsable:i.usable=!0,i.usableActionId=o.readUInt16();break;case _e.ThingAttrWrapable:i.wrapable=!0;break;case _e.ThingAttrUnwrapable:i.unwrapable=!0;break;case _e.ThingAttrTopEffect:i.topEffect=!0;break;case _e.ThingAttrOpacity:break;case _e.ThingAttrNotPreWalkable:break;case _e.ThingAttrFloorChange:break;case _e.ThingAttrNoMoveAnimation:i.noMoveAnimation=!0;break;case _e.ThingAttrChargeable:i.chargeable=!0;break;default:throw new Error(`Unknown flag 0x${c.toString(16)} at offset ${o.index}`)}}}function cm(o,n,i){const l=i?o.readUInt8():0,c=o.readUInt8(),u=o.readUInt8();(c>1||u>1)&&o.readUInt8();const m=o.readUInt8(),h=o.readUInt8(),p=o.readUInt8(),y=n>=755?o.readUInt8():1,w=o.readUInt8();let x=0,b=0,S=0;const _=[];if(w>1&&n>=1050){x=o.readUInt8(),b=o.readUInt32(),S=o.readInt8();for(let P=0;P<w;P++)_.push(o.readAnimationLength())}const M=c*u*m*h*p*y*w,I=[];for(let P=0;P<M;P++)I.push(n>=960?o.readUInt32():o.readUInt16());return{type:l,width:c,height:u,layers:m,patternX:h,patternY:p,patternZ:y,animationLength:w,asynchronous:x,nLoop:b,start:S,animationLengths:_,sprites:I}}function um(o){const n=of(o);let i,l;if(n){if(n.fileType!==Mo.OBJECT_DEFS)throw new Error(`Expected object definitions (0x02), got 0x${n.fileType.toString(16)}`);i=n.contentVersion,l=qr}else{const b=new DataView(o).getUint32(0,!0).toString(16).toUpperCase();if(!(b in Fd))throw new Error("Unknown object definition file format.");i=Fd[b],l=4}const c=new gs(o.slice(l)),u=c.readUInt16(),m=c.readUInt16(),h=c.readUInt16(),p=c.readUInt16(),y=u+m+h+p,w=new Map;for(let x=100;x<=y;x++){const b=c.index,S=am(c,i),_=x>u&&x<=u+m,M=i>=1050&&_,I=M?c.readUInt8():1,P=[];for(let X=0;X<I;X++)P.push(cm(c,i,M));const T=c.index,L=c.buffer.slice(b,T);let A;x<=u?A="item":x<=u+m?A="outfit":x<=u+m+h?A="effect":A="distance",w.set(x,{id:x,category:A,flags:S,frameGroups:P,rawBytes:L})}return console.log(`[OB] Parsed ${w.size} things: items=${u} outfits=${m} effects=${h} distances=${p}`),{version:i,itemCount:u,outfitCount:m,effectCount:h,distanceCount:p,things:w,originalBuffer:o}}const Ld={"57BBD603":1098};function dm(o){const n=of(o);let i,l;if(n){if(n.fileType!==Mo.SPRITE_DATA)throw new Error(`Expected sprite data (0x01), got 0x${n.fileType.toString(16)}`);i=n.contentVersion,l=qr}else{const y=new DataView(o).getUint32(0,!0).toString(16).toUpperCase();if(!(y in Ld))throw new Error("Unknown sprite file format.");i=Ld[y],l=4}const c=new Uint8Array(o.slice(l)),u=new gs(c),m=i>760?u.readUInt32():u.readUInt16(),h=new Map;for(let p=1;p<=m;p++){const y=u.readUInt32();y!==0&&h.set(p,y-l)}return console.log(`[OB] Parsed sprite index: ${m} sprites, ${h.size} non-empty`),{version:i,spriteCount:m,addresses:h,buffer:c,originalBuffer:o}}function Rn(o,n){const i=o.addresses.get(n);if(i===void 0)return null;const l=o.buffer,c=l[i+3]+(l[i+4]<<8),u=new gs(l.slice(i,i+5+c));u.readRGB(),u.skip(2);const m=new Uint32Array(1024);let h=0;for(;u.readable();){const y=u.readUInt16(),w=u.readUInt16();h+=y;for(let x=h;x<h+w;x++){const b=u.readUInt8(),S=u.readUInt8(),_=u.readUInt8(),M=u.readUInt8();m[x]=M<<24|_<<16|S<<8|b}h+=w}const p=new ImageData(32,32);return new Uint32Array(p.data.buffer).set(m),p}const Fo=new Map,Ro=document.createElement("canvas");Ro.width=32;Ro.height=32;const Pd=Ro.getContext("2d");function Oo(o,n,i){if(n===0)return null;const l=Fo.get(n);if(l)return l;const c=(i==null?void 0:i.get(n))??Rn(o,n);if(!c)return null;Pd.clearRect(0,0,32,32),Pd.putImageData(c,0,0);const u=Ro.toDataURL();return Fo.set(n,u),u}function nr(){Fo.clear()}function Na(o){Fo.delete(o)}const fm=["FLAG_BLOCK_SOLID","FLAG_BLOCK_PROJECTILE","FLAG_BLOCK_PATHFIND","FLAG_HAS_HEIGHT","FLAG_USEABLE","FLAG_PICKUPABLE","FLAG_MOVEABLE","FLAG_STACKABLE","FLAG_FLOORCHANGEDOWN","FLAG_FLOORCHANGENORTH","FLAG_FLOORCHANGEEAST","FLAG_FLOORCHANGESOUTH","FLAG_FLOORCHANGEWEST","FLAG_ALWAYSONTOP","FLAG_READABLE","FLAG_ROTATABLE","FLAG_HANGABLE","FLAG_VERTICAL","FLAG_HORIZONTAL","FLAG_CANNOTDECAY","FLAG_ALLOWDISTREAD","FLAG_UNUSED","FLAG_CLIENTCHARGES","FLAG_LOOKTHROUGH","FLAG_ANIMATION","FLAG_FULLTILE","FLAG_FORCEUSE"];function hm(o){let n=0;return o.notWalkable&&(n|=1),o.blockProjectile&&(n|=2),o.notPathable&&(n|=4),o.hasElevation&&(n|=8),(o.forceUse||o.multiUse)&&(n|=16),o.pickupable&&(n|=32),o.notMoveable||(n|=64),o.stackable&&(n|=128),o.onTop&&(n|=8192),(o.writable||o.writableOnce)&&(n|=16384),o.rotateable&&(n|=32768),o.hangable&&(n|=65536),o.hookSouth&&(n|=1<<17),o.hookEast&&(n|=1<<18),o.chargeable&&(n|=1<<22),o.translucent&&(n|=1<<23),o.animateAlways&&(n|=1<<24),o.forceUse&&(n|=1<<26),n}function Ta(o,n){return o&-96985344|hm(n)}function Ba(o){return o.ground||o.groundBorder?1:o.container?2:o.splash?11:o.fluidContainer?12:0}function pm(o,n,i,l){for(let u=i;u>=n;u--){const m=o.things.get(u);m&&(m.id=u+1,o.things.set(u+1,m),o.things.delete(u))}const c=new Set;for(const u of l)c.add(u>=n?u+1:u);return c}function mm(o,n,i,l){for(let u=n+1;u<=i;u++){const m=o.things.get(u);m&&(m.id=u-1,o.things.set(u-1,m),o.things.delete(u))}const c=new Set;for(const u of l)u!==n&&c.add(u>n?u-1:u);return c}function Md(o,n,i){const l=o.itemCount+o.outfitCount+o.effectCount+o.distanceCount;let c,u;switch(n){case"item":o.itemCount++,c=o.itemCount,u=c;break;case"outfit":o.outfitCount++,c=o.itemCount+o.outfitCount,u=c;break;case"effect":o.effectCount++,c=o.itemCount+o.outfitCount+o.effectCount,u=c;break;case"distance":o.distanceCount++,c=o.itemCount+o.outfitCount+o.effectCount+o.distanceCount,u=c+1;break}const m=u<=l?pm(o,u,l,i):new Set(i);return m.add(c),{insertId:c,dirtyIds:m}}const O=nm((o,n)=>({objectData:null,spriteData:null,loaded:!1,loading:!1,error:null,dirty:!1,dirtyIds:new Set,undoStack:[],redoStack:[],spriteOverrides:new Map,dirtySpriteIds:new Set,itemDefinitions:new Map,clientToServerIds:new Map,definitionsLoaded:!1,spriteMapEntries:[],spriteMapLoaded:!1,sourceDir:null,sourceNames:{},sourceHandles:{},centerTab:"texture",activeCategory:"item",selectedThingId:null,selectedThingIds:new Set,searchQuery:"",filterGroup:-1,editVersion:0,focusSpriteId:null,importTileSize:1,selectedSlots:[],copiedThing:null,loadFiles:async(i,l)=>{o({loading:!0,error:null});try{const c=um(i),u=await sm(l),m=dm(u);nr(),o({objectData:c,spriteData:m,loaded:!0,loading:!1,selectedThingId:100,selectedThingIds:new Set,activeCategory:"item",dirty:!1,dirtyIds:new Set,undoStack:[],redoStack:[],spriteOverrides:new Map,dirtySpriteIds:new Set,editVersion:0,focusSpriteId:null,copiedThing:null,...n().definitionsLoaded?{}:{itemDefinitions:new Map,clientToServerIds:new Map,definitionsLoaded:!1},...n().spriteMapLoaded?{}:{spriteMapEntries:[],spriteMapLoaded:!1}})}catch(c){o({error:c instanceof Error?c.message:String(c),loading:!1})}},loadDefinitions:i=>{const l=new Map,c=new Map;for(const[m,h]of Object.entries(i)){const p=parseInt(m,10);if(isNaN(p))continue;const y=h.id??p;l.set(p,{serverId:p,id:y,flags:h.flags??0,group:h.group??0,properties:h.properties?{...h.properties}:null}),(!c.has(y)||p===y)&&c.set(y,p)}o({itemDefinitions:l,clientToServerIds:c,definitionsLoaded:!0}),console.log(`[OB] Loaded ${l.size} definitions (by serverId), ${c.size} clientserver mappings`);const u=n().objectData;if(u){let m=0;for(const h of l.values()){const p=h.id??0;(p>u.itemCount||p<100)&&m++}m>0&&console.warn(`[OB]  ${m} definitions reference clientIds outside the .eobj range (100${u.itemCount}). These items will be invisible in-game.`)}},setSourceDir:(i,l)=>{o({sourceDir:i,sourceNames:{...n().sourceNames,...l}})},setSourceHandles:i=>{o({sourceHandles:{...n().sourceHandles,...i}})},setCenterTab:i=>o({centerTab:i}),setActiveCategory:i=>{const l=n().getCategoryRange(i);o({activeCategory:i,selectedThingId:l?l.start:null,selectedThingIds:new Set,searchQuery:"",filterGroup:-1})},setSelectedThingId:i=>o({selectedThingId:i,selectedThingIds:new Set}),toggleThingSelection:(i,l)=>{const c=n().selectedThingIds,u=new Set(c);if(l)for(const m of l)u.add(m);else u.has(i)?u.delete(i):u.add(i);o({selectedThingIds:u,selectedThingId:i})},clearThingSelection:()=>o({selectedThingIds:new Set}),setSearchQuery:i=>o({searchQuery:i}),setFilterGroup:i=>o({filterGroup:i}),reset:()=>{nr(),o({objectData:null,spriteData:null,loaded:!1,loading:!1,error:null,activeCategory:"item",selectedThingId:null,searchQuery:"",filterGroup:-1,dirty:!1,dirtyIds:new Set,undoStack:[],redoStack:[],spriteOverrides:new Map,dirtySpriteIds:new Set,editVersion:0,focusSpriteId:null,copiedThing:null,itemDefinitions:new Map,clientToServerIds:new Map,definitionsLoaded:!1,spriteMapEntries:[],spriteMapLoaded:!1,sourceHandles:{}})},updateItemDefinition:(i,l)=>{const{itemDefinitions:c,clientToServerIds:u,editVersion:m}=n(),h=u.get(i)??i,p=c.get(h),y={serverId:h,id:l.id??(p==null?void 0:p.id)??i,flags:l.flags??(p==null?void 0:p.flags)??0,group:l.group??(p==null?void 0:p.group)??0,properties:l.properties!==void 0?l.properties?{...(p==null?void 0:p.properties)??{},...l.properties}:null:p!=null&&p.properties?{...p.properties}:null},w=new Map(c);w.set(h,y);const x=new Map(u);x.has(i)||x.set(i,h),o({itemDefinitions:w,clientToServerIds:x,dirty:!0,editVersion:m+1})},updateThingFlags:(i,l)=>{const{objectData:c,undoStack:u,dirtyIds:m,editVersion:h,itemDefinitions:p}=n();if(!c)return;const y=c.things.get(i);if(!y)return;const w={...y.flags};y.flags=l,y.rawBytes=void 0;const x=new Set(m);if(x.add(i),y.category==="item"){const{clientToServerIds:b}=n(),S=b.get(i)??i,_=p.get(S),M=(_==null?void 0:_.flags)??0,I=Ta(M,l),P=Ba(l),T=_!=null&&_.properties?{..._.properties}:{};l.ground&&l.groundSpeed!=null&&l.groundSpeed!==100?T.friction=l.groundSpeed:delete T.friction;const L={serverId:S,id:(_==null?void 0:_.id)??i,flags:I,group:P,properties:Object.keys(T).length>0?T:null},A=new Map(p);A.set(S,L),o({dirty:!0,dirtyIds:x,undoStack:[...u,{thingId:i,oldFlags:w,newFlags:{...l}}],redoStack:[],editVersion:h+1,itemDefinitions:A})}else o({dirty:!0,dirtyIds:x,undoStack:[...u,{thingId:i,oldFlags:w,newFlags:{...l}}],redoStack:[],editVersion:h+1})},undo:()=>{const{objectData:i,undoStack:l,redoStack:c,editVersion:u,itemDefinitions:m}=n();if(!i||l.length===0)return;const h=l[l.length-1],p=i.things.get(h.thingId);if(p&&(p.flags={...h.oldFlags},p.category==="item")){const{clientToServerIds:y}=n(),w=y.get(h.thingId)??h.thingId,x=m.get(w),b=new Map(m);b.set(w,{serverId:w,id:(x==null?void 0:x.id)??h.thingId,flags:Ta((x==null?void 0:x.flags)??0,h.oldFlags),group:Ba(h.oldFlags),properties:x!=null&&x.properties?{...x.properties}:null}),o({undoStack:l.slice(0,-1),redoStack:[...c,h],editVersion:u+1,itemDefinitions:b});return}o({undoStack:l.slice(0,-1),redoStack:[...c,h],editVersion:u+1})},redo:()=>{const{objectData:i,undoStack:l,redoStack:c,editVersion:u,itemDefinitions:m}=n();if(!i||c.length===0)return;const h=c[c.length-1],p=i.things.get(h.thingId);if(p&&(p.flags={...h.newFlags},p.category==="item")){const{clientToServerIds:y}=n(),w=y.get(h.thingId)??h.thingId,x=m.get(w),b=new Map(m);b.set(w,{serverId:w,id:(x==null?void 0:x.id)??h.thingId,flags:Ta((x==null?void 0:x.flags)??0,h.newFlags),group:Ba(h.newFlags),properties:x!=null&&x.properties?{...x.properties}:null}),o({undoStack:[...l,h],redoStack:c.slice(0,-1),editVersion:u+1,itemDefinitions:b});return}o({undoStack:[...l,h],redoStack:c.slice(0,-1),editVersion:u+1})},replaceSprite:(i,l)=>{const{spriteOverrides:c,dirtySpriteIds:u,editVersion:m}=n(),h=new Map(c);h.set(i,l);const p=new Set(u);p.add(i),Na(i),o({dirty:!0,spriteOverrides:h,dirtySpriteIds:p,editVersion:m+1})},addSprite:i=>{const{spriteData:l,spriteOverrides:c,dirtySpriteIds:u,editVersion:m}=n();if(!l)return null;l.spriteCount++;const h=l.spriteCount,p=new Map(c);p.set(h,i);const y=new Set(u);return y.add(h),o({dirty:!0,spriteOverrides:p,dirtySpriteIds:y,editVersion:m+1}),h},deleteSprite:i=>{const{spriteOverrides:l,dirtySpriteIds:c,editVersion:u}=n();if(i<=0)return;const m=new ImageData(32,32),h=new Map(l);h.set(i,m);const p=new Set(c);p.add(i),Na(i),o({dirty:!0,spriteOverrides:h,dirtySpriteIds:p,editVersion:u+1})},deleteSprites:i=>{const{spriteOverrides:l,dirtySpriteIds:c,editVersion:u}=n();if(i.length===0)return;const m=new ImageData(32,32),h=new Map(l),p=new Set(c);for(const y of i)y<=0||(h.set(y,m),p.add(y),Na(y));o({dirty:!0,spriteOverrides:h,dirtySpriteIds:p,editVersion:u+1})},addThing:i=>{const{objectData:l,editVersion:c}=n();if(!l)return null;const{insertId:u,dirtyIds:m}=Md(l,i,n().dirtyIds),y={id:u,category:i,flags:{ground:!1,groundBorder:!1,onBottom:!1,onTop:!1,container:!1,stackable:!1,forceUse:!1,multiUse:!1,writable:!1,writableOnce:!1,fluidContainer:!1,splash:!1,notWalkable:!1,notMoveable:!1,blockProjectile:!1,notPathable:!1,pickupable:!1,hangable:!1,hookSouth:!1,hookEast:!1,rotateable:!1,hasLight:!1,dontHide:!1,translucent:!1,hasDisplacement:!1,hasElevation:!1,lyingCorpse:!1,animateAlways:!1,hasMinimapColor:!1,fullGround:!1,look:!1,cloth:!1,hasMarket:!1,usable:!1,wrapable:!1,unwrapable:!1,topEffect:!1,noMoveAnimation:!1,chargeable:!1},frameGroups:[{type:0,width:1,height:1,layers:1,patternX:1,patternY:1,patternZ:1,animationLength:1,asynchronous:0,nLoop:0,start:0,animationLengths:[{min:0,max:0}],sprites:[0]}]};l.things.set(u,y),m.add(u);const w={dirty:!0,dirtyIds:m,selectedThingId:u,editVersion:c+1};if(i==="item"&&n().definitionsLoaded){const{itemDefinitions:x,clientToServerIds:b}=n(),S=b.get(u);let _=0;for(const L of x.keys())L>_&&(_=L);const M=_+1,I={serverId:M,id:u,flags:0,group:0,properties:null},P=new Map(x);P.set(M,I);const T=new Map(b);T.set(u,M),w.itemDefinitions=P,w.clientToServerIds=T,S!=null?console.log(`[OB] Auto-created definition: serverId=${M} clientId=${u} (overriding stale mapping to serverId=${S})`):console.log(`[OB] Auto-created definition: serverId=${M} clientId=${u}`)}return o(w),u},removeThing:i=>{const{objectData:l,editVersion:c,activeCategory:u}=n();if(!l||!l.things.get(i))return;const h=n().getCategoryRange(u);if(!h)return;const p=h.end;if(i!==p)return;const y=l.itemCount+l.outfitCount+l.effectCount+l.distanceCount;switch(l.things.delete(i),u){case"item":l.itemCount--;break;case"outfit":l.outfitCount--;break;case"effect":l.effectCount--;break;case"distance":l.distanceCount--;break}const w=mm(l,i,y,n().dirtyIds),x=i>h.start?i-1:h.start;o({dirty:!0,dirtyIds:w,selectedThingId:l.things.has(x)?x:null,editVersion:c+1})},importThing:(i,l,c,u)=>{const{objectData:m,spriteData:h,editVersion:p,spriteOverrides:y,dirtySpriteIds:w}=n();if(!m||!h)return null;const{insertId:x,dirtyIds:b}=Md(m,i,n().dirtyIds),S=new Map(y),_=new Set(w),M=new Map;for(const[T,L]of u){if(T===0||M.has(T))continue;h.spriteCount++;const A=h.spriteCount;M.set(T,A),S.set(A,L),_.add(A)}const I=c.map((T,L)=>({...T,type:L,sprites:T.sprites.map(A=>A===0?0:M.get(A)??A),animationLengths:T.animationLengths.map(A=>({...A}))})),P={id:x,category:i,flags:{...l},frameGroups:I};return m.things.set(x,P),nr(),o({dirty:!0,dirtyIds:b,spriteOverrides:S,dirtySpriteIds:_,selectedThingId:x,activeCategory:i,editVersion:p+1}),x},replaceThing:(i,l,c,u)=>{const{objectData:m,spriteData:h,editVersion:p,spriteOverrides:y,dirtySpriteIds:w}=n();if(!m||!h)return!1;const x=m.things.get(i);if(!x)return!1;const b=new Map(y),S=new Set(w),_=new Map;for(const[T,L]of u){if(T===0||_.has(T))continue;h.spriteCount++;const A=h.spriteCount;_.set(T,A),b.set(A,L),S.add(A)}const M=c.map((T,L)=>({...T,type:L,sprites:T.sprites.map(A=>A===0?0:_.get(A)??A),animationLengths:T.animationLengths.map(A=>({...A}))})),I={id:i,category:x.category,flags:{...l},frameGroups:M};m.things.set(i,I);const P=new Set(n().dirtyIds);return P.add(i),nr(),o({dirty:!0,dirtyIds:P,spriteOverrides:b,dirtySpriteIds:S,editVersion:p+1}),!0},loadSpriteMap:i=>{const l=Array.isArray(i.items)?i.items:[];o({spriteMapEntries:l,spriteMapLoaded:!0}),console.log(`[OB] Loaded sprite map: ${l.length} entries`)},updateSpriteMapEntry:(i,l)=>{const c=[...n().spriteMapEntries];c[i]=l,o({spriteMapEntries:c,dirty:!0,editVersion:n().editVersion+1})},addSpriteMapEntry:i=>{const l=[i,...n().spriteMapEntries];o({spriteMapEntries:l,dirty:!0,editVersion:n().editVersion+1})},removeSpriteMapEntry:i=>{const l=n().spriteMapEntries.filter((c,u)=>u!==i);o({spriteMapEntries:l,dirty:!0,editVersion:n().editVersion+1})},exportSpriteMapJson:()=>JSON.stringify({items:n().spriteMapEntries},null,2),compactSpriteAtlas:()=>{const{objectData:i,spriteData:l,spriteOverrides:c,dirtySpriteIds:u,editVersion:m}=n();if(!i||!l)return null;const h=l.spriteCount,p=new Set;for(const L of i.things.values())for(const A of L.frameGroups)for(const X of A.sprites)X>0&&p.add(X);const y=new Set;for(let L=1;L<=h;L++){if(p.has(L)){y.add(L);continue}const A=l.addresses.has(L),X=c.get(L);if(X){let H=!1;for(let Z=3;Z<X.data.length;Z+=4)if(X.data[Z]>0){H=!0;break}H&&y.add(L)}else A&&y.add(L)}const w=h-y.size;if(w===0)return{removed:0,oldCount:h,newCount:h};const x=new Map;let b=1;for(let L=1;L<=h;L++)y.has(L)&&(x.set(L,b),b++);const S=b-1,_=new Set;for(const L of i.things.values()){let A=!1;for(const X of L.frameGroups)for(let H=0;H<X.sprites.length;H++){const Z=X.sprites[H];if(Z===0)continue;const ie=x.get(Z);ie!=null&&ie!==Z?(X.sprites[H]=ie,A=!0):ie==null&&(X.sprites[H]=0,A=!0)}A&&(L.rawBytes=void 0,_.add(L.id))}const M=new Map;for(const[L,A]of c){const X=x.get(L);X!=null&&M.set(X,A)}const I=new Set;for(const L of u){const A=x.get(L);A!=null&&I.add(A)}for(let L=1;L<=S;L++)I.add(L);const P=new Map;for(const[L,A]of l.addresses){const X=x.get(L);X!=null&&P.set(X,A)}l.addresses=P,l.spriteCount=S;const T=new Set(n().dirtyIds);for(const L of _)T.add(L);return nr(),o({dirty:!0,dirtyIds:T,spriteOverrides:M,dirtySpriteIds:I,editVersion:m+1}),console.log(`[OB] Compacted sprite atlas: ${h}  ${S} (removed ${w} blank/unreferenced sprites)`),{removed:w,oldCount:h,newCount:S}},markClean:()=>{const i=n().objectData;if(i)for(const l of i.things.values())l.rawBytes=void 0;o({dirty:!1,dirtyIds:new Set,dirtySpriteIds:new Set,spriteOverrides:new Map})},getCategoryRange:i=>{const l=n().objectData;if(!l)return null;switch(i){case"item":return{start:100,end:l.itemCount};case"outfit":return{start:l.itemCount+1,end:l.itemCount+l.outfitCount};case"effect":return{start:l.itemCount+l.outfitCount+1,end:l.itemCount+l.outfitCount+l.effectCount};case"distance":return{start:l.itemCount+l.outfitCount+l.effectCount+1,end:l.itemCount+l.outfitCount+l.effectCount+l.distanceCount}}}}));function rr(o,n){return n<=o.itemCount?n:n<=o.itemCount+o.outfitCount?n-o.itemCount:n<=o.itemCount+o.outfitCount+o.effectCount?n-o.itemCount-o.outfitCount:n-o.itemCount-o.outfitCount-o.effectCount}function gm(o,n,i,l,c,u,m){var w;if(!o)return[];const h=c(n);if(!h)return[];const p=i.trim().toLowerCase(),y=[];for(let x=h.start;x<=h.end;x++){const b=o.things.get(x);if(b){if(l>=0&&m&&u){const S=m.get(x),_=S!=null?u.get(S):void 0;if(!_||_.group!==l)continue}if(p){let M=rr(o,x).toString().includes(p);if(!M&&m&&u){const I=m.get(x);if(I!=null){I.toString().includes(p)&&(M=!0);const P=u.get(I);!M&&((w=P==null?void 0:P.properties)!=null&&w.name)&&(M=P.properties.name.toLowerCase().includes(p))}}if(!M)continue}y.push(b)}}return y}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lf=(...o)=>o.filter((n,i,l)=>!!n&&n.trim()!==""&&l.indexOf(n)===i).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ym={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=V.forwardRef(({color:o="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:m,...h},p)=>V.createElement("svg",{ref:p,...ym,width:n,height:n,stroke:o,strokeWidth:l?Number(i)*24/Number(n):i,className:lf("lucide",c),...h},[...m.map(([y,w])=>V.createElement(y,w)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=(o,n)=>{const i=V.forwardRef(({className:l,...c},u)=>V.createElement(vm,{ref:u,iconNode:n,className:lf(`lucide-${xm(o)}`,l),...c}));return i.displayName=`${o}`,i};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=Me("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=Me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=Me("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=Me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=Me("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=Me("ClipboardPaste",[["path",{d:"M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z",key:"1pp7kr"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10",key:"2ik1ml"}],["path",{d:"m17 10 4 4-4 4",key:"vp2hj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _m=Me("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=Me("Crop",[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=Me("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=Me("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=Me("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=Me("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=Me("Grid2x2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=Me("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=Me("ImageDown",[["path",{d:"M10.3 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10l-3.1-3.1a2 2 0 0 0-2.814.014L6 21",key:"9csbqa"}],["path",{d:"m14 19 3 3v-5.5",key:"9ldu5r"}],["path",{d:"m17 22 3-3",key:"1nkfve"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=Me("ImageUp",[["path",{d:"M10.3 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10l-3.1-3.1a2 2 0 0 0-2.814.014L6 21",key:"9csbqa"}],["path",{d:"m14 19.5 3-3 3 3",key:"9vmjn0"}],["path",{d:"M17 22v-5.5",key:"1aa6fl"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=Me("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=Me("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=Me("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=Me("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=Me("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=Me("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=Me("PinOff",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=Me("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=Me("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=Me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Um=Me("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zm=Me("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=Me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=Me("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=Me("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=Me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=Me("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=Me("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=Me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=Me("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=Me("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Ym="emperia-ob",Km=2,Ai="dir-handles",Ni="file-handles",ff="last-source-dir",hf="last-session";function zo(){return new Promise((o,n)=>{const i=indexedDB.open(Ym,Km);i.onupgradeneeded=()=>{const l=i.result;l.objectStoreNames.contains(Ai)||l.createObjectStore(Ai),l.objectStoreNames.contains(Ni)||l.createObjectStore(Ni)},i.onsuccess=()=>o(i.result),i.onerror=()=>n(i.error)})}async function Xm(o){try{const n=await zo(),i=n.transaction(Ai,"readwrite");i.objectStore(Ai).put(o,ff),await new Promise((l,c)=>{i.oncomplete=()=>l(),i.onerror=()=>c(i.error)}),n.close()}catch(n){console.warn("[OB] Failed to save dir handle:",n)}}async function Qm(){try{const o=await zo(),i=o.transaction(Ai,"readonly").objectStore(Ai).get(ff),l=await new Promise((c,u)=>{i.onsuccess=()=>c(i.result??null),i.onerror=()=>u(i.error)});return o.close(),l}catch(o){return console.warn("[OB] Failed to load dir handle:",o),null}}async function Zm(o){try{const n=await zo(),i=n.transaction(Ni,"readwrite");i.objectStore(Ni).put(o,hf),await new Promise((l,c)=>{i.oncomplete=()=>l(),i.onerror=()=>c(i.error)}),n.close(),console.log("[OB] Saved session handles")}catch(n){console.warn("[OB] Failed to save session handles:",n)}}async function Od(){try{const o=await zo(),i=o.transaction(Ni,"readonly").objectStore(Ni).get(hf),l=await new Promise((c,u)=>{i.onsuccess=()=>c(i.result??null),i.onerror=()=>u(i.error)});return o.close(),l}catch(o){return console.warn("[OB] Failed to load session handles:",o),null}}async function qm(o,n="readwrite"){const i={mode:n};return await o.queryPermission(i)==="granted"||await o.requestPermission(i)==="granted"}function Jm(){const o=O(N=>N.loadFiles),n=O(N=>N.loading),i=O(N=>N.error),[l,c]=V.useState(!1),u=O(N=>N.loadDefinitions),m=O(N=>N.loadSpriteMap),h=O(N=>N.setSourceDir),p=O(N=>N.setSourceHandles),y=V.useRef(null),w=V.useRef(null),[x,b]=V.useState(null),[S,_]=V.useState(null),[M,I]=V.useState(null),[P,T]=V.useState(null),L=V.useRef(null),A=V.useRef(null),X=V.useRef(null),H=V.useRef({}),[Z,ie]=V.useState(!1),[he,be]=V.useState(null);V.useEffect(()=>{Qm().then(N=>{N&&(X.current=N)}),Od().then(N=>{N&&(N.obj||N.spr)&&ie(!0)})},[]);const pe=V.useCallback(N=>{Zm(N)},[]),fe=V.useCallback(()=>{if(!(!y.current||!w.current)){if(L.current){try{const N=new TextDecoder().decode(L.current),se=JSON.parse(N);u(se)}catch(N){console.error("Failed to parse definitions JSON:",N)}L.current=null}if(A.current){try{const N=new TextDecoder().decode(A.current),se=JSON.parse(N);m(se)}catch(N){console.error("Failed to parse item-to-sprite JSON:",N)}A.current=null}o(y.current,w.current),(H.current.obj||H.current.spr)&&(pe(H.current),p(H.current))}},[o,u,m,pe,p]),Q=V.useCallback(N=>{var C;const se=(C=N.name.split(".").pop())==null?void 0:C.toLowerCase(),K=new FileReader;K.onload=E=>{var q;const W=(q=E.target)==null?void 0:q.result;if(se==="dat"||se==="eobj")y.current=W,b(N.name);else if(se==="spr"||se==="espr")w.current=W,_(N.name);else if(se==="json"){const oe=N.name.toLowerCase();oe.includes("item-to-sprite")||oe.includes("sprite-map")||oe.includes("spritemap")?(A.current=W,T(N.name)):(L.current=W,I(N.name))}fe()},K.readAsArrayBuffer(N)},[fe]),re=V.useCallback(async()=>{var N;if(typeof window.showDirectoryPicker=="function")try{const se={mode:"readwrite"};X.current&&(se.startIn=X.current);const K=await window.showDirectoryPicker(se),C={},E={dir:K};for await(const[W,q]of K.entries()){if(q.kind!=="file")continue;const oe=(N=W.split(".").pop())==null?void 0:N.toLowerCase();if((oe==="eobj"||oe==="dat")&&!C.obj){C.obj=W,E.obj=q;const ee=await q.getFile();y.current=await ee.arrayBuffer(),b(W)}else if((oe==="espr"||oe==="spr")&&!C.spr){C.spr=W,E.spr=q;const ee=await q.getFile();w.current=await ee.arrayBuffer(),_(W)}else if(oe==="json"&&W.toLowerCase().includes("definition")&&!C.def){C.def=W,E.def=q;const ee=await q.getFile();L.current=await ee.arrayBuffer(),I(W)}else if(oe==="json"&&(W.toLowerCase().includes("item-to-sprite")||W.toLowerCase().includes("sprite-map"))&&!C.spriteMap){C.spriteMap=W,E.spriteMap=q;const ee=await q.getFile();A.current=await ee.arrayBuffer(),T(W)}}H.current=E,h(K,C),X.current=K,Xm(K),console.log("[OB] Opened folder:",K.name,C),fe()}catch{}},[fe,h]),xe=V.useCallback(async()=>{var oe,ee,me,De;be(null);const N=await Od();if(!N){be("No saved session found.");return}const se=[];async function K(ye,Oe){if(!ye)return null;try{return await qm(ye,"readwrite")?(await ye.getFile()).arrayBuffer():(se.push(Oe),null)}catch(xt){return console.warn(`[OB] Failed to read ${Oe}:`,xt),se.push(Oe),null}}const C=await K(N.obj,"Objects"),E=await K(N.spr,"Sprites"),W=await K(N.def,"Definitions"),q=await K(N.spriteMap,"Sprite Map");if(!(se.length>0&&(be(`Permission denied for: ${se.join(", ")}. Click to retry.`),!C||!E))){if(!C||!E){be("Required files (objects + sprites) not found in saved session.");return}if(W)try{const ye=new TextDecoder().decode(W);u(JSON.parse(ye))}catch(ye){console.error("Failed to parse definitions:",ye)}if(q)try{const ye=new TextDecoder().decode(q);m(JSON.parse(ye))}catch(ye){console.error("Failed to parse sprite map:",ye)}if(p({obj:N.obj,spr:N.spr,def:N.def,spriteMap:N.spriteMap}),N.dir){const ye={};N.obj&&(ye.obj=N.obj.name),N.spr&&(ye.spr=N.spr.name),N.def&&(ye.def=N.def.name),N.spriteMap&&(ye.spriteMap=N.spriteMap.name),h(N.dir,ye)}b(((oe=N.obj)==null?void 0:oe.name)??null),_(((ee=N.spr)==null?void 0:ee.name)??null),I(((me=N.def)==null?void 0:me.name)??null),T(((De=N.spriteMap)==null?void 0:De.name)??null),o(C,E)}},[o,u,m,p,h]),ce=V.useCallback(N=>{N.preventDefault(),c(!1),Array.from(N.dataTransfer.files).forEach(Q)},[Q]),ue=V.useCallback(N=>{Array.from(N.target.files||[]).forEach(se=>Q(se))},[Q]);return f.jsx("div",{className:"h-full flex items-center justify-center bg-emperia-bg p-8",children:f.jsxs("div",{className:"max-w-lg w-full",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-emperia-text mb-2",children:"Emperia Object Builder"}),f.jsx("p",{className:"text-emperia-muted text-sm",children:"v1.0.0  Web Edition"})]}),f.jsxs("div",{onDragOver:N=>{N.preventDefault(),c(!0)},onDragLeave:()=>c(!1),onDrop:ce,className:`
            border-2 border-dashed rounded-xl p-12 text-center cursor-pointer
            transition-all duration-200
            ${l?"border-emperia-accent bg-emperia-accent/10":"border-emperia-border hover:border-emperia-muted bg-emperia-surface"}
          `,onClick:()=>{var N;return(N=document.getElementById("file-input"))==null?void 0:N.click()},children:[f.jsx("input",{id:"file-input",type:"file",multiple:!0,accept:".dat,.spr,.eobj,.espr,.json",className:"hidden",onChange:ue}),n?f.jsxs("div",{className:"flex flex-col items-center gap-3",children:[f.jsx(jm,{className:"w-12 h-12 text-emperia-accent animate-spin"}),f.jsx("p",{className:"text-emperia-text",children:"Loading files"})]}):f.jsxs("div",{className:"flex flex-col items-center gap-3",children:[f.jsx(df,{className:"w-12 h-12 text-emperia-muted"}),f.jsx("p",{className:"text-emperia-text font-medium",children:"Drop your files here"}),f.jsxs("p",{className:"text-emperia-muted text-sm",children:["Drag & drop ",f.jsx("code",{className:"text-emperia-accent",children:".eobj"})," + ",f.jsx("code",{className:"text-emperia-accent",children:".espr"})," files",f.jsx("br",{}),"or legacy ",f.jsx("code",{className:"text-emperia-accent",children:".dat"})," + ",f.jsx("code",{className:"text-emperia-accent",children:".spr"}),f.jsx("br",{}),f.jsxs("span",{className:"text-emperia-muted/60",children:["+ optional ",f.jsx("code",{className:"text-emperia-accent",children:"definitions.json"})," & ",f.jsx("code",{className:"text-emperia-accent",children:"item-to-sprite.json"})]})]})]})]}),typeof window.showDirectoryPicker=="function"&&f.jsxs("div",{className:"mt-4 flex flex-col items-center gap-2",children:[f.jsxs("div",{className:"flex items-center gap-3 text-emperia-muted/40 text-xs w-full",children:[f.jsx("div",{className:"flex-1 h-px bg-emperia-border/40"}),f.jsx("span",{children:"or"}),f.jsx("div",{className:"flex-1 h-px bg-emperia-border/40"})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("button",{onClick:re,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-emperia-accent/10 border border-emperia-accent/30 text-emperia-accent hover:bg-emperia-accent/20 transition-colors text-sm font-medium",children:[f.jsx(uf,{className:"w-4 h-4"}),"Open Folder"]}),Z&&f.jsxs("button",{onClick:xe,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-green-500/10 border border-green-500/30 text-green-400 hover:bg-green-500/20 transition-colors text-sm font-medium",children:[f.jsx(zm,{className:"w-4 h-4"}),"Reload Last Session"]})]}),f.jsxs("p",{className:"text-emperia-muted/50 text-[10px] text-center",children:["Auto-detects files & saves directly back on compile",Z&&f.jsx("span",{className:"text-green-400/50",children:"  Previous session available"})]}),he&&f.jsx("p",{className:"text-red-400 text-[10px] text-center",children:he})]}),f.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 justify-center text-xs",children:[f.jsxs("div",{className:`flex items-center gap-1.5 ${x?"text-green-400":"text-emperia-muted"}`,children:[f.jsx("div",{className:`w-2 h-2 rounded-full ${x?"bg-green-400":"bg-emperia-border"}`}),x||"Objects (.eobj / .dat)"]}),f.jsxs("div",{className:`flex items-center gap-1.5 ${S?"text-green-400":"text-emperia-muted"}`,children:[f.jsx("div",{className:`w-2 h-2 rounded-full ${S?"bg-green-400":"bg-emperia-border"}`}),S||"Sprites (.espr / .spr)"]}),f.jsxs("div",{className:`flex items-center gap-1.5 ${M?"text-green-400":"text-emperia-muted/50"}`,children:[f.jsx("div",{className:`w-2 h-2 rounded-full ${M?"bg-green-400":"bg-emperia-border/50"}`}),M||"Definitions (.json)  optional"]}),f.jsxs("div",{className:`flex items-center gap-1.5 ${P?"text-green-400":"text-emperia-muted/50"}`,children:[f.jsx("div",{className:`w-2 h-2 rounded-full ${P?"bg-green-400":"bg-emperia-border/50"}`}),P||"Sprite Map (.json)  optional"]})]}),i&&f.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-red-500/10 border border-red-500/30 flex items-start gap-2",children:[f.jsx(Dm,{className:"w-4 h-4 text-red-400 mt-0.5 shrink-0"}),f.jsx("p",{className:"text-red-300 text-sm",children:i})]})]})})}class pf{constructor(n=4096){$(this,"chunks",[]);$(this,"current");$(this,"pos",0);this.current=new Uint8Array(n)}ensure(n){if(this.pos+n<=this.current.length)return;this.chunks.push(this.current.slice(0,this.pos));const i=Math.max(this.current.length*2,n+1024);this.current=new Uint8Array(i),this.pos=0}writeUInt8(n){this.ensure(1),this.current[this.pos++]=n&255}writeInt8(n){this.ensure(1),this.current[this.pos++]=n&255}writeUInt16(n){this.ensure(2),this.current[this.pos++]=n&255,this.current[this.pos++]=n>>8&255}writeUInt32(n){this.ensure(4),this.current[this.pos++]=n&255,this.current[this.pos++]=n>>8&255,this.current[this.pos++]=n>>16&255,this.current[this.pos++]=n>>24&255}writeBytes(n){this.ensure(n.length),this.current.set(n,this.pos),this.pos+=n.length}writeString(n){const i=new TextEncoder().encode(n);this.writeUInt16(i.length),this.ensure(i.length),this.current.set(i,this.pos),this.pos+=i.length}toArrayBuffer(){this.chunks.push(this.current.slice(0,this.pos));const n=this.chunks.reduce((c,u)=>c+u.length,0),i=new Uint8Array(n);let l=0;for(const c of this.chunks)i.set(c,l),l+=c.length;return this.chunks=[],this.current=new Uint8Array(4096),this.pos=0,i.buffer}}const Fe={ThingAttrGround:0,ThingAttrGroundBorder:1,ThingAttrOnBottom:2,ThingAttrOnTop:3,ThingAttrContainer:4,ThingAttrStackable:5,ThingAttrForceUse:6,ThingAttrMultiUse:7,ThingAttrWritable:8,ThingAttrWritableOnce:9,ThingAttrFluidContainer:10,ThingAttrSplash:11,ThingAttrNotWalkable:12,ThingAttrNotMoveable:13,ThingAttrBlockProjectile:14,ThingAttrNotPathable:15,ThingAttrPickupable:16,ThingAttrHangable:17,ThingAttrHookSouth:18,ThingAttrHookEast:19,ThingAttrRotateable:20,ThingAttrLight:21,ThingAttrDontHide:22,ThingAttrTranslucent:23,ThingAttrDisplacement:24,ThingAttrElevation:25,ThingAttrLyingCorpse:26,ThingAttrAnimateAlways:27,ThingAttrMinimapColor:28,ThingAttrLensHelp:29,ThingAttrFullGround:30,ThingAttrLook:31,ThingAttrCloth:32,ThingAttrMarket:33,ThingAttrUsable:34,ThingAttrWrapable:35,ThingAttrUnwrapable:36,ThingAttrTopEffect:37,ThingAttrNoMoveAnimation:253,ThingAttrChargeable:254,ThingAttrLast:255};function e0(o,n,i){const l=c=>{if(i>=1e3){if(c===Fe.ThingAttrNoMoveAnimation){o.writeUInt8(16);return}if(c===Fe.ThingAttrChargeable){o.writeUInt8(Fe.ThingAttrChargeable+1);return}if(c>=16){o.writeUInt8(c+1);return}}o.writeUInt8(c)};n.ground&&(l(Fe.ThingAttrGround),o.writeUInt16(n.groundSpeed??0)),n.groundBorder&&l(Fe.ThingAttrGroundBorder),n.onBottom&&l(Fe.ThingAttrOnBottom),n.onTop&&l(Fe.ThingAttrOnTop),n.container&&l(Fe.ThingAttrContainer),n.stackable&&l(Fe.ThingAttrStackable),n.forceUse&&l(Fe.ThingAttrForceUse),n.multiUse&&l(Fe.ThingAttrMultiUse),n.writable&&(l(Fe.ThingAttrWritable),o.writeUInt16(n.writableMaxLen??0)),n.writableOnce&&(l(Fe.ThingAttrWritableOnce),o.writeUInt16(n.writableOnceMaxLen??0)),n.fluidContainer&&l(Fe.ThingAttrFluidContainer),n.splash&&l(Fe.ThingAttrSplash),n.notWalkable&&l(Fe.ThingAttrNotWalkable),n.notMoveable&&l(Fe.ThingAttrNotMoveable),n.blockProjectile&&l(Fe.ThingAttrBlockProjectile),n.notPathable&&l(Fe.ThingAttrNotPathable),n.pickupable&&l(Fe.ThingAttrPickupable),n.hangable&&l(Fe.ThingAttrHangable),n.hookSouth&&l(Fe.ThingAttrHookSouth),n.hookEast&&l(Fe.ThingAttrHookEast),n.rotateable&&l(Fe.ThingAttrRotateable),n.hasLight&&(l(Fe.ThingAttrLight),o.writeUInt16(n.lightLevel??0),o.writeUInt16(n.lightColor??0)),n.dontHide&&l(Fe.ThingAttrDontHide),n.translucent&&l(Fe.ThingAttrTranslucent),n.hasDisplacement&&(l(Fe.ThingAttrDisplacement),i>=755&&(o.writeUInt16((n.displacementX??0)&65535),o.writeUInt16((n.displacementY??0)&65535))),n.hasElevation&&(l(Fe.ThingAttrElevation),o.writeUInt16(n.elevation??0)),n.lyingCorpse&&l(Fe.ThingAttrLyingCorpse),n.animateAlways&&l(Fe.ThingAttrAnimateAlways),n.hasMinimapColor&&(l(Fe.ThingAttrMinimapColor),o.writeUInt16(n.minimapColor??0)),n.lensHelp!=null&&(l(Fe.ThingAttrLensHelp),o.writeUInt16(n.lensHelp)),n.fullGround&&l(Fe.ThingAttrFullGround),n.look&&l(Fe.ThingAttrLook),n.cloth&&(l(Fe.ThingAttrCloth),o.writeUInt16(n.clothSlot??0)),n.hasMarket&&(l(Fe.ThingAttrMarket),o.writeUInt16(n.marketCategory??0),o.writeUInt16(n.marketTradeAs??0),o.writeUInt16(n.marketShowAs??0),o.writeString(n.marketName??""),o.writeUInt16(n.marketRestrictVocation??0),o.writeUInt16(n.marketRequiredLevel??0)),n.usable&&(l(Fe.ThingAttrUsable),o.writeUInt16(n.usableActionId??0)),n.wrapable&&l(Fe.ThingAttrWrapable),n.unwrapable&&l(Fe.ThingAttrUnwrapable),n.topEffect&&l(Fe.ThingAttrTopEffect),n.noMoveAnimation&&l(Fe.ThingAttrNoMoveAnimation),n.chargeable&&l(Fe.ThingAttrChargeable),o.writeUInt8(Fe.ThingAttrLast)}function t0(o,n,i,l){if(l&&o.writeUInt8(n.type),o.writeUInt8(n.width),o.writeUInt8(n.height),(n.width>1||n.height>1)&&o.writeUInt8(Math.max(n.width,n.height)),o.writeUInt8(n.layers),o.writeUInt8(n.patternX),o.writeUInt8(n.patternY),i>=755&&o.writeUInt8(n.patternZ),o.writeUInt8(n.animationLength),n.animationLength>1&&i>=1050){o.writeUInt8(n.asynchronous),o.writeUInt32(n.nLoop),o.writeUInt8(n.start&255);for(let c=0;c<n.animationLength;c++){const u=n.animationLengths[c]??{min:100,max:100};o.writeUInt32(u.min),o.writeUInt32(u.max)}}for(const c of n.sprites)i>=960?o.writeUInt32(c):o.writeUInt16(c)}function n0(o,n){if(!n||n.size===0){console.log("[OB] Compile: no edits, returning original buffer");const w=o.originalBuffer.slice(0),x=new Uint8Array(w);if(x.length>=qr&&Ya(x)){const b=o.version>=960,S=o.version>=960,_=o.version>=1050,M=o.version>=1050;let I=0;b&&(I|=1),S&&(I|=2),_&&(I|=4),M&&(I|=8),x[15]=I}return w}console.log(`[OB] Compile: rebuilding with ${n.size} edited thing(s)`);const i=new pf(1024*1024),l=new Uint8Array(o.originalBuffer.slice(0,qr)),c=o.version>=960,u=o.version>=960,m=o.version>=1050,h=o.version>=1050;let p=0;c&&(p|=1),u&&(p|=2),m&&(p|=4),h&&(p|=8),l[15]=p,i.writeBytes(l),i.writeUInt16(o.itemCount),i.writeUInt16(o.outfitCount),i.writeUInt16(o.effectCount),i.writeUInt16(o.distanceCount);const y=o.itemCount+o.outfitCount+o.effectCount+o.distanceCount;for(let w=100;w<=y;w++){const x=o.things.get(w);if(!x){i.writeUInt8(Fe.ThingAttrLast),i.writeUInt8(1),i.writeUInt8(1),i.writeUInt8(1),i.writeUInt8(1),i.writeUInt8(1),o.version>=755&&i.writeUInt8(1),i.writeUInt8(1),o.version>=960?i.writeUInt32(0):i.writeUInt16(0);continue}if(x.rawBytes&&!n.has(w)){i.writeBytes(x.rawBytes);continue}x.category==="outfit"&&x.flags.hasDisplacement&&console.log(`[OB] Writing outfit #${w} displacement: x=${x.flags.displacementX}, y=${x.flags.displacementY}`),e0(i,x.flags,o.version);const b=x.category==="outfit",S=o.version>=1050&&b;S&&i.writeUInt8(x.frameGroups.length);for(const _ of x.frameGroups)t0(i,_,o.version,S)}return i.toArrayBuffer()}const Ud=32,Co=Ud*Ud;function r0(o){const n=new Uint32Array(o.data.buffer),i=[];let l=0;for(;l<Co;){let h=0;for(;l+h<Co&&!((n[l+h]>>24&255)>0);)h++;let p=l+h,y=0;for(;p+y<Co&&(n[p+y]>>24&255)!==0;)y++;if(h>0&&y===0&&l+h>=Co)break;const w=new Uint8Array(4+y*4),x=new DataView(w.buffer);x.setUint16(0,h,!0),x.setUint16(2,y,!0);for(let b=0;b<y;b++){const S=n[p+b];w[4+b*4+0]=S&255,w[4+b*4+1]=S>>8&255,w[4+b*4+2]=S>>16&255,w[4+b*4+3]=S>>24&255}i.push(w),l=p+y}const c=i.reduce((h,p)=>h+p.length,0),u=new Uint8Array(5+c);u[0]=255,u[1]=0,u[2]=255,u[3]=c&255,u[4]=c>>8&255;let m=5;for(const h of i)u.set(h,m),m+=h.length;return u}function mf(o){let n=0;return o>=960&&(n|=1),o>=960&&(n|=2),o>=1050&&(n|=4),o>=1050&&(n|=8),n}function i0(o,n){const i=new Uint8Array(o);if(i.length>=qr&&Ya(i)){const l=mf(n);if(i[15]!==l){const c=o.slice(0);return new Uint8Array(c)[15]=l,c}}return o.slice(0)}function s0(o,n){if(!n||n.size===0)return console.log("[OB] Sprite compile: no edits, returning original buffer"),i0(o.originalBuffer,o.version);console.log(`[OB] Sprite compile: rebuilding with ${n.size} modified sprite(s)`);const i=new Map;for(const[b,S]of n)i.set(b,r0(S));const l=new Map;for(let b=1;b<=o.spriteCount;b++){const S=i.get(b);if(S)l.set(b,S);else{const _=o.addresses.get(b);if(_!==void 0){const M=o.buffer,I=M[_+3]+(M[_+4]<<8);l.set(b,M.slice(_,_+5+I))}}}const c=qr,u=o.version>760?4:2,m=o.spriteCount*4,h=c+u+m,p=new Map;let y=h;for(let b=1;b<=o.spriteCount;b++){const S=l.get(b);S&&(p.set(b,y),y+=S.length)}const w=new pf(y+1024),x=mf(o.version);for(let b=0;b<jo.length;b++)w.writeUInt8(jo[b]);w.writeUInt8(Mo.SPRITE_DATA),w.writeUInt16(1),w.writeUInt32(o.version),w.writeUInt8(x),w.writeUInt32(0),o.version>760?w.writeUInt32(o.spriteCount):w.writeUInt16(o.spriteCount);for(let b=1;b<=o.spriteCount;b++)w.writeUInt32(p.get(b)??0);for(let b=1;b<=o.spriteCount;b++){const S=l.get(b);S&&w.writeBytes(S)}return w.toArrayBuffer()}function o0(){const o=O(y=>y.objectData);O(y=>y.spriteData);const n=O(y=>y.reset),i=O(y=>y.dirty),l=O(y=>y.undo),c=O(y=>y.redo),u=O(y=>y.undoStack),m=O(y=>y.redoStack),h=O(y=>y.markClean);O(y=>y.dirtyIds),V.useEffect(()=>{const y=w=>{i&&w.preventDefault()};return window.addEventListener("beforeunload",y),()=>window.removeEventListener("beforeunload",y)},[i]);const p=async()=>{const{objectData:y,spriteData:w,dirtyIds:x,spriteOverrides:b,itemDefinitions:S,sourceDir:_,sourceNames:M,sourceHandles:I}=O.getState();if(!y||!w)return;async function P(Z,ie,he,be){if(ie)try{const pe=await ie.createWritable();await pe.write(Z),await pe.close();return}catch(pe){console.warn(`[OB] Failed to write via file handle (${ie.name}), trying folder fallback:`,pe)}if(_&&he)try{const fe=await(await _.getFileHandle(he,{create:!0})).createWritable();await fe.write(Z),await fe.close();return}catch(pe){console.warn(`[OB] Failed to write ${he} to folder, falling back to download:`,pe)}zd(Z,be)}console.log(`[OB] Compiling: ${x.size} dirty thing(s), ${b.size} sprite override(s)`);const T=new Set;for(let Z=100;Z<=y.itemCount+y.outfitCount+y.effectCount+y.distanceCount;Z++)T.add(Z);const L=n0(y,T);await P(L,I.obj,M.obj,"emperia.eobj"),y.originalBuffer=L;const A=s0(w,b),X=await im(A);await P(X,I.spr,M.spr,"emperia.espr"),w.originalBuffer=A;{const Z=Array.from(S.keys()).sort((be,pe)=>be-pe),ie={};for(const be of Z){const pe=S.get(be);let fe=null;if(pe.properties){fe={};for(const[ce,ue]of Object.entries(pe.properties))ue!=null&&ue!==""&&(fe[ce]=ue);Object.keys(fe).length===0&&(fe=null)}const Q=pe.id??be,re=y.things.get(Q);if((re==null?void 0:re.category)==="item"&&re.flags.ground){const ce=re.flags.groundSpeed??100;ce!==100?(fe=fe??{},fe.friction=ce):fe&&(delete fe.friction,Object.keys(fe).length===0&&(fe=null))}const xe={};pe.id!=null&&(xe.id=pe.id),xe.flags=pe.flags,xe.group=pe.group,xe.properties=fe,ie[String(be)]=xe}const he=JSON.stringify(ie,null,4);await P(new TextEncoder().encode(he).buffer,I.def,M.def,"definitions.json")}{const{spriteMapLoaded:Z,exportSpriteMapJson:ie}=O.getState();if(Z){const he=ie();await P(new TextEncoder().encode(he).buffer,I.spriteMap,M.spriteMap,"item-to-sprite.json")}}const H=JSON.stringify({version:1,features:{spriteDataSize:4096,transparency:!0,spriteSize:32,frameDurations:!0,extended:!0,frameGroups:!0},contentVersion:y.version,format:"emperia-asset-manifest",files:{sprites:"emperia.espr",objects:"emperia.eobj"}},null,2);zd(new TextEncoder().encode(H).buffer,"emperia.easset"),h(),_&&console.log("[OB] Saved to source folder:",_.name)};return V.useEffect(()=>{const y=w=>{(w.ctrlKey||w.metaKey)&&w.key==="z"&&!w.shiftKey&&(w.preventDefault(),l()),(w.ctrlKey||w.metaKey)&&(w.key==="y"||w.key==="z"&&w.shiftKey)&&(w.preventDefault(),c()),(w.ctrlKey||w.metaKey)&&w.key==="s"&&(w.preventDefault(),p())};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)}),f.jsxs("div",{className:"h-10 flex items-center px-3 gap-2 bg-emperia-surface border-b border-emperia-border shrink-0",children:[f.jsx("span",{className:"text-sm font-bold text-emperia-text tracking-wide",children:"Emperia Object Builder"}),f.jsx("span",{className:"text-xs text-emperia-muted",children:"v1.0.0"}),i&&f.jsx("span",{title:"Unsaved changes",children:f.jsx(Sm,{className:"w-2 h-2 fill-amber-400 text-amber-400"})}),f.jsx("div",{className:"flex-1"}),o&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center gap-3 text-xs text-emperia-muted mr-2",children:[f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx(Im,{className:"w-3 h-3"}),"v",o.version]}),f.jsxs("span",{children:[o.things.size," objects"]})]}),f.jsx("button",{onClick:l,disabled:u.length===0,className:`p-1.5 rounded text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover
                       disabled:opacity-30 disabled:cursor-default transition-colors`,title:"Undo (Ctrl+Z)",children:f.jsx($m,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:c,disabled:m.length===0,className:`p-1.5 rounded text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover
                       disabled:opacity-30 disabled:cursor-default transition-colors`,title:"Redo (Ctrl+Y)",children:f.jsx(Um,{className:"w-3.5 h-3.5"})}),f.jsx("div",{className:"w-px h-5 bg-emperia-border mx-1"}),f.jsxs("button",{onClick:p,className:`flex items-center gap-1.5 px-2.5 py-1 rounded text-xs font-medium
                       bg-emperia-accent/20 text-emperia-accent hover:bg-emperia-accent/30
                       transition-colors`,title:"Compile and download .eobj + .espr",children:[f.jsx(Ka,{className:"w-3.5 h-3.5"}),"Compile"]})]}),f.jsxs("button",{onClick:n,className:`flex items-center gap-1.5 px-2 py-1 rounded text-xs
                   text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover
                   transition-colors`,children:[f.jsx(uf,{className:"w-3.5 h-3.5"}),"Open"]})]})}const ja=[];let Fa=null;function gf(){if(ja.length===0){Fa=null;return}const{buffer:o,filename:n}=ja.shift(),i=new Blob([o],{type:"application/octet-stream"}),l=URL.createObjectURL(i),c=document.createElement("a");c.href=l,c.download=n,c.click(),setTimeout(()=>URL.revokeObjectURL(l),1e3),Fa=window.setTimeout(gf,150)}function zd(o,n){ja.push({buffer:o,filename:n}),Fa==null&&gf()}function l0(o){let n=4294967295;for(let i=0;i<o.length;i++){n^=o[i];for(let l=0;l<8;l++)n=n>>>1^(n&1?3988292384:0)}return(n^4294967295)>>>0}function a0(o){const n=new TextEncoder,i=[],l=[];let c=0;for(const b of o){const S=n.encode(b.name),_=l0(b.data),M=b.data.length,I=new Uint8Array(30+S.length),P=new DataView(I.buffer);P.setUint32(0,67324752,!0),P.setUint16(4,20,!0),P.setUint16(6,0,!0),P.setUint16(8,0,!0),P.setUint16(10,0,!0),P.setUint16(12,0,!0),P.setUint32(14,_,!0),P.setUint32(18,M,!0),P.setUint32(22,M,!0),P.setUint16(26,S.length,!0),P.setUint16(28,0,!0),I.set(S,30),i.push(I),i.push(b.data);const T=new Uint8Array(46+S.length),L=new DataView(T.buffer);L.setUint32(0,33639248,!0),L.setUint16(4,20,!0),L.setUint16(6,20,!0),L.setUint16(8,0,!0),L.setUint16(10,0,!0),L.setUint16(12,0,!0),L.setUint16(14,0,!0),L.setUint32(16,_,!0),L.setUint32(20,M,!0),L.setUint32(24,M,!0),L.setUint16(28,S.length,!0),L.setUint16(30,0,!0),L.setUint16(32,0,!0),L.setUint16(34,0,!0),L.setUint16(36,0,!0),L.setUint32(38,32,!0),L.setUint32(42,c,!0),T.set(S,46),l.push(T),c+=I.length+b.data.length}const u=c;for(const b of l)i.push(b),c+=b.length;const m=c-u,h=new Uint8Array(22),p=new DataView(h.buffer);p.setUint32(0,101010256,!0),p.setUint16(4,0,!0),p.setUint16(6,0,!0),p.setUint16(8,o.length,!0),p.setUint16(10,o.length,!0),p.setUint32(12,m,!0),p.setUint32(16,u,!0),p.setUint16(20,0,!0),i.push(h);const y=i.reduce((b,S)=>b+S.length,0),w=new Uint8Array(y);let x=0;for(const b of i)w.set(b,x),x+=b.length;return w}const Ho=document.createElement("canvas");Ho.width=32;Ho.height=32;const Hd=Ho.getContext("2d");function c0(o){return Hd.clearRect(0,0,32,32),Hd.putImageData(o,0,0),new Promise(n=>{Ho.toBlob(i=>{i.arrayBuffer().then(l=>n(new Uint8Array(l)))},"image/png")})}function u0(o){return o.replace(/[^a-zA-Z0-9_\-]/g,"_")}async function d0(o,n){var l;if(o.length===0)return;const i=[];for(const c of o){const u=n.objectData.things.get(c);if(!u)continue;const m=[];for(const x of u.frameGroups)for(const b of x.sprites)b!==0&&!m.includes(b)&&m.push(b);if(m.length===0)continue;const h=n.clientToServerIds.get(c),p=h!=null?n.itemDefinitions.get(h):void 0,y=(l=p==null?void 0:p.properties)==null?void 0:l.name,w=y?`${c}_${u0(y)}`:`${c}`;for(const x of m){const S=n.spriteOverrides.get(x)??Rn(n.spriteData,x);if(!S)continue;const _=await c0(S),M=m.length===1?`${w}.png`:`${w}_spr${x}.png`;i.push({name:M,data:_})}}if(i.length!==0)if(i.length===1)Gd(i[0].data,i[0].name,"image/png");else{const c=a0(i);Gd(c,"sprites_export.zip","application/zip")}}function Gd(o,n,i){const l=new Blob([o.buffer],{type:i}),c=URL.createObjectURL(l),u=document.createElement("a");u.href=c,u.download=n,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(c)}const f0={0:"None",1:"Ground",2:"Container",3:"Weapon",4:"Ammunition",5:"Armor",6:"Charges",7:"Teleport",9:"Write",10:"Write Once",11:"Fluid",12:"Splash"},h0=[{key:"item",label:"Items",icon:Pm},{key:"outfit",label:"Outfits",icon:Hm},{key:"effect",label:"Effects",icon:Gm},{key:"distance",label:"Distance",icon:wm}];function p0(){const o=O(A=>A.activeCategory),n=O(A=>A.setActiveCategory),i=O(A=>A.objectData),l=O(A=>A.searchQuery),c=O(A=>A.setSearchQuery),u=O(A=>A.selectedThingId),m=O(A=>A.addThing),h=O(A=>A.removeThing),p=O(A=>A.getCategoryRange),y=O(A=>A.filterGroup),w=O(A=>A.setFilterGroup),x=O(A=>A.definitionsLoaded),b=O(A=>A.selectedThingIds),S=O(A=>A.spriteData),_=O(A=>A.spriteOverrides),M=O(A=>A.itemDefinitions),I=O(A=>A.clientToServerIds);O(A=>A.editVersion);const P=b.size,T=async()=>{if(!i||!S)return;const A=P>0?Array.from(b):u!=null?[u]:[];A.length!==0&&await d0(A,{objectData:i,spriteData:S,spriteOverrides:_,itemDefinitions:M,clientToServerIds:I})},L=A=>{if(!i)return 0;switch(A){case"item":return i.itemCount-99;case"outfit":return i.outfitCount;case"effect":return i.effectCount;case"distance":return i.distanceCount}};return f.jsxs("div",{className:"shrink-0",children:[f.jsx("div",{className:"flex border-b border-emperia-border",children:h0.map(({key:A,label:X,icon:H})=>f.jsxs("button",{onClick:()=>n(A),className:`
              flex-1 flex flex-col items-center gap-0.5 py-2 text-xs transition-colors
              ${o===A?"text-emperia-accent border-b-2 border-emperia-accent bg-emperia-accent/5":"text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover"}
            `,children:[f.jsx(H,{className:"w-4 h-4"}),f.jsx("span",{children:X}),f.jsx("span",{className:"text-[10px] opacity-60",children:L(A)})]},A))}),f.jsxs("div",{className:"px-2 py-1.5 border-b border-emperia-border flex items-center gap-1",children:[f.jsxs("div",{className:"flex items-center gap-1.5 bg-emperia-surface rounded px-2 py-1 flex-1",children:[f.jsx(Uo,{className:"w-3.5 h-3.5 text-emperia-muted shrink-0"}),f.jsx("input",{type:"text",placeholder:x?"Search by ID or name":"Search by ID",value:l,onChange:A=>c(A.target.value),className:"bg-transparent text-xs text-emperia-text placeholder-emperia-muted/50 outline-none w-full"}),P>0&&f.jsxs("span",{className:"text-[10px] text-emperia-accent font-medium shrink-0",children:[P," sel"]})]}),x&&o==="item"&&f.jsxs("select",{value:y,onChange:A=>w(parseInt(A.target.value,10)),className:"text-[10px] bg-emperia-surface border border-emperia-border rounded px-1 py-1 text-emperia-text outline-none cursor-pointer max-w-[80px]",title:"Filter by group",children:[f.jsx("option",{value:-1,children:"All"}),Object.entries(f0).map(([A,X])=>f.jsx("option",{value:A,children:X},A))]}),f.jsx("button",{onClick:T,disabled:!i||!S||P===0&&u==null,className:"p-1 rounded bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-blue-400 hover:border-blue-400/50 disabled:opacity-30 transition-colors",title:P>0?`Export ${P} selected sprites`:"Export selected sprite",children:f.jsx(Ka,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:()=>m(o),disabled:!i,className:"p-1 rounded bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-green-400 hover:border-green-400/50 disabled:opacity-30 transition-colors",title:`Add new ${o}`,children:f.jsx(Xa,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:()=>{if(!u||!i)return;const A=p(o);if(!A||u!==A.end)return;const X=i?rr(i,u):u;confirm(`Remove ${o} #${X}? Only the last entry can be removed.`)&&h(u)},disabled:!i||!u||(()=>{const A=p(o);return!A||u!==A.end})(),className:"p-1 rounded bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-red-400 hover:border-red-400/50 disabled:opacity-30 transition-colors",title:`Remove last ${o}`,children:f.jsx(Lm,{className:"w-3.5 h-3.5"})})]})]})}const er=40,$d=20;function m0(){const o=O(Q=>Q.objectData),n=O(Q=>Q.activeCategory),i=O(Q=>Q.searchQuery),l=O(Q=>Q.getCategoryRange),c=O(Q=>Q.selectedThingId),u=O(Q=>Q.setSelectedThingId),m=O(Q=>Q.selectedThingIds),h=O(Q=>Q.toggleThingSelection),p=O(Q=>Q.spriteData),y=O(Q=>Q.spriteOverrides),w=O(Q=>Q.editVersion),x=O(Q=>Q.filterGroup),b=O(Q=>Q.itemDefinitions),S=O(Q=>Q.clientToServerIds),_=V.useMemo(()=>gm(o,n,i,x,l,b,S),[o,n,i,x,l,b,S,w]),M=V.useRef(null),[I,P]=V.useState(0),[T,L]=V.useState(0),A=6,X=Math.ceil(_.length/A),H=X*er,Z=Math.max(0,Math.floor(I/er)-$d),ie=Math.min(X,Math.ceil((I+T)/er)+$d),he=Z*A,be=Math.min(_.length,ie*A),pe=_.slice(he,be),fe=V.useCallback(()=>{M.current&&P(M.current.scrollTop)},[]);return V.useEffect(()=>{const Q=M.current;if(!Q)return;const re=new ResizeObserver(()=>L(Q.clientHeight));return re.observe(Q),L(Q.clientHeight),()=>re.disconnect()},[]),V.useEffect(()=>{const Q=re=>{var N;if(!_.length||c==null)return;const xe=(N=re.target)==null?void 0:N.tagName;if(xe==="INPUT"||xe==="TEXTAREA"||xe==="SELECT")return;const ce=_.findIndex(se=>se.id===c);if(ce<0)return;let ue=ce;switch(re.key){case"ArrowRight":ue=Math.min(_.length-1,ce+1);break;case"ArrowLeft":ue=Math.max(0,ce-1);break;case"ArrowDown":ue=Math.min(_.length-1,ce+A);break;case"ArrowUp":ue=Math.max(0,ce-A);break;default:return}ue!==ce&&(re.preventDefault(),u(_[ue].id))};return window.addEventListener("keydown",Q),()=>window.removeEventListener("keydown",Q)},[_,c,u]),V.useEffect(()=>{if(c==null||!M.current)return;const Q=_.findIndex(ue=>ue.id===c);if(Q<0)return;const xe=Math.floor(Q/A)*er,ce=M.current;(xe<ce.scrollTop||xe+er>ce.scrollTop+ce.clientHeight)&&(ce.scrollTop=Math.max(0,xe-ce.clientHeight/2+er/2))},[c,_]),f.jsx("div",{ref:M,onScroll:fe,className:"flex-1 overflow-y-auto",children:f.jsx("div",{style:{height:H,position:"relative"},children:f.jsx("div",{style:{position:"absolute",top:Z*er,left:0,right:0,display:"grid",gridTemplateColumns:`repeat(${A}, 1fr)`},children:pe.map(Q=>{var W,q;const re=((W=Q.frameGroups[0])==null?void 0:W.sprites.find(oe=>oe>0))??0,xe=p?Oo(p,re,y):null,ce=Q.id===c,ue=o?rr(o,Q.id):Q.id,N=S==null?void 0:S.get(Q.id),se=N!=null?b==null?void 0:b.get(N):void 0,K=(q=se==null?void 0:se.properties)==null?void 0:q.name,C=K?`#${ue}  ${K}`:`#${ue}`,E=m.has(Q.id);return f.jsxs("button",{onClick:oe=>{if(oe.ctrlKey||oe.metaKey)h(Q.id);else if(oe.shiftKey&&c!=null){const ee=_.findIndex(De=>De.id===c),me=_.findIndex(De=>De.id===Q.id);if(ee>=0&&me>=0){const De=Math.min(ee,me),ye=Math.max(ee,me),Oe=_.slice(De,ye+1).map(xt=>xt.id);h(Q.id,Oe)}}else u(Q.id)},className:`
                  relative flex items-center justify-center
                  border transition-colors
                  ${ce?"bg-emperia-accent/20 border-emperia-accent":E?"bg-emperia-accent/10 border-emperia-accent/50":"border-transparent hover:bg-emperia-hover"}
                `,style:{width:er,height:er},title:C,children:[xe?f.jsx("img",{src:xe,alt:"",className:"w-8 h-8 pixelated",style:{imageRendering:"pixelated"}}):f.jsx("div",{className:"w-8 h-8 bg-emperia-border/30 rounded-sm"}),f.jsx("span",{className:"absolute bottom-0 right-0.5 text-[8px] text-emperia-muted/60 leading-none",children:ue})]},Q.id)})})})})}const Qr=[16777215,12571903,12577279,12582911,12582889,12582868,12582847,13959103,15335359,16777151,16771519,16766143,16760767,16760788,16760809,16760831,15319039,13942783,12566527,14342874,9412543,9416639,9420735,9420719,9420703,9420687,10469263,11517839,12566415,12562319,12558223,12554127,12554143,12554159,12554175,11505599,10457023,9408447,11974326,6258623,9416639,6275007,6274975,6274943,6274911,8372063,10469215,12566367,12558175,12549983,12541791,12541823,12541855,12541887,10444735,8347583,6250431,9539985,4156095,4166847,4177855,4177812,4177770,4177727,6995775,9748287,12566335,12555327,12544575,12533567,12533610,12533652,12533695,9715647,6963135,4145087,7171437,22015,43775,65535,65450,65364,65280,5570304,11206400,16776960,16754944,16733440,16711680,16711765,16711849,16711934,11141375,5570815,255,4737096,16319,32703,49087,49023,48959,48896,4177664,8371968,12566272,12549888,12533504,12517376,12517439,12517503,12517567,8323263,4128959,191,2368548,10879,21887,32639,32597,32554,32512,2785024,5603072,8355584,8344576,8333824,8323072,8323114,8323156,8323199,5570687,2752639,127],Ei=Qr.length,g0=4278255615,x0=4278190335,y0=4278255360,v0=4294901760;function La(o,n,i){const l=Qr[Math.max(0,Math.min(Ei-1,i.head))],c=Qr[Math.max(0,Math.min(Ei-1,i.body))],u=Qr[Math.max(0,Math.min(Ei-1,i.legs))],m=Qr[Math.max(0,Math.min(Ei-1,i.feet))],h=new Uint32Array(n.data.buffer),p=o.data;for(let y=0;y<h.length;y++){const w=4*y;let x;switch(h[y]){case g0:x=l;break;case x0:x=c;break;case y0:x=u;break;case v0:x=m;break;default:continue}p[w+0]=p[w+0]*(x>>0&255)/255,p[w+1]=p[w+1]*(x>>8&255)/255,p[w+2]=p[w+2]*(x>>16&255)/255}}function Wd(o){const n=Qr[Math.max(0,Math.min(Ei-1,o))],i=n>>0&255,l=n>>8&255,c=n>>16&255;return`#${i.toString(16).padStart(2,"0")}${l.toString(16).padStart(2,"0")}${c.toString(16).padStart(2,"0")}`}function qt({label:o,value:n,onChange:i,min:l,max:c,readOnly:u,labelClassName:m}){return f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("span",{className:m??"text-[10px] text-emperia-muted",children:[o,":"]}),u?f.jsx("span",{className:"text-[10px] text-emperia-text font-mono w-14 text-right",children:n}):f.jsxs("div",{className:"flex items-center gap-0.5",children:[f.jsx("button",{onClick:()=>i==null?void 0:i(Math.max(l??0,n-1)),className:"w-4 h-4 flex items-center justify-center rounded bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-emperia-text text-[10px]",children:"-"}),f.jsx("input",{type:"number",value:n,min:l,max:c,onChange:h=>{const p=parseInt(h.target.value,10);isNaN(p)||i==null||i(Math.max(l??0,Math.min(c??9999,p)))},className:"w-10 px-1 py-0 bg-emperia-surface border border-emperia-border rounded text-[10px] text-emperia-text font-mono text-center outline-none focus:border-emperia-accent"}),f.jsx("button",{onClick:()=>i==null?void 0:i(Math.min(c??9999,n+1)),className:"w-4 h-4 flex items-center justify-center rounded bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-emperia-text text-[10px]",children:"+"})]})]})}function gn({onClick:o,disabled:n,children:i}){return f.jsx("button",{onClick:o,disabled:n,className:"w-5 h-5 flex items-center justify-center rounded bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-emperia-text text-[10px] disabled:opacity-30",children:i})}function tr(o,n,i,l,c,u,m,h){return(((((n*o.patternZ+c)*o.patternY+l)*o.patternX+i)*o.layers+u)*o.height+h)*o.width+m}const Dn=4294967296,Vd=2147483647,Yd=-2147483648,_i=268435455,w0=4294967295,xf=1073741823,Kd=192,Eo=12,k0=114,S0=768,b0=4096,_0=2,Ia=[4294967295,-Dn],Ci=[0,0],C0=[1,0],Do=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],Qe=D0(),Dr=A0();function Le(o,n=0){const i=[];if(i[o-1]=void 0,n!==0)for(let l=0;l<o;l++)i[l]=n;return i}function yf(o,n,i,l,c){if(!(n<0||l<0||c<0||n+c>o.length||l+c>i.length))if(o===i&&n<l&&l<n+c)for(let u=c-1;u>=0;u--)i[l+u]=o[n+u];else for(let u=0;u<c;u++)i[l+u]=o[n+u]}function On(o,n){return Qe[((o-n^-n)&2047)>>>2]}function ms(o,n){let i,l;for(n%=18446744073709552e3,o%=18446744073709552e3,i=n%Dn,l=Math.floor(o/Dn)*Dn,n=n-i+l,o=o-l+i;o<0;)o+=Dn,n-=Dn;for(;o>4294967295;)o-=Dn,n+=Dn;for(n=n%18446744073709552e3;n>9223372032559809e3;)n-=18446744073709552e3;for(;n<-9223372036854776e3;)n+=18446744073709552e3;return[o,n]}function Un(o,n){return ms(o[0]+n[0],o[1]+n[1])}function vf(o,n){return ms(o[0]-n[0],o[1]-n[1])}function ir(o,n){if(o[0]==n[0]&&o[1]==n[1])return 0;const i=o[1]<0,l=n[1]<0;return i&&!l?-1:!i&&l?1:vf(o,n)[1]<0?-1:1}function Gt(o){return o[0]>=2147483648?~~Math.max(Math.min(o[0]-Dn,Vd),Yd):~~Math.max(Math.min(o[0],Vd),Yd)}function Zr(o){return o>=0?[o,0]:[o+Dn,-Dn]}function E0(o,n){if(n&=63,n<=30){const l=1<<n;return ms(Math.floor(o[0]/l),o[1]/l)}const i=(1<<30)*(1<<n-30);return ms(Math.floor(o[0]/i),o[1]/i)}function Re(o){for(let n=o.length-1;n>=0;--n)o[n]=1024}function Lo(o){return o-=2,o<4?o:3}function Er(o){return o<4?0:o<10?o-3:o-6}function Ot(o){return{numBitLevels:o,models:Le(1<<o)}}function D0(){const o=[];for(let n=8;n>=0;--n){let i=1<<9-n-1,l=1<<9-n;for(let c=i;c<l;++c)o[c]=(n<<6)+(l-c<<6>>>9-n-1)}return o}function A0(){const o=[0,1];let n=2;for(let i=2;i<22;++i){let l=1<<(i>>1)-1;for(let c=0;c<l;++c,++n)o[n]=i}return o}class N0{constructor(n){$(this,"encoder",null);$(this,"decoder",null);$(this,"alive",0);$(this,"inBytesProcessed",[0,0]);$(this,"lzma");this.lzma=n}processChunk(){if(!this.alive)throw new Error("bad state");if(!this.encoder)throw new Error("No decoding");return this.lzma.codeOneBlock(),this.inBytesProcessed=this.encoder.processedInSize[0],this.encoder.finished[0]&&(this.lzma.releaseStreams(),this.alive=0),this.alive}}class Xd{constructor(n){$(this,"encoder",null);$(this,"decoder");$(this,"alive",0);$(this,"inBytesProcessed",[0,0]);this.decoder=n}processChunk(){if(!this.alive)throw new Error("Bad state");if(this.encoder)throw new Error("No encoding");const n=this.decoder.codeOneChunk();if(n===-1)throw new Error("Corrupted input");this.inBytesProcessed=this.decoder.nowPos64;const i=ir(this.decoder.outSize,Ci)>=0&&ir(this.decoder.nowPos64,this.decoder.outSize)>=0;return(n||i)&&(this.decoder.flush(),this.decoder.cleanup(),this.alive=0),this.alive}}class T0{constructor(n=null,i=4096){$(this,"buffer",null);$(this,"pos",0);$(this,"streamPos",0);$(this,"stream",null);$(this,"windowSize",0);$(this,"w",null);$(this,"buf",[]);this.w=n,this.stream=n,this.windowSize=i,this.buf=new Array(i),this.buffer=this.buf,this.pos=0,this.streamPos=0}copyBlock(n,i){if(this.buffer)for(let l=0;l<i;l++){let c=this.pos-n-1;c<0&&(c+=this.windowSize);const u=this.buffer[c];this.putByte(u)}}putByte(n){this.buffer&&(this.buffer[this.pos]=n,this.pos++,this.streamPos++,this.pos>=this.windowSize&&this.flush())}getByte(n){if(!this.buffer)return 0;let i=this.pos+n;return i<0?i+=this.windowSize:i>=this.windowSize&&(i-=this.windowSize),this.buffer[i]}flush(){if(this.w&&this.buffer&&this.pos>0){const n=this.buffer.slice(0,this.pos);this.w.write(n),this.pos=0}}isEmpty(){return this.streamPos===0}reset(){this.pos=0,this.streamPos=0,this.buffer&&this.buffer.fill(0)}}class B0{constructor(){$(this,"stream",null);$(this,"code",0);$(this,"rrange",0)}setStream(n){this.stream=n}init(){this.code=0,this.rrange=-1;for(let n=0;n<5;++n)this.code=this.code<<8|this.readFromStream()}decodeBit(n,i){let l,c=n[i];return l=(this.rrange>>>11)*c,(this.code^-2147483648)<(l^-2147483648)?(this.rrange=l,n[i]=c+(2048-c>>>5)<<16>>16,this.rrange&-16777216||(this.code=this.code<<8|this.readFromStream(),this.rrange<<=8),0):(this.rrange-=l,this.code-=l,n[i]=c-(c>>>5)<<16>>16,this.rrange&-16777216||(this.code=this.code<<8|this.readFromStream(),this.rrange<<=8),1)}decodeDirectBits(n){let i=0;for(let l=n;l!=0;l-=1){this.rrange>>>=1;let c=this.code-this.rrange>>>31;this.code-=this.rrange&c-1,i=i<<1|1-c,this.rrange&-16777216||(this.code=this.code<<8|this.readFromStream(),this.rrange<<=8)}return i}get currentCode(){return this.code}get currentRange(){return this.rrange}readFromStream(){if(!this.stream)return 0;if(this.stream.pos>=this.stream.count)return-1;let n;return this.stream.buf instanceof ArrayBuffer?n=new Uint8Array(this.stream.buf)[this.stream.pos++]:this.stream.buf instanceof Uint8Array?n=this.stream.buf[this.stream.pos++]:n=this.stream.buf[this.stream.pos++],n&255}}class I0{constructor(){$(this,"rangeDecoder");$(this,"outWindow");$(this,"state",0);$(this,"rep0",0);$(this,"rep1",0);$(this,"rep2",0);$(this,"rep3",0);$(this,"prevByte",0);$(this,"nowPos64",[0,0]);$(this,"outSize",[0,0]);$(this,"posStateMask",0);$(this,"dictSizeCheck",0);$(this,"matchDecoders",[]);$(this,"rep0LongDecoders",[]);$(this,"repDecoders",[]);$(this,"repG0Decoders",[]);$(this,"repG1Decoders",[]);$(this,"repG2Decoders",[]);$(this,"posDecoders",[]);$(this,"literalDecoder");$(this,"posSlotDecoders",[]);$(this,"lenDecoder");$(this,"repLenDecoder");$(this,"posAlignDecoder");$(this,"decoder");$(this,"encoder",null);$(this,"alive",0);$(this,"inBytesProcessed",[0,0]);this.rangeDecoder=new B0,this.outWindow=new T0(null,b0),this.matchDecoders=Le(Kd),this.rep0LongDecoders=Le(Kd),this.repDecoders=Le(Eo),this.repG0Decoders=Le(Eo),this.repG1Decoders=Le(Eo),this.repG2Decoders=Le(Eo),this.posDecoders=Le(k0),this.literalDecoder={coders:[],numPrevBits:0,numPosBits:0,posMask:0,init:()=>this.initLiteralDecoder()};for(let n=0;n<4;n++)this.posSlotDecoders[n]=Ot(6);this.lenDecoder=this.createLenDecoder(),this.repLenDecoder=this.createLenDecoder(),this.posAlignDecoder=Ot(4),this.decoder=this}get literalCoder(){return this.literalDecoder}createLenDecoder(){return{choice:Le(_0),lowCoder:[],midCoder:[],highCoder:Ot(8),numPosStates:0}}setDecoderProperties(n){if(n.length<5)return!1;const i=n[0]%9,l=Math.floor(n[0]/9),c=l%5,u=Math.floor(l/5);if(u>4)return!1;this.literalDecoder.numPrevBits=i,this.literalDecoder.numPosBits=c,this.literalDecoder.posMask=(1<<c)-1,this.posStateMask=(1<<u)-1;let m=0;for(let p=0;p<4;p++){const y=n[1+p]&255;m+=y<<p*8}this.dictSizeCheck=Math.max(m,1),m>0&&(this.outWindow.windowSize=Math.max(m,4096),this.outWindow.buffer=Le(this.outWindow.windowSize));const h=1<<this.literalDecoder.numPrevBits+this.literalDecoder.numPosBits;this.literalDecoder.coders=[];for(let p=0;p<h;p++)this.literalDecoder.coders[p]={decoders:Le(S0)};this.lenDecoder.numPosStates=1<<u,this.repLenDecoder.numPosStates=1<<u,this.lenDecoder.lowCoder=[],this.lenDecoder.midCoder=[],this.repLenDecoder.lowCoder=[],this.repLenDecoder.midCoder=[];for(let p=0;p<1<<u;p++)this.lenDecoder.lowCoder[p]=Ot(3),this.lenDecoder.midCoder[p]=Ot(3),this.repLenDecoder.lowCoder[p]=Ot(3),this.repLenDecoder.midCoder[p]=Ot(3);return!0}copyBlock(n){const i=this.outWindow,l=this.rep0;let c=i.pos-l-1;for(c<0&&(c+=i.windowSize);n!=0;n-=1)c>=i.windowSize&&(c=0),i.buffer[i.pos]=i.buffer[c],i.pos+=1,c+=1,i.pos>=i.windowSize&&this.flush()}putByte(n){this.outWindow.buffer[this.outWindow.pos]=n,this.outWindow.pos+=1,this.outWindow.pos>=this.outWindow.windowSize&&this.flush()}getByte(n){const i=this.outWindow;let l=i.pos-n-1;return l<0&&(l+=i.windowSize),i.buffer[l]}getDecoder(n,i){const l=n&this.literalDecoder.posMask,c=(i&255)>>>8-this.literalDecoder.numPrevBits,u=(l<<this.literalDecoder.numPrevBits)+c;return this.literalDecoder.coders[u]}initLiteralDecoder(){let n=1<<this.literalDecoder.numPrevBits+this.literalDecoder.numPosBits;for(let i=0;i<n;++i)for(let l=0;l<this.literalDecoder.coders[i].decoders.length;l++)this.literalDecoder.coders[i].decoders[l]=1024}init(){this.outWindow.streamPos=0,this.outWindow.pos=0,Re(this.matchDecoders),Re(this.rep0LongDecoders),Re(this.repDecoders),Re(this.repG0Decoders),Re(this.repG1Decoders),Re(this.repG2Decoders),Re(this.posDecoders),this.initLiteralDecoder();for(let n=0;n<4;++n)Re(this.posSlotDecoders[n].models);this.initLenDecoder(this.lenDecoder),this.initLenDecoder(this.repLenDecoder),Re(this.posAlignDecoder.models),this.initRangeDecoder()}initLenDecoder(n){Re(n.choice);for(let i=0;i<n.numPosStates;++i)Re(n.lowCoder[i].models),Re(n.midCoder[i].models);Re(n.highCoder.models)}outWindowReleaseStream(){this.flush(),this.outWindow.stream=null}decodeBit(n,i){return this.rangeDecoder.decodeBit(n,i)}decodeDirectBits(n){return this.rangeDecoder.decodeDirectBits(n)}initRangeDecoder(){this.rangeDecoder.init()}rangeBitTreeDecoder(n){let i,l=1;for(i=n.numBitLevels;i!=0;i-=1)l=(l<<1)+this.decodeBit(n.models,l);return l-(1<<n.numBitLevels)}reverseDecode(n,i,l){let c=0;for(let u=0,m=1,h;u<l;++u)h=this.decodeBit(n,i+m),m<<=1,m+=h,c|=h<<u;return c}reverseDecodeAlignDecoder(){let n=0;for(let i=1,l=0,c;l<this.posAlignDecoder.numBitLevels;++l)c=this.decodeBit(this.posAlignDecoder.models,i),i<<=1,i+=c,n|=c<<l;return n}decodeNormalWithRangeDecoder(n){let i=1;do i=i<<1|this.decodeBit(n.decoders,i);while(i<256);return i<<24>>24}decodeWithMatchByteWithRangeDecoder(n,i){let l,c,u=1;do if(c=i>>7&1,i<<=1,l=this.decodeBit(n.decoders,(1+c<<8)+u),u=u<<1|l,c!=l){for(;u<256;)u=u<<1|this.decodeBit(n.decoders,u);break}while(u<256);return u<<24>>24}decodeLenWithRangeDecoder(n,i){if(!this.decodeBit(n.choice,0))return this.rangeBitTreeDecoder(n.lowCoder[i]);let l=8;return this.decodeBit(n.choice,1)?l+=8+this.rangeBitTreeDecoder(n.highCoder):l+=this.rangeBitTreeDecoder(n.midCoder[i]),l}codeOneChunk(){let n,i,l,c,u,m=Gt(this.nowPos64)&this.posStateMask;if(!this.decodeBit(this.matchDecoders,(this.state<<4)+m))n=this.getDecoder(Gt(this.nowPos64),this.prevByte),this.state<7?this.prevByte=this.decodeNormalWithRangeDecoder(n):this.prevByte=this.decodeWithMatchByteWithRangeDecoder(n,this.getByte(this.rep0)),this.putByte(this.prevByte),this.state=Er(this.state),this.nowPos64=Un(this.nowPos64,[1,0]);else{if(this.decodeBit(this.repDecoders,this.state))l=0,this.decodeBit(this.repG0Decoders,this.state)?(this.decodeBit(this.repG1Decoders,this.state)?(this.decodeBit(this.repG2Decoders,this.state)?(i=this.rep3,this.rep3=this.rep2):i=this.rep2,this.rep2=this.rep1):i=this.rep1,this.rep1=this.rep0,this.rep0=i):this.decodeBit(this.rep0LongDecoders,(this.state<<4)+m)||(this.state=this.state<7?9:11,l=1),l||(l=this.decodeLenWithRangeDecoder(this.repLenDecoder,m)+2,this.state=this.state<7?8:11);else if(this.rep3=this.rep2,this.rep2=this.rep1,this.rep1=this.rep0,l=2+this.decodeLenWithRangeDecoder(this.lenDecoder,m),this.state=this.state<7?7:10,u=this.rangeBitTreeDecoder(this.posSlotDecoders[Lo(l)]),u>=4){if(c=(u>>1)-1,this.rep0=(2|u&1)<<c,u<14)this.rep0+=this.reverseDecode(this.posDecoders,this.rep0-u-1,c);else if(this.rep0+=this.decodeDirectBits(c-4)<<4,this.rep0+=this.reverseDecodeAlignDecoder(),this.rep0<0)return this.rep0==-1?1:-1}else this.rep0=u;if(ir([this.rep0,0],this.nowPos64)>=0||this.rep0>=this.dictSizeCheck)return-1;this.copyBlock(l),this.nowPos64=Un(this.nowPos64,[l,0]),this.prevByte=this.getByte(0)}return 0}setupForDecoding(n,i,l){this.rangeDecoder.setStream(n),this.outSize=i,this.outWindowReleaseStream(),this.outWindow.stream=l,this.init(),this.state=0,this.rep0=0,this.rep1=0,this.rep2=0,this.rep3=0,this.outSize=i,this.nowPos64=[0,0],this.prevByte=0,this.decoder=this,this.encoder=null,this.alive=1}processChunk(){if(!this.alive)throw new Error("Bad state");if(this.encoder)throw new Error("No encoding");const n=this.codeOneChunk();if(n===-1)throw new Error("Corrupted input");const i=ir(this.outSize,[0,0])>=0&&ir(this.nowPos64,this.outSize)>=0;return(n||i)&&(this.flush(),this.outWindowReleaseStream(),this.rangeDecoder.setStream(null),this.alive=0),this.alive}writeToOutput(n,i,l,c){const u=n.count+c;if(u>n.buf.length){const m=Math.max(n.buf.length*2,u),h=new Array(m);for(let p=0;p<n.count;p++)h[p]=n.buf[p];n.buf=h}for(let m=0;m<c;m++)n.buf[n.count+m]=i[l+m];n.count+=c}isBufferWithCount(n){const i=n;return!!i&&Array.isArray(i.buf)&&typeof i.count=="number"&&typeof i.write=="function"}flush(){const n=this.outWindow.pos-this.outWindow.streamPos;if(n){if(this.outWindow.stream&&this.outWindow.buffer){const i=this.outWindow.stream;if(this.isBufferWithCount(i))this.writeToOutput(i,this.outWindow.buffer,this.outWindow.streamPos,n);else if(typeof i.write=="function"){const l=this.outWindow.buffer.slice(this.outWindow.streamPos,this.outWindow.streamPos+n);i.write(l)}}this.outWindow.pos>=this.outWindow.windowSize&&(this.outWindow.pos=0),this.outWindow.streamPos=this.outWindow.pos}}cleanup(){this.outWindow.stream=null,this.rangeDecoder.stream=null}}class j0{constructor(){$(this,"choice",Le(2));$(this,"lowCoder",[]);$(this,"midCoder",[]);$(this,"highCoder",Ot(8));$(this,"tableSize",0);$(this,"prices",[]);$(this,"counters",[]);for(let n=0;n<16;++n)this.lowCoder[n]=Ot(3),this.midCoder[n]=Ot(3)}init(n){Re(this.choice);for(let i=0;i<n;++i)Re(this.lowCoder[i].models),Re(this.midCoder[i].models);Re(this.highCoder.models)}encode(n,i,l){n<8?(l.encodeBit(this.choice,0,0),l.encodeBitTree(this.lowCoder[i],n)):(n-=8,l.encodeBit(this.choice,0,1),n<8?(l.encodeBit(this.choice,1,0),l.encodeBitTree(this.midCoder[i],n)):(l.encodeBit(this.choice,1,1),l.encodeBitTree(this.highCoder,n-8)))}encodeWithUpdate(n,i,l){this.encode(n,i,l),this.counters&&(this.counters[i]-=1)==0&&(this.counters[i]=this.tableSize)}getPrice(n,i){return this.prices[i*272+n]}initPriceTable(){this.prices=[],this.counters=[]}setTableSize(n){this.tableSize=n}setTableSizeAndInitCounters(n,i){if(this.tableSize=n,this.counters)for(let l=0;l<i;++l)this.counters[l]=n}getTableSize(){return this.tableSize}updateTables(n){(!this.prices||!this.counters)&&this.initPriceTable();for(let i=0;i<n;++i)this.setPrices(i,this.tableSize,this.prices,0),this.counters&&(this.counters[i]=this.tableSize)}getBitTreePrice(n,i){let l,c,u=1,m=0;for(c=n.numBitLevels;c!=0;)c-=1,l=i>>>c&1,m+=this.getBitPrice(n.models[u],l),u=(u<<1)+l;return m}getBitPrice(n,i){return On(n,i)}setPrices(n,i,l,c){const u=this.getBitPrice(this.choice[0],0),m=this.getBitPrice(this.choice[0],1),h=m+this.getBitPrice(this.choice[1],0),p=m+this.getBitPrice(this.choice[1],1);let y=0;const w=c+n*272;for(y=0;y<8;++y){if(y>=i)return;l[w+y]=u+this.getBitTreePrice(this.lowCoder[n],y)}for(;y<16;++y){if(y>=i)return;l[w+y]=h+this.getBitTreePrice(this.midCoder[n],y-8)}for(;y<i;++y)l[w+y]=p+this.getBitTreePrice(this.highCoder,y-8-8)}}class F0{constructor(){$(this,"coders");this.coders=Le(768,1024)}decodeNormal(n){let i=1;for(;i<256;){const l=n.decodeBit(this.coders,i);i=i<<1|l}return i&255}decodeWithMatchByte(n,i){let l=i,c=1;for(;c<256;){const u=l>>7&1;l<<=1;const m=n.decodeBit(this.coders,(1+u<<8)+c);if(c=c<<1|m,u!==m){for(;c<256;){const h=n.decodeBit(this.coders,c);c=c<<1|h}break}}return c&255}encode(n,i){let l=1;for(let c=7;c>=0;c--){const u=i>>c&1;n.encodeBit(this.coders,l,u),l=l<<1|u}}encodeMatched(n,i,l){let c=i,u=1,m=!0;for(let h=7;h>=0;h--){const p=l>>h&1;let y=u;if(m){const w=c>>h&1;y+=1+w<<8,m=w===p}n.encodeBit(this.coders,y,p),u=u<<1|p}}getPrice(n,i,l){let c=i,u=0,m=1,h=7;if(n)for(;h>=0;){const p=c>>h&1,y=l>>h&1;if(u+=On(this.coders[1+p<<8+m],y),m=m<<1|y,p!==y){h--;break}h--}for(;h>=0;){const p=l>>h&1;u+=On(this.coders[m],p),m=m<<1|p,h--}return u}reset(){this.coders.fill(1024)}get decoders(){return this.coders}}class L0{constructor(n,i){$(this,"_coders");$(this,"_numPrevBits");$(this,"_posMask");const l=1<<i+n;this._coders=[],this._numPrevBits=i,this._posMask=(1<<n)-1;for(let c=0;c<l;c++)this._coders[c]=new F0}getSubCoder(n,i){return this._coders[((n&this._posMask)<<this._numPrevBits)+(i>>8-this._numPrevBits)]}reset(){this._coders.forEach(n=>n.reset())}get numPrevBits(){return this._numPrevBits}get numPosBits(){return Math.log2(this._posMask+1)}get posMask(){return this._posMask}get coders(){return this._coders}}const Ao=new Map;function P0(o){return o<<6}function Pa(o,n){const i=`${o.numBitLevels}-${n}`;if(Ao.has(i))return Ao.get(i);let l=0,c=1;for(let u=o.numBitLevels;u>0;u--){const m=n>>>u-1&1;l+=On(o.models[c],m),c=(c<<1)+m}return Ao.size<1e4&&Ao.set(i,l),l}class M0{constructor(){$(this,"state",0);$(this,"previousByte",0);$(this,"position",[0,0]);$(this,"repDistances",[0,0,0,0]);$(this,"longestMatchLength",0);$(this,"longestMatchWasFound",!1);$(this,"additionalOffset",0);$(this,"isMatch",Le(192));$(this,"isRep",Le(12));$(this,"isRepG0",Le(12));$(this,"isRepG1",Le(12));$(this,"isRepG2",Le(12));$(this,"isRep0Long",Le(192))}initModels(){Re(this.isMatch),Re(this.isRep),Re(this.isRepG0),Re(this.isRepG1),Re(this.isRepG2),Re(this.isRep0Long)}updateRepDistances(n,i){if(i===0)this.repDistances[3]=this.repDistances[2],this.repDistances[2]=this.repDistances[1],this.repDistances[1]=this.repDistances[0],this.repDistances[0]=n;else{const l=this.repDistances[i];for(let c=i;c>0;c--)this.repDistances[c]=this.repDistances[c-1];this.repDistances[0]=l}}}class R0{constructor(){$(this,"posSlotEncoder",[]);$(this,"posEncoders",Le(114));$(this,"posAlignEncoder");for(let n=0;n<4;n++)this.posSlotEncoder[n]=Ot(6);this.posAlignEncoder=Ot(4)}init(){for(const n of this.posSlotEncoder)Re(n.models);Re(this.posEncoders),Re(this.posAlignEncoder.models)}encodePosition(n,i,l){const c=this.getPosSlot(n);if(l.encodeBitTree(this.posSlotEncoder[i],c),c>=4){const u=(c>>1)-1,m=(2|c&1)<<u,h=n-m;c<14?this.encodeReverseBits(h,u,l):(l.encodeDirectBits(h>>4,u-4),l.encodeBitTree(this.posAlignEncoder,h&15))}}getPositionPrice(n,i){const l=this.getPosSlot(n);let c=Pa(this.posSlotEncoder[i],l);if(l>=4){const u=(l>>1)-1,m=(2|l&1)<<u,h=n-m;l<14?c+=this.getReverseBitsPrice(h,u):(c+=P0(u-4),c+=Pa(this.posAlignEncoder,h&15))}return c}getPosSlot(n){return n<4?n:n<1<<20?Dr[n>>6]+12:Dr[n>>26]+52}encodeReverseBits(n,i,l){let c=1;for(let u=0;u<i;u++){const m=n&1;l.encodeBit(this.posEncoders,c,m),c=c<<1|m,n>>>=1}}getReverseBitsPrice(n,i){let l=0,c=1;for(let u=0;u<i;u++){const m=n&1;l+=On(this.posEncoders[c],m),c=c<<1|m,n>>>=1}return l}}class O0{constructor(){$(this,"encoderState",new M0);$(this,"positionEncoder",new R0);$(this,"_state",0);$(this,"_previousByte",0);$(this,"_distTableSize",0);$(this,"_longestMatchWasFound",0);$(this,"_optimumEndIndex",0);$(this,"_optimumCurrentIndex",0);$(this,"_additionalOffset",0);$(this,"_dictionarySize",0);$(this,"_matchFinder",null);$(this,"_dictionarySizePrev",0);$(this,"_numFastBytes",0);$(this,"_numLiteralContextBits",0);$(this,"_numLiteralPosStateBits",0);$(this,"_posStateBits",0);$(this,"_posStateMask",0);$(this,"_needReleaseMFStream",0);$(this,"_inStream",null);$(this,"_finished",0);$(this,"nowPos64",[0,0]);$(this,"_repDistances",Le(4));$(this,"_optimum",[]);$(this,"_rangeEncoder",{stream:{buf:[],count:0},rrange:0,cache:0,low:[0,0],cacheSize:0,position:[0,0],encodeBit:()=>{},encodeBitTree:()=>{},encodeDirectBits:()=>{}});$(this,"_isMatch",Le(192));$(this,"_isRep",Le(12));$(this,"_isRepG0",Le(12));$(this,"_isRepG1",Le(12));$(this,"_isRepG2",Le(12));$(this,"_isRep0Long",Le(192));$(this,"_posSlotEncoder",[]);$(this,"_posEncoders",Le(114));$(this,"_posAlignEncoder",null);$(this,"_lenEncoder",null);$(this,"_repMatchLenEncoder",null);$(this,"_literalEncoder",null);$(this,"_matchDistances",[]);$(this,"_posSlotPrices",[]);$(this,"_distancesPrices",[]);$(this,"_alignPrices",Le(16));$(this,"_matchPriceCount",0);$(this,"_alignPriceCount",0);$(this,"reps",Le(4));$(this,"repLens",Le(4));$(this,"processedInSize",[[0,0]]);$(this,"processedOutSize",[[0,0]]);$(this,"finished",[0]);$(this,"properties",Le(5));$(this,"tempPrices",Le(128));$(this,"_longestMatchLength",0);$(this,"_matchFinderType",1);$(this,"_numDistancePairs",0);$(this,"_numFastBytesPrev",-1);$(this,"backRes",0)}baseInit(){this._state=0,this._previousByte=0;for(let n=0;n<4;++n)this._repDistances[n]=0}getOptimum(){return this._optimum}getBackRes(){return this.backRes}setBackRes(n){this.backRes=n}init(){this.baseInit(),this.encoderState.initModels(),this.positionEncoder.init(),this._optimum=[];for(let n=0;n<4096;n++)this._optimum[n]={};this.initEncoderState(),Re(this._isMatch),Re(this._isRep0Long),Re(this._isRep),Re(this._isRepG0),Re(this._isRepG1),Re(this._isRepG2),Re(this._posEncoders),this.initLiteralEncoder();for(let n=0;n<4;++n)Re(this._posSlotEncoder[n].models);this._lenEncoder&&this._lenEncoder.init(1<<this._posStateBits),this._repMatchLenEncoder&&this._repMatchLenEncoder.init(1<<this._posStateBits),this._posAlignEncoder&&Re(this._posAlignEncoder.models),this._longestMatchWasFound=0,this._optimumEndIndex=0,this._optimumCurrentIndex=0,this._additionalOffset=0}initEncoderState(){this._rangeEncoder.low=[0,0],this._rangeEncoder.rrange=4294967295,this._rangeEncoder.cacheSize=1,this._rangeEncoder.cache=0,this._rangeEncoder.position=[0,0]}initLiteralEncoder(){const n=1<<this._literalEncoder.numPrevBits+this._literalEncoder.numPosBits;for(let i=0;i<n;++i)Re(this._literalEncoder.coders[i].decoders)}createOptimumStructures(){for(let n=0;n<4096;++n)this._optimum[n]={};for(let n=0;n<4;++n)this._posSlotEncoder[n]=Ot(6)}createLenPriceTableEncoder(){const n=new j0;return n.initPriceTable(),n}createLiteralEncoderEncoder2(){return{decoders:Le(768)}}createLiteralEncoder(){this._literalEncoder!=null&&this._literalEncoder.numPrevBits==this._numLiteralContextBits&&this._literalEncoder.numPosBits==this._numLiteralPosStateBits||(this._literalEncoder=new L0(this._numLiteralPosStateBits,this._numLiteralContextBits))}initialize(){this._lenEncoder=this.createLenPriceTableEncoder(),this._repMatchLenEncoder=this.createLenPriceTableEncoder(),this._posAlignEncoder=Ot(4),this._optimum=[],this.createOptimumStructures(),this.createLiteralEncoder(),this.init()}configure(n){this.setDictionarySize(1<<n.searchDepth),this._numFastBytes=n.filterStrength,this._matchFinderType=n.modeIndex,this._numLiteralContextBits=3,this._numLiteralPosStateBits=0,this._posStateBits=2,this._posStateMask=3}setDictionarySize(n){this._dictionarySize=n;let i=0;for(;n>1<<i;++i);this._distTableSize=i*2}encodeBit(n,i,l){const c=this._rangeEncoder;let u,m=n[i];u=(c.rrange>>>11)*m,l?(c.low=Un(c.low,this.and64(Zr(u),[4294967295,0])),c.rrange-=u,n[i]=m-(m>>>5)<<16>>16):(c.rrange=u,n[i]=m+(2048-m>>>5)<<16>>16),c.rrange&-16777216||(c.rrange<<=8,this.shiftLow())}encodeBitTree(n,i){let l,c,u=1;for(c=n.numBitLevels;c!=0;)c-=1,l=i>>>c&1,this.encodeBit(n.models,u,l),u=u<<1|l}encodeLiteral(n,i){let l,c=1;for(let u=7;u>=0;--u)l=i>>u&1,this.encodeBit(n.decoders,c,l),c=c<<1|l}encodeMatched(n,i,l){let c,u,m,h=!0,p=1;for(let y=7;y>=0;--y)c=l>>y&1,m=p,h&&(u=i>>y&1,m+=1+u<<8,h=u===c),this.encodeBit(n.decoders,m,c),p=p<<1|c}encodeLength(n,i,l){n.encode(i,l,this)}encodeDirectBits(n,i){const l=this._rangeEncoder;for(let c=i-1;c>=0;c-=1)l.rrange>>>=1,(n>>>c&1)==1&&(l.low=Un(l.low,Zr(l.rrange))),l.rrange&-16777216||(l.rrange<<=8,this.shiftLow())}reverseEncode(n){const i=this._posAlignEncoder;if(!i)return;let l,c=1;for(let u=0;u<i.numBitLevels;++u)l=n&1,this.encodeBit(i.models,c,l),c=c<<1|l,n>>=1}reverseEncodeRange(n,i,l){let c,u=1;for(let m=0;m<i;++m)c=l&1,this.encodeBit(this._posEncoders,n+u,c),u=u<<1|c,l>>=1}writeEndMarker(n){this.encodeBit(this._isMatch,(this._state<<4)+n,1),this.encodeBit(this._isRep,this._state,0),this._state=this._state<7?7:10,this.encodeLength(this._lenEncoder,0,n);const i=63,l=Lo(2);this.encodeBitTree(this._posSlotEncoder[l],i),this.encodeDirectBits(67108863,26),this.reverseEncode(15)}encodeLengthWithPriceUpdate(n,i,l){n.encodeWithUpdate(i,l,this)}and64(n,i){const l=~~Math.max(Math.min(n[1]/4294967296,2147483647),-2147483648)&~~Math.max(Math.min(i[1]/4294967296,2147483647),-2147483648),c=Gt(n)&Gt(i);let u=l*4294967296,m=c;return c<0&&(m+=4294967296),[m,u]}shru64(n,i){i&=63;let l=this.pwrAsDouble(i),c=ms(Math.floor(n[0]/l),n[1]/l);return n[1]<0&&(c=Un(c,this.shl64([2,0],63-i))),c}shl64(n,i){let l,c,u,m;if(i&=63,n[0]==0&&n[1]==-9223372036854776e3)return i?[0,0]:n;if(n[1]<0)throw new Error("Neg");return m=this.pwrAsDouble(i),c=n[1]*m%18446744073709552e3,u=n[0]*m,l=u-u%4294967296,c+=l,u-=l,c>=9223372036854776e3&&(c-=18446744073709552e3),[u,c]}pwrAsDouble(n){return n<=30?1<<n:this.pwrAsDouble(30)*this.pwrAsDouble(n-30)}shiftLow(){const n=this._rangeEncoder,i=Gt(this.shru64(n.low,32));if(i!=0||ir(n.low,[4278190080,0])<0){n.position=Un(n.position,Zr(n.cacheSize));let l=n.cache;do this.writeToStream(n.stream,l+i),l=255;while((n.cacheSize-=1)!=0);n.cache=Gt(n.low)>>>24}n.cacheSize+=1,n.low=this.shl64(this.and64(n.low,[16777215,0]),8)}writeToStream(n,i){if(n){if(n.count>=n.buf.length){const l=Math.max(n.buf.length*2,n.count+1),c=new Array(l);for(let u=0;u<n.count;u++)c[u]=n.buf[u];n.buf=c}n.buf[n.count++]=i<<24>>24}}initRangeEncoder(){this._rangeEncoder.position=[0,0],this._rangeEncoder.low=[0,0],this._rangeEncoder.rrange=-1,this._rangeEncoder.cacheSize=1,this._rangeEncoder.cache=0}fillAlignPrices(){for(let n=0;n<16;++n)this._alignPrices[n]=this.reverseGetPrice(this._posAlignEncoder,n);this._alignPriceCount=0}fillDistancesPrices(){let n,i,l,c,u,m;for(let h=4;h<128;++h)c=this.getPosSlot(h),l=(c>>1)-1,n=(2|c&1)<<l,this.tempPrices[h]=this.reverseGetPriceArray(this._posEncoders,n-c-1,l,h-n);for(let h=0;h<4;++h){for(i=this._posSlotEncoder[h],u=h<<6,c=0;c<this._distTableSize;c+=1)this._posSlotPrices[u+c]=this.rangeCoder_Encoder_GetPrice_1(i,c);for(c=14;c<this._distTableSize;c+=1)this._posSlotPrices[u+c]+=(c>>1)-1-4<<6;m=h*128;for(let p=0;p<4;++p)this._distancesPrices[m+p]=this._posSlotPrices[u+p];for(let p=4;p<128;++p)this._distancesPrices[m+p]=this._posSlotPrices[u+this.getPosSlot(p)]+this.tempPrices[p]}this._matchPriceCount=0}getPosSlot(n){return n<2048?Dr[n]:n<2097152?Dr[n>>10]+20:Dr[n>>20]+40}reverseGetPrice(n,i){let l,c=1,u=0;for(let m=n.numBitLevels;m!=0;m-=1)l=i&1,i>>>=1,u+=this.getPrice(n.models[c],l),c=c<<1|l;return u}reverseGetPriceArray(n,i,l,c){let u,m=1,h=0;for(let p=l;p!=0;p-=1)u=c&1,c>>>=1,h+=Qe[((n[i+m]-u^-u)&2047)>>>2],m=m<<1|u;return h}getPrice(n,i){return On(n,i)}rangeCoder_Encoder_GetPrice_1(n,i){return Pa(n,i)}createEncoderStructures(){this._optimum=[];for(let n=0;n<4096;n++)this._optimum[n]={};for(let n=0;n<4096;++n)this._optimum[n]={};this._posSlotEncoder=new Array(4);for(let n=0;n<4;++n)this._posSlotEncoder[n]=Ot(6)}createMatchFinderAndStructures(){if(!this._matchFinder){const n={};let i=4;this._matchFinderType||(i=2),n.HASH_ARRAY=i>2,n.HASH_ARRAY?(n.kNumHashDirectBytes=0,n.kMinMatchCheck=4,n.kFixHashSize=66560):(n.kNumHashDirectBytes=2,n.kMinMatchCheck=3,n.kFixHashSize=0),n._cyclicBufferSize=0,n._cyclicBufferPos=0,n._streamPos=0,n._cutValue=255,n._matchMaxLen=0,n._streamEndWasReached=0,n._pos=0,n._posLimit=0,n._son=[],n._hash=[],n._bufferBase=[],n._blockSize=0,n._keepSizeAfter=0,n._keepSizeBefore=0,n._pointerToLastSafePosition=0,this._matchFinder=n}this.createLiteralEncoder(),!(this._dictionarySize==this._dictionarySizePrev&&this._numFastBytesPrev==this._numFastBytes)&&(this._dictionarySizePrev=this._dictionarySize,this._numFastBytesPrev=this._numFastBytes)}getSubCoderUtility(n,i){const c=(n&this._literalEncoder.posMask)<<this._literalEncoder.numPrevBits,u=8-this._literalEncoder.numPrevBits,m=(i&255)>>>u,h=c+m;return this._literalEncoder.coders[h]}}class U0{constructor(n){$(this,"matchFinder");this.matchFinder=n}getIndexByte(n){return this.matchFinder._bufferBase[this.matchFinder._bufferOffset+this.matchFinder._pos+n]}getMatchLen(n,i,l){this.matchFinder._streamEndWasReached&&this.matchFinder._pos+n+l>this.matchFinder._streamPos&&(l=this.matchFinder._streamPos-(this.matchFinder._pos+n)),++i;let c;const u=this.matchFinder._bufferOffset+this.matchFinder._pos+n;for(c=0;c<l&&this.matchFinder._bufferBase[u+c]==this.matchFinder._bufferBase[u+c-i];++c);return c}getNumAvailableBytes(){return this.matchFinder._streamPos-this.matchFinder._pos}moveBlock(){let n=this.matchFinder._bufferOffset+this.matchFinder._pos-this.matchFinder._keepSizeBefore;n>0&&--n;const i=this.matchFinder._bufferOffset+this.matchFinder._streamPos-n;for(let l=0;l<i;++l)this.matchFinder._bufferBase[l]=this.matchFinder._bufferBase[n+l];this.matchFinder._bufferOffset-=n}movePos(){this.matchFinder._pos+=1,this.matchFinder._pos>this.matchFinder._posLimit&&(this.matchFinder._bufferOffset+this.matchFinder._pos>this.matchFinder._pointerToLastSafePosition&&this.moveBlock(),this.readBlock())}readBlock(){if(!this.matchFinder._streamEndWasReached)for(;;){const n=-this.matchFinder._bufferOffset+this.matchFinder._blockSize-this.matchFinder._streamPos;if(!n)return;const i=this.readFromStream(this.matchFinder._bufferOffset+this.matchFinder._streamPos,n);if(i==-1){this.matchFinder._posLimit=this.matchFinder._streamPos,this.matchFinder._bufferOffset+this.matchFinder._posLimit>this.matchFinder._pointerToLastSafePosition&&(this.matchFinder._posLimit=this.matchFinder._pointerToLastSafePosition-this.matchFinder._bufferOffset),this.matchFinder._streamEndWasReached=1;return}this.matchFinder._streamPos+=i,this.matchFinder._streamPos>=this.matchFinder._pos+this.matchFinder._keepSizeAfter&&(this.matchFinder._posLimit=this.matchFinder._streamPos-this.matchFinder._keepSizeAfter)}}reduceOffsets(n){this.matchFinder._bufferOffset+=n,this.matchFinder._posLimit-=n,this.matchFinder._pos-=n,this.matchFinder._streamPos-=n}readFromStream(n,i){const l=this.matchFinder._stream,c=this.matchFinder._bufferBase;if(l.pos>=l.count)return-1;let u;return l.buf instanceof Uint8Array?u=Array.from(l.buf):l.buf instanceof ArrayBuffer?u=Array.from(new Uint8Array(l.buf)):u=l.buf,i=Math.min(i,l.count-l.pos),yf(u,l.pos,c,n,i),l.pos+=i,i}}function z0(o,n,i,l){return~~((o+n+i+l)/2)+256}function H0(o,n){const i=n+1;if(o._cyclicBufferSize!==i){const l=(o._cyclicBufferSize=i)*2;o._son=Le(l)}}function G0(o,n){let i=65536,l=0;return n&&(i=o-1,i|=i>>1,i|=i>>2,i|=i>>4,i|=i>>8,i>>=1,i|=65535,i>16777216&&(i>>=1),l=i,i+=1),{hashMask:l,hashSizeSum:i}}function $0(o){return 16+(o>>1)}function W0(o){return o<xf}const V0={1:{searchDepth:16,filterStrength:64,modeIndex:0},2:{searchDepth:20,filterStrength:64,modeIndex:0},3:{searchDepth:19,filterStrength:64,modeIndex:1},4:{searchDepth:20,filterStrength:64,modeIndex:1},5:{searchDepth:21,filterStrength:128,modeIndex:1},6:{searchDepth:22,filterStrength:128,modeIndex:1},7:{searchDepth:23,filterStrength:128,modeIndex:1},8:{searchDepth:24,filterStrength:255,modeIndex:1},9:{searchDepth:25,filterStrength:255,modeIndex:1}};var ve,ht,Ue,U,En,Y,kf,Sf,Ma,No,bf,_f,Cf,Ef,Df,Af,Nf,Ra,Tf,Bf,If,jf,Ff,fs,Oa,Lf,Pf,Mf,Rf,Ua,Of,Uf,zf,Hf,To,Gf,za,Kr,$f,Ha,Bo,Ga,Wf,Xr,hs,$a,Vf,Yf,Kf,Xf;class wf{constructor(){Vr(this,Y);Vr(this,ve);Vr(this,ht);Vr(this,Ue,null);Vr(this,U);Vr(this,En);bi(this,ve,new O0),bi(this,ht,new I0),bi(this,U,de(this,Y,kf).call(this)),bi(this,En,de(this,Y,Sf).call(this))}writeHeaderProperties(){v(this,ve).properties[0]=(v(this,ve)._posStateBits*5+v(this,ve)._numLiteralPosStateBits)*9+v(this,ve)._numLiteralContextBits&255;for(let i=0;i<4;i++)v(this,ve).properties[1+i]=v(this,ve)._dictionarySize>>8*i&255;de(this,Y,_f).call(this,v(this,U).output,v(this,ve).properties,0,5)}GetPosSlot2(n){return n<131072?Dr[n>>6]+12:n<134217728?Dr[n>>16]+32:Dr[n>>26]+52}ReverseEncode(n,i,l){let c,u=1;for(let m=0;m<i;++m)c=l&1,v(this,U).chunker.encoder.encodeBit(v(this,U).chunker.encoder._posEncoders,n+u,c),u=u<<1|c,l>>=1}encodeString(n){let i,l=[],c=0,u=n.length;de(this,Y,Cf).call(this,n,0,u,l,0);for(let h=0;h<u;++h)i=l[h],i>=1&&i<=127?++c:!i||i>=128&&i<=2047?c+=2:c+=3;const m=[];c=0;for(let h=0;h<u;++h)i=l[h],i>=1&&i<=127?m[c++]=i<<24>>24:!i||i>=128&&i<=2047?(m[c++]=(192|i>>6&31)<<24>>24,m[c++]=(128|i&63)<<24>>24):(m[c++]=(224|i>>12&15)<<24>>24,m[c++]=(128|i>>6&63)<<24>>24,m[c++]=(128|i&63)<<24>>24);return m}compress(n,i=5){const l=V0[i];for(de(this,Y,Af).call(this,n,l);v(this,U).chunker.processChunk(););const c=de(this,Y,No).call(this,v(this,U).output);return new Int8Array(c)}compressString(n,i=5){const l=this.encodeString(n);return this.compress(new Uint8Array(l),i)}decompress(n){for(de(this,Y,Ra).call(this,n);v(this,En).chunker.processChunk(););return de(this,Y,No).call(this,v(this,En).output)}decompressString(n){for(de(this,Y,Ra).call(this,n);v(this,En).chunker.processChunk(););const i=de(this,Y,No).call(this,v(this,En).output),l=de(this,Y,Xf).call(this,i);return typeof l=="string"?l:String.fromCharCode(...l)}codeOneBlock(){de(this,Y,Of).call(this)}releaseStreams(){de(this,Y,Wf).call(this)}}ve=new WeakMap,ht=new WeakMap,Ue=new WeakMap,U=new WeakMap,En=new WeakMap,Y=new WeakSet,kf=function(){return{chunker:new N0(this),output:{buf:Le(32),count:0,write:()=>{}}}},Sf=function(){return{chunker:new Xd(v(this,ht)),output:{buf:Le(32),count:0,write:()=>{}}}},Ma=function(n){if(n.pos>=n.count)return-1;let i;return n.buf instanceof ArrayBuffer?i=new Uint8Array(n.buf)[n.pos++]:(n.buf instanceof Uint8Array,i=n.buf[n.pos++]),i&255},No=function(n){return n.buf.slice(0,n.count)},bf=function(n,i){if(n){if(n.count>=n.buf.length){const l=Math.max(n.buf.length*2,n.count+1),c=new Array(l);for(let u=0;u<n.count;u++)c[u]=n.buf[u];n.buf=c}n.buf[n.count++]=i<<24>>24}},_f=function(n,i,l,c){const u=n.count+c;if(u>n.buf.length){const m=Math.max(n.buf.length*2,u),h=new Array(m);for(let p=0;p<n.count;p++)h[p]=n.buf[p];n.buf=h}yf(i,l,n.buf,n.count,c),n.count+=c},Cf=function(n,i,l,c,u){for(let m=i;m<l;++m)c[u++]=n.charCodeAt(m)},Ef=function(n){v(this,ve).initialize(),v(this,ve).configure(n)},Df=function(n,i,l){if(ir(i,Ia)<0)throw new Error("invalid length "+i);v(this,U).length_0=i,de(this,Y,zf).call(this),de(this,Y,Ef).call(this,l),this.writeHeaderProperties();for(let c=0;c<64;c+=8)de(this,Y,bf).call(this,v(this,U).output,Gt(E0(i,c))&255);v(this,ve)._needReleaseMFStream=0,v(this,ve)._inStream=n,v(this,ve)._finished=0,de(this,Y,Uf).call(this),v(this,ve)._rangeEncoder.stream=v(this,U).output,v(this,ve).init(),v(this,ve).fillDistancesPrices(),v(this,ve).fillAlignPrices(),v(this,ve)._lenEncoder.setTableSize(v(this,ve)._numFastBytes+1-2),v(this,ve)._lenEncoder.updateTables(1<<v(this,ve)._posStateBits),v(this,ve)._repMatchLenEncoder.setTableSize(v(this,ve)._numFastBytes+1-2),v(this,ve)._repMatchLenEncoder.updateTables(1<<v(this,ve)._posStateBits),v(this,ve).nowPos64=Ci,v(this,U).chunker.encoder=v(this,ve),v(this,U).chunker.alive=1},Af=function(n,i){const l=n instanceof ArrayBuffer?n.byteLength:n.length,c=Math.max(32,Math.ceil(l*1.2));v(this,U).output={buf:Le(c),count:0,write:()=>{}};const u={pos:0,buf:n instanceof ArrayBuffer?new Uint8Array(n):n,count:n instanceof ArrayBuffer?new Uint8Array(n).length:n.length};de(this,Y,Df).call(this,u,Zr(n instanceof ArrayBuffer?n.byteLength:n.length),i)},Nf=function(n){let i="",l=[],c,u;for(let h=0;h<5;++h){if(c=de(this,Y,Ma).call(this,n),c==-1)throw new Error("truncated input");l[h]=c<<24>>24}if(v(this,ht).setDecoderProperties(l)?0:1)throw new Error("corrupted input");for(let h=0;h<64;h+=8){if(c=de(this,Y,Ma).call(this,n),c==-1)throw new Error("truncated input");c=c.toString(16),c.length==1&&(c="0"+c),i=c+""+i}/^0+$|^f+$/i.test(i)?v(this,U).length_0=Ia:(u=parseInt(i,16),u>w0?v(this,U).length_0=Ia:v(this,U).length_0=Zr(u)),v(this,En).chunker=de(this,Y,Mf).call(this,n,v(this,U).length_0)},Ra=function(n){const i=n instanceof ArrayBuffer?n.byteLength:n.length,l=32,c=i*2,u=Math.max(l,c);v(this,En).output={buf:Le(u),count:0,write:()=>{}};const m={buf:n,pos:0,count:n instanceof ArrayBuffer?n.byteLength:n.length};de(this,Y,Nf).call(this,m)},Tf=function(n,i,l){let c;v(this,ve)._matchFinder._keepSizeBefore=n,v(this,ve)._matchFinder._keepSizeAfter=i,c=n+i+l,(v(this,ve)._matchFinder._bufferBase==null||v(this,ve)._matchFinder._blockSize!=c)&&(v(this,ve)._matchFinder._bufferBase=Le(c),v(this,ve)._matchFinder._blockSize=c),v(this,ve)._matchFinder._pointerToLastSafePosition=v(this,ve)._matchFinder._blockSize-i},Bf=function(){const n=v(this,U).chunker.encoder._matchFinder;let i;n._pos+=1,n._pos>n._posLimit&&(i=n._bufferOffset+n._pos,i>n._pointerToLastSafePosition&&v(this,Ue).moveBlock(),v(this,Ue).readBlock())},If=function(n,i){const l=v(this,ve)._dictionarySize,c=v(this,ve)._numFastBytes;if(W0(l)){v(this,ve)._matchFinder._cutValue=$0(c);const u=z0(l,n,c,i);de(this,Y,Tf).call(this,l+n,c+i,u),v(this,ve)._matchFinder._matchMaxLen=c,H0(v(this,ve)._matchFinder,l);const{hashMask:m,hashSizeSum:h}=G0(l,v(this,ve)._matchFinder.HASH_ARRAY);if(v(this,ve)._matchFinder.HASH_ARRAY){v(this,ve)._matchFinder._hashMask=m;const p=h+v(this,ve)._matchFinder.kFixHashSize;p!==v(this,ve)._matchFinder._hashSizeSum&&(v(this,ve)._matchFinder._hashSizeSum=p,v(this,ve)._matchFinder._hash=Le(p))}else h!==v(this,ve)._matchFinder._hashSizeSum&&(v(this,ve)._matchFinder._hashSizeSum=h,v(this,ve)._matchFinder._hash=Le(h))}},jf=function(){let n,i,l,c,u,m,h,p,y,w,x,b,S,_,M,I,P,T,L,A,X;const H=v(this,U).chunker.encoder._matchFinder,Z=v(this,U).chunker.encoder._matchDistances;if(H._pos+H._matchMaxLen<=H._streamPos)_=H._matchMaxLen;else if(_=H._streamPos-H._pos,_<H.kMinMatchCheck)return de(this,Y,fs).call(this),0;for(P=0,M=H._pos>H._cyclicBufferSize?H._pos-H._cyclicBufferSize:0,i=H._bufferOffset+H._pos,I=1,p=0,y=0,H.HASH_ARRAY?(X=Do[H._bufferBase[i]&255]^H._bufferBase[i+1]&255,p=X&1023,X^=(H._bufferBase[i+2]&255)<<8,y=X&65535,w=(X^Do[H._bufferBase[i+3]&255]<<5)&H._hashMask):w=H._bufferBase[i]&255^(H._bufferBase[i+1]&255)<<8,l=H._hash[H.kFixHashSize+w]||0,H.HASH_ARRAY&&(c=H._hash[p]||0,u=H._hash[1024+y]||0,H._hash[p]=H._pos,H._hash[1024+y]=H._pos,c>M&&H._bufferBase[H._bufferOffset+c]==H._bufferBase[i]&&(Z[P++]=I=2,Z[P++]=H._pos-c-1),u>M&&H._bufferBase[H._bufferOffset+u]==H._bufferBase[i]&&(u==c&&(P-=2),Z[P++]=I=3,Z[P++]=H._pos-u-1,c=u),P!=0&&c==l&&(P-=2,I=1)),H._hash[H.kFixHashSize+w]=H._pos,L=(H._cyclicBufferPos<<1)+1,A=H._cyclicBufferPos<<1,b=S=H.kNumHashDirectBytes,H.kNumHashDirectBytes!=0&&l>M&&H._bufferBase[H._bufferOffset+l+H.kNumHashDirectBytes]!=H._bufferBase[i+H.kNumHashDirectBytes]&&(Z[P++]=I=H.kNumHashDirectBytes,Z[P++]=H._pos-l-1),n=H._cutValue;;){if(l<=M||n==0){n-=1,H._son[L]=H._son[A]=0;break}if(h=H._pos-l,m=(h<=H._cyclicBufferPos?H._cyclicBufferPos-h:H._cyclicBufferPos-h+H._cyclicBufferSize)<<1,T=H._bufferOffset+l,x=b<S?b:S,H._bufferBase[T+x]==H._bufferBase[i+x]){for(;(x+=1)!=_&&H._bufferBase[T+x]==H._bufferBase[i+x];);if(I<x&&(Z[P++]=I=x,Z[P++]=h-1,x==_)){H._son[A]=H._son[m],H._son[L]=H._son[m+1];break}}(H._bufferBase[T+x]&255)<(H._bufferBase[i+x]&255)?(H._son[A]=l,A=m+1,l=H._son[A],S=x):(H._son[L]=l,L=m,l=H._son[L],b=x)}return de(this,Y,fs).call(this),P},Ff=function(){v(this,U).chunker.encoder._matchFinder._bufferOffset=0,v(this,U).chunker.encoder._matchFinder._pos=0,v(this,U).chunker.encoder._matchFinder._streamPos=0,v(this,U).chunker.encoder._matchFinder._streamEndWasReached=0,v(this,Ue).readBlock(),v(this,U).chunker.encoder._matchFinder._cyclicBufferPos=0,v(this,Ue).reduceOffsets(-1)},fs=function(){let n;const i=v(this,U).chunker.encoder._matchFinder;(i._cyclicBufferPos+=1)>=i._cyclicBufferSize&&(i._cyclicBufferPos=0),de(this,Y,Bf).call(this),i._pos==xf&&(n=i._pos-i._cyclicBufferSize,de(this,Y,Oa).call(this,i._cyclicBufferSize*2,n),de(this,Y,Oa).call(this,i._hashSizeSum,n),v(this,Ue).reduceOffsets(n))},Oa=function(n,i){const l=v(this,U).chunker.encoder._matchFinder._son;for(let c=0,u;c<n;++c)u=l[c]||0,u<=i?u=0:u-=i,l[c]=u},Lf=function(n,i){n.HASH_ARRAY=i>2,n.HASH_ARRAY?(n.kNumHashDirectBytes=0,n.kMinMatchCheck=4,n.kFixHashSize=66560):(n.kNumHashDirectBytes=2,n.kMinMatchCheck=3,n.kFixHashSize=0)},Pf=function(n){const i=v(this,U).chunker.encoder._matchFinder;let l,c,u,m,h,p,y,w,x,b,S,_,M,I,P,T,L;do{if(i._pos+i._matchMaxLen<=i._streamPos)_=i._matchMaxLen;else if(_=i._streamPos-i._pos,_<i.kMinMatchCheck){de(this,Y,fs).call(this);continue}for(M=i._pos>i._cyclicBufferSize?i._pos-i._cyclicBufferSize:0,c=i._bufferOffset+i._pos,i.HASH_ARRAY?(L=Do[i._bufferBase[c]&255]^i._bufferBase[c+1]&255,p=L&1023,i._hash[p]=i._pos,L^=(i._bufferBase[c+2]&255)<<8,y=L&65535,i._hash[1024+y]=i._pos,w=(L^Do[i._bufferBase[c+3]&255]<<5)&i._hashMask):w=i._bufferBase[c]&255^(i._bufferBase[c+1]&255)<<8,u=i._hash[i.kFixHashSize+w],i._hash[i.kFixHashSize+w]=i._pos,P=(i._cyclicBufferPos<<1)+1,T=i._cyclicBufferPos<<1,b=S=i.kNumHashDirectBytes,l=i._cutValue;;){if(u<=M||l==0){l-=1,i._son[P]=i._son[T]=0;break}if(h=i._pos-u,m=(h<=i._cyclicBufferPos?i._cyclicBufferPos-h:i._cyclicBufferPos-h+i._cyclicBufferSize)<<1,I=i._bufferOffset+u,x=b<S?b:S,i._bufferBase[I+x]==i._bufferBase[c+x]){for(;(x+=1)!=_&&i._bufferBase[I+x]==i._bufferBase[c+x];);if(x==_){i._son[T]=i._son[m],i._son[P]=i._son[m+1];break}}(i._bufferBase[I+x]&255)<(i._bufferBase[c+x]&255)?(i._son[T]=u,T=m+1,u=i._son[T],S=x):(i._son[P]=u,P=m,u=i._son[P],b=x)}de(this,Y,fs).call(this)}while((n-=1)!=0)},Mf=function(n,i){v(this,ht).rangeDecoder.stream=n,v(this,ht).flush(),v(this,ht).outWindow.stream=null,v(this,ht).outWindow.stream=v(this,En).output,de(this,Y,Rf).call(this),v(this,ht).state=0,v(this,ht).rep0=0,v(this,ht).rep1=0,v(this,ht).rep2=0,v(this,ht).rep3=0,v(this,ht).outSize=i,v(this,ht).nowPos64=Ci,v(this,ht).prevByte=0;const l=new Xd(v(this,ht));return l.alive=1,l},Rf=function(){v(this,ht).init()},Ua=function(n){const i=v(this,U).chunker.encoder;let l,c,u,m;i._optimumEndIndex=n,u=i._optimum[n].posPrev,c=i._optimum[n].backPrev;do i._optimum[n].prev1IsChar&&(de(this,Y,$a).call(this,i._optimum[u]),i._optimum[u].posPrev=u-1,i._optimum[n].prev2&&(i._optimum[u-1].prev1IsChar=0,i._optimum[u-1].posPrev=i._optimum[n].posPrev2,i._optimum[u-1].backPrev=i._optimum[n].backPrev2)),m=u,l=c,c=i._optimum[m].backPrev,u=i._optimum[m].posPrev,i._optimum[m].backPrev=l,i._optimum[m].posPrev=n,n=m;while(n>0);return i.backRes=i._optimum[0].backPrev,i._optimumCurrentIndex=i._optimum[0].posPrev,i._optimumCurrentIndex},Of=function(){let n,i,l,c,u,m,h,p,y,w,x,b,S,_;if(v(this,U).chunker.encoder.processedInSize[0]=Ci,v(this,U).chunker.encoder.processedOutSize[0]=Ci,v(this,U).chunker.encoder.finished[0]=1,S=v(this,U).chunker.encoder.nowPos64,v(this,U).chunker.encoder._inStream&&(v(this,U).chunker.encoder._matchFinder._stream=v(this,U).chunker.encoder._inStream,de(this,Y,Ff).call(this),v(this,U).chunker.encoder._needReleaseMFStream=1,v(this,U).chunker.encoder._inStream=null),!v(this,U).chunker.encoder._finished){if(v(this,U).chunker.encoder._finished=1,ir(v(this,U).chunker.encoder.nowPos64,Ci)===0){if(!v(this,Ue).getNumAvailableBytes()){de(this,Y,To).call(this,Gt(v(this,U).chunker.encoder.nowPos64));return}de(this,Y,Bo).call(this),b=Gt(v(this,U).chunker.encoder.nowPos64)&v(this,U).chunker.encoder._posStateMask,v(this,U).chunker.encoder.encodeBit(v(this,U).chunker.encoder._isMatch,(v(this,U).chunker.encoder._state<<4)+b,0),v(this,U).chunker.encoder._state=Er(v(this,U).chunker.encoder._state),l=v(this,Ue).getIndexByte(-v(this,U).chunker.encoder._additionalOffset),v(this,U).chunker.encoder.encodeLiteral(de(this,Y,Xr).call(this,Gt(v(this,U).chunker.encoder.nowPos64),v(this,U).chunker.encoder._previousByte),l),v(this,U).chunker.encoder._previousByte=l,v(this,U).chunker.encoder._additionalOffset-=1,v(this,U).chunker.encoder.nowPos64=Un(v(this,U).chunker.encoder.nowPos64,C0)}if(!v(this,Ue).getNumAvailableBytes()){de(this,Y,To).call(this,Gt(v(this,U).chunker.encoder.nowPos64));return}for(;;){if(m=de(this,Y,Gf).call(this,Gt(v(this,U).chunker.encoder.nowPos64)),y=v(this,U).chunker.encoder.backRes,b=Gt(v(this,U).chunker.encoder.nowPos64)&v(this,U).chunker.encoder._posStateMask,i=(v(this,U).chunker.encoder._state<<4)+b,m==1&&y==-1)v(this,U).chunker.encoder.encodeBit(v(this,U).chunker.encoder._isMatch,i,0),l=v(this,Ue).getIndexByte(-v(this,U).chunker.encoder._additionalOffset),_=de(this,Y,Xr).call(this,Gt(v(this,U).chunker.encoder.nowPos64),v(this,U).chunker.encoder._previousByte),v(this,U).chunker.encoder._state<7?v(this,U).chunker.encoder.encodeLiteral(_,l):(p=v(this,Ue).getIndexByte(-v(this,U).chunker.encoder._repDistances[0]-1-v(this,U).chunker.encoder._additionalOffset),v(this,U).chunker.encoder.encodeMatched(_,p,l)),v(this,U).chunker.encoder._previousByte=l,v(this,U).chunker.encoder._state=Er(v(this,U).chunker.encoder._state);else{if(v(this,U).chunker.encoder.encodeBit(v(this,U).chunker.encoder._isMatch,i,1),y<4){if(v(this,U).chunker.encoder.encodeBit(v(this,U).chunker.encoder._isRep,v(this,U).chunker.encoder._state,1),y?(v(this,U).chunker.encoder.encodeBit(v(this,U).chunker.encoder._isRepG0,v(this,U).chunker.encoder._state,1),y==1?v(this,U).chunker.encoder.encodeBit(v(this,U).chunker.encoder._isRepG1,v(this,U).chunker.encoder._state,0):(v(this,U).chunker.encoder.encodeBit(v(this,U).chunker.encoder._isRepG1,v(this,U).chunker.encoder._state,1),v(this,U).chunker.encoder.encodeBit(v(this,U).chunker.encoder._isRepG2,v(this,U).chunker.encoder._state,y-2))):(v(this,U).chunker.encoder.encodeBit(v(this,U).chunker.encoder._isRepG0,v(this,U).chunker.encoder._state,0),m==1?v(this,U).chunker.encoder.encodeBit(v(this,U).chunker.encoder._isRep0Long,i,0):v(this,U).chunker.encoder.encodeBit(v(this,U).chunker.encoder._isRep0Long,i,1)),m==1?v(this,U).chunker.encoder._state=v(this,U).chunker.encoder._state<7?9:11:(v(this,U).chunker.encoder.encodeLength(v(this,U).chunker.encoder._repMatchLenEncoder,m-2,b),v(this,U).chunker.encoder._state=v(this,U).chunker.encoder._state<7?8:11),c=v(this,U).chunker.encoder._repDistances[y],y!=0){const M=v(this,U).chunker.encoder;for(let I=y;I>=1;--I)M._repDistances[I]=M._repDistances[I-1];M._repDistances[0]=c}}else{v(this,U).chunker.encoder.encodeBit(v(this,U).chunker.encoder._isRep,v(this,U).chunker.encoder._state,0),v(this,U).chunker.encoder._state=v(this,U).chunker.encoder._state<7?7:10,v(this,U).chunker.encoder.encodeLength(v(this,U).chunker.encoder._lenEncoder,m-2,b),y-=4,x=v(this,U).chunker.encoder.getPosSlot(y),h=Lo(m),v(this,U).chunker.encoder.encodeBitTree(v(this,U).chunker.encoder._posSlotEncoder[h],x),x>=4&&(u=(x>>1)-1,n=(2|x&1)<<u,w=y-n,x<14?v(this,U).chunker.encoder.reverseEncodeRange(n-x-1,u,w):(v(this,U).chunker.encoder.encodeDirectBits(w>>4,u-4),v(this,U).chunker.encoder.reverseEncode(w&15),v(this,U).chunker.encoder._alignPriceCount+=1)),c=y;const M=v(this,U).chunker.encoder;for(let I=3;I>=1;--I)M._repDistances[I]=M._repDistances[I-1];M._repDistances[0]=c,M._matchPriceCount+=1}v(this,U).chunker.encoder._previousByte=v(this,Ue).getIndexByte(m-1-v(this,U).chunker.encoder._additionalOffset)}if(v(this,U).chunker.encoder._additionalOffset-=m,v(this,U).chunker.encoder.nowPos64=Un(v(this,U).chunker.encoder.nowPos64,Zr(m)),!v(this,U).chunker.encoder._additionalOffset){if(v(this,U).chunker.encoder._matchPriceCount>=128&&v(this,U).chunker.encoder.fillDistancesPrices(),v(this,U).chunker.encoder._alignPriceCount>=16&&de(this,Y,Hf).call(this,v(this,U).chunker.encoder),v(this,U).chunker.encoder.processedInSize[0]=v(this,U).chunker.encoder.nowPos64,v(this,U).chunker.encoder.processedOutSize[0]=de(this,Y,Kf).call(this),!v(this,Ue).getNumAvailableBytes()){de(this,Y,To).call(this,Gt(v(this,U).chunker.encoder.nowPos64));return}if(ir(vf(v(this,U).chunker.encoder.nowPos64,S),[4096,0])>=0){v(this,U).chunker.encoder._finished=0,v(this,U).chunker.encoder.finished[0]=0;return}}}}},Uf=function(){let n,i;v(this,ve)._matchFinder||(n={},i=4,v(this,ve)._matchFinderType||(i=2),de(this,Y,Lf).call(this,n,i),v(this,ve)._matchFinder=n,bi(this,Ue,new U0(n))),v(this,ve).createLiteralEncoder(),!(v(this,ve)._dictionarySize==v(this,ve)._dictionarySizePrev&&v(this,ve)._numFastBytesPrev==v(this,ve)._numFastBytes)&&(de(this,Y,If).call(this,4096,274),v(this,ve)._dictionarySizePrev=v(this,ve)._dictionarySize,v(this,ve)._numFastBytesPrev=v(this,ve)._numFastBytes)},zf=function(){for(let n=0;n<4096;++n)v(this,ve)._optimum[n]={};for(let n=0;n<4;++n)v(this,ve)._posSlotEncoder[n]=Ot(6)},Hf=function(n){for(let i=0;i<16;++i)n._alignPrices[i]=de(this,Y,Yf).call(this,n._posAlignEncoder,i);n._alignPriceCount=0},To=function(n){de(this,Y,Ga).call(this),v(this,U).chunker.encoder.writeEndMarker(n&v(this,U).chunker.encoder._posStateMask);for(let i=0;i<5;++i)v(this,U).chunker.encoder.shiftLow()},Gf=function(n){let i,l,c,u,m,h,p,y,w,x,b,S,_,M,I,P,T,L,A,X,H,Z,ie,he,be,pe,fe,Q,re,xe,ce,ue,N,se,K,C,E,W,q,oe,ee,me,De,ye,Oe,xt,an,rt,yt;const j=v(this,U).chunker.encoder;if(j._optimumEndIndex!=j._optimumCurrentIndex)return yt=j._optimum[j._optimumCurrentIndex].posPrev-j._optimumCurrentIndex,j.backRes=j._optimum[j._optimumCurrentIndex].backPrev,j._optimumCurrentIndex=j._optimum[j._optimumCurrentIndex].posPrev,yt;if(j._optimumCurrentIndex=j._optimumEndIndex=0,j._longestMatchWasFound?(b=j._longestMatchLength,j._longestMatchWasFound=0):b=de(this,Y,Bo).call(this),be=j._numDistancePairs,ie=v(this,Ue).getNumAvailableBytes()+1,ie<2)return j.backRes=-1,1;ie>273&&(ie=273),W=0;for(let F=0;F<4;++F)j.reps[F]=j._repDistances[F],j.repLens[F]=v(this,Ue).getMatchLen(-1,j.reps[F],273),j.repLens[F]>j.repLens[W]&&(W=F);if(j.repLens[W]>=j._numFastBytes)return j.backRes=W,yt=j.repLens[W],de(this,Y,Ha).call(this,yt-1),yt;if(b>=j._numFastBytes)return j.backRes=v(this,U).chunker.encoder._matchDistances[be-1]+4,de(this,Y,Ha).call(this,b-1),b;if(p=v(this,Ue).getIndexByte(-1),I=v(this,Ue).getIndexByte(-j._repDistances[0]-1-1),b<2&&p!=I&&j.repLens[W]<2)return j.backRes=-1,1;if(j._optimum[0].state=j._state,ue=n&j._posStateMask,j._optimum[1].price=Qe[j._isMatch[(j._state<<4)+ue]>>>2]+de(this,Y,hs).call(this,de(this,Y,Xr).call(this,n,j._previousByte),j._state>=7,I,p),de(this,Y,$a).call(this,j._optimum[1]),P=Qe[2048-j._isMatch[(j._state<<4)+ue]>>>2],E=P+Qe[2048-j._isRep[j._state]>>>2],I==p&&(q=E+de(this,Y,$f).call(this,ue),q<j._optimum[1].price&&(j._optimum[1].price=q,de(this,Y,Vf).call(this,j._optimum[1]))),x=b>=j.repLens[W]?b:j.repLens[W],x<2)return j.backRes=j._optimum[1].backPrev,1;j._optimum[1].posPrev=0,j._optimum[0].backs0=j.reps[0],j._optimum[0].backs1=j.reps[1],j._optimum[0].backs2=j.reps[2],j._optimum[0].backs3=j.reps[3],w=x;do j._optimum[w].price=_i,w-=1;while(w>=2);for(let F=0;F<4;++F)if(C=j.repLens[F],!(C<2)){se=E+de(this,Y,Kr).call(this,F,j._state,ue);do u=se+j._repMatchLenEncoder.getPrice(C-2,ue),re=j._optimum[C],u<re.price&&(re.price=u,re.posPrev=0,re.backPrev=F,re.prev1IsChar=0);while((C-=1)>=2)}if(Z=P+Qe[j._isRep[j._state]>>>2],w=j.repLens[0]>=2?j.repLens[0]+1:2,w<=b){for(pe=0;w>j._matchDistances[pe];)pe+=2;for(;y=j._matchDistances[pe+1],u=Z+de(this,Y,za).call(this,y,w,ue),re=j._optimum[w],u<re.price&&(re.price=u,re.posPrev=0,re.backPrev=y+4,re.prev1IsChar=0),!(w==j._matchDistances[pe]&&(pe+=2,pe==be));w+=1);}for(i=0;;){if(++i,i==x)return de(this,Y,Ua).call(this,i);if(T=de(this,Y,Bo).call(this),be=j._numDistancePairs,T>=j._numFastBytes)return j._longestMatchLength=T,j._longestMatchWasFound=1,de(this,Y,Ua).call(this,i);if(n+=1,ce=j._optimum[i].posPrev,j._optimum[i].prev1IsChar?(ce-=1,j._optimum[i].prev2?(ee=j._optimum[j._optimum[i].posPrev2].state,j._optimum[i].backPrev2<4?ee=ee<7?8:11:ee=ee<7?7:10):ee=j._optimum[ce].state,ee=Er(ee)):ee=j._optimum[ce].state,ce==i-1?j._optimum[i].backPrev?ee=Er(ee):ee=ee<7?9:11:(j._optimum[i].prev1IsChar&&j._optimum[i].prev2?(ce=j._optimum[i].posPrev2,xe=j._optimum[i].backPrev2,ee=ee<7?8:11):(xe=j._optimum[i].backPrev,xe<4?ee=ee<7?8:11:ee=ee<7?7:10),Q=j._optimum[ce],xe<4?xe?xe==1?(j.reps[0]=Q.backs1,j.reps[1]=Q.backs0,j.reps[2]=Q.backs2,j.reps[3]=Q.backs3):xe==2?(j.reps[0]=Q.backs2,j.reps[1]=Q.backs0,j.reps[2]=Q.backs1,j.reps[3]=Q.backs3):(j.reps[0]=Q.backs3,j.reps[1]=Q.backs0,j.reps[2]=Q.backs1,j.reps[3]=Q.backs2):(j.reps[0]=Q.backs0,j.reps[1]=Q.backs1,j.reps[2]=Q.backs2,j.reps[3]=Q.backs3):(j.reps[0]=xe-4,j.reps[1]=Q.backs0,j.reps[2]=Q.backs1,j.reps[3]=Q.backs2)),j._optimum[i].state=ee,j._optimum[i].backs0=j.reps[0],j._optimum[i].backs1=j.reps[1],j._optimum[i].backs2=j.reps[2],j._optimum[i].backs3=j.reps[3],h=j._optimum[i].price,p=v(this,Ue).getIndexByte(-1),I=v(this,Ue).getIndexByte(-j.reps[0]-1-1),ue=n&j._posStateMask,l=h+Qe[j._isMatch[(ee<<4)+ue]>>>2]+de(this,Y,hs).call(this,de(this,Y,Xr).call(this,n,v(this,Ue).getIndexByte(-2)),ee>=7,I,p),X=j._optimum[i+1],L=0,l<X.price&&(X.price=l,X.posPrev=i,X.backPrev=-1,X.prev1IsChar=0,L=1),P=h+Qe[2048-j._isMatch[(ee<<4)+ue]>>>2],E=P+Qe[2048-j._isRep[ee]>>>2],I==p&&!(X.posPrev<i&&!X.backPrev)&&(q=E+(Qe[j._isRepG0[ee]>>>2]+Qe[j._isRep0Long[(ee<<4)+ue]>>>2]),q<=X.price&&(X.price=q,X.posPrev=i,X.backPrev=0,X.prev1IsChar=0,L=1)),he=v(this,Ue).getNumAvailableBytes()+1,he=4095-i<he?4095-i:he,ie=he,!(ie<2)){if(ie>j._numFastBytes&&(ie=j._numFastBytes),!L&&I!=p&&(De=Math.min(he-1,j._numFastBytes),_=v(this,Ue).getMatchLen(0,j.reps[0],De),_>=2)){for(me=Er(ee),N=n+1&j._posStateMask,H=l+Qe[2048-j._isMatch[(me<<4)+N]>>>2]+Qe[2048-j._isRep[me]>>>2],fe=i+1+_;x<fe;)j._optimum[x+=1].price=_i;u=H+(ye=j._repMatchLenEncoder.getPrice(_-2,N),ye+de(this,Y,Kr).call(this,0,me,N)),re=j._optimum[fe],u<re.price&&(re.price=u,re.posPrev=i+1,re.backPrev=0,re.prev1IsChar=1,re.prev2=0)}for(oe=2,K=0;K<4;++K)if(S=v(this,Ue).getMatchLen(-1,j.reps[K],ie),!(S<2)){M=S;do{for(;x<i+S;)j._optimum[x+=1].price=_i;u=E+(Oe=j._repMatchLenEncoder.getPrice(S-2,ue),Oe+de(this,Y,Kr).call(this,K,ee,ue)),re=j._optimum[i+S],u<re.price&&(re.price=u,re.posPrev=i,re.backPrev=K,re.prev1IsChar=0)}while((S-=1)>=2);if(S=M,K||(oe=S+1),S<he&&(De=Math.min(he-1-S,j._numFastBytes),_=v(this,Ue).getMatchLen(S,j.reps[K],De),_>=2)){for(me=ee<7?8:11,N=n+S&j._posStateMask,c=E+(xt=j._repMatchLenEncoder.getPrice(S-2,ue),xt+de(this,Y,Kr).call(this,K,ee,ue))+Qe[j._isMatch[(me<<4)+N]>>>2]+de(this,Y,hs).call(this,de(this,Y,Xr).call(this,n+S,v(this,Ue).getIndexByte(S-1-1)),!0,v(this,Ue).getIndexByte(S-1-(j.reps[K]+1)),v(this,Ue).getIndexByte(S-1)),me=Er(me),N=n+S+1&j._posStateMask,A=c+Qe[2048-j._isMatch[(me<<4)+N]>>>2],H=A+Qe[2048-j._isRep[me]>>>2],fe=S+1+_;x<i+fe;)j._optimum[x+=1].price=_i;u=H+(an=j._repMatchLenEncoder.getPrice(_-2,N),an+de(this,Y,Kr).call(this,0,me,N)),re=j._optimum[i+fe],u<re.price&&(re.price=u,re.posPrev=i+S+1,re.backPrev=0,re.prev1IsChar=1,re.prev2=1,re.posPrev2=i,re.backPrev2=K)}}if(T>ie){for(T=ie,be=0;T>j._matchDistances[be];be+=2);j._matchDistances[be]=T,be+=2}if(T>=oe){for(Z=P+Qe[j._isRep[ee]>>>2];x<i+T;)j._optimum[x+=1].price=_i;for(pe=0;oe>j._matchDistances[pe];)pe+=2;for(S=oe;;S+=1)if(m=j._matchDistances[pe+1],u=Z+de(this,Y,za).call(this,m,S,ue),re=j._optimum[i+S],u<re.price&&(re.price=u,re.posPrev=i,re.backPrev=m+4,re.prev1IsChar=0),S==j._matchDistances[pe]){if(S<he&&(De=Math.min(he-1-S,j._numFastBytes),_=v(this,Ue).getMatchLen(S,m,De),_>=2)){for(me=ee<7?7:10,N=n+S&j._posStateMask,c=u+Qe[j._isMatch[(me<<4)+N]>>>2]+de(this,Y,hs).call(this,de(this,Y,Xr).call(this,n+S,v(this,Ue).getIndexByte(S-1-1)),!0,v(this,Ue).getIndexByte(S-(m+1)-1),v(this,Ue).getIndexByte(S-1)),me=Er(me),N=n+S+1&j._posStateMask,A=c+Qe[2048-j._isMatch[(me<<4)+N]>>>2],H=A+Qe[2048-j._isRep[me]>>>2],fe=S+1+_;x<i+fe;)j._optimum[x+=1].price=_i;u=H+(rt=j._repMatchLenEncoder.getPrice(_-2,N),rt+de(this,Y,Kr).call(this,0,me,N)),re=j._optimum[i+fe],u<re.price&&(re.price=u,re.posPrev=i+S+1,re.backPrev=0,re.prev1IsChar=1,re.prev2=1,re.posPrev2=i,re.backPrev2=m+4)}if(pe+=2,pe==be)break}}}}return 1},za=function(n,i,l){const c=v(this,U).chunker.encoder;let u,m=Lo(i);if(n<128)u=c._distancesPrices[m*128+n];else{const h=(m<<6)+this.GetPosSlot2(n);u=c._posSlotPrices[h]+c._alignPrices[n&15]}return u+c._lenEncoder.getPrice(i-2,l)},Kr=function(n,i,l){const c=v(this,U).chunker.encoder;let u;return n?(u=Qe[2048-v(this,U).chunker.encoder._isRepG0[i]>>>2],n==1?u+=Qe[v(this,U).chunker.encoder._isRepG1[i]>>>2]:(u+=Qe[2048-v(this,U).chunker.encoder._isRepG1[i]>>>2],u+=On(v(this,U).chunker.encoder._isRepG2[i],n-2))):(u=Qe[c._isRepG0[i]>>>2],u+=Qe[2048-v(this,U).chunker.encoder._isRep0Long[(i<<4)+l]>>>2]),u},$f=function(n){const i=v(this,U).chunker.encoder,l=Qe[i._isRepG0[i._state]>>>2],c=Qe[i._isRep0Long[(i._state<<4)+n]>>>2];return l+c},Ha=function(n){n>0&&(de(this,Y,Pf).call(this,n),v(this,U).chunker.encoder._additionalOffset+=n)},Bo=function(){let n=0;const i=v(this,U).chunker.encoder;return i._numDistancePairs=de(this,Y,jf).call(this),i._numDistancePairs>0&&(n=i._matchDistances[i._numDistancePairs-2],n==i._numFastBytes&&(n+=v(this,Ue).getMatchLen(n-1,i._matchDistances[i._numDistancePairs-1],273-n))),i._additionalOffset+=1,n},Ga=function(){const n=v(this,U).chunker.encoder;n._matchFinder&&n._needReleaseMFStream&&(n._matchFinder._stream=null,n._needReleaseMFStream=0)},Wf=function(){de(this,Y,Ga).call(this),v(this,U).chunker.encoder._rangeEncoder.stream=null},Xr=function(n,i){return{decoders:v(this,U).chunker.encoder._literalEncoder.getSubCoder(n,i).decoders}},hs=function(n,i,l,c){let u,m=1,h=7,p,y=0;if(i){for(;h>=0;--h)if(p=l>>h&1,u=c>>h&1,y+=On(n.decoders[(1+p<<8)+m],u),m=m<<1|u,p!=u){--h;break}}for(;h>=0;--h)u=c>>h&1,y+=On(n.decoders[m],u),m=m<<1|u;return y},$a=function(n){n.backPrev=-1,n.prev1IsChar=0},Vf=function(n){n.backPrev=0,n.prev1IsChar=0},Yf=function(n,i){let l,c=1,u=0;for(let m=n.numBitLevels;m!=0;m-=1)l=i&1,i>>>=1,u+=On(n.models[c],l),c=c<<1|l;return u},Kf=function(){const n=Un(Zr(v(this,U).chunker.encoder._rangeEncoder.cacheSize),v(this,U).chunker.encoder._rangeEncoder.position);return Un(n,[4,0])},Xf=function(n){let i=0,l,c,u,m=n.length,h=[],p=[];for(let y=0;y<m;++y,++i){if(l=n[y]&255,l&128)if((l&224)==192){if(y+1>=m)return String.fromCharCode(...n);if(c=n[++y]&255,(c&192)!=128)return String.fromCharCode(...n);p[i]=(l&31)<<6|c&63}else if((l&240)==224){if(y+2>=m||(c=n[++y]&255,(c&192)!=128)||(u=n[++y]&255,(u&192)!=128))return n;p[i]=(l&15)<<12|(c&63)<<6|u&63}else return n;else{if(!l)return n;p[i]=l}i==16383&&(h.push(String.fromCharCode.apply(String,p)),i=-1)}return i>0&&(p.length=i,h.push(String.fromCharCode.apply(String,p))),h.join("")};/**
 * @license
 * Copyright Filip Seman
 * SPDX-License-Identifier: MIT
 */function Y0(o,n=5){const i=o instanceof ArrayBuffer?new Uint8Array(o):o,l=new wf().compress(i,n);return new Uint8Array(l)}function K0(o){const n=o instanceof ArrayBuffer?new Uint8Array(o):o,i=new wf().decompress(n);return new Uint8Array(i)}const X0=300,Qf=255,Po=4096,Q0={item:1,outfit:2,effect:3,distance:4},Z0={1:"item",2:"outfit",3:"effect",4:"distance"},ae={GROUND:0,GROUND_BORDER:1,ON_BOTTOM:2,ON_TOP:3,CONTAINER:4,STACKABLE:5,FORCE_USE:6,MULTI_USE:7,WRITABLE:8,WRITABLE_ONCE:9,FLUID_CONTAINER:10,FLUID:11,UNPASSABLE:12,UNMOVEABLE:13,BLOCK_MISSILE:14,BLOCK_PATHFIND:15,NO_MOVE_ANIMATION:16,PICKUPABLE:17,HANGABLE:18,HOOK_SOUTH:19,HOOK_EAST:20,ROTATABLE:21,HAS_LIGHT:22,DONT_HIDE:23,TRANSLUCENT:24,HAS_OFFSET:25,HAS_ELEVATION:26,LYING_OBJECT:27,ANIMATE_ALWAYS:28,MINI_MAP:29,LENS_HELP:30,FULL_GROUND:31,IGNORE_LOOK:32,CLOTH:33,MARKET_ITEM:34,DEFAULT_ACTION:35,WRAPPABLE:36,UNWRAPPABLE:37,TOP_EFFECT:38,HAS_CHARGES:252,FLOOR_CHANGE:253,USABLE:254};function q0(o){const n=new Uint8Array(o.length);for(let i=0;i<o.length;i+=4)n[i]=o[i+3],n[i+1]=o[i],n[i+2]=o[i+1],n[i+3]=o[i+2];return n}function J0(o){const n=new Uint8ClampedArray(o.length);for(let i=0;i<o.length;i+=4)n[i]=o[i+1],n[i+1]=o[i+2],n[i+2]=o[i+3],n[i+3]=o[i];return n}class e1{constructor(n=65536){$(this,"buf");$(this,"view");$(this,"pos",0);this.buf=new Uint8Array(n),this.view=new DataView(this.buf.buffer)}grow(n){for(;this.pos+n>this.buf.length;){const i=new Uint8Array(this.buf.length*2);i.set(this.buf),this.buf=i,this.view=new DataView(this.buf.buffer)}}u8(n){this.grow(1),this.view.setUint8(this.pos,n),this.pos+=1}u16(n){this.grow(2),this.view.setUint16(this.pos,n,!0),this.pos+=2}i16(n){this.grow(2),this.view.setInt16(this.pos,n,!0),this.pos+=2}u32(n){this.grow(4),this.view.setUint32(this.pos,n,!0),this.pos+=4}i32(n){this.grow(4),this.view.setInt32(this.pos,n,!0),this.pos+=4}bytes(n){this.grow(n.length),this.buf.set(n,this.pos),this.pos+=n.length}result(){return this.buf.slice(0,this.pos)}patchU32(n,i){this.view.setUint32(n,i,!0)}}class t1{constructor(n){$(this,"view");$(this,"pos",0);this.data=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength)}u8(){const n=this.view.getUint8(this.pos);return this.pos+=1,n}u16(){const n=this.view.getUint16(this.pos,!0);return this.pos+=2,n}i16(){const n=this.view.getInt16(this.pos,!0);return this.pos+=2,n}u32(){const n=this.view.getUint32(this.pos,!0);return this.pos+=4,n}i32(){const n=this.view.getInt32(this.pos,!0);return this.pos+=4,n}bytes(n){const i=this.data.slice(this.pos,this.pos+n);return this.pos+=n,i}str(n){return new TextDecoder("latin1").decode(this.bytes(n))}}function n1(o,n){if(n.ground?(o.u8(ae.GROUND),o.u16(n.groundSpeed??0)):n.groundBorder?o.u8(ae.GROUND_BORDER):n.onBottom?o.u8(ae.ON_BOTTOM):n.onTop&&o.u8(ae.ON_TOP),n.container&&o.u8(ae.CONTAINER),n.stackable&&o.u8(ae.STACKABLE),n.forceUse&&o.u8(ae.FORCE_USE),n.multiUse&&o.u8(ae.MULTI_USE),n.writable&&(o.u8(ae.WRITABLE),o.u16(n.writableMaxLen??0)),n.writableOnce&&(o.u8(ae.WRITABLE_ONCE),o.u16(n.writableOnceMaxLen??0)),n.fluidContainer&&o.u8(ae.FLUID_CONTAINER),n.splash&&o.u8(ae.FLUID),n.notWalkable&&o.u8(ae.UNPASSABLE),n.notMoveable&&o.u8(ae.UNMOVEABLE),n.blockProjectile&&o.u8(ae.BLOCK_MISSILE),n.notPathable&&o.u8(ae.BLOCK_PATHFIND),n.noMoveAnimation&&o.u8(ae.NO_MOVE_ANIMATION),n.pickupable&&o.u8(ae.PICKUPABLE),n.hangable&&o.u8(ae.HANGABLE),n.hookSouth&&o.u8(ae.HOOK_SOUTH),n.hookEast&&o.u8(ae.HOOK_EAST),n.rotateable&&o.u8(ae.ROTATABLE),n.hasLight&&(o.u8(ae.HAS_LIGHT),o.u16(n.lightLevel??0),o.u16(n.lightColor??0)),n.dontHide&&o.u8(ae.DONT_HIDE),n.translucent&&o.u8(ae.TRANSLUCENT),n.hasDisplacement&&(o.u8(ae.HAS_OFFSET),o.i16(n.displacementX??0),o.i16(n.displacementY??0)),n.hasElevation&&(o.u8(ae.HAS_ELEVATION),o.u16(n.elevation??0)),n.lyingCorpse&&o.u8(ae.LYING_OBJECT),n.animateAlways&&o.u8(ae.ANIMATE_ALWAYS),n.hasMinimapColor&&(o.u8(ae.MINI_MAP),o.u16(n.minimapColor??0)),n.lensHelp!=null&&(o.u8(ae.LENS_HELP),o.u16(n.lensHelp)),n.fullGround&&o.u8(ae.FULL_GROUND),n.look&&o.u8(ae.IGNORE_LOOK),n.cloth&&(o.u8(ae.CLOTH),o.u16(n.clothSlot??0)),n.hasMarket){o.u8(ae.MARKET_ITEM),o.u16(n.marketCategory??0),o.u16(n.marketTradeAs??0),o.u16(n.marketShowAs??0);const i=n.marketName??"";o.u16(i.length);for(let l=0;l<i.length;l++)o.u8(i.charCodeAt(l)&255);o.u16(n.marketRestrictVocation??0),o.u16(n.marketRequiredLevel??0)}n.usable&&(o.u8(ae.DEFAULT_ACTION),o.u16(n.usableActionId??0)),n.wrapable&&o.u8(ae.WRAPPABLE),n.unwrapable&&o.u8(ae.UNWRAPPABLE),n.topEffect&&o.u8(ae.TOP_EFFECT),n.chargeable&&o.u8(ae.HAS_CHARGES),o.u8(Qf)}function r1(o){const n={ground:!1,groundBorder:!1,onBottom:!1,onTop:!1,container:!1,stackable:!1,forceUse:!1,multiUse:!1,writable:!1,writableOnce:!1,fluidContainer:!1,splash:!1,notWalkable:!1,notMoveable:!1,blockProjectile:!1,notPathable:!1,pickupable:!1,hangable:!1,hookSouth:!1,hookEast:!1,rotateable:!1,hasLight:!1,dontHide:!1,translucent:!1,hasDisplacement:!1,hasElevation:!1,lyingCorpse:!1,animateAlways:!1,hasMinimapColor:!1,fullGround:!1,look:!1,cloth:!1,hasMarket:!1,usable:!1,wrapable:!1,unwrapable:!1,topEffect:!1,noMoveAnimation:!1,chargeable:!1};for(;;){const i=o.u8();if(i===Qf)break;switch(i){case ae.GROUND:n.ground=!0,n.groundSpeed=o.u16();break;case ae.GROUND_BORDER:n.groundBorder=!0;break;case ae.ON_BOTTOM:n.onBottom=!0;break;case ae.ON_TOP:n.onTop=!0;break;case ae.CONTAINER:n.container=!0;break;case ae.STACKABLE:n.stackable=!0;break;case ae.FORCE_USE:n.forceUse=!0;break;case ae.MULTI_USE:n.multiUse=!0;break;case ae.WRITABLE:n.writable=!0,n.writableMaxLen=o.u16();break;case ae.WRITABLE_ONCE:n.writableOnce=!0,n.writableOnceMaxLen=o.u16();break;case ae.FLUID_CONTAINER:n.fluidContainer=!0;break;case ae.FLUID:n.splash=!0;break;case ae.UNPASSABLE:n.notWalkable=!0;break;case ae.UNMOVEABLE:n.notMoveable=!0;break;case ae.BLOCK_MISSILE:n.blockProjectile=!0;break;case ae.BLOCK_PATHFIND:n.notPathable=!0;break;case ae.NO_MOVE_ANIMATION:n.noMoveAnimation=!0;break;case ae.PICKUPABLE:n.pickupable=!0;break;case ae.HANGABLE:n.hangable=!0;break;case ae.HOOK_SOUTH:n.hookSouth=!0;break;case ae.HOOK_EAST:n.hookEast=!0;break;case ae.ROTATABLE:n.rotateable=!0;break;case ae.HAS_LIGHT:n.hasLight=!0,n.lightLevel=o.u16(),n.lightColor=o.u16();break;case ae.DONT_HIDE:n.dontHide=!0;break;case ae.TRANSLUCENT:n.translucent=!0;break;case ae.HAS_OFFSET:n.hasDisplacement=!0,n.displacementX=o.i16(),n.displacementY=o.i16();break;case ae.HAS_ELEVATION:n.hasElevation=!0,n.elevation=o.u16();break;case ae.LYING_OBJECT:n.lyingCorpse=!0;break;case ae.ANIMATE_ALWAYS:n.animateAlways=!0;break;case ae.MINI_MAP:n.hasMinimapColor=!0,n.minimapColor=o.u16();break;case ae.LENS_HELP:n.lensHelp=o.u16();break;case ae.FULL_GROUND:n.fullGround=!0;break;case ae.IGNORE_LOOK:n.look=!0;break;case ae.CLOTH:n.cloth=!0,n.clothSlot=o.u16();break;case ae.MARKET_ITEM:{n.hasMarket=!0,n.marketCategory=o.u16(),n.marketTradeAs=o.u16(),n.marketShowAs=o.u16();const l=o.u16();n.marketName=o.str(l),n.marketRestrictVocation=o.u16(),n.marketRequiredLevel=o.u16();break}case ae.DEFAULT_ACTION:n.usable=!0,n.usableActionId=o.u16();break;case ae.HAS_CHARGES:n.chargeable=!0;break;case ae.FLOOR_CHANGE:break;case ae.WRAPPABLE:n.wrapable=!0;break;case ae.UNWRAPPABLE:n.unwrapable=!0;break;case ae.TOP_EFFECT:n.topEffect=!0;break;case ae.USABLE:n.usable=!0;break;default:throw new Error(`Unknown OBD flag 0x${i.toString(16)}`)}}return n}function i1(o){const{thing:n,clientVersion:i,spriteData:l,spriteOverrides:c}=o,u=new e1;u.u16(X0),u.u16(i),u.u8(Q0[n.category]??1);const m=u.pos;u.u32(0),n1(u,n.flags),u.patchU32(m,u.pos);const h=n.category==="outfit",p=n.frameGroups.length;h&&u.u8(p);for(let y=0;y<p;y++){h&&u.u8(p<2?1:y);const w=n.frameGroups[y];if(u.u8(w.width),u.u8(w.height),(w.width>1||w.height>1)&&u.u8(32),u.u8(w.layers),u.u8(w.patternX),u.u8(w.patternY),u.u8(w.patternZ||1),u.u8(w.animationLength),w.animationLength>1){u.u8(w.asynchronous),u.i32(w.nLoop),u.u8(w.start);for(let x=0;x<w.animationLength;x++){const b=w.animationLengths[x]??{min:100,max:100};u.u32(b.min),u.u32(b.max)}}for(let x=0;x<w.sprites.length;x++){const b=w.sprites[x];u.u32(b);let S;if(b===0)S=new Uint8Array(Po);else{const M=c.get(b)??Rn(l,b);M?S=q0(new Uint8Array(M.data.buffer,M.data.byteOffset,M.data.byteLength)):S=new Uint8Array(Po)}u.u32(S.length),u.bytes(S)}}return Y0(u.result(),5)}function s1(o){let n;try{n=K0(o)}catch(I){throw new Error(`Failed to decompress OBD file. Ensure this is a valid .obd file.
${I instanceof Error?I.message:I}`)}if(n.length<9)throw new Error("OBD file too small.");const i=new t1(n),l=i.u16();let c,u;if(l===300)c=3,u=i.u16();else if(l===200)c=2,u=i.u16();else throw l>=710?new Error(`This is an OBD Version 1 file (client ${l}). V1 is not supported  please re-export from the Object Builder as V2 or V3.`):new Error(`Unrecognised OBD header: 0x${l.toString(16)} (${l}). Not a valid .obd file.`);const m=i.u8(),h=Z0[m];if(!h)throw new Error(`Invalid category byte: ${m}`);i.u32();const p=r1(i),y=h==="outfit";let w=1;y&&c===3&&(w=i.u8());const x=[],b=new Map;let S=2130706432;for(let I=0;I<w;I++){y&&c===3&&i.u8();const P=i.u8(),T=i.u8();(P>1||T>1)&&i.u8();const L=i.u8(),A=i.u8(),X=i.u8(),H=i.u8()||1,Z=i.u8();let ie=0,he=0,be=0;const pe=[];if(Z>1){ie=i.u8(),he=i.i32(),be=i.u8();for(let re=0;re<Z;re++)pe.push({min:i.u32(),max:i.u32()})}else pe.push({min:0,max:0});const fe=P*T*L*A*X*H*Z,Q=[];for(let re=0;re<fe;re++){const xe=i.u32();let ce;if(c===3){const K=i.u32();ce=i.bytes(K)}else ce=i.bytes(Po);if(xe===0||ce.length!==Po){Q.push(0);continue}S++;const ue=S;Q.push(ue);const N=J0(ce),se=new ImageData(N,32,32);b.set(ue,se)}x.push({type:I,width:P,height:T,layers:L,patternX:A,patternY:X,patternZ:H,animationLength:Z,asynchronous:ie,nLoop:he,start:be,animationLengths:pe,sprites:Q})}if(h==="outfit"&&x.length>=2){const I=x[0];for(let P=1;P<x.length;P++){const T=x[P];if(T.layers>=I.layers)continue;const L=T.width*T.height,A=T.patternX*T.patternY*T.patternZ,X=T.layers*L,H=I.layers*L,Z=A*H,ie=T.sprites.slice(0,A*X),he=new Array(Z).fill(0);for(let pe=0;pe<A;pe++){for(let fe=0;fe<L;fe++)he[pe*H+fe]=ie[pe*X+fe];for(let fe=1;fe<I.layers;fe++)for(let Q=0;Q<L;Q++)he[pe*H+fe*L+Q]=I.sprites[pe*H+fe*L+Q]}const be=I.sprites.slice(0,Z);for(T.layers=I.layers,T.sprites=[...he,...be],T.animationLength=2;T.animationLengths.length>2;)T.animationLengths.pop();for(;T.animationLengths.length<2;)T.animationLengths.push({min:100,max:100})}}const _=I=>{if(!I)return"EMPTY";let P=0;for(let T=0;T<I.data.length;T+=4)I.data[T+3]>0&&(P=P*31+I.data[T]+I.data[T+1]*256+I.data[T+2]*65536|0);return P.toString(16).padStart(8,"0")};console.group("[OBD DIAGNOSTIC]"),console.log("OBD version:",c,"| Client:",u,"| Category:",h),console.log("Frame groups:",x.length);const M=new Map;if(h==="outfit"&&x.length>=1){const I=x[0],P=I.width*I.height;console.log(`  Idle (Group 0): w=${I.width} h=${I.height} layers=${I.layers} pX=${I.patternX} frames=${I.animationLength} sprites=${I.sprites.length}`);for(let T=0;T<I.sprites.length;T++){const L=_(b.get(I.sprites[T])),A=Math.floor(T/(I.layers*P)),X=Math.floor(T%(I.layers*P)/P),H=T%P,Z=`idle[${T}] dir=${A} L=${X} tile=${H}`;M.set(L+"_"+T,Z),console.log(`    [${T}] hash=${L}  ${Z}`)}}for(let I=1;I<x.length;I++){const P=x[I],T=P.width*P.height,L=P.layers*P.patternX*P.patternY*P.patternZ*T;console.log(`  Walking (Group ${I}): w=${P.width} h=${P.height} layers=${P.layers} pX=${P.patternX} frames=${P.animationLength} sprites=${P.sprites.length} spritesPerFrame=${L}`);for(let A=0;A<P.sprites.length;A++){const X=_(b.get(P.sprites[A])),H=Math.floor(A/L),Z=A%L,ie=Math.floor(Z/(P.layers*T)),he=Math.floor(Z%(P.layers*T)/T),be=Z%T;let pe="";for(const[fe,Q]of M)if(fe.startsWith(X+"_")){pe=`  MATCHES ${Q}`;break}console.log(`    [${A}] hash=${X} f=${H} dir=${ie} L=${he} tile=${be}${pe}`)}}return console.groupEnd(),{category:h,clientVersion:u,flags:p,frameGroups:x,spritePixels:b}}function o1({thing:o,group:n,objectData:i,spriteData:l,spriteOverrides:c,category:u,zoom:m,setZoom:h,showGrid:p,setShowGrid:y,showCropSize:w,setShowCropSize:x,previewMode:b,setPreviewMode:S,playing:_,setPlaying:M,currentFrame:I,setCurrentFrame:P,canvasRef:T,handleImageFiles:L,copyMenuOpen:A,setCopyMenuOpen:X,copyMenuRef:H,baseOutfitId:Z,setBaseOutfitId:ie}){const he=V.useRef(null),be=V.useRef(null),pe=n?n.animationLength>1:!1,fe=()=>{const xe=T.current;if(!xe)return;const ce=xe.toDataURL("image/png"),ue=document.createElement("a");ue.href=ce,ue.download=`sprite_${o.id}_frame${I}.png`,ue.click()},Q=()=>{if(l)try{const xe=i1({thing:o,clientVersion:1098,spriteData:l,spriteOverrides:c}),ce=new Blob([new Uint8Array(xe)],{type:"application/octet-stream"}),ue=URL.createObjectURL(ce),N=document.createElement("a");N.href=ue;const se=i?rr(i,o.id):o.id;N.download=`${u}_${se}.obd`,N.click(),URL.revokeObjectURL(ue)}catch(xe){alert(`Export failed: ${xe instanceof Error?xe.message:xe}`)}},re=xe=>{var N;const ce=(N=xe.target.files)==null?void 0:N[0];if(!ce)return;const ue=new FileReader;ue.onload=()=>{var se;try{const K=new Uint8Array(ue.result),C=s1(K),E=O.getState(),W=E.selectedThingId,q=W!=null?(se=E.objectData)==null?void 0:se.things.get(W):null;if(W!=null&&q&&q.category===C.category)if(E.replaceThing(W,C.flags,C.frameGroups,C.spritePixels)){const ee=O.getState().objectData,me=ee?rr(ee,W):W;alert(`Replaced ${C.category} #${me} with ${C.spritePixels.size} sprites.`)}else alert("Replace failed  could not overwrite selected thing.");else{const oe=E.importThing(C.category,C.flags,C.frameGroups,C.spritePixels);if(oe!=null){const ee=O.getState().objectData,me=ee?rr(ee,oe):oe;alert(`Imported ${C.category} #${me} with ${C.spritePixels.size} sprites.`)}}}catch(K){alert(`Import failed: ${K instanceof Error?K.message:K}`)}},ue.readAsArrayBuffer(ce),xe.target.value=""};return f.jsxs("div",{className:"flex items-center px-3 py-1.5 gap-1 border-t border-emperia-border flex-wrap",children:[f.jsx("button",{onClick:()=>h(Math.max(1,m-1)),className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Zoom out",children:f.jsx(Vm,{className:"w-3.5 h-3.5"})}),f.jsxs("span",{className:"text-[10px] text-emperia-muted w-6 text-center",children:[m,"x"]}),f.jsx("button",{onClick:()=>h(Math.min(8,m+1)),className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Zoom in",children:f.jsx(Wm,{className:"w-3.5 h-3.5"})}),f.jsx("div",{className:"w-px h-4 bg-emperia-border mx-0.5"}),f.jsx("button",{onClick:()=>y(!p),className:`p-1 rounded transition-colors ${p?"bg-emperia-accent/20 text-emperia-accent":"text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover"}`,title:"Toggle Grid",children:f.jsx(Nm,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:()=>x(!w),className:`p-1 rounded transition-colors ${w?"bg-emperia-accent/20 text-emperia-accent":"text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover"}`,title:"Toggle Crop Outline",children:f.jsx(Cm,{className:"w-3.5 h-3.5"})}),n&&(n.patternX>1||n.patternY>1)&&f.jsx("button",{onClick:()=>S(!b),className:`p-1 rounded transition-colors ${b?"bg-emperia-accent/20 text-emperia-accent":"text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover"}`,title:"Toggle Preview Mode",children:f.jsx(Em,{className:"w-3.5 h-3.5"})}),f.jsx("div",{className:"w-px h-4 bg-emperia-border mx-0.5"}),f.jsx("input",{ref:he,type:"file",accept:"image/png,image/gif,image/bmp",className:"hidden",onChange:xe=>xe.target.files&&L(xe.target.files)}),f.jsx("button",{onClick:()=>{var xe;return(xe=he.current)==null?void 0:xe.click()},className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Import PNG",children:f.jsx(Bm,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:fe,className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Export PNG",children:f.jsx(Tm,{className:"w-3.5 h-3.5"})}),f.jsx("div",{className:"w-px h-4 bg-emperia-border mx-0.5"}),f.jsx("input",{ref:be,type:"file",accept:".obd",className:"hidden",onChange:re}),f.jsx("button",{onClick:()=>{var xe;return(xe=be.current)==null?void 0:xe.click()},className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Import OBD",children:f.jsx(df,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:Q,className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Export OBD",children:f.jsx(Ka,{className:"w-3.5 h-3.5"})}),f.jsx("div",{className:"w-px h-4 bg-emperia-border mx-0.5"}),f.jsx(l1,{thing:o,copyMenuOpen:A,setCopyMenuOpen:X,copyMenuRef:H}),pe&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-px h-4 bg-emperia-border mx-0.5"}),f.jsx("button",{onClick:()=>{P((I-1+((n==null?void 0:n.animationLength)??1))%((n==null?void 0:n.animationLength)??1)),M(!1)},className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Previous frame",children:f.jsx(km,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:()=>M(!_),className:`p-1 rounded transition-colors ${_?"bg-emperia-accent/20 text-emperia-accent":"text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover"}`,title:_?"Pause":"Play",children:_?f.jsx(Mm,{className:"w-3.5 h-3.5"}):f.jsx(Om,{className:"w-3.5 h-3.5"})}),f.jsx("button",{onClick:()=>{P((I+1)%((n==null?void 0:n.animationLength)??1)),M(!1)},className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Next frame",children:f.jsx(cf,{className:"w-3.5 h-3.5"})}),f.jsxs("span",{className:"text-[10px] text-emperia-muted",children:[I+1,"/",n==null?void 0:n.animationLength]})]}),u==="outfit"&&i&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"flex-1"}),f.jsxs("div",{className:"flex items-center gap-0.5",children:[Z!=null&&Z!==o.id&&f.jsxs("span",{className:"text-[9px] text-amber-400/70 mr-0.5",children:["Base: #",rr(i,Z)]}),(()=>{const xe=i.itemCount+134,ce=Z===xe;return f.jsxs("button",{onClick:()=>ie(ce?null:xe),className:`p-1 rounded transition-colors ${ce?"bg-sky-500/20 text-sky-400":"text-emperia-muted hover:text-sky-400 hover:bg-sky-500/10"}`,title:ce?"Unpin character base (#134)":"Pin outfit #134 as base",children:[f.jsx(Rd,{className:"w-3.5 h-3.5"}),f.jsx("span",{className:"sr-only",children:"134"})]})})(),f.jsx("button",{onClick:()=>ie(Z===o.id?null:o.id),className:`p-1 rounded transition-colors ${Z===o.id?"bg-amber-500/20 text-amber-400":Z!=null?"bg-amber-500/10 text-amber-400/60 hover:text-amber-400 hover:bg-amber-500/20":"text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover"}`,title:Z===o.id?"Unpin base outfit":Z!=null?"Replace pinned base with this outfit":"Pin current as base outfit",children:Z===o.id?f.jsx(Rm,{className:"w-3.5 h-3.5"}):f.jsx(Rd,{className:"w-3.5 h-3.5"})})]})]})]})}function l1({thing:o,copyMenuOpen:n,setCopyMenuOpen:i,copyMenuRef:l}){var c;return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"relative",ref:l,children:[f.jsx("button",{onClick:()=>i(!n),className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",title:"Copy properties",children:f.jsx(_m,{className:"w-3.5 h-3.5"})}),n&&f.jsx("div",{className:"absolute bottom-full mb-1 left-0 bg-emperia-surface border border-emperia-border rounded shadow-lg py-1 z-50 min-w-[160px]",onClick:()=>i(!1),children:[{label:"Everything",key:"all"},{label:"Flags Only",key:"flags"},{label:"Server Properties",key:"server"},{label:"Sprites Only",key:"sprites"}].map(({label:u,key:m})=>f.jsx("button",{className:"w-full text-left px-3 py-1.5 text-[11px] text-emperia-text hover:bg-emperia-hover transition-colors",onClick:()=>{const{clientToServerIds:h,itemDefinitions:p}=O.getState(),y=h.get(o.id),w=y!=null?p.get(y)??null:null,x={label:u};(m==="all"||m==="flags")&&(x.flags={...o.flags}),(m==="all"||m==="sprites")&&(x.frameGroups=o.frameGroups.map(b=>({...b,sprites:[...b.sprites],animationLengths:b.animationLengths.map(S=>({...S}))}))),(m==="all"||m==="server")&&(x.serverDef=w?{...w,properties:w.properties?{...w.properties}:null}:null),O.setState({copiedThing:x})},children:u},m))})]}),f.jsx("button",{onClick:()=>{const{copiedThing:u}=O.getState();if(!u)return;const m=O.getState(),h=new Set(m.dirtyIds);if(h.add(o.id),u.frameGroups&&(o.frameGroups=u.frameGroups.map(p=>({...p,sprites:[...p.sprites],animationLengths:p.animationLengths.map(y=>({...y}))}))),o.rawBytes=void 0,nr(),u.serverDef&&o.category==="item"){const{clientToServerIds:p,itemDefinitions:y}=m,w=p.get(o.id);if(w!=null){const x=new Map(y);x.set(w,{...u.serverDef,serverId:w,id:o.id}),O.setState({dirty:!0,dirtyIds:h,editVersion:m.editVersion+1,itemDefinitions:x})}}u.flags?m.updateThingFlags(o.id,{...u.flags}):O.setState({dirty:!0,dirtyIds:h,editVersion:m.editVersion+1})},disabled:!O.getState().copiedThing,className:`p-1 rounded transition-colors ${O.getState().copiedThing?"hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text":"text-emperia-muted/30 cursor-not-allowed"}`,title:(c=O.getState().copiedThing)!=null&&c.label?`Paste: ${O.getState().copiedThing.label}`:"Paste properties",children:f.jsx(bm,{className:"w-3.5 h-3.5"})})]})}function a1({thing:o,group:n,isOutfit:i,isDistance:l,previewMode:c,activeDirection:u,setActiveDirection:m,activePatternY:h,setActivePatternY:p,activeZ:y,setActiveZ:w,activeLayer:x,setActiveLayer:b,blendLayers:S,setBlendLayers:_,currentFrame:M,setCurrentFrame:I,playing:P,setPlaying:T,outfitColors:L,setOutfitColors:A,showColorPicker:X,setShowColorPicker:H,updateFrameGroupProp:Z}){return f.jsxs("div",{className:"border-t border-emperia-border text-[10px]",children:[f.jsx(Di,{label:"Patterns"}),f.jsxs("div",{className:"px-4 py-1.5 space-y-1.5",children:[f.jsxs("div",{className:"grid grid-cols-3 gap-x-3 gap-y-1 bg-emperia-surface/40 rounded px-2 py-1.5",children:[f.jsx(qt,{label:"Width",value:n.width,onChange:ie=>Z("width",ie),min:1,max:4}),f.jsx(qt,{label:"Height",value:n.height,onChange:ie=>Z("height",ie),min:1,max:4}),f.jsx(qt,{label:"Crop Size",value:32,readOnly:!0})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-x-3 gap-y-1 bg-blue-950/20 border border-blue-500/10 rounded px-2 py-1.5",children:[f.jsx(qt,{label:"Pattern X",value:n.patternX,onChange:ie=>Z("patternX",ie),min:1,max:8,labelClassName:"text-[10px] text-blue-400/80"}),f.jsx(qt,{label:"Pattern Y",value:n.patternY,onChange:ie=>Z("patternY",ie),min:1,max:8,labelClassName:"text-[10px] text-blue-400/80"}),f.jsx(qt,{label:"Pattern Z",value:n.patternZ,onChange:ie=>Z("patternZ",ie),min:1,max:8,labelClassName:"text-[10px] text-blue-400/80"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-x-2",children:[f.jsx("div",{className:"bg-purple-950/20 border border-purple-500/10 rounded px-2 py-1.5",children:f.jsx(qt,{label:"Layers",value:n.layers,onChange:ie=>Z("layers",ie),min:1,max:255,labelClassName:"text-[10px] text-purple-400/80"})}),f.jsx("div",{className:"bg-emerald-950/20 border border-emerald-500/10 rounded px-2 py-1.5",children:f.jsx(qt,{label:"Animations",value:n.animationLength,onChange:ie=>Z("animationLength",ie),min:1,max:999,labelClassName:"text-[10px] text-emerald-400/80"})})]})]}),f.jsx(c1,{group:n,isOutfit:i,isDistance:l,previewMode:c,activeDirection:u,setActiveDirection:m,activePatternY:h,setActivePatternY:p,activeZ:y,setActiveZ:w}),n.layers>1&&f.jsxs(f.Fragment,{children:[f.jsx(Di,{label:"Layer",colorClass:"bg-purple-950/30 text-purple-400"}),f.jsxs("div",{className:"px-4 py-1.5 flex items-center gap-1",children:[f.jsx("span",{className:"text-emperia-muted shrink-0",children:"Layer:"}),f.jsx(gn,{onClick:()=>b(Math.max(0,x-1)),disabled:S,children:""}),f.jsx("span",{className:`font-mono w-8 text-center text-[9px] ${S?"text-emperia-muted":"text-emperia-text"}`,children:S?"All":`${x+1}/${n.layers}`}),f.jsx(gn,{onClick:()=>b(Math.min(n.layers-1,x+1)),disabled:S,children:""}),f.jsxs("label",{className:"flex items-center gap-0.5 cursor-pointer ml-1",children:[f.jsx("input",{type:"checkbox",checked:S,onChange:()=>_(!S),className:"w-2.5 h-2.5 accent-emperia-accent"}),f.jsx("span",{className:"text-emperia-muted text-[9px]",children:"Blend"})]})]})]}),f.jsx(u1,{thing:o,group:n,currentFrame:M,setCurrentFrame:I,playing:P,setPlaying:T,updateFrameGroupProp:Z}),(i||o.flags.hasDisplacement)&&f.jsxs(f.Fragment,{children:[f.jsx(Di,{label:"Offset"}),f.jsxs("div",{className:"px-4 py-1.5 grid grid-cols-3 gap-x-3 gap-y-1",children:[f.jsx(qt,{label:"Offset X",value:o.flags.displacementX??0,min:-512,max:512,onChange:ie=>{O.getState().updateThingFlags(o.id,{...o.flags,hasDisplacement:!0,displacementX:ie})}}),f.jsx(qt,{label:"Offset Y",value:o.flags.displacementY??0,min:-512,max:512,onChange:ie=>{O.getState().updateThingFlags(o.id,{...o.flags,hasDisplacement:!0,displacementY:ie})}}),f.jsx("div",{})]})]}),i&&S&&n.layers>=2&&f.jsx(d1,{outfitColors:L,setOutfitColors:A,showColorPicker:X,setShowColorPicker:H})]})}function Di({label:o,colorClass:n}){return f.jsx("div",{className:`px-4 py-1 border-y border-emperia-border/40 ${n??"bg-emperia-surface/60"}`,children:f.jsx("span",{className:`text-[9px] font-semibold uppercase tracking-wider ${n?"text-inherit opacity-80":"text-emperia-muted"}`,children:o})})}function c1({group:o,isOutfit:n,isDistance:i,previewMode:l,activeDirection:c,setActiveDirection:u,activePatternY:m,setActivePatternY:h,activeZ:p,setActiveZ:y}){const w=o.patternX>4&&!i,x=o.patternY>1&&!i,b=o.patternZ>1;return!l||!(w||x||b)?null:f.jsxs(f.Fragment,{children:[f.jsx(Di,{label:"Preview"}),f.jsxs("div",{className:"px-4 py-1.5 flex flex-wrap items-center gap-x-3 gap-y-1",children:[w&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-emperia-muted shrink-0",children:"Direction:"}),f.jsx(gn,{onClick:()=>u(Math.max(0,c-1)),children:""}),f.jsxs("span",{className:"text-emperia-text font-mono w-10 text-center",children:[c+1,"/",o.patternX]}),f.jsx(gn,{onClick:()=>u(Math.min(o.patternX-1,c+1)),children:""})]}),x&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-emperia-muted shrink-0",children:n?"Addon:":"Pat Y:"}),f.jsx(gn,{onClick:()=>h(Math.max(0,m-1)),children:""}),f.jsx("span",{className:"text-emperia-text font-mono w-8 text-center text-[9px]",children:n?m===0?"None":`#${m}`:`${m+1}/${o.patternY}`}),f.jsx(gn,{onClick:()=>h(Math.min(o.patternY-1,m+1)),children:""})]}),b&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-emperia-muted shrink-0",children:n?"Mount:":"Pat Z:"}),f.jsx(gn,{onClick:()=>y(Math.max(0,p-1)),children:""}),f.jsxs("span",{className:"text-emperia-text font-mono w-8 text-center text-[9px]",children:[p+1,"/",o.patternZ]}),f.jsx(gn,{onClick:()=>y(Math.min(o.patternZ-1,p+1)),children:""})]})]})]})}function u1({thing:o,group:n,currentFrame:i,setCurrentFrame:l,playing:c,setPlaying:u,updateFrameGroupProp:m}){return n.animationLength<=1?null:f.jsxs(f.Fragment,{children:[f.jsx(Di,{label:"Animation",colorClass:"bg-emerald-950/30 text-emerald-400"}),f.jsxs("div",{className:"px-4 py-1.5",children:[f.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[f.jsx("span",{className:"text-emperia-muted shrink-0",children:"Frame:"}),f.jsx(gn,{onClick:()=>{l((i-1+n.animationLength)%n.animationLength),u(!1)},children:""}),f.jsxs("span",{className:"text-emperia-text font-mono w-10 text-center text-[9px]",children:[i+1,"/",n.animationLength]}),f.jsx(gn,{onClick:()=>{l((i+1)%n.animationLength),u(!1)},children:""}),f.jsx("button",{onClick:()=>u(!c),className:`ml-1 px-1.5 py-0.5 rounded text-[9px] transition-colors ${c?"bg-emperia-accent text-white":"bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-emperia-text"}`,children:c?"Stop":"Play"})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-x-3 gap-y-1",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-emperia-muted shrink-0",children:"Mode:"}),f.jsxs("select",{value:n.asynchronous,onChange:h=>m("asynchronous",Number(h.target.value)),className:"flex-1 px-1 py-0 bg-emperia-surface border border-emperia-border rounded text-[9px] text-emperia-text outline-none focus:border-emperia-accent",children:[f.jsx("option",{value:0,children:"Sync"}),f.jsx("option",{value:1,children:"Async"})]})]}),f.jsx(qt,{label:"Loop count",value:n.nLoop,min:0,max:255,onChange:h=>m("nLoop",h)}),f.jsx(qt,{label:"Start frame",value:n.start,min:0,max:n.animationLength-1,onChange:h=>m("start",h)})]}),n.animationLengths[i]&&f.jsxs("div",{className:"grid grid-cols-3 gap-x-3 gap-y-1 mt-1 pt-1 border-t border-emperia-border/20",children:[f.jsxs("div",{className:"col-span-3 text-[8px] text-emperia-muted",children:["Frame ",i+1," duration (ms)"]}),f.jsx(qt,{label:"Min",value:n.animationLengths[i].min,min:0,max:65535,onChange:h=>{n.animationLengths[i].min=h,o.rawBytes=void 0;const p=O.getState(),y=new Set(p.dirtyIds);y.add(o.id),O.setState({dirty:!0,dirtyIds:y,editVersion:p.editVersion+1})}}),f.jsx(qt,{label:"Max",value:n.animationLengths[i].max,min:0,max:65535,onChange:h=>{n.animationLengths[i].max=h,o.rawBytes=void 0;const p=O.getState(),y=new Set(p.dirtyIds);y.add(o.id),O.setState({dirty:!0,dirtyIds:y,editVersion:p.editVersion+1})}}),f.jsx("div",{})]})]})]})}function d1({outfitColors:o,setOutfitColors:n,showColorPicker:i,setShowColorPicker:l}){return f.jsxs(f.Fragment,{children:[f.jsx(Di,{label:"Colors"}),f.jsxs("div",{className:"px-4 py-1.5",children:[f.jsx("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1",children:["head","body","legs","feet"].map(c=>f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:()=>l(i===c?null:c),className:"w-4 h-4 rounded border border-emperia-border shrink-0",style:{backgroundColor:Wd(o[c])},title:`${c}: ${o[c]}`}),f.jsx("span",{className:"text-emperia-muted capitalize text-[9px]",children:c}),f.jsx(gn,{onClick:()=>n({...o,[c]:Math.max(0,o[c]-1)}),children:""}),f.jsx("span",{className:"text-emperia-text font-mono w-5 text-center text-[9px]",children:o[c]}),f.jsx(gn,{onClick:()=>n({...o,[c]:Math.min(Ei-1,o[c]+1)}),children:""})]},c))}),i&&f.jsx("div",{className:"mt-1 p-1 bg-emperia-surface border border-emperia-border rounded grid gap-px",style:{gridTemplateColumns:"repeat(19, 14px)"},children:Qr.map((c,u)=>f.jsx("button",{onClick:()=>{n({...o,[i]:u}),l(null)},className:`w-3.5 h-3.5 rounded-sm border ${o[i]===u?"border-white":"border-transparent"}`,style:{backgroundColor:Wd(u)},title:`${u}`},u))})]})]})}function f1(){const o=O(Ee=>Ee.selectedThingId),n=O(Ee=>Ee.objectData),i=O(Ee=>Ee.spriteData),l=O(Ee=>Ee.spriteOverrides),c=O(Ee=>Ee.replaceSprite),u=O(Ee=>Ee.addSprite),m=O(Ee=>Ee.editVersion),h=o!=null?(n==null?void 0:n.things.get(o))??null:null,[p,y]=V.useState(0),[w,x]=V.useState(0),[b,S]=V.useState(!1),[_,M]=V.useState(4),[I,P]=V.useState(!1),[T,L]=V.useState(!1),[A,X]=V.useState(!1),[H,Z]=V.useState(null),[ie,he]=V.useState(0),[be,pe]=V.useState(0),[fe,Q]=V.useState(!1),[re,xe]=V.useState({head:0,body:0,legs:0,feet:0}),[ce,ue]=V.useState(!1),[N,se]=V.useState(2),[K,C]=V.useState(0),[E,W]=V.useState(null),[q,oe]=V.useState(!1),ee=V.useRef(null),[me,De]=V.useState(null),ye=V.useRef(null),Oe=V.useRef(0),xt=V.useRef(""),an=O(Ee=>Ee.activeCategory),rt=an==="outfit",yt=an==="effect",j=an==="distance";V.useEffect(()=>{y(0),x(0),S(!1),he(0),pe(0),se(2),C(0),ue(rt||yt||j),Q(rt)},[o,rt,yt,j]),V.useEffect(()=>{if(!q)return;const Ee=Be=>{ee.current&&!ee.current.contains(Be.target)&&oe(!1)};return document.addEventListener("mousedown",Ee),()=>document.removeEventListener("mousedown",Ee)},[q]);const F=(h==null?void 0:h.frameGroups[p])??null,vt=V.useCallback((Ee,Be,Ve,Ke,ze,We,Ze,Tt,Ae,je,He=0,Xe=0)=>{if(!i)return;const pt=Ae?[0]:[0];for(const Bt of pt)for(let It=0;It<ze.length;It++){const _t=ze[It];for(let en=0;en<Ke.length;en++){const tn=Ke[en],jt=en*We,Ft=It*Ze;for(let at=0;at<Be.height;at++)for(let ct=0;ct<Be.width;ct++){const Ct=tr(Be,Ve,tn,_t,0,Bt,ct,at);if(Ct>=Be.sprites.length)continue;const Ut=Be.sprites[Ct];if(Ut<=0)continue;const Wt=l.get(Ut)??Rn(i,Ut);if(!Wt)continue;const An=new ImageData(new Uint8ClampedArray(Wt.data),32,32);if(Ae){const Et=tr(Be,Ve,tn,_t,0,1,ct,at);if(Et<Be.sprites.length){const Nn=Be.sprites[Et];if(Nn>0){const Br=l.get(Nn)??Rn(i,Nn);Br&&La(An,Br,je)}}}const Tr=He+jt+(Be.width-1-ct)*32,Jr=Xe+Ft+(Be.height-1-at)*32;if(Tt||Ae){const Et=document.createElement("canvas");Et.width=32,Et.height=32,Et.getContext("2d").putImageData(An,0,0),Ee.drawImage(Et,Tr,Jr)}else Ee.putImageData(An,Tr,Jr)}}}},[i,l]),Nt=`${m}:${p}:${o}`;xt.current=Nt;const $t=V.useRef(!1),bt=V.useCallback(Ee=>{const Be=ye.current;if(!Be||!F||!i||xt.current!==Nt)return;if(rt&&p>0&&!$t.current){$t.current=!0,console.group("[RENDER DIAG] Walking group post-remap"),console.log(`layers=${F.layers} frames=${F.animationLength} sprites=${F.sprites.length} pX=${F.patternX}`);const Ft=["N","E","S","W"];for(let at=0;at<F.animationLength;at++)for(let ct=0;ct<F.patternX;ct++)for(let Ct=0;Ct<F.layers;Ct++){const Ut=tr(F,at,ct,0,0,Ct,0,0),Wt=Ut<F.sprites.length?F.sprites[Ut]:-1,An=Wt>0&&(l.has(Wt)||!!Rn(i,Wt));console.log(`  f=${at} ${Ft[ct]} L${Ct}: idx=${Ut} sid=${Wt} hasPixels=${An}`)}console.groupEnd()}const Ve=F.width*32,Ke=F.height*32,ze=ce?[N<F.patternX?N:0]:Array.from({length:F.patternX},(Ft,at)=>at),We=ce?[K<F.patternY?K:0]:Array.from({length:F.patternY},(Ft,at)=>at),Ze=ze.length,Tt=We.length,Ae=me!=null&&me!==o,je=Ae&&(h!=null&&h.flags.hasDisplacement)?h.flags.displacementX??0:0,He=Ae&&(h!=null&&h.flags.hasDisplacement)?h.flags.displacementY??0:0,Xe=Ae&&(je!==0||He!==0),pt=Math.abs(je),Bt=Math.abs(He),It=Ve+pt,_t=Ke+Bt,en=Ze*It,tn=Tt*_t;Be.width=en,Be.height=tn;const jt=Be.getContext("2d");jt.clearRect(0,0,en,tn);for(let Ft=0;Ft<We.length;Ft++){const at=We[Ft];for(let ct=0;ct<ze.length;ct++){const Ct=ze[ct],Ut=ct*It,Wt=Ft*_t,An=Ut+Math.max(0,je),Tr=Wt+Math.max(0,He),Jr=Ut+Math.max(0,-je),Et=Wt+Math.max(0,-He);if(Ae&&n){const xn=n.things.get(me),dt=xn==null?void 0:xn.frameGroups[0];if(dt){const Tn=Ct<dt.patternX?Ct:0,Ir=at<dt.patternY?at:0,or=dt.layers>=2;vt(jt,dt,0,[Tn],[Ir],dt.width*32,dt.height*32,!1,or,re,An,Tr)}}const Nn=rt&&fe&&F.layers>=2,Br=Nn?[0]:fe?Array.from({length:F.layers},(xn,dt)=>dt):[ie];for(const xn of Br)for(let dt=0;dt<F.height;dt++)for(let Tn=0;Tn<F.width;Tn++){const Ir=tr(F,Ee,Ct,at,be,xn,Tn,dt);if(Ir>=F.sprites.length)continue;const or=F.sprites[Ir];if(or<=0)continue;const xs=l.get(or)??Rn(i,or);if(!xs)continue;const Ti=new ImageData(new Uint8ClampedArray(xs.data),32,32);if(Nn){const yn=tr(F,Ee,Ct,at,be,1,Tn,dt);if(yn<F.sprites.length){const ei=F.sprites[yn];if(ei>0){const jr=l.get(ei)??Rn(i,ei);jr&&La(Ti,jr,re)}}}const tt=Jr+(F.width-1-Tn)*32,ys=Et+(F.height-1-dt)*32;if(Ae||Nn||fe&&xn>0){const yn=document.createElement("canvas");yn.width=32,yn.height=32,yn.getContext("2d").putImageData(Ti,0,0),jt.drawImage(yn,tt,ys)}else jt.putImageData(Ti,tt,ys)}if(Xe){jt.save(),jt.strokeStyle="rgba(250, 204, 21, 0.7)",jt.lineWidth=1,jt.setLineDash([4,3]);const xn=An+Ve-32,dt=Tr+Ke-32;jt.strokeRect(xn+.5,dt+.5,31,31),jt.restore()}}}},[F,i,l,ie,be,fe,ce,N,K,rt,re,me,o,n,vt,h,m]);V.useEffect(()=>{bt(w)},[w,bt]),V.useEffect(()=>{var Ke;if(!b||!F||F.animationLength<=1)return;let Ee=w;const Be=()=>{var We;Ee=(Ee+1)%F.animationLength,x(Ee),bt(Ee);const ze=((We=F.animationLengths[Ee])==null?void 0:We.min)??200;Oe.current=window.setTimeout(Be,ze)},Ve=((Ke=F.animationLengths[Ee])==null?void 0:Ke.min)??200;return Oe.current=window.setTimeout(Be,Ve),()=>{clearTimeout(Oe.current)}},[b,F,bt]);const ot=F?ce?1:F.patternX:1,Jt=F?ce?1:F.patternY:1,zn=me!=null&&me!==o,Ar=zn&&(h!=null&&h.flags.hasDisplacement)?Math.abs(h.flags.displacementX??0):0,Nr=zn&&(h!=null&&h.flags.hasDisplacement)?Math.abs(h.flags.displacementY??0):0,Hn=F?ot*(F.width*32+Ar):32,Gn=F?Jt*(F.height*32+Nr):32,cn=V.useCallback((Ee,Be)=>{if(!F||!ye.current)return 0;const Ve=ye.current.getBoundingClientRect(),Ke=(Ee-Ve.left)/_,ze=(Be-Ve.top)/_,We=Math.floor(Ke/32),Ze=Math.floor(ze/32),Tt=ot*F.width,Ae=Jt*F.height;if(We<0||We>=Tt||Ze<0||Ze>=Ae)return 0;const je=Math.floor(We/F.width),He=Math.floor(Ze/F.height),Xe=ce?N<F.patternX?N:0:je,pt=ce?K<F.patternY?K:0:He,Bt=F.width-1-We%F.width,It=F.height-1-Ze%F.height,_t=tr(F,w,Xe,pt,be,ie,Bt,It);return _t<F.sprites.length?F.sprites[_t]:0},[F,_,w,ie,be,ce,N,K,ot,Jt]),$n=V.useCallback((Ee,Be)=>{if(!F||!ye.current)return-1;const Ve=ye.current.getBoundingClientRect(),Ke=(Ee-Ve.left)/_,ze=(Be-Ve.top)/_,We=Math.floor(Ke/32),Ze=Math.floor(ze/32),Tt=ot*F.width,Ae=Jt*F.height;if(We<0||We>=Tt||Ze<0||Ze>=Ae)return-1;const je=Math.floor(We/F.width),He=Math.floor(Ze/F.height),Xe=ce?N<F.patternX?N:0:je,pt=ce?K<F.patternY?K:0:He,Bt=F.width-1-We%F.width,It=F.height-1-Ze%F.height,_t=tr(F,w,Xe,pt,be,ie,Bt,It);return _t<F.sprites.length?_t:-1},[F,_,w,ie,be,ce,N,K,ot,Jt]),Wn=V.useCallback((Ee,Be,Ve)=>{if(!F||!i)return;const Ke=Ee[0];if(!Ke||!Ke.type.startsWith("image/"))return;const ze=new Image;ze.onload=()=>{const We=document.createElement("canvas");We.width=32,We.height=32;const Ze=We.getContext("2d"),Tt=(Ae,je)=>{const He=F.sprites[Ae];if(He>0)c(He,je);else{const Xe=u(je);if(Xe!=null&&(F.sprites[Ae]=Xe,h)){const pt=new Set(O.getState().dirtyIds);pt.add(h.id),O.setState({dirty:!0,dirtyIds:pt})}}};if(ze.width<=32&&ze.height<=32){Ze.clearRect(0,0,32,32),Ze.drawImage(ze,0,0,32,32);const Ae=Ze.getImageData(0,0,32,32);let je=-1;if(Be!=null&&Ve!=null){const He=cn(Be,Ve);He>0&&(je=F.sprites.indexOf(He))}je<0&&(je=tr(F,w,0,0,0,0,0,0)),je>=0&&je<F.sprites.length&&Tt(je,Ae)}else{const Ae=F.patternX*F.width,je=F.patternY*F.height;for(let He=0;He<je&&He*32<ze.height;He++)for(let Xe=0;Xe<Ae&&Xe*32<ze.width;Xe++){const pt=Math.floor(Xe/F.width),Bt=Math.floor(He/F.height),It=F.width-1-Xe%F.width,_t=F.height-1-He%F.height,en=tr(F,w,pt,Bt,0,0,It,_t);if(en>=F.sprites.length)continue;Ze.clearRect(0,0,32,32),Ze.drawImage(ze,Xe*32,He*32,32,32,0,0,32,32);const tn=Ze.getImageData(0,0,32,32);Tt(en,tn)}}},ze.src=URL.createObjectURL(Ke)},[F,h,i,w,c,u,cn]),sr=V.useCallback(Ee=>{Ee.preventDefault(),X(!1),Z(null);const Be=Ee.dataTransfer.getData("application/x-sprite-id");if(Be&&h&&F){const Ve=parseInt(Be,10);if(!isNaN(Ve)&&Ve>0){const Ke=$n(Ee.clientX,Ee.clientY);if(Ke>=0){F.sprites[Ke]=Ve,h.rawBytes=void 0,nr();const ze=O.getState(),We=new Set(ze.dirtyIds);We.add(h.id),O.setState({dirty:!0,dirtyIds:We,editVersion:ze.editVersion+1})}return}}Ee.dataTransfer.files.length>0&&Wn(Ee.dataTransfer.files,Ee.clientX,Ee.clientY)},[Wn,h,F,$n]),Go=V.useCallback((Ee,Be)=>{if(!h||!F)return;F[Ee]=Be;const Ve=F.width*F.height*F.layers*F.patternX*F.patternY*F.patternZ*F.animationLength;if(F.sprites.length<Ve)for(;F.sprites.length<Ve;)F.sprites.push(0);else F.sprites.length>Ve&&(F.sprites.length=Ve);for(;F.animationLengths.length<F.animationLength;)F.animationLengths.push({min:100,max:100});F.animationLengths.length>F.animationLength&&(F.animationLengths.length=F.animationLength),h.rawBytes=void 0,nr();const Ke=O.getState(),ze=new Set(Ke.dirtyIds);ze.add(h.id),O.setState({dirty:!0,dirtyIds:ze,editVersion:Ke.editVersion+1})},[h,F]);return h?(F&&F.animationLength>1,f.jsxs("div",{className:"flex flex-col h-full",children:[f.jsxs("div",{className:"flex items-center px-4 py-2 border-b border-emperia-border gap-3",children:[f.jsx("span",{className:"text-[10px] text-emperia-muted",children:"Zoom:"}),f.jsx("input",{type:"range",min:1,max:8,value:_,onChange:Ee=>M(Number(Ee.target.value)),className:"flex-1 h-1 accent-emperia-accent"}),f.jsxs("span",{className:"text-[10px] text-emperia-muted w-6 text-right",children:[_,"x"]})]}),f.jsx("div",{className:"flex-1 flex items-center justify-center overflow-auto min-h-0",children:(()=>{const Ee=(F==null?void 0:F.patternX)??0,Be=(F==null?void 0:F.patternY)??0,Ve=j&&Ee>=3&&Be>=3,Ke=(rt||yt)&&Ee>1&&Ee<=4,ze=ce&&F&&(Ve||Ke),We=ze?Ve?[{px:0,py:0,label:"NW",arrow:""},{px:1,py:0,label:"N",arrow:""},{px:2,py:0,label:"NE",arrow:""},{px:0,py:1,label:"W",arrow:""},"canvas",{px:2,py:1,label:"E",arrow:""},{px:0,py:2,label:"SW",arrow:""},{px:1,py:2,label:"S",arrow:""},{px:2,py:2,label:"SE",arrow:""}]:[null,{px:0,py:0,label:"N",arrow:""},null,{px:3,py:0,label:"W",arrow:""},"canvas",{px:1,py:0,label:"E",arrow:""},null,{px:2,py:0,label:"S",arrow:""},null]:[],Ze=(Ae,je)=>f.jsx("button",{onClick:()=>{se(Ae.px),C(Ae.py)},className:`w-9 h-9 flex items-center justify-center rounded-lg text-sm font-bold transition-colors ${N===Ae.px&&K===Ae.py?"bg-emperia-accent text-white shadow-lg shadow-emperia-accent/30":"bg-emperia-surface border border-emperia-border text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover"}`,title:Ae.label,children:Ae.arrow},`dir-${je}`),Tt=f.jsxs("div",{className:`checkerboard rounded-lg border relative transition-colors
                ${A?"border-emperia-accent border-2":"border-emperia-border"}`,style:{padding:8},onDragOver:Ae=>{if(Ae.preventDefault(),X(!0),ye.current&&F){const je=ye.current.getBoundingClientRect(),He=Math.floor((Ae.clientX-je.left)/(32*_)),Xe=Math.floor((Ae.clientY-je.top)/(32*_)),pt=ot*F.width,Bt=Jt*F.height;He>=0&&He<pt&&Xe>=0&&Xe<Bt?Z({col:He,row:Xe}):Z(null)}},onDragLeave:()=>{X(!1),Z(null)},onDrop:Ae=>{Z(null),sr(Ae)},children:[f.jsx("canvas",{ref:ye,className:"cursor-pointer",onClick:Ae=>{const je=cn(Ae.clientX,Ae.clientY);je>0&&O.setState({focusSpriteId:je})},style:{width:Hn*_,height:Gn*_,imageRendering:"pixelated"}}),I&&F&&f.jsx("div",{className:"absolute inset-2 pointer-events-none",style:{backgroundImage:`
                      repeating-linear-gradient(0deg, rgba(255,255,255,0.15), rgba(255,255,255,0.15) 1px, transparent 1px, transparent ${32*_}px),
                      repeating-linear-gradient(90deg, rgba(255,255,255,0.15), rgba(255,255,255,0.15) 1px, transparent 1px, transparent ${32*_}px)
                    `,backgroundSize:`${32*_}px ${32*_}px`}}),T&&F&&f.jsx("div",{className:"absolute pointer-events-none border border-yellow-400/60",style:{bottom:8,left:8,width:F.width*32*_,height:F.height*32*_}}),A&&!H&&f.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-emperia-accent/10 rounded-lg pointer-events-none",children:f.jsx("span",{className:"text-emperia-accent text-xs font-medium",children:"Drop PNG to replace"})}),H&&f.jsx("div",{className:"absolute pointer-events-none border-2 border-emperia-accent bg-emperia-accent/15 rounded-sm",style:{left:8+H.col*32*_,top:8+H.row*32*_,width:32*_,height:32*_}})]});return ze?f.jsx("div",{className:"grid gap-1",style:{gridTemplateColumns:"auto auto auto",gridTemplateRows:"auto auto auto",justifyItems:"center",alignItems:"center"},children:We.map((Ae,je)=>Ae==="canvas"?f.jsx("div",{children:Tt},"canvas"):Ae!=null?Ze(Ae,je):f.jsx("div",{className:"w-9 h-9"},`empty-${je}`))}):f.jsxs("div",{className:`checkerboard rounded-lg border relative transition-colors
            ${A?"border-emperia-accent border-2":"border-emperia-border"}`,style:{padding:8},onDragOver:Ae=>{if(Ae.preventDefault(),X(!0),ye.current&&F){const je=ye.current.getBoundingClientRect(),He=Math.floor((Ae.clientX-je.left)/(32*_)),Xe=Math.floor((Ae.clientY-je.top)/(32*_)),pt=ot*F.width,Bt=Jt*F.height;He>=0&&He<pt&&Xe>=0&&Xe<Bt?Z({col:He,row:Xe}):Z(null)}},onDragLeave:()=>{X(!1),Z(null)},onDrop:Ae=>{Z(null),sr(Ae)},children:[f.jsx("canvas",{ref:ye,className:"cursor-pointer",onClick:Ae=>{const je=cn(Ae.clientX,Ae.clientY);je>0&&O.setState({focusSpriteId:je})},style:{width:Hn*_,height:Gn*_,imageRendering:"pixelated"}}),I&&F&&f.jsx("div",{className:"absolute inset-2 pointer-events-none",style:{backgroundImage:`
                  repeating-linear-gradient(0deg, rgba(255,255,255,0.15), rgba(255,255,255,0.15) 1px, transparent 1px, transparent ${32*_}px),
                  repeating-linear-gradient(90deg, rgba(255,255,255,0.15), rgba(255,255,255,0.15) 1px, transparent 1px, transparent ${32*_}px)
                `,backgroundSize:`${32*_}px ${32*_}px`}}),T&&F&&f.jsx("div",{className:"absolute pointer-events-none border border-yellow-400/60",style:{bottom:8,left:8,width:F.width*32*_,height:F.height*32*_}}),A&&!H&&f.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-emperia-accent/10 rounded-lg pointer-events-none",children:f.jsx("span",{className:"text-emperia-accent text-xs font-medium",children:"Drop PNG to replace"})}),H&&f.jsx("div",{className:"absolute pointer-events-none border-2 border-emperia-accent bg-emperia-accent/15 rounded-sm",style:{left:8+H.col*32*_,top:8+H.row*32*_,width:32*_,height:32*_}})]})})()}),f.jsx(o1,{thing:h,group:F,objectData:n,spriteData:i,spriteOverrides:l,category:an,zoom:_,setZoom:M,showGrid:I,setShowGrid:P,showCropSize:T,setShowCropSize:L,previewMode:ce,setPreviewMode:ue,playing:b,setPlaying:S,currentFrame:w,setCurrentFrame:x,canvasRef:ye,handleImageFiles:Wn,copyMenuOpen:q,setCopyMenuOpen:oe,copyMenuRef:ee,baseOutfitId:me,setBaseOutfitId:De}),(h.frameGroups.length>1||rt)&&f.jsxs("div",{className:"flex items-center justify-center px-4 py-1.5 gap-1 border-t border-emperia-border",children:[h.frameGroups.map((Ee,Be)=>f.jsx("button",{onClick:()=>{y(Be),x(0),S(!1),he(0),pe(0)},className:`px-3 py-1 rounded text-[11px] font-medium transition-colors
                ${p===Be?"bg-emperia-accent text-white":"bg-emperia-surface text-emperia-muted hover:bg-emperia-hover border border-emperia-border"}
              `,children:Be===0?"Idle":Be===1?"Moving":`Group ${Be}`},Be)),f.jsxs("span",{className:"text-[9px] text-emperia-muted/50 ml-1",children:[h.frameGroups.length," grp"]}),F&&F.layers>1&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-px h-4 bg-emperia-border mx-1"}),Array.from({length:F.layers},(Ee,Be)=>f.jsxs("button",{onClick:()=>{he(Be),Q(!1)},className:`px-2 py-0.5 rounded text-[10px] font-medium transition-colors
                    ${!fe&&ie===Be?"bg-purple-600 text-white":"bg-emperia-surface text-emperia-muted hover:bg-emperia-hover border border-emperia-border"}
                  `,children:["L",Be]},Be)),f.jsx("button",{onClick:()=>Q(!0),className:`px-2 py-0.5 rounded text-[10px] font-medium transition-colors
                  ${fe?"bg-purple-600 text-white":"bg-emperia-surface text-emperia-muted hover:bg-emperia-hover border border-emperia-border"}
                `,children:"Blend"})]})]}),F&&f.jsx(a1,{thing:h,group:F,isOutfit:rt,isDistance:j,previewMode:ce,activeDirection:N,setActiveDirection:se,activePatternY:K,setActivePatternY:C,activeZ:be,setActiveZ:pe,activeLayer:ie,setActiveLayer:he,blendLayers:fe,setBlendLayers:Q,currentFrame:w,setCurrentFrame:x,playing:b,setPlaying:S,outfitColors:re,setOutfitColors:xe,showColorPicker:E,setShowColorPicker:W,updateFrameGroupProp:Go})]})):f.jsx("div",{className:"flex items-center justify-center h-full text-emperia-muted text-sm",children:"Select an object to preview"})}const Zf=[{title:"Ground & Stacking",wide:!0,flags:[{key:"ground",label:"Ground",numericProps:[{key:"groundSpeed",label:"Speed",min:0,max:65535}]},{key:"groundBorder",label:"Ground Border"},{key:"onBottom",label:"On Bottom"},{key:"onTop",label:"On Top"},{key:"fullGround",label:"Full Ground"},{key:"topEffect",label:"Top Effect"}]},{title:"Blocking",flags:[{key:"notWalkable",label:"Not Walkable"},{key:"notMoveable",label:"Not Moveable"},{key:"blockProjectile",label:"Block Projectile"},{key:"notPathable",label:"Not Pathable"}]},{title:"Fluids",flags:[{key:"fluidContainer",label:"Fluid Container"},{key:"splash",label:"Splash"}]},{title:"Interaction",flags:[{key:"pickupable",label:"Pickupable"},{key:"stackable",label:"Stackable"},{key:"container",label:"Container"},{key:"forceUse",label:"Force Use"},{key:"multiUse",label:"Multi Use"},{key:"usable",label:"Usable"},{key:"rotateable",label:"Rotateable"},{key:"wrapable",label:"Wrapable"},{key:"unwrapable",label:"Unwrapable"}]},{title:"Hooks & Hanging",flags:[{key:"hangable",label:"Hangable"},{key:"hookSouth",label:"Hook South"},{key:"hookEast",label:"Hook East"}]},{title:"Writing",wide:!0,flags:[{key:"writable",label:"Writable",numericProps:[{key:"writableMaxLen",label:"Max Length",min:0,max:65535}]},{key:"writableOnce",label:"Writable Once",numericProps:[{key:"writableOnceMaxLen",label:"Max Length",min:0,max:65535}]}]},{title:"Visual",wide:!0,flags:[{key:"hasLight",label:"Light",numericProps:[{key:"lightLevel",label:"Level",min:0,max:65535},{key:"lightColor",label:"Color",min:0,max:65535}]},{key:"hasDisplacement",label:"Displacement",numericProps:[{key:"displacementX",label:"X",min:-512,max:512},{key:"displacementY",label:"Y",min:-512,max:512}]},{key:"hasElevation",label:"Elevation",numericProps:[{key:"elevation",label:"Height",min:0,max:65535}]},{key:"hasMinimapColor",label:"Minimap Color",numericProps:[{key:"minimapColor",label:"Color",min:0,max:65535}]},{key:"translucent",label:"Translucent"},{key:"dontHide",label:"Don't Hide"},{key:"animateAlways",label:"Animate Always"},{key:"noMoveAnimation",label:"No Move Animation"}]},{title:"Equipment & Market",wide:!0,flags:[{key:"cloth",label:"Cloth",numericProps:[{key:"clothSlot",label:"Slot",min:0,max:65535}]},{key:"hasMarket",label:"Market"},{key:"chargeable",label:"Chargeable"}]},{title:"Miscellaneous",flags:[{key:"lyingCorpse",label:"Lying Corpse"},{key:"look",label:"Look"}]}],Qd=Zf.flatMap(o=>o.flags);function Zd({showAttributesOnly:o}={}){const n=O(h=>h.selectedThingId),i=O(h=>h.objectData),l=O(h=>h.updateThingFlags);O(h=>h.editVersion);const c=n!=null?(i==null?void 0:i.things.get(n))??null:null,u=V.useCallback(h=>{if(!c)return;const p={...c.flags};p[h]=!p[h],p[h]||(h==="ground"&&(p.groundSpeed=void 0),h==="hasLight"&&(p.lightLevel=void 0,p.lightColor=void 0),h==="hasDisplacement"&&(p.displacementX=void 0,p.displacementY=void 0),h==="hasElevation"&&(p.elevation=void 0),h==="hasMinimapColor"&&(p.minimapColor=void 0),h==="cloth"&&(p.clothSlot=void 0)),p[h]&&(h==="ground"&&p.groundSpeed==null&&(p.groundSpeed=100),h==="hasLight"&&(p.lightLevel==null&&(p.lightLevel=7),p.lightColor==null&&(p.lightColor=215)),h==="hasDisplacement"&&(p.displacementX==null&&(p.displacementX=8),p.displacementY==null&&(p.displacementY=8)),h==="hasElevation"&&p.elevation==null&&(p.elevation=8),h==="hasMinimapColor"&&p.minimapColor==null&&(p.minimapColor=0),h==="cloth"&&p.clothSlot==null&&(p.clothSlot=0)),l(c.id,p)},[c,l]),m=V.useCallback((h,p)=>{if(!c)return;const y={...c.flags,[h]:p};l(c.id,y)},[c,l]);return c?o?f.jsxs("div",{className:"p-3 text-xs space-y-4",children:[c.frameGroups.map((h,p)=>f.jsxs(qd,{title:`Frame Group ${p}${c.category==="outfit"?p===0?" (Idle)":" (Moving)":""}`,children:[f.jsx(Pn,{label:"Size",value:`${h.width}x${h.height}`}),f.jsx(Pn,{label:"Layers",value:h.layers}),f.jsx(Pn,{label:"Pattern X",value:h.patternX}),f.jsx(Pn,{label:"Pattern Y",value:h.patternY}),f.jsx(Pn,{label:"Pattern Z",value:h.patternZ}),f.jsx(Pn,{label:"Animations",value:h.animationLength}),f.jsx(Pn,{label:"Sprites",value:h.sprites.length}),h.animationLength>1&&f.jsxs(f.Fragment,{children:[f.jsx(Pn,{label:"Async",value:h.asynchronous?"Yes":"No"}),f.jsx(Pn,{label:"Loop Count",value:h.nLoop===0?"Infinite":h.nLoop}),f.jsx(Pn,{label:"Start Frame",value:h.start})]})]},p)),f.jsx(qd,{title:"Active Flags",children:f.jsxs("div",{className:"space-y-0.5",children:[Qd.filter(({key:h})=>!!c.flags[h]).map(({key:h,label:p})=>f.jsx("div",{className:"text-emperia-text text-xs",children:p},h)),Qd.every(({key:h})=>!c.flags[h])&&f.jsx("span",{className:"text-emperia-muted italic",children:"None"})]})})]}):f.jsx("div",{className:"p-3 text-xs space-y-1",children:f.jsx("div",{className:"grid grid-cols-4 gap-1",children:Zf.map(h=>{const p=h.flags.filter(w=>!!c.flags[w.key]).length,y=h.wide?"col-span-2":"";return f.jsx("div",{className:y,children:f.jsx(h1,{title:h.title,activeCount:p,flags:h.flags,thingFlags:c.flags,onToggle:u,onNumericChange:m})},h.title)})})}):f.jsx("div",{className:"p-4 text-emperia-muted text-sm",children:"No object selected"})}function qd({title:o,children:n}){return f.jsxs("div",{children:[f.jsx("h3",{className:"text-emperia-accent font-semibold text-[11px] uppercase tracking-wider mb-1.5 pb-1 border-b border-emperia-border",children:o}),f.jsx("div",{className:"space-y-0.5",children:n})]})}function Pn({label:o,value:n}){return f.jsxs("div",{className:"flex justify-between py-0.5",children:[f.jsx("span",{className:"text-emperia-muted",children:o}),f.jsx("span",{className:"text-emperia-text font-mono",children:String(n)})]})}function h1({title:o,activeCount:n,flags:i,thingFlags:l,onToggle:c,onNumericChange:u}){const[m,h]=V.useState(!0);return f.jsxs("div",{className:"border border-emperia-border/50 rounded overflow-hidden",children:[f.jsxs("button",{onClick:()=>h(!m),className:"w-full flex items-center gap-1.5 px-2 py-1.5 bg-emperia-surface/60 hover:bg-emperia-surface transition-colors text-left",children:[m?f.jsx(af,{className:"w-3 h-3 text-emperia-muted shrink-0"}):f.jsx(cf,{className:"w-3 h-3 text-emperia-muted shrink-0"}),f.jsx("span",{className:"text-[10px] font-semibold text-emperia-text uppercase tracking-wider flex-1",children:o}),n>0&&f.jsx("span",{className:"text-[9px] font-medium text-emperia-accent bg-emperia-accent/15 px-1.5 py-0.5 rounded-full",children:n})]}),m&&f.jsx("div",{className:"px-1 py-0.5",children:i.map(({key:p,label:y,numericProps:w})=>{const x=!!l[p];return f.jsxs("div",{children:[f.jsxs("label",{className:"flex items-center gap-2 py-[3px] px-1 rounded hover:bg-emperia-hover cursor-pointer select-none",children:[f.jsx("input",{type:"checkbox",checked:x,onChange:()=>c(p),className:"w-3 h-3 rounded border-emperia-border bg-emperia-surface accent-emperia-accent cursor-pointer"}),f.jsx("span",{className:x?"text-emperia-text":"text-emperia-muted",children:y})]}),x&&w&&w.length>0&&f.jsx("div",{className:"ml-7 mb-1 flex flex-wrap gap-x-3 gap-y-0.5",children:w.map(b=>f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("span",{className:"text-emperia-muted text-[10px]",children:b.label}),f.jsx("input",{type:"number",value:l[b.key]??0,min:b.min,max:b.max,onChange:S=>{const _=parseInt(S.target.value,10);isNaN(_)||u(b.key,Math.max(b.min??0,Math.min(b.max??65535,_)))},className:`w-16 px-1 py-0.5 rounded bg-emperia-surface border border-emperia-border
                                     text-emperia-text font-mono text-right text-[10px] outline-none
                                     focus:border-emperia-accent transition-colors`})]},b.key))})]},p)})})]})}const Jd=40;function p1({spriteId:o,spriteData:n,spriteOverrides:i,isHighlighted:l,isAtlasSelected:c,hasSelectedSlot:u,onClick:m,onContextMenu:h,onDragStart:p,onDelete:y}){const w=Oo(n,o,i);return f.jsxs("div",{draggable:!0,onDragStart:p,className:`group relative flex items-center justify-center border transition-colors cursor-grab active:cursor-grabbing
        ${c?"border-emperia-accent bg-emperia-accent/20":l?"border-green-400 bg-green-400/20":u?"border-transparent hover:bg-emperia-accent/10 hover:border-emperia-accent/30 cursor-pointer":"border-transparent hover:bg-emperia-hover"}
      `,style:{width:Jd,height:Jd},title:`#${o}${c?" (selected)":""}  Ctrl+click to multi-select, Shift+click for range`,onClick:m,onContextMenu:h,children:[w?f.jsx("img",{src:w,alt:"",draggable:!1,className:"w-8 h-8 pointer-events-none",style:{imageRendering:"pixelated"}}):f.jsx("div",{className:"w-6 h-6"}),f.jsx("span",{className:"absolute bottom-0 right-0.5 text-[6px] text-emperia-muted/40 leading-none",children:o}),!c&&f.jsx("button",{className:"absolute top-0 right-0 p-0.5 rounded-bl bg-red-500/80 text-white opacity-0 group-hover:opacity-100 transition-opacity",onClick:x=>{x.stopPropagation(),y()},title:`Delete sprite #${o}`,children:f.jsx(ps,{className:"w-2.5 h-2.5"})})]})}const ef=[{value:1,label:"11",desc:"no padding"},{value:2,label:"22",desc:"4 tiles/group"},{value:4,label:"44",desc:"16 tiles/group"}],Yr=40,Mn=6;function m1(){var C;const o=O(E=>E.selectedThingId),n=O(E=>E.objectData),i=O(E=>E.spriteData),l=O(E=>E.spriteOverrides),c=O(E=>E.focusSpriteId),u=O(E=>E.importTileSize),m=O(E=>E.selectedSlots),[h,p]=V.useState(""),[y,w]=V.useState(0),[x,b]=V.useState(0),[S,_]=V.useState(null),[M,I]=V.useState(new Set),[P,T]=V.useState(null),L=V.useRef(null),A=V.useRef(null),X=o!=null?(n==null?void 0:n.things.get(o))??null:null,H=V.useCallback(E=>{const W=O.getState().addSprite,q=u;Array.from(E).forEach(oe=>{const ee=new Image;ee.onload=()=>{const me=document.createElement("canvas"),De=me.getContext("2d");me.width=32,me.height=32;const ye=Math.max(1,Math.floor(ee.width/32)),Oe=Math.max(1,Math.floor(ee.height/32)),xt=q>1?Math.max(1,Math.floor(ye/q)):ye,an=q>1?Math.max(1,Math.floor(Oe/q)):Oe,rt=[];let yt=(i==null?void 0:i.spriteCount)??0;const j=()=>{const F=yt%Mn;if(F===0)return;const vt=Mn-F,Nt=new ImageData(32,32);for(let $t=0;$t<vt;$t++)W(Nt),yt++};if(q<=1)for(let F=0;F<Oe;F++)for(let vt=0;vt<ye;vt++){De.clearRect(0,0,32,32),De.drawImage(ee,vt*32,F*32,32,32,0,0,32,32);const Nt=De.getImageData(0,0,32,32);let $t=!1;for(let ot=3;ot<Nt.data.length;ot+=4)if(Nt.data[ot]>0){$t=!0;break}if(!$t)continue;const bt=W(Nt);bt!=null&&(rt.push(bt),yt++)}else{const F=Math.max(1,Math.floor(Mn/q));j();for(let vt=0;vt<an;vt++)for(let Nt=0;Nt<xt;Nt+=F){const $t=Math.min(F,xt-Nt);for(let bt=0;bt<q;bt++){for(let ot=0;ot<$t;ot++){const Jt=Nt+ot;for(let zn=0;zn<q;zn++){const Ar=Jt*q+zn,Nr=vt*q+bt;if(Ar>=ye||Nr>=Oe)continue;De.clearRect(0,0,32,32),De.drawImage(ee,Ar*32,Nr*32,32,32,0,0,32,32);const Hn=De.getImageData(0,0,32,32);let Gn=!1;for(let $n=3;$n<Hn.data.length;$n+=4)if(Hn.data[$n]>0){Gn=!0;break}const cn=W(Gn?Hn:new ImageData(32,32));cn!=null&&(rt.push(cn),yt++)}}j()}}}if(rt.length>0&&(p(""),_(rt[0]),setTimeout(()=>_(null),2e3),L.current&&i)){const F=rt[0]-1,vt=Math.floor(F/Mn);L.current.scrollTop=vt*Yr}},ee.src=URL.createObjectURL(oe)})},[i,u]),Z=V.useCallback(E=>{E<=0||confirm(`Delete sprite #${E}? It will be replaced with a blank sprite.`)&&O.getState().deleteSprite(E)},[]);V.useEffect(()=>{O.setState({selectedSlots:[]})},[o]),V.useEffect(()=>{if(c!=null&&c>0&&L.current&&i){p("");const E=c-1,W=Math.floor(E/Mn);L.current.scrollTop=W*Yr,_(c),O.setState({focusSpriteId:null}),setTimeout(()=>_(null),2e3)}},[c,i]);const ie=O(E=>E.editVersion),he=V.useMemo(()=>{if(!i)return[];if(h){const W=parseInt(h,10);if(!isNaN(W)){const q=[];for(let oe=Math.max(1,W-50);oe<=Math.min(i.spriteCount,W+200);oe++)q.push(oe);return q}}const E=[];for(let W=1;W<=i.spriteCount;W++)E.push(W);return E},[i,h,ie]),be=Math.ceil(he.length/Mn),pe=be*Yr,fe=V.useCallback(()=>{L.current&&(w(L.current.scrollTop),b(L.current.clientHeight))},[]);V.useEffect(()=>{fe();const E=L.current;if(E){const W=new ResizeObserver(fe);return W.observe(E),()=>W.disconnect()}},[fe]),V.useEffect(()=>{if(h&&L.current){const E=parseInt(h,10);if(!isNaN(E)){const W=he.indexOf(E);if(W>=0){const q=Math.floor(W/Mn);L.current.scrollTop=q*Yr}}}},[h,he]);const Q=Math.max(0,Math.floor(y/Yr)-2),re=Math.min(be,Math.ceil((y+x)/Yr)+2),xe=he.slice(Q*Mn,re*Mn),ce=V.useCallback((E,W)=>{if(!X)return;const q=X.frameGroups[E.group];if(!q)return;q.sprites[E.index]=W,X.rawBytes=void 0,nr();const oe=O.getState(),ee=new Set(oe.dirtyIds);ee.add(X.id),O.setState({dirty:!0,dirtyIds:ee,editVersion:oe.editVersion+1})},[X]),ue=V.useMemo(()=>{const E=new Set;if(!n)return E;for(const W of n.things.values())for(const q of W.frameGroups)for(const oe of q.sprites)oe>0&&E.add(oe);return E},[n,ie]),N=V.useCallback(()=>{if(M.size===0)return;const E=Array.from(M).filter(oe=>oe>0);if(E.length===0)return;const W=E.filter(oe=>ue.has(oe));let q=`Delete ${E.length} selected sprite(s)? They will be replaced with blank sprites.`;W.length>0&&(q+=`

WARNING: ${W.length} of these sprites are referenced by objects and will appear blank in-game!`),confirm(q)&&(O.getState().deleteSprites(E),I(new Set))},[M,ue]),se=V.useCallback((E,W)=>{if(m.length>0&&X){for(const q of m)ce(q,W);O.setState({selectedSlots:[]});return}if(E.ctrlKey||E.metaKey)I(q=>{const oe=new Set(q);return oe.has(W)?oe.delete(W):oe.add(W),oe}),T(W);else if(E.shiftKey&&P!=null){const q=he.indexOf(P),oe=he.indexOf(W);if(q>=0&&oe>=0){const ee=Math.min(q,oe),me=Math.max(q,oe);I(De=>{const ye=new Set(De);for(let Oe=ee;Oe<=me;Oe++)ye.add(he[Oe]);return ye})}}else I(q=>q.size===1&&q.has(W)?new Set:new Set([W])),T(W)},[m,X,ce,P,he]),K=V.useCallback((E,W)=>{E.dataTransfer.setData("application/x-sprite-id",String(W)),E.dataTransfer.effectAllowed="copy"},[]);return i?f.jsx("div",{className:"flex flex-col h-full",children:f.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[f.jsxs("div",{className:"px-2 py-1.5 border-b border-emperia-border flex items-center gap-1.5",children:[f.jsx("span",{className:"text-[10px] font-medium text-emperia-text uppercase tracking-wider shrink-0",children:"Sprite Atlas"}),f.jsxs("div",{className:"flex-1 relative",children:[f.jsx(Uo,{className:"absolute left-1.5 top-1/2 -translate-y-1/2 w-3 h-3 text-emperia-muted"}),f.jsx("input",{type:"text",value:h,onChange:E=>p(E.target.value),placeholder:"Go to ID...",className:"w-full pl-6 pr-2 py-0.5 bg-emperia-bg border border-emperia-border rounded text-[10px] text-emperia-text placeholder:text-emperia-muted/50 focus:outline-none focus:border-emperia-accent"})]}),f.jsx("input",{ref:A,type:"file",accept:"image/png,image/gif,image/bmp",multiple:!0,className:"hidden",onChange:E=>{E.target.files&&H(E.target.files),E.target.value=""}}),f.jsxs("div",{className:"flex items-center gap-0.5 shrink-0",children:[f.jsx("button",{onClick:()=>{var E;return(E=A.current)==null?void 0:E.click()},className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-green-400 transition-colors",title:`Add new sprites from PNG (3232 tiles${u>1?`, grouped ${u}${u} with row padding`:""})`,children:f.jsx(Xa,{className:"w-3.5 h-3.5"})}),f.jsxs("div",{className:"relative group",children:[f.jsxs("button",{className:"flex items-center gap-0.5 px-1 py-0.5 rounded text-[9px] font-medium text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover transition-colors border border-emperia-border",title:"Import grouping  pads atlas rows between NxN tile groups for visual clarity",children:[f.jsx(Am,{className:"w-3 h-3"}),(C=ef.find(E=>E.value===u))==null?void 0:C.label]}),f.jsx("div",{className:"absolute right-0 top-full mt-0.5 z-50 hidden group-hover:block bg-emperia-panel border border-emperia-border rounded shadow-lg py-0.5 min-w-[90px]",children:ef.map(E=>f.jsxs("button",{onClick:()=>O.setState({importTileSize:E.value}),className:`w-full text-left px-2 py-0.5 text-[10px] transition-colors ${u===E.value?"text-emperia-accent bg-emperia-accent/10":"text-emperia-text hover:bg-emperia-hover"}`,children:[E.label," ",f.jsxs("span",{className:"text-emperia-muted",children:["(",E.desc,")"]})]},E.value))})]})]}),f.jsx("button",{onClick:()=>{const E=O.getState().compactSpriteAtlas();E&&(E.removed===0?alert("Atlas is already compact  no blank or unreferenced sprites found."):(I(new Set),alert(`Compacted atlas: removed ${E.removed} blank/unreferenced sprites.
${E.oldCount}  ${E.newCount} sprites.

All references have been remapped.`)))},className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-amber-400 transition-colors shrink-0",title:"Compact atlas  remove blank/unreferenced sprites and remap all references",children:f.jsx(Fm,{className:"w-3.5 h-3.5"})})]}),M.size>0&&f.jsxs("div",{className:"px-2 py-1 border-b border-emperia-border bg-emperia-accent/5 flex items-center gap-2",children:[f.jsxs("span",{className:"text-[10px] text-emperia-accent font-medium",children:[M.size," selected"]}),f.jsxs("button",{onClick:N,className:"flex items-center gap-0.5 px-1.5 py-0.5 rounded text-[10px] bg-red-500/10 text-red-400 hover:bg-red-500/20 transition-colors",title:"Delete selected sprites (replaces with blank)",children:[f.jsx(ps,{className:"w-3 h-3"}),"Delete"]}),f.jsxs("button",{onClick:()=>I(new Set),className:"flex items-center gap-0.5 px-1.5 py-0.5 rounded text-[10px] text-emperia-muted hover:text-emperia-text hover:bg-emperia-hover transition-colors ml-auto",title:"Clear selection",children:[f.jsx(Qa,{className:"w-3 h-3"}),"Clear"]})]}),f.jsx("div",{ref:L,onScroll:fe,className:"flex-1 overflow-y-auto",children:f.jsx("div",{style:{height:pe,position:"relative"},children:f.jsx("div",{style:{position:"absolute",top:Q*Yr,left:0,right:0,display:"grid",gridTemplateColumns:`repeat(${Mn}, 1fr)`},children:xe.map(E=>f.jsx(p1,{spriteId:E,spriteData:i,spriteOverrides:l,isHighlighted:E===S,isAtlasSelected:M.has(E),hasSelectedSlot:m.length>0,onClick:W=>se(W,E),onContextMenu:W=>{W.preventDefault(),M.size>1&&M.has(E)?N():Z(E)},onDragStart:W=>K(W,E),onDelete:()=>Z(E)},E))})})})]})}):f.jsx("div",{className:"p-3 text-emperia-muted text-xs",children:"Load files to browse sprites"})}const tf=40;function g1(){const o=O(x=>x.selectedThingId),n=O(x=>x.objectData),i=O(x=>x.spriteData),l=O(x=>x.spriteOverrides),c=O(x=>x.selectedSlots),u=O(x=>x.editVersion),m=o!=null?(n==null?void 0:n.things.get(o))??null:null,h=V.useRef(-1),p=V.useMemo(()=>{if(!m)return[];const x=[];return m.frameGroups.forEach((b,S)=>{b.sprites.forEach((_,M)=>{x.push({spriteId:_,group:S,index:M})})}),x},[m,u]),y=V.useCallback((x,b)=>c.some(S=>S.group===x&&S.index===b),[c]),w=V.useCallback((x,b,S,_)=>{const M={group:b,index:S};if(x.ctrlKey||x.metaKey){const P=y(b,S)?c.filter(T=>!(T.group===b&&T.index===S)):[...c,M];O.setState({selectedSlots:P}),h.current=_}else if(x.shiftKey&&h.current>=0){const I=Math.min(h.current,_),P=Math.max(h.current,_),T=p.slice(I,P+1).map(A=>({group:A.group,index:A.index})),L=[...c];for(const A of T)L.some(X=>X.group===A.group&&X.index===A.index)||L.push(A);O.setState({selectedSlots:L})}else y(b,S)&&c.length===1?O.setState({selectedSlots:[]}):O.setState({selectedSlots:[M]}),h.current=_},[c,y,p]);return!m||!i||p.length===0?null:f.jsxs("div",{className:"shrink-0 border-b border-emperia-border",children:[f.jsxs("div",{className:"px-2 py-1.5 flex items-center justify-between",children:[f.jsx("span",{className:"text-[10px] font-medium text-emperia-text uppercase tracking-wider",children:"Object Sprites"}),f.jsx("span",{className:"text-[10px] text-emperia-muted",children:c.length>0?`${c.length} selected`:p.length})]}),f.jsx("div",{className:"overflow-y-auto max-h-48 px-1.5 pb-1.5",children:f.jsx("div",{className:"grid grid-cols-6 gap-0.5",children:p.map(({spriteId:x,group:b,index:S},_)=>{const M=x>0?Oo(i,x,l):null,I=y(b,S),P=l.has(x);return f.jsxs("button",{onClick:T=>w(T,b,S,_),className:`relative flex items-center justify-center rounded border transition-colors
                  ${I?"border-emperia-accent bg-emperia-accent/20":P?"border-amber-500/50 bg-amber-500/10":"border-emperia-border/40 hover:border-emperia-muted"}
                `,style:{width:tf,height:tf},title:`Slot ${_}  Sprite #${x}${I?" (selected  click atlas sprite to assign)":`
Click to select, Ctrl+click multi-select, Shift+click range`}`,children:[M?f.jsx("img",{src:M,alt:"",className:"w-8 h-8",style:{imageRendering:"pixelated"}}):f.jsx("div",{className:"w-8 h-8 bg-emperia-border/20 rounded-sm"}),f.jsx("span",{className:"absolute bottom-0 right-0.5 text-[6px] text-emperia-muted/50 leading-none",children:x})]},`${b}-${S}`)})})}),c.length>0&&f.jsxs("div",{className:"px-2 pb-1.5 flex items-center gap-2",children:[f.jsxs("span",{className:"text-[10px] text-emperia-accent",children:["Click an atlas sprite to assign to ",c.length>1?`${c.length} slots`:"slot"]}),f.jsx("button",{onClick:()=>O.setState({selectedSlots:[]}),className:"text-[10px] text-emperia-muted hover:text-emperia-text ml-auto",children:"Clear"})]})]})}const x1=[{key:"name",label:"Name",type:"string"},{key:"article",label:"Article",type:"string",placeholder:"a / an"},{key:"description",label:"Description",type:"string"},{key:"type",label:"Type",type:"select",options:["","bed","container","corpse","depot","door","fluidContainer","key","magicfield","mailbox","readable","rune","splash","teleport","trashholder","window"]}],y1=[{key:"weaponType",label:"Weapon Type",type:"select",options:["","sword","axe","club","distance","shield","wand","orb","magical"]},{key:"slotType",label:"Slot Type",type:"select",options:["","hand","two-handed","head","body","legs","feet","ring","necklace","backpack","ammo"]},{key:"ammoType",label:"Ammo Type",type:"string"},{key:"shootType",label:"Shoot Type",type:"string"},{key:"damageElement",label:"Damage Element",type:"select",options:["","fire","ice","energy","earth","death","holy","arcane","wind"]}],v1=[{key:"physicalAttack",label:"Physical Attack",type:"number"},{key:"magicalAttack",label:"Magical Attack",type:"number"},{key:"physicalDefense",label:"Physical Defense",type:"number"},{key:"magicalDefense",label:"Magical Defense",type:"number"},{key:"armor",label:"Armor",type:"number"},{key:"extradef",label:"Extra Def",type:"number"},{key:"hitChance",label:"Hit Chance",type:"number"},{key:"maxHitChance",label:"Max Hit Chance",type:"number"},{key:"range",label:"Range",type:"number"}],w1=[{key:"weight",label:"Weight",type:"number"},{key:"speed",label:"Speed",type:"number"},{key:"friction",label:"Friction",type:"number"},{key:"floorchange",label:"Floor Change",type:"select",options:["","down","north","south","east","west"]}],k1=[{key:"level",label:"Level",type:"number"},{key:"expertise",label:"Expertise",type:"number"}],S1=[{key:"containerSize",label:"Container Size",type:"number"},{key:"containerSizePotions",label:"Container Size (Potions)",type:"number"},{key:"weightReduction",label:"Weight Reduction",type:"number"}],b1=[{key:"charges",label:"Charges",type:"number"},{key:"duration",label:"Duration",type:"number"},{key:"decayTo",label:"Decay To (Item ID)",type:"number"},{key:"destroyTo",label:"Destroy To (Item ID)",type:"number"},{key:"rotateTo",label:"Rotate To (Item ID)",type:"number"},{key:"transformEquipTo",label:"Transform Equip To",type:"number"},{key:"transformDeEquipTo",label:"Transform DeEquip To",type:"number"}],_1=[{key:"fluidSource",label:"Fluid Source",type:"string"},{key:"field",label:"Field",type:"string"},{key:"readable",label:"Readable",type:"boolean"},{key:"writeable",label:"Writeable",type:"boolean"},{key:"maxTextLen",label:"Max Text Length",type:"number"}],C1=[{key:"healthGain",label:"Health Gain",type:"number"},{key:"healthTicks",label:"Health Ticks",type:"number"},{key:"manaGain",label:"Mana Gain",type:"number"},{key:"manaTicks",label:"Mana Ticks",type:"number"}],E1=[{key:"skillSword",label:"Skill Sword",type:"number"},{key:"skillAxe",label:"Skill Axe",type:"number"},{key:"skillClub",label:"Skill Club",type:"number"},{key:"skillDist",label:"Skill Distance",type:"number"},{key:"skillShield",label:"Skill Shield",type:"number"},{key:"skillFist",label:"Skill Fist",type:"number"},{key:"magiclevelpoints",label:"Magic Level Points",type:"number"}],D1=[{key:"absorbPercentPhysical",label:"Absorb Physical %",type:"number"},{key:"absorbPercentFire",label:"Absorb Fire %",type:"number"},{key:"absorbPercentIce",label:"Absorb Ice %",type:"number"},{key:"absorbPercentEnergy",label:"Absorb Energy %",type:"number"},{key:"absorbPercentEarth",label:"Absorb Earth %",type:"number"},{key:"absorbPercentDeath",label:"Absorb Death %",type:"number"},{key:"absorbPercentHoly",label:"Absorb Holy %",type:"number"}],A1=[{key:"bonusStrength",label:"Strength",type:"number"},{key:"bonusDexterity",label:"Dexterity",type:"number"},{key:"bonusEndurance",label:"Endurance",type:"number"},{key:"bonusAgility",label:"Agility",type:"number"},{key:"bonusIntelligence",label:"Intelligence",type:"number"},{key:"bonusWisdom",label:"Wisdom",type:"number"},{key:"bonusFocus",label:"Focus",type:"number"},{key:"bonusSpirit",label:"Spirit",type:"number"}],N1=[{key:"bonusCritChance",label:"Crit Chance",type:"number"},{key:"bonusCritDamage",label:"Crit Damage",type:"number"},{key:"bonusDodge",label:"Dodge",type:"number"},{key:"bonusCDR",label:"CDR",type:"number"},{key:"bonusHealingPower",label:"Healing Power",type:"number"},{key:"bonusAttackSpeed",label:"Attack Speed",type:"number"},{key:"bonusPhysicalHit",label:"Physical Hit",type:"number"},{key:"bonusSpellHit",label:"Spell Hit",type:"number"},{key:"bonusMaxHealth",label:"Max Health",type:"number"},{key:"bonusMaxMana",label:"Max Mana",type:"number"},{key:"bonusCapacity",label:"Capacity",type:"number"},{key:"bonusHealthRegen",label:"Health Regen",type:"number"},{key:"bonusManaRegen",label:"Mana Regen",type:"number"},{key:"bonusMaxStamina",label:"Max Stamina",type:"number"},{key:"bonusStaminaRegen",label:"Stamina Regen",type:"number"},{key:"bonusStatusResist",label:"Status Resist",type:"number"}],T1=[{value:0,label:"0  Normal"},{value:1,label:"1  Ground"},{value:2,label:"2  Container"},{value:3,label:"3  Weapon"},{value:4,label:"4  Ammunition"},{value:5,label:"5  Armor"},{value:6,label:"6  Charges"},{value:7,label:"7  Teleport"},{value:9,label:"9  Write"},{value:10,label:"10  Write Once"},{value:11,label:"11  Fluid (Splash)"},{value:12,label:"12  Fluid Container"}];function B1(){const o=O(_=>_.selectedThingId),n=O(_=>_.objectData),i=O(_=>_.activeCategory),l=O(_=>_.itemDefinitions),c=O(_=>_.clientToServerIds),u=O(_=>_.updateItemDefinition);O(_=>_.editVersion);const m=o!=null?(n==null?void 0:n.things.get(o))??null:null,h=o!=null?c.get(o):void 0,p=h!=null?l.get(h)??null:null,y=V.useMemo(()=>(p==null?void 0:p.properties)??{},[p]),w=V.useCallback((_,M)=>{if(o==null)return;const I=c.get(o),P=I!=null?l.get(I):void 0,T=P!=null&&P.properties?{...P.properties}:{};M===void 0||M===""||M===!1?delete T[_]:T[_]=M,u(o,{properties:Object.keys(T).length>0?T:null})},[o,l,u]);if(i!=="item")return f.jsx("div",{className:"flex items-center justify-center h-full text-emperia-muted text-sm p-4",children:"Server properties are only available for items."});if(!m)return f.jsx("div",{className:"flex items-center justify-center h-full text-emperia-muted text-sm p-4",children:"No item selected"});const x=(p==null?void 0:p.flags)??0,b=(p==null?void 0:p.group)??0;p==null||p.serverId;const S=fm.filter((_,M)=>(x&1<<M)!==0).map(_=>_.replace("FLAG_",""));return f.jsxs("div",{className:"p-3 text-xs space-y-3 overflow-y-auto",children:[f.jsx(qf,{title:"OTB Flags & Group",children:f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-16 text-emperia-muted shrink-0",children:"Group"}),f.jsx("select",{value:b,onChange:_=>{const M=parseInt(_.target.value,10);o!=null&&u(o,{group:M})},className:"flex-1 bg-emperia-bg border border-emperia-border rounded px-2 py-0.5 text-emperia-text text-xs",children:T1.map(_=>f.jsx("option",{value:_.value,children:_.label},_.value))})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-16 text-emperia-muted shrink-0",children:"Flags"}),f.jsx("span",{className:"text-emperia-text font-mono text-[10px]",children:x})]}),f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx("span",{className:"w-16 text-emperia-muted shrink-0",children:"Active"}),f.jsx("span",{className:"text-emperia-text font-mono text-[10px] leading-relaxed",children:S.length>0?S.join(", "):f.jsx("span",{className:"text-emperia-muted/50",children:"none"})})]}),f.jsx("p",{className:"text-[9px] text-emperia-muted/50 mt-1",children:"Groups 1 (Ground), 2 (Container), 11 (Splash), 12 (Fluid) are used by the server for gameplay logic."})]})}),f.jsx(ln,{title:"Identity",fields:x1,props:y,setProperty:w}),f.jsx(ln,{title:"Equipment",fields:y1,props:y,setProperty:w}),f.jsx(ln,{title:"Combat Stats",fields:v1,props:y,setProperty:w}),f.jsx(ln,{title:"Weight / Speed",fields:w1,props:y,setProperty:w}),f.jsx(ln,{title:"Requirements",fields:k1,props:y,setProperty:w}),f.jsx(ln,{title:"Container",fields:S1,props:y,setProperty:w}),f.jsx(ln,{title:"Decay / Transform",fields:b1,props:y,setProperty:w}),f.jsx(ln,{title:"Special",fields:_1,props:y,setProperty:w}),f.jsx(ln,{title:"Regeneration",fields:C1,props:y,setProperty:w}),f.jsx(ln,{title:"Skill Bonuses",fields:E1,props:y,setProperty:w}),f.jsx(ln,{title:"Absorb %",fields:D1,props:y,setProperty:w}),f.jsx(ln,{title:"Stat Bonuses",fields:A1,props:y,setProperty:w}),f.jsx(ln,{title:"Combat Bonuses",fields:N1,props:y,setProperty:w})]})}function qf({title:o,children:n}){return f.jsxs("div",{children:[f.jsx("h3",{className:"text-[10px] font-semibold text-emperia-muted uppercase tracking-wider mb-1",children:o}),n]})}function ln({title:o,fields:n,props:i,setProperty:l}){return!n.some(m=>i[m.key]!==void 0&&i[m.key]!=="")&&!(o==="Identity")?f.jsxs("details",{children:[f.jsx("summary",{className:"text-[10px] font-semibold text-emperia-muted uppercase tracking-wider cursor-pointer hover:text-emperia-text select-none",children:o}),f.jsx("div",{className:"mt-1 space-y-1",children:n.map(m=>f.jsx(nf,{field:m,value:i[m.key],onChange:h=>l(m.key,h)},m.key))})]}):f.jsx(qf,{title:o,children:f.jsx("div",{className:"space-y-1",children:n.map(m=>f.jsx(nf,{field:m,value:i[m.key],onChange:h=>l(m.key,h)},m.key))})})}function nf({field:o,value:n,onChange:i}){const{label:l,type:c,options:u,placeholder:m}=o;return c==="boolean"?f.jsxs("label",{className:"flex items-center gap-2 py-[2px] px-1 rounded hover:bg-emperia-hover cursor-pointer select-none",children:[f.jsx("input",{type:"checkbox",checked:!!n,onChange:()=>i(!n),className:"accent-emperia-accent"}),f.jsx("span",{className:"text-emperia-text",children:l})]}):c==="select"?f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-28 text-emperia-muted shrink-0",children:l}),f.jsx("select",{value:n!=null?String(n):"",onChange:h=>i(h.target.value||void 0),className:"flex-1 bg-emperia-bg border border-emperia-border rounded px-2 py-0.5 text-emperia-text text-xs",children:u.map(h=>f.jsx("option",{value:h,children:h||""},h))})]}):c==="number"?f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-28 text-emperia-muted shrink-0",children:l}),f.jsx("input",{type:"number",value:n!=null?String(n):"",placeholder:m,onChange:h=>{const p=h.target.value;if(p===""){i(void 0);return}const y=parseFloat(p);isNaN(y)||i(y)},className:"flex-1 bg-emperia-bg border border-emperia-border rounded px-2 py-0.5 text-emperia-text text-xs w-0"})]}):f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-28 text-emperia-muted shrink-0",children:l}),f.jsx("input",{type:"text",value:n!=null?String(n):"",placeholder:m,onChange:h=>i(h.target.value||void 0),className:"flex-1 bg-emperia-bg border border-emperia-border rounded px-2 py-0.5 text-emperia-text text-xs w-0"})]})}const I1=[{value:"all",label:"All"},{value:"head",label:"Head"},{value:"body",label:"Body"},{value:"legs",label:"Legs"},{value:"feet",label:"Feet"},{value:"left-hand",label:"Left Hand"},{value:"right-hand",label:"Right Hand"},{value:"backpack",label:"Backpack"},{value:"belt",label:"Belt"}];function j1(o,n){const i=o.name.toLowerCase();return i.includes("left-hand")||i.includes("lefthand")||i.includes("left hand")?"left-hand":i.includes("right-hand")||i.includes("righthand")||i.includes("right hand")?"right-hand":n==="head"||i.includes("helmet")||i.includes("hat")||i.includes("crown helmet")?"head":n==="body"||i.includes("armor")||i.includes("armour")?"body":n==="legs"||i.includes(" legs")||i.includes(" leg")?"legs":n==="feet"||i.includes("boots")||i.includes("boot")||i.includes("shoes")?"feet":n==="backpack"||i.includes("backpack")||i.includes("cape")?"backpack":i.includes("belt")?"belt":i.includes("shield")||i.includes("orb")?"right-hand":i.includes("bow")||i.includes("crossbow")||i.includes("sword")||i.includes("axe")||i.includes("club")||i.includes("wand")?"left-hand":null}function rf(o,n,i,l,c,u,m,h){return(((((n*o.patternZ+c)*o.patternY+l)*o.patternX+i)*o.layers+u)*o.height+h)*o.width+m}const Wa=new Map;function F1(){Wa.clear()}function Jf(o,n,i,l,c=2){const u=`${l}:${c}`,m=Wa.get(u);if(m)return m;const h=o.things.get(l);if(!h)return null;const p=h.frameGroups[0];if(!p||p.sprites.length===0)return null;const y=p.width*32,w=p.height*32,x=document.createElement("canvas");x.width=y,x.height=w;const b=x.getContext("2d");b.clearRect(0,0,y,w);const S=Math.min(c,p.patternX-1),_=p.layers>=2,M={head:0,body:0,legs:0,feet:0};for(let P=0;P<p.height;P++)for(let T=0;T<p.width;T++){const L=rf(p,0,S,0,0,0,T,P);if(L>=p.sprites.length)continue;const A=p.sprites[L];if(A<=0)continue;const X=i.get(A)??Rn(n,A);if(!X)continue;const H=new ImageData(new Uint8ClampedArray(X.data),32,32);if(_){const he=rf(p,0,S,0,0,1,T,P);if(he<p.sprites.length){const be=p.sprites[he];if(be>0){const pe=i.get(be)??Rn(n,be);pe&&La(H,pe,M)}}}const Z=(p.width-1-T)*32,ie=(p.height-1-P)*32;if(_){const he=document.createElement("canvas");he.width=32,he.height=32,he.getContext("2d").putImageData(H,0,0),b.drawImage(he,Z,ie)}else b.putImageData(H,Z,ie)}const I=x.toDataURL();return Wa.set(u,I),I}function L1(o,n){return o.itemCount+n}function Za({onSelect:o,onClose:n}){const i=O(S=>S.objectData),l=O(S=>S.spriteData),c=O(S=>S.spriteOverrides),u=O(S=>S.getCategoryRange),[m,h]=V.useState(""),[p,y]=V.useState(2),w=V.useRef(null),x=u("outfit"),b=V.useMemo(()=>{if(!i||!x)return[];const S=m.trim().toLowerCase(),_=[];for(let M=x.start;M<=x.end;M++){if(!i.things.get(M))continue;const P=rr(i,M);S&&!P.toString().includes(S)||_.push({id:M,displayId:P})}return _},[i,x,m]);return V.useEffect(()=>{const S=_=>{w.current&&!w.current.contains(_.target)&&n()};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[n]),f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:f.jsxs("div",{ref:w,className:"bg-emperia-surface border border-emperia-border rounded-lg shadow-2xl w-[520px] max-h-[80vh] flex flex-col",children:[f.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-b border-emperia-border shrink-0",children:[f.jsx("h3",{className:"text-sm font-semibold text-emperia-text flex-1",children:"Select Outfit Sprite"}),f.jsx("div",{className:"flex items-center gap-1 text-[10px] text-emperia-muted",children:["N","E","S","W"].map((S,_)=>f.jsx("button",{onClick:()=>y(_),className:`px-1.5 py-0.5 rounded ${p===_?"bg-emperia-accent/30 text-emperia-accent":"hover:bg-emperia-hover"}`,children:S},S))}),f.jsx("button",{onClick:n,className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-text",children:f.jsx(Qa,{className:"w-4 h-4"})})]}),f.jsx("div",{className:"px-3 py-1.5 border-b border-emperia-border shrink-0",children:f.jsxs("div",{className:"relative",children:[f.jsx(Uo,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 text-emperia-muted"}),f.jsx("input",{type:"text",value:m,onChange:S=>h(S.target.value),placeholder:"Search outfit ID...",className:"w-full pl-7 pr-2 py-1 bg-emperia-bg border border-emperia-border rounded text-xs text-emperia-text",autoFocus:!0})]})}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[f.jsx("div",{className:"grid grid-cols-8 gap-1",children:b.map(({id:S,displayId:_})=>{if(!i||!l)return null;const M=Jf(i,l,c,S,p);return f.jsxs("button",{onClick:()=>o(_),className:"flex flex-col items-center gap-0.5 p-1 rounded hover:bg-emperia-hover border border-transparent hover:border-emperia-accent/40 transition-colors",title:`Outfit #${_}`,children:[f.jsx("div",{className:"w-10 h-10 checkerboard rounded flex items-center justify-center overflow-hidden",children:M?f.jsx("img",{src:M,alt:"",className:"pixelated max-w-full max-h-full",style:{imageRendering:"pixelated"},draggable:!1}):f.jsx("div",{className:"w-10 h-10 bg-emperia-bg/50 rounded"})}),f.jsx("span",{className:"text-[9px] text-emperia-muted",children:_})]},S)})}),b.length===0&&f.jsx("p",{className:"text-center text-emperia-muted text-xs py-8",children:"No outfits found."})]})]})})}function Io({outfitDisplayId:o,size:n=32,direction:i=2}){const l=O(y=>y.objectData),c=O(y=>y.spriteData),u=O(y=>y.spriteOverrides),m=O(y=>y.editVersion);if(V.useEffect(()=>{F1()},[m]),!l||!c||o<=0)return f.jsx("div",{className:"checkerboard rounded border border-emperia-border/50 flex items-center justify-center text-emperia-muted/30 text-[9px]",style:{width:n,height:n},children:""});const h=L1(l,o),p=Jf(l,c,u,h,i);return f.jsx("div",{className:"checkerboard rounded border border-emperia-border/50 overflow-hidden flex items-center justify-center",style:{width:n,height:n},children:p?f.jsx("img",{src:p,alt:`outfit#${o}`,className:"pixelated max-w-full max-h-full",style:{imageRendering:"pixelated"},draggable:!1}):f.jsx("div",{className:"flex items-center justify-center text-emperia-muted/30 text-[9px]",style:{width:n,height:n},children:"?"})})}function eh({itemId:o,size:n=28}){var b;const i=O(S=>S.objectData),l=O(S=>S.spriteData),c=O(S=>S.spriteOverrides),u=O(S=>S.itemDefinitions);if(O(S=>S.editVersion),!i||!l||o<=0)return f.jsx("div",{className:"checkerboard rounded border border-emperia-border/50 flex items-center justify-center text-emperia-muted/30 text-[9px]",style:{width:n,height:n},children:""});const m=u.get(o),h=(m==null?void 0:m.id)??o,p=i.things.get(h),y=((b=p==null?void 0:p.frameGroups[0])==null?void 0:b.sprites[0])??0,w=y>0?Oo(l,y,c):null,x=()=>{if(!p)return;const{setCenterTab:S,setSelectedThingId:_}=O.getState();O.getState().activeCategory!=="item"&&O.setState({activeCategory:"item",searchQuery:"",filterGroup:-1}),_(h),S("texture")};return f.jsx("button",{onClick:x,className:"checkerboard rounded border border-emperia-border/50 overflow-hidden flex items-center justify-center hover:border-emperia-accent/60 transition-colors cursor-pointer shrink-0",style:{width:n,height:n},title:`Go to item #${h}`,children:w?f.jsx("img",{src:w,alt:`item#${o}`,className:"pixelated",style:{width:n,height:n,imageRendering:"pixelated"},draggable:!1}):f.jsx("div",{className:"flex items-center justify-center text-emperia-muted/30 text-[9px]",style:{width:n,height:n},children:"?"})})}function P1({onAdd:o,onCancel:n}){const[i,l]=V.useState(""),[c,u]=V.useState(""),[m,h]=V.useState(""),[p,y]=V.useState(!1),w=()=>{const x=parseInt(c,10),b=parseInt(m,10);!i.trim()||isNaN(x)||isNaN(b)||o({name:i.trim(),id:x,sprite_id:b})};return f.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-emperia-accent/5 border-t border-emperia-border",children:[f.jsx("input",{type:"text",value:i,onChange:x=>l(x.target.value),placeholder:"Name (e.g. Left-Hand (katana))",className:"flex-1 bg-emperia-bg border border-emperia-border rounded px-2 py-1 text-xs text-emperia-text min-w-0"}),f.jsx("input",{type:"number",value:c,onChange:x=>u(x.target.value),placeholder:"Item ID",className:"w-20 bg-emperia-bg border border-emperia-border rounded px-2 py-1 text-xs text-emperia-text"}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("input",{type:"number",value:m,onChange:x=>h(x.target.value),placeholder:"Sprite ID",className:"w-20 bg-emperia-bg border border-emperia-border rounded px-2 py-1 text-xs text-emperia-text"}),f.jsx("button",{onClick:()=>y(!0),className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted hover:text-emperia-accent text-[10px] border border-emperia-border",title:"Pick from outfit sprites",children:"Pick"})]}),f.jsx("button",{onClick:w,className:"px-2 py-1 rounded bg-emperia-accent/20 text-emperia-accent text-xs font-medium hover:bg-emperia-accent/30",children:"Add"}),f.jsx("button",{onClick:n,className:"p-1 rounded hover:bg-emperia-hover text-emperia-muted",children:f.jsx(Qa,{className:"w-3.5 h-3.5"})}),p&&f.jsx(Za,{onSelect:x=>{h(x.toString()),y(!1)},onClose:()=>y(!1)})]})}function M1({entry:o,index:n,onUpdate:i,onRemove:l}){var I;const[c,u]=V.useState(!1),[m,h]=V.useState(!1),[p,y]=V.useState(o.name),w=O(P=>P.itemDefinitions),b=O(P=>P.clientToServerIds).get(o.id),S=b!=null?w.get(b):void 0,_=(I=S==null?void 0:S.properties)==null?void 0:I.name,M=()=>{h(!1),p.trim()!==o.name&&i(n,{...o,name:p.trim()})};return f.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 hover:bg-emperia-hover/50 group border-b border-emperia-border/30",children:[f.jsx(eh,{itemId:o.id,size:40}),f.jsx(Io,{outfitDisplayId:o.sprite_id,size:40}),f.jsxs("div",{className:"flex-1 min-w-0",children:[m?f.jsx("input",{type:"text",value:p,onChange:P=>y(P.target.value),onBlur:M,onKeyDown:P=>{P.key==="Enter"&&M()},className:"w-full bg-emperia-bg border border-emperia-border rounded px-1.5 py-0.5 text-xs text-emperia-text",autoFocus:!0}):f.jsx("button",{onClick:()=>{h(!0),y(o.name)},className:"text-xs text-emperia-text truncate block text-left w-full hover:underline",title:o.name,children:o.name}),_&&f.jsx("span",{className:"text-[9px] text-emperia-muted/60 truncate block",children:_})]}),f.jsx("span",{className:"text-[10px] text-amber-400 font-mono w-12 text-right shrink-0",title:"Client Item ID",children:o.id}),f.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[f.jsx("span",{className:"text-[10px] text-cyan-400 font-mono w-12 text-right",title:"Outfit Sprite ID",children:o.sprite_id}),f.jsx("button",{onClick:()=>u(!0),className:"px-1.5 py-0.5 rounded text-[10px] bg-emperia-accent/10 text-emperia-accent hover:bg-emperia-accent/20 opacity-0 group-hover:opacity-100 transition-opacity",children:"Change"})]}),f.jsx("button",{onClick:()=>l(n),className:"p-0.5 rounded text-red-400/40 hover:text-red-400 hover:bg-red-400/10 opacity-0 group-hover:opacity-100 transition-opacity",title:"Remove entry",children:f.jsx(ps,{className:"w-3 h-3"})}),c&&f.jsx(Za,{onSelect:P=>{i(n,{...o,sprite_id:P}),u(!1)},onClose:()=>u(!1)})]})}function R1({group:o,onUpdate:n,onRemove:i}){var w;const[l,c]=V.useState(null),u=O(x=>x.itemDefinitions),h=O(x=>x.clientToServerIds).get(o.itemId),p=h!=null?u.get(h):void 0,y=(w=p==null?void 0:p.properties)==null?void 0:w.name;return f.jsxs("div",{className:"px-3 py-2 hover:bg-emperia-hover/50 border-b border-emperia-border/30 group",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[f.jsx(eh,{itemId:o.itemId,size:32}),f.jsx("span",{className:"text-xs text-emperia-text font-medium truncate flex-1",children:o.baseName}),y&&f.jsx("span",{className:"text-[9px] text-emperia-muted/60",children:y}),f.jsx("span",{className:"text-[10px] text-amber-400 font-mono",title:"Item ID",children:o.itemId})]}),f.jsxs("div",{className:"flex items-center gap-4 pl-2",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("span",{className:"text-[9px] text-emperia-muted w-8",children:"Left"}),o.leftEntry?f.jsxs(f.Fragment,{children:[f.jsx(Io,{outfitDisplayId:o.leftEntry.entry.sprite_id,size:36}),f.jsx("span",{className:"text-[10px] text-cyan-400 font-mono",children:o.leftEntry.entry.sprite_id}),f.jsx("button",{onClick:()=>c("left"),className:"px-1 py-0.5 rounded text-[9px] bg-emperia-accent/10 text-emperia-accent hover:bg-emperia-accent/20 opacity-0 group-hover:opacity-100 transition-opacity",children:"Change"}),f.jsx("button",{onClick:()=>i(o.leftEntry.index),className:"p-0.5 rounded text-red-400/40 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",children:f.jsx(ps,{className:"w-2.5 h-2.5"})})]}):f.jsx("button",{onClick:()=>c("left"),className:"text-[9px] text-emperia-muted/50 hover:text-emperia-accent underline",children:"Assign"})]}),f.jsx("div",{className:"w-px h-6 bg-emperia-border/40"}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("span",{className:"text-[9px] text-emperia-muted w-8",children:"Right"}),o.rightEntry?f.jsxs(f.Fragment,{children:[f.jsx(Io,{outfitDisplayId:o.rightEntry.entry.sprite_id,size:36}),f.jsx("span",{className:"text-[10px] text-cyan-400 font-mono",children:o.rightEntry.entry.sprite_id}),f.jsx("button",{onClick:()=>c("right"),className:"px-1 py-0.5 rounded text-[9px] bg-emperia-accent/10 text-emperia-accent hover:bg-emperia-accent/20 opacity-0 group-hover:opacity-100 transition-opacity",children:"Change"}),f.jsx("button",{onClick:()=>i(o.rightEntry.index),className:"p-0.5 rounded text-red-400/40 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",children:f.jsx(ps,{className:"w-2.5 h-2.5"})})]}):f.jsx("button",{onClick:()=>c("right"),className:"text-[9px] text-emperia-muted/50 hover:text-emperia-accent underline",children:"Assign"})]})]}),o.otherEntries.map(({entry:x,index:b})=>f.jsxs("div",{className:"flex items-center gap-2 pl-2 mt-1",children:[f.jsx("span",{className:"text-[9px] text-emperia-muted w-8 truncate",children:x.name}),f.jsx(Io,{outfitDisplayId:x.sprite_id,size:32}),f.jsx("span",{className:"text-[10px] text-cyan-400 font-mono",children:x.sprite_id})]},b)),l&&f.jsx(Za,{onSelect:x=>{const b=O.getState().addSpriteMapEntry,S=O.getState().updateSpriteMapEntry,_=l==="left"?"Left-Hand":"Right-Hand";l==="left"&&o.leftEntry?S(o.leftEntry.index,{...o.leftEntry.entry,sprite_id:x}):l==="right"&&o.rightEntry?S(o.rightEntry.index,{...o.rightEntry.entry,sprite_id:x}):b({name:`${_} (${o.baseName})`,id:o.itemId,sprite_id:x}),c(null)},onClose:()=>c(null)})]})}function O1(){const o=O(T=>T.spriteMapEntries),n=O(T=>T.spriteMapLoaded),i=O(T=>T.itemDefinitions),l=O(T=>T.clientToServerIds),c=O(T=>T.updateSpriteMapEntry),u=O(T=>T.addSpriteMapEntry),m=O(T=>T.removeSpriteMapEntry);O(T=>T.editVersion);const[h,p]=V.useState("all"),[y,w]=V.useState(""),[x,b]=V.useState(!1),[S,_]=V.useState("list"),M=V.useCallback(T=>{var X;const L=l.get(T),A=L!=null?i.get(L):void 0;return(X=A==null?void 0:A.properties)==null?void 0:X.slotType},[l,i]),I=V.useMemo(()=>{const T=y.trim().toLowerCase();return o.map((L,A)=>({entry:L,index:A})).filter(({entry:L})=>{if(h!=="all"&&j1(L,M(L.id))!==h)return!1;if(T){const A=L.name.toLowerCase().includes(T),X=L.id.toString().includes(T),H=L.sprite_id.toString().includes(T);if(!A&&!X&&!H)return!1}return!0})},[o,h,y,M]),P=V.useMemo(()=>{if(S!=="weapons")return[];const T=new Map;for(const{entry:L,index:A}of I){const X=L.name.toLowerCase(),H=X.includes("left-hand")||X.includes("lefthand")||X.includes("left hand"),Z=X.includes("right-hand")||X.includes("righthand")||X.includes("right hand");if(!H&&!Z)continue;if(!T.has(L.id)){let he=L.name.replace(/left-hand|lefthand|left hand|right-hand|righthand|right hand/gi,"").replace(/\(|\)/g,"").trim();he||(he=`Item ${L.id}`),T.set(L.id,{itemId:L.id,baseName:he,leftEntry:null,rightEntry:null,otherEntries:[]})}const ie=T.get(L.id);H&&!ie.leftEntry?ie.leftEntry={entry:L,index:A}:Z&&!ie.rightEntry?ie.rightEntry={entry:L,index:A}:ie.otherEntries.push({entry:L,index:A})}return Array.from(T.values())},[I,S]);return n?f.jsxs("div",{className:"flex flex-col h-full",children:[f.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 border-b border-emperia-border shrink-0",children:[f.jsxs("div",{className:"relative",children:[f.jsx("select",{value:h,onChange:T=>p(T.target.value),className:"appearance-none bg-emperia-bg border border-emperia-border rounded pl-2 pr-6 py-1 text-xs text-emperia-text cursor-pointer",children:I1.map(T=>f.jsx("option",{value:T.value,children:T.label},T.value))}),f.jsx(af,{className:"absolute right-1.5 top-1/2 -translate-y-1/2 w-3 h-3 text-emperia-muted pointer-events-none"})]}),f.jsxs("div",{className:"relative flex-1",children:[f.jsx(Uo,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-3 h-3 text-emperia-muted"}),f.jsx("input",{type:"text",value:y,onChange:T=>w(T.target.value),placeholder:"Search by name, item ID, or sprite ID...",className:"w-full pl-7 pr-2 py-1 bg-emperia-bg border border-emperia-border rounded text-xs text-emperia-text"})]}),f.jsxs("div",{className:"flex items-center gap-0.5 border border-emperia-border rounded overflow-hidden",children:[f.jsx("button",{onClick:()=>_("list"),className:`px-2 py-1 text-[10px] ${S==="list"?"bg-emperia-accent/20 text-emperia-accent":"text-emperia-muted hover:text-emperia-text"}`,children:"List"}),f.jsx("button",{onClick:()=>_("weapons"),className:`px-2 py-1 text-[10px] ${S==="weapons"?"bg-emperia-accent/20 text-emperia-accent":"text-emperia-muted hover:text-emperia-text"}`,children:"Weapons"})]}),f.jsxs("button",{onClick:()=>b(!x),className:"flex items-center gap-1 px-2 py-1 rounded text-xs bg-emperia-accent/10 text-emperia-accent hover:bg-emperia-accent/20",children:[f.jsx(Xa,{className:"w-3 h-3"}),"Add"]}),f.jsxs("span",{className:"text-[10px] text-emperia-muted shrink-0",children:[I.length," / ",o.length]})]}),x&&f.jsx(P1,{onAdd:T=>{u(T),b(!1)},onCancel:()=>b(!1)}),f.jsx("div",{className:"flex-1 overflow-y-auto",children:S==="list"?I.length===0?f.jsx("p",{className:"text-center text-emperia-muted text-xs py-8",children:"No entries match the current filter."}):I.map(({entry:T,index:L})=>f.jsx(M1,{entry:T,index:L,onUpdate:c,onRemove:m},`${L}-${T.id}-${T.sprite_id}`)):P.length===0?f.jsx("p",{className:"text-center text-emperia-muted text-xs py-8",children:"No weapon entries with left/right hand variants found."}):P.map(T=>f.jsx(R1,{group:T,onUpdate:c,onRemove:m},T.itemId))})]}):f.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-emperia-muted text-sm p-8 gap-3",children:[f.jsx("p",{children:"No equipment sprite map loaded."}),f.jsxs("p",{className:"text-[10px] text-emperia-muted/50",children:["Drop an ",f.jsx("code",{className:"text-emperia-accent",children:"item-to-sprite.json"})," file or open a folder containing one."]})]})}const U1={texture:"Texture",properties:"Properties",attributes:"Attributes",server:"Server",equipment:"Equipment"};function z1(){const o=O(m=>m.selectedThingId),n=O(m=>m.objectData),i=O(m=>m.clientToServerIds);O(m=>m.editVersion);const l=o!=null?(n==null?void 0:n.things.get(o))??null:null;if(!l||!n)return null;const c=rr(n,l.id),u=i.get(l.id);return f.jsxs("div",{className:"flex items-center gap-3 text-[11px] font-mono",children:[f.jsxs("span",{className:"flex items-center gap-1.5",children:[f.jsx("span",{className:"text-emperia-muted",children:"Client"}),f.jsx("span",{className:"text-cyan-400 font-semibold",children:c})]}),u!=null&&f.jsxs("span",{className:"flex items-center gap-1.5",children:[f.jsx("span",{className:"text-emperia-muted",children:"Server"}),f.jsx("span",{className:"text-amber-400 font-semibold",children:u})]}),f.jsx("span",{className:"text-emperia-muted/60 capitalize text-[10px]",children:l.category})]})}function H1(){const o=O(l=>l.loaded),n=O(l=>l.centerTab),i=O(l=>l.setCenterTab);return o?f.jsxs("div",{className:"h-full flex flex-col",children:[f.jsx(o0,{}),f.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f.jsxs("div",{className:"w-64 flex flex-col border-r border-emperia-border bg-emperia-bg",children:[f.jsx(p0,{}),f.jsx(m0,{})]}),f.jsxs("div",{className:"flex-1 flex flex-col bg-emperia-bg overflow-hidden",children:[f.jsxs("div",{className:"flex items-center border-b border-emperia-border shrink-0",children:[["texture","properties","attributes","server","equipment"].map(l=>f.jsx("button",{onClick:()=>i(l),className:`px-4 py-2 text-xs font-medium transition-colors
                  ${n===l?"text-emperia-accent border-b-2 border-emperia-accent":"text-emperia-muted hover:text-emperia-text"}
                `,children:U1[l]},l)),f.jsx("div",{className:"flex-1"}),f.jsx("div",{className:"pr-3",children:f.jsx(z1,{})})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[n==="texture"&&f.jsx(f1,{}),n==="properties"&&f.jsx(Zd,{}),n==="attributes"&&f.jsx(Zd,{showAttributesOnly:!0}),n==="server"&&f.jsx(B1,{}),n==="equipment"&&f.jsx(O1,{})]})]}),f.jsx("div",{className:"w-[260px] border-l border-emperia-border bg-emperia-bg overflow-hidden flex flex-col",children:f.jsx(g1,{})}),f.jsx("div",{className:"w-72 border-l border-emperia-border bg-emperia-bg overflow-hidden flex flex-col",children:f.jsx(m1,{})})]})]}):f.jsx(Jm,{})}qp.createRoot(document.getElementById("root")).render(f.jsx(ds.StrictMode,{children:f.jsx(H1,{})}));
